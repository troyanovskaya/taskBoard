import{A as yt,B as Vm,C as Hd,D as di,E as bt,F as mn,G as Ka,H as Kd,I as or,J as ui,K as Ri,L as Gs,M as Hs,N as C0,O as ar,P as Qd,Q as He,R as on,S as jm,a as S,b as An,c as $s,d as Bd,e as Ud,f as Ha,g as ht,h as Ws,i as qs,j as zd,k as pt,l as Lm,m as w0,n as E0,o as sr,p as fe,q as $d,r as Wd,s as at,t as Zt,u as Kr,v as ci,w as qd,x as Gd,y as X,z as zt}from"./chunk-WS25ZRHA.js";import{$ as tr,$a as Td,$b as kd,A as Aw,Aa as le,Ab as t0,Ac as li,B as ct,Ba as z,Bb as kt,Bc as g0,C as Xe,Ca as Wr,Cb as Si,Cc as vt,D as xm,Da as ie,Db as K,Dc as _0,E as Zi,Ea as Lw,Eb as H,Ec as v0,F as Ji,Fa as Id,Fb as zn,Fc as zs,G as Sm,Ga as Vw,Gb as dt,Gc as y0,H as Am,Ha as Rt,Hb as ir,Hc as Vd,I as At,Ia as Yt,Ib as ut,J as Rw,Ja as Ba,Jb as Fe,K as La,Ka as Os,Kb as Le,Kc as jd,L as er,La as Fs,Lb as n0,Lc as qa,M as ri,Ma as jw,Mb as i0,N as Rm,Na as Bw,Nb as Ad,Nc as Hr,O as Dw,Oa as Uw,Ob as G,Oc as b0,P as Va,Pa as zw,Pb as tt,Pc as Ga,Q as wd,Qa as $w,Qb as Wa,R as Ns,Ra as Ww,Rb as r0,S as Ed,Sa as qw,Sb as s0,T as kw,Ta as fn,Tb as o0,U as Tn,Ua as Gw,Ub as We,V as $e,Va as Ua,Vb as oe,W as Dm,Wa as B,Wb as js,X as ot,Xa as R,Xb as a0,Y as ke,Ya as Ls,Yb as Bs,Z as Pw,Za as Vs,Zb as Rd,_ as Re,_a as Hw,_b as Dd,a as St,aa as L,ab as xd,ac as Om,b as Tw,ba as Z,bb as za,bc as Pd,c as Ye,ca as Mw,cb as nr,cc as rr,d as Em,da as V,db as Mm,dc as Md,e as Cm,ea as km,eb as Je,ec as l0,f as $,fa as x,fb as Kw,fc as Fm,g as Ut,ga as P,gb as et,gc as Xt,h as gd,ha as Ze,hb as Qw,hc as c0,i as xw,ia as Pm,ib as Dt,ic as Ge,j as Im,ja,jb as Yw,jc as Nd,k as ii,ka as se,kb as Nm,kc as ai,l as Xi,la as J,lb as ce,lc as Sn,m as Br,ma as Y,mb as Sd,mc as d0,n as mt,na as Qt,nb as oi,nc as u0,o as W,oa as Nw,ob as Pe,oc as Us,p as Ur,pa as Un,pb as ee,pc as h0,q as _d,qa as xn,qb as Me,qc as f0,r as Sw,ra as Ow,rb as $a,rc as Q,s as q,sa as _t,sb as Be,sc as m0,t as Ms,ta as Te,tb as Xw,tc as qr,u as hn,ua as xe,ub as Zw,uc as p0,v as Tm,va as si,vb as Jw,vc as Od,w as vd,wa as $r,wb as N,wc as Ai,x as zr,xa as Se,xb as O,xc as Fd,y as yd,ya as Fw,yb as ye,yc as Gr,z as bd,za as Cd,zb as e0,zc as Ld}from"./chunk-AVOBDXST.js";import{a as F,b as we,f as lt}from"./chunk-QNRXXQ26.js";var Ya=class{},Xa=class{},Di=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Um=class{encodeKey(t){return I0(t)}encodeValue(t){return I0(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function zD(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],c=e.get(o)||[];c.push(a),e.set(o,c)}),e}var $D=/%(\d[a-f0-9])/gi,WD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function I0(n){return encodeURIComponent(n).replace($D,(t,e)=>WD[e]??t)}function Yd(n){return`${n}`}var cr=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Um,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=zD(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Yd):[Yd(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Yd(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Yd(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var zm=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function qD(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function T0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function x0(n){return typeof Blob<"u"&&n instanceof Blob}function S0(n){return typeof FormData<"u"&&n instanceof FormData}function GD(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Qa=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(qD(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Di,this.context??=new zm,!this.params)this.params=new cr,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||T0(this.body)||x0(this.body)||S0(this.body)||GD(this.body)?this.body:this.body instanceof cr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||S0(this.body)?null:x0(this.body)?this.body.type||null:T0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof cr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,d=t.headers||this.headers,f=t.params||this.params,m=t.context??this.context;return t.setHeaders!==void 0&&(d=Object.keys(t.setHeaders).reduce((g,b)=>g.set(b,t.setHeaders[b]),d)),t.setParams&&(f=Object.keys(t.setParams).reduce((g,b)=>g.set(b,t.setParams[b]),f)),new n(e,i,o,{params:f,headers:d,context:m,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}},dr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(dr||{}),Za=class{constructor(t,e=200,i="OK"){this.headers=t.headers||new Di,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Xd=class n extends Za{constructor(t={}){super(t),this.type=dr.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Ja=class n extends Za{constructor(t={}){super(t),this.type=dr.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},lr=class extends Za{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},k0=200,HD=204;function Bm(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Pi=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof Qa)s=e;else{let c;r.headers instanceof Di?c=r.headers:c=new Di(r.headers);let d;r.params&&(r.params instanceof cr?d=r.params:d=new cr({fromObject:r.params})),s=new Qa(e,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=W(s).pipe(Ji(c=>this.handler.handle(c)));if(e instanceof Qa||r.observe==="events")return o;let a=o.pipe(Xe(c=>c instanceof Ja));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(q(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(q(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(q(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(q(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new cr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,Bm(r,i))}post(e,i,r={}){return this.request("POST",e,Bm(r,i))}put(e,i,r={}){return this.request("PUT",e,Bm(r,i))}static{this.\u0275fac=function(i){return new(i||n)(x(Ya))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),KD=/^\)\]\}',?\n/,QD="X-Request-URL";function A0(n){if(n.url)return n.url;let t=QD.toLocaleLowerCase();return n.headers.get(t)}var $m=(()=>{class n{constructor(){this.fetchImpl=P(Wm,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=P(z)}handle(e){return new Ye(i=>{let r=new AbortController;return this.doRequest(e,r.signal,i).then(qm,s=>i.error(new lr({error:s}))),()=>r.abort()})}doRequest(e,i,r){return lt(this,null,function*(){let s=this.createRequestInit(e),o;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,F({signal:i},s)));YD(b),r.next({type:dr.Sent}),o=yield b}catch(b){r.error(new lr({error:b,status:b.status??0,statusText:b.statusText,url:e.urlWithParams,headers:b.headers}));return}let a=new Di(o.headers),c=o.statusText,d=A0(o)??e.urlWithParams,f=o.status,m=null;if(e.reportProgress&&r.next(new Xd({headers:a,status:f,statusText:c,url:d})),o.body){let b=o.headers.get("content-length"),E=[],D=o.body.getReader(),M=0,ne,te,U=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>lt(this,null,function*(){for(;;){let{done:Qe,value:Ft}=yield D.read();if(Qe)break;if(E.push(Ft),M+=Ft.length,e.reportProgress){te=e.responseType==="text"?(te??"")+(ne??=new TextDecoder).decode(Ft,{stream:!0}):void 0;let T=()=>r.next({type:dr.DownloadProgress,total:b?+b:void 0,loaded:M,partialText:te});U?U.run(T):T()}}}));let Ie=this.concatChunks(E,M);try{let Qe=o.headers.get("Content-Type")??"";m=this.parseBody(e,Ie,Qe)}catch(Qe){r.error(new lr({error:Qe,headers:new Di(o.headers),status:o.status,statusText:o.statusText,url:A0(o)??e.urlWithParams}));return}}f===0&&(f=m?k0:0),f>=200&&f<300?(r.next(new Ja({body:m,headers:a,status:f,statusText:c,url:d})),r.complete()):r.error(new lr({error:m,headers:a,status:f,statusText:c,url:d}))})}parseBody(e,i,r){switch(e.responseType){case"json":let s=new TextDecoder().decode(i).replace(KD,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(e){let i={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((s,o)=>i[s]=o.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let s=e.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:r}}concatChunks(e,i){let r=new Uint8Array(i),s=0;for(let o of e)r.set(o,s),s+=o.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),Wm=class{};function qm(){}function YD(n){n.then(qm,qm)}function XD(n,t){return t(n)}function ZD(n,t,e){return(i,r)=>xn(e,()=>t(i,s=>n(s,r)))}var P0=new V(""),JD=new V(""),ek=new V("",{providedIn:"root",factory:()=>!0});var R0=(()=>{class n extends Ya{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=P(Cd),this.contributeToStability=P(ek)}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(P0),...this.injector.get(JD,[])]));this.chain=i.reduceRight((r,s)=>ZD(r,s,this.injector),XD)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(er(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(x(Xa),x(Un))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})();var tk=/^\)\]\}',?\n/;function nk(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var D0=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Re(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?mt(i.\u0275loadImpl()):W(null)).pipe($e(()=>new Ye(s=>{let o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((D,M)=>o.setRequestHeader(D,M.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let D=e.detectContentTypeHeader();D!==null&&o.setRequestHeader("Content-Type",D)}if(e.responseType){let D=e.responseType.toLowerCase();o.responseType=D!=="json"?D:"text"}let a=e.serializeBody(),c=null,d=()=>{if(c!==null)return c;let D=o.statusText||"OK",M=new Di(o.getAllResponseHeaders()),ne=nk(o)||e.url;return c=new Xd({headers:M,status:o.status,statusText:D,url:ne}),c},f=()=>{let{headers:D,status:M,statusText:ne,url:te}=d(),U=null;M!==HD&&(U=typeof o.response>"u"?o.responseText:o.response),M===0&&(M=U?k0:0);let Ie=M>=200&&M<300;if(e.responseType==="json"&&typeof U=="string"){let Qe=U;U=U.replace(tk,"");try{U=U!==""?JSON.parse(U):null}catch(Ft){U=Qe,Ie&&(Ie=!1,U={error:Ft,text:U})}}Ie?(s.next(new Ja({body:U,headers:D,status:M,statusText:ne,url:te||void 0})),s.complete()):s.error(new lr({error:U,headers:D,status:M,statusText:ne,url:te||void 0}))},m=D=>{let{url:M}=d(),ne=new lr({error:D,status:o.status||0,statusText:o.statusText||"Unknown Error",url:M||void 0});s.error(ne)},g=!1,b=D=>{g||(s.next(d()),g=!0);let M={type:dr.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),e.responseType==="text"&&o.responseText&&(M.partialText=o.responseText),s.next(M)},E=D=>{let M={type:dr.UploadProgress,loaded:D.loaded};D.lengthComputable&&(M.total=D.total),s.next(M)};return o.addEventListener("load",f),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),e.reportProgress&&(o.addEventListener("progress",b),a!==null&&o.upload&&o.upload.addEventListener("progress",E)),o.send(a),s.next({type:dr.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",f),o.removeEventListener("timeout",m),e.reportProgress&&(o.removeEventListener("progress",b),a!==null&&o.upload&&o.upload.removeEventListener("progress",E)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(x(Vd))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),M0=new V(""),ik="XSRF-TOKEN",rk=new V("",{providedIn:"root",factory:()=>ik}),sk="X-XSRF-TOKEN",ok=new V("",{providedIn:"root",factory:()=>sk}),Zd=class{},ak=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fd(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(x(Q),x(Rt),x(rk))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})();function lk(n,t){let e=n.url.toLowerCase();if(!P(M0)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=P(Zd).getToken(),r=P(ok);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var N0=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(N0||{});function ck(n,t){return{\u0275kind:n,\u0275providers:t}}function O0(...n){let t=[Pi,D0,R0,{provide:Ya,useExisting:R0},{provide:Xa,useFactory:()=>P($m,{optional:!0})??P(D0)},{provide:P0,useValue:lk,multi:!0},{provide:M0,useValue:!0},{provide:Zd,useClass:ak}];for(let e of n)t.push(...e.\u0275providers);return Qt(t)}function F0(){return ck(N0.Fetch,[$m,{provide:Xa,useExisting:$m}])}var Km=class extends f0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qm=class n extends Km{static makeCurrent(){h0(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=hk();return e==null?null:fk(e)}resetBaseElement(){el=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Fd(document.cookie,t)}},el=null;function hk(){return el=el||document.querySelector("base"),el?el.getAttribute("href"):null}function fk(n){return new URL(n,document.baseURI).pathname}var mk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),Ym=new V(""),j0=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new Re(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(x(Ym),x(z))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),Jd=class{constructor(t){this._doc=t}},Gm="ng-app-id",B0=(()=>{class n{constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zs(s),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${Gm}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let s=r.get(e);return s.usage+=i,s.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===e)return r.delete(i),s.removeAttribute(Gm),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(Gm,this.appId),e.appendChild(o),o}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(x(Q),x(Id),x(Ba,8),x(Rt))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),Hm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zm=/%COMP%/g,U0="%COMP%",pk=`_nghost-${U0}`,gk=`_ngcontent-${U0}`,_k=!0,vk=new V("",{providedIn:"root",factory:()=>_k});function yk(n){return gk.replace(Zm,n)}function bk(n){return pk.replace(Zm,n)}function z0(n,t){return t.map(e=>e.replace(Zm,n))}var eu=(()=>{class n{constructor(e,i,r,s,o,a,c,d=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=zs(a),this.defaultRenderer=new tl(e,o,c,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ja.ShadowDom&&(i=we(F({},i),{encapsulation:ja.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof tu?r.applyToHost(e):r instanceof nl&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case ja.Emulated:s=new tu(c,d,i,this.appId,f,o,a,m);break;case ja.ShadowDom:return new Xm(c,d,e,i,o,a,this.nonce,m);default:s=new nl(c,d,i,f,o,a,m);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(x(j0),x(B0),x(Id),x(vk),x(Q),x(Rt),x(z),x(Ba))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),tl=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Hm[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(L0(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(L0(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Re(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=Hm[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=Hm[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Ua.DashCase|Ua.Important)?t.style.setProperty(e,i,r&Ua.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Ua.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Us().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function L0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Xm=class extends tl{constructor(t,e,i,r,s,o,a,c){super(t,s,o,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=z0(r.id,r.styles);for(let f of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nl=class extends tl{constructor(t,e,i,r,s,o,a,c){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?z0(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},tu=class extends nl{constructor(t,e,i,r,s,o,a,c){let d=r+"-"+i.id;super(t,e,i,s,o,a,c,d),this.contentAttr=yk(d),this.hostAttr=bk(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},wk=(()=>{class n extends Jd{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(x(Q))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),V0=["alt","control","meta","shift"],Ek={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ck={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Ik=(()=>{class n extends Jd{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Us().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),V0.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),o+=d+".")}),o+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(e,i){let r=Ek[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),V0.forEach(o=>{if(o!==r){let a=Ck[o];a(e)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(x(Q))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})();function $0(n,t){return c0(F({rootComponent:n},Tk(t)))}function Tk(n){return{appProviders:[...Dk,...n?.providers??[]],platformProviders:Rk}}function xk(){Qm.makeCurrent()}function Sk(){return new Wr}function Ak(){return Lw(document),document}var Rk=[{provide:Rt,useValue:_0},{provide:Vw,useValue:xk,multi:!0},{provide:Q,useFactory:Ak,deps:[]}];var Dk=[{provide:Nw,useValue:"root"},{provide:Wr,useFactory:Sk,deps:[]},{provide:Ym,useClass:wk,multi:!0,deps:[Q,z,Rt]},{provide:Ym,useClass:Ik,multi:!0,deps:[Q]},eu,B0,j0,{provide:xd,useExisting:eu},{provide:Vd,useClass:mk,deps:[]},[]];var W0=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(x(Q))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Jm=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=x(kk),r},providedIn:"root"})}}return n})(),kk=(()=>{class n extends Jm{constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case fn.NONE:return i;case fn.HTML:return Fs(i,"HTML")?Os(i):qw(this._doc,String(i)).toString();case fn.STYLE:return Fs(i,"Style")?Os(i):i;case fn.SCRIPT:if(Fs(i,"Script"))return Os(i);throw new Re(5200,!1);case fn.URL:return Fs(i,"URL")?Os(i):Ww(String(i));case fn.RESOURCE_URL:if(Fs(i,"ResourceURL"))return Os(i);throw new Re(5201,!1);default:throw new Re(5202,!1)}}bypassSecurityTrustHtml(e){return jw(e)}bypassSecurityTrustStyle(e){return Bw(e)}bypassSecurityTrustScript(e){return Uw(e)}bypassSecurityTrustUrl(e){return zw(e)}bypassSecurityTrustResourceUrl(e){return $w(e)}static{this.\u0275fac=function(i){return new(i||n)(x(Q))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var de="primary",_l=Symbol("RouteTitle"),rp=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Js(n){return new rp(n)}function Pk(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Mk(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!hi(n[e],t[e]))return!1;return!0}function hi(n,t){let e=n?sp(n):void 0,i=t?sp(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!nE(n[r],t[r]))return!1;return!0}function sp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nE(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function iE(n){return n.length>0?n[n.length-1]:null}function fr(n){return _d(n)?n:kd(n)?mt(Promise.resolve(n)):W(n)}var Nk={exact:sE,subset:oE},rE={exact:Ok,subset:Fk,ignored:()=>!0};function G0(n,t,e){return Nk[e.paths](n.root,t.root,e.matrixParams)&&rE[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function Ok(n,t){return hi(n,t)}function sE(n,t,e){if(!Yr(n.segments,t.segments)||!ru(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!sE(n.children[i],t.children[i],e))return!1;return!0}function Fk(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>nE(n[e],t[e]))}function oE(n,t,e){return aE(n,t,t.segments,e)}function aE(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Yr(r,e)||t.hasChildren()||!ru(r,e,i))}else if(n.segments.length===e.length){if(!Yr(n.segments,e)||!ru(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!oE(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!Yr(n.segments,r)||!ru(n.segments,r,i)||!n.children[de]?!1:aE(n.children[de],t,s,i)}}function ru(n,t,e){return t.every((i,r)=>rE[e](n[r].parameters,i.parameters))}var Ni=class{constructor(t=new De([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){return jk.serialize(this)}},De=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return su(this)}},Qr=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Js(this.parameters),this._parameterMap}toString(){return cE(this)}};function Lk(n,t){return Yr(n,t)&&n.every((e,i)=>hi(e.parameters,t[i].parameters))}function Yr(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function Vk(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===de&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==de&&(e=e.concat(t(r,i)))}),e}var vl=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>new eo,providedIn:"root"})}}return n})(),eo=class{parse(t){let e=new ap(t);return new Ni(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${il(t.root,!0)}`,i=zk(t.queryParams),r=typeof t.fragment=="string"?`#${Bk(t.fragment)}`:"";return`${e}${i}${r}`}},jk=new eo;function su(n){return n.segments.map(t=>cE(t)).join("/")}function il(n,t){if(!n.hasChildren())return su(n);if(t){let e=n.children[de]?il(n.children[de],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==de&&i.push(`${r}:${il(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=Vk(n,(i,r)=>r===de?[il(n.children[de],!1)]:[`${r}:${il(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[de]!=null?`${su(n)}/${e[0]}`:`${su(n)}/(${e.join("//")})`}}function lE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nu(n){return lE(n).replace(/%3B/gi,";")}function Bk(n){return encodeURI(n)}function op(n){return lE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ou(n){return decodeURIComponent(n)}function H0(n){return ou(n.replace(/\+/g,"%20"))}function cE(n){return`${op(n.path)}${Uk(n.parameters)}`}function Uk(n){return Object.entries(n).map(([t,e])=>`;${op(t)}=${op(e)}`).join("")}function zk(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${nu(e)}=${nu(r)}`).join("&"):`${nu(e)}=${nu(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var $k=/^[^\/()?;#]+/;function ep(n){let t=n.match($k);return t?t[0]:""}var Wk=/^[^\/()?;=#]+/;function qk(n){let t=n.match(Wk);return t?t[0]:""}var Gk=/^[^=?&#]+/;function Hk(n){let t=n.match(Gk);return t?t[0]:""}var Kk=/^[^&#]+/;function Qk(n){let t=n.match(Kk);return t?t[0]:""}var ap=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[de]=new De(t,e)),i}parseSegment(){let t=ep(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Re(4009,!1);return this.capture(t),new Qr(ou(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=qk(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=ep(this.remaining);r&&(i=r,this.capture(i))}t[ou(e)]=ou(i)}parseQueryParam(t){let e=Hk(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=Qk(this.remaining);o&&(i=o,this.capture(i))}let r=H0(e),s=H0(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=ep(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Re(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=de);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[de]:new De([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Re(4011,!1)}};function dE(n){return n.segments.length>0?new De([],{[de]:n}):n}function uE(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=uE(r);if(i===de&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new De(n.segments,t);return Yk(e)}function Yk(n){if(n.numberOfChildren===1&&n.children[de]){let t=n.children[de];return new De(n.segments.concat(t.segments),t.children)}return n}function Xr(n){return n instanceof Ni}function Xk(n,t,e=null,i=null){let r=hE(n);return fE(r,t,e,i)}function hE(n){let t;function e(s){let o={};for(let c of s.children){let d=e(c);o[c.outlet]=d}let a=new De(s.url,o);return s===n&&(t=a),a}let i=e(n.root),r=dE(i);return t??r}function fE(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return tp(r,r,r,e,i);let s=Zk(t);if(s.toRoot())return tp(r,r,new De([],{}),e,i);let o=Jk(s,r,n),a=o.processChildren?ol(o.segmentGroup,o.index,s.commands):pE(o.segmentGroup,o.index,s.commands);return tp(r,o.segmentGroup,a,e,i)}function au(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function cl(n){return typeof n=="object"&&n!=null&&n.outlets}function tp(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([c,d])=>{s[c]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===t?o=e:o=mE(n,t,e);let a=dE(uE(o));return new Ni(a,s,r)}function mE(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=mE(s,t,e)}),new De(n.segments,i)}var lu=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&au(i[0]))throw new Re(4003,!1);let r=i.find(cl);if(r&&r!==iE(i))throw new Re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Zk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new lu(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new lu(e,t,i)}var Ys=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function Jk(n,t,e){if(n.isAbsolute)return new Ys(t,!0,0);if(!e)return new Ys(t,!1,NaN);if(e.parent===null)return new Ys(e,!0,0);let i=au(n.commands[0])?0:1,r=e.segments.length-1+i;return eP(e,r,n.numberOfDoubleDots)}function eP(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Re(4005,!1);r=i.segments.length}return new Ys(i,!1,r-s)}function tP(n){return cl(n[0])?n[0].outlets:{[de]:n}}function pE(n,t,e){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return ol(n,t,e);let i=nP(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new De(n.segments.slice(0,i.pathIndex),{});return s.children[de]=new De(n.segments.slice(i.pathIndex),n.children),ol(s,0,r)}else return i.match&&r.length===0?new De(n.segments,{}):i.match&&!n.hasChildren()?lp(n,t,e):i.match?ol(n,0,r):lp(n,t,e)}function ol(n,t,e){if(e.length===0)return new De(n.segments,{});{let i=tP(e),r={};if(Object.keys(i).some(s=>s!==de)&&n.children[de]&&n.numberOfChildren===1&&n.children[de].segments.length===0){let s=ol(n.children[de],t,e);return new De(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=pE(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new De(n.segments,r)}}function nP(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],a=e[i];if(cl(a))break;let c=`${a}`,d=i<e.length-1?e[i+1]:null;if(r>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!Q0(c,d,o))return s;i+=2}else{if(!Q0(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function lp(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(cl(s)){let c=iP(s.outlets);return new De(i,c)}if(r===0&&au(e[0])){let c=n.segments[t];i.push(new Qr(c.path,K0(e[0]))),r++;continue}let o=cl(s)?s.outlets[de]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&au(a)?(i.push(new Qr(o,K0(a))),r+=2):(i.push(new Qr(o,{})),r++)}return new De(i,{})}function iP(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=lp(new De([],{}),0,i))}),t}function K0(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function Q0(n,t,e){return n==e.path&&hi(t,e.parameters)}var al="imperative",Et=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Et||{}),Rn=class{constructor(t,e){this.id=t,this.url=e}},to=class extends Rn{constructor(t,e,i="imperative",r=null){super(t,e),this.type=Et.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fi=class extends Rn{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=Et.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(gn||{}),cu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(cu||{}),Mi=class extends Rn{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Et.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ur=class extends Rn{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Et.NavigationSkipped}},dl=class extends Rn{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=Et.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},du=class extends Rn{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Et.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cp=class extends Rn{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Et.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dp=class extends Rn{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Et.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},up=class extends Rn{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Et.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class extends Rn{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Et.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fp=class{constructor(t){this.route=t,this.type=Et.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mp=class{constructor(t){this.route=t,this.type=Et.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},pp=class{constructor(t){this.snapshot=t,this.type=Et.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gp=class{constructor(t){this.snapshot=t,this.type=Et.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_p=class{constructor(t){this.snapshot=t,this.type=Et.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vp=class{constructor(t){this.snapshot=t,this.type=Et.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uu=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=Et.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},ul=class{},no=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function rP(n,t){return n.providers&&!n._injector&&(n._injector=Nm(n.providers,t,`Route: ${n.path}`)),n._injector??t}function $n(n){return n.outlet||de}function sP(n,t){let e=n.filter(i=>$n(i)===t);return e.push(...n.filter(i=>$n(i)!==t)),e}function yl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var yp=class{get injector(){return yl(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new bl(this.rootInjector),this.attachRef=null}},bl=(()=>{class n{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new yp(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)(x(Un))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hu=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=bp(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=bp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=wp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return wp(t,this._root).map(e=>e.value)}};function bp(n,t){if(n===t.value)return t;for(let e of t.children){let i=bp(n,e);if(i)return i}return null}function wp(n,t){if(n===t.value)return[t];for(let e of t.children){let i=wp(n,e);if(i.length)return i.unshift(t),i}return[]}var pn=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Qs(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var fu=class extends hu{constructor(t,e){super(t),this.snapshot=e,Dp(this,t)}toString(){return this.snapshot.toString()}};function gE(n){let t=oP(n),e=new Ut([new Qr("",{})]),i=new Ut({}),r=new Ut({}),s=new Ut({}),o=new Ut(""),a=new hr(e,i,s,o,r,de,n,t.root);return a.snapshot=t.root,new fu(new pn(a,[]),t)}function oP(n){let t={},e={},i={},r="",s=new Xs([],t,i,r,e,de,n,null,{});return new pu("",new pn(s,[]))}var hr=class{constructor(t,e,i,r,s,o,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(q(d=>d[_l]))??W(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(q(t=>Js(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(q(t=>Js(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mu(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:F(F({},t.params),n.params),data:F(F({},t.data),n.data),resolve:F(F(F(F({},n.data),t.data),r?.data),n._resolvedData)}:i={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},r&&vE(r)&&(i.resolve[_l]=r.title),i}var Xs=class{get title(){return this.data?.[_l]}constructor(t,e,i,r,s,o,a,c,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Js(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},pu=class extends hu{constructor(t,e){super(e),this.url=t,Dp(this,e)}toString(){return _E(this._root)}};function Dp(n,t){t.value._routerState=n,t.children.forEach(e=>Dp(n,e))}function _E(n){let t=n.children.length>0?` { ${n.children.map(_E).join(", ")} } `:"";return`${n.value}${t}`}function np(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,hi(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),hi(t.params,e.params)||n.paramsSubject.next(e.params),Mk(t.url,e.url)||n.urlSubject.next(e.url),hi(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Ep(n,t){let e=hi(n.params,t.params)&&Lk(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Ep(n.parent,t.parent))}function vE(n){return typeof n.title=="string"||n.title===null}var kp=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=de,this.activateEvents=new le,this.deactivateEvents=new le,this.attachEvents=new le,this.detachEvents=new le,this.parentContexts=P(bl),this.location=P(nr),this.changeDetector=P(Xt),this.inputBinder=P(yu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Re(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Re(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Cp(e,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Y({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_t]})}}return n})(),Cp=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===hr?this.route:t===bl?this.childContexts:this.parent.get(t,e)}},yu=new V(""),Y0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=Ms([i.queryParams,i.params,i.data]).pipe($e(([s,o,a],c)=>(a=F(F(F({},s),o),a),c===0?W(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let o=u0(i.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})();function aP(n,t,e){let i=hl(n,t._root,e?e._root:void 0);return new fu(i,t)}function hl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=lP(n,t,e);return new pn(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>hl(n,a)),o}}let i=cP(t.value),r=t.children.map(s=>hl(n,s));return new pn(i,r)}}function lP(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return hl(n,i,r);return hl(n,i)})}function cP(n){return new hr(new Ut(n.url),new Ut(n.params),new Ut(n.queryParams),new Ut(n.fragment),new Ut(n.data),n.outlet,n.component,n)}var fl=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},yE="ngNavigationCancelingError";function gu(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Xr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=bE(!1,gn.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function bE(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[yE]=!0,e.cancellationCode=t,e}function dP(n){return wE(n)&&Xr(n.url)}function wE(n){return!!n&&n[yE]}var uP=(n,t,e,i)=>q(r=>(new Ip(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),Ip=class{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),np(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Qs(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Qs(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Qs(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Qs(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new vp(s.value.snapshot))}),t.children.length&&this.forwardEvent(new gp(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(np(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),np(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},_u=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Zs=class{constructor(t,e){this.component=t,this.route=e}};function hP(n,t,e){let i=n._root,r=t?t._root:null;return rl(i,r,e,[i.value])}function fP(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function ro(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Mw(n)?n:t.get(n):i}function rl(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Qs(t);return n.children.forEach(o=>{mP(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ll(a,e.getContext(o),r)),r}function mP(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=pP(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new _u(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?rl(n,t,a?a.children:null,i,r):rl(n,t,e,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Zs(a.outlet.component,o))}else o&&ll(t,a,r),r.canActivateChecks.push(new _u(i)),s.component?rl(n,null,a?a.children:null,i,r):rl(n,null,e,i,r);return r}function pP(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Yr(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Yr(n.url,t.url)||!hi(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ep(n,t)||!hi(n.queryParams,t.queryParams);case"paramsChange":default:return!Ep(n,t)}}function ll(n,t,e){let i=Qs(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?ll(o,t.children.getContext(s),e):ll(o,null,e):ll(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Zs(t.outlet.component,r)):e.canDeactivateChecks.push(new Zs(null,r)):e.canDeactivateChecks.push(new Zs(null,r))}function wl(n){return typeof n=="function"}function gP(n){return typeof n=="boolean"}function _P(n){return n&&wl(n.canLoad)}function vP(n){return n&&wl(n.canActivate)}function yP(n){return n&&wl(n.canActivateChild)}function bP(n){return n&&wl(n.canDeactivate)}function wP(n){return n&&wl(n.canMatch)}function EE(n){return n instanceof Sw||n?.name==="EmptyError"}var iu=Symbol("INITIAL_VALUE");function io(){return $e(n=>Ms(n.map(t=>t.pipe(At(1),Tn(iu)))).pipe(q(t=>{for(let e of t)if(e!==!0){if(e===iu)return iu;if(e===!1||EP(e))return e}return!0}),Xe(t=>t!==iu),At(1)))}function EP(n){return Xr(n)||n instanceof fl}function CP(n,t){return hn(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?W(we(F({},e),{guardsResult:!0})):IP(o,i,r,n).pipe(hn(a=>a&&gP(a)?TP(i,s,n,t):W(a)),q(a=>we(F({},e),{guardsResult:a})))})}function IP(n,t,e,i){return mt(n).pipe(hn(r=>DP(r.component,r.route,e,t,i)),ri(r=>r!==!0,!0))}function TP(n,t,e,i){return mt(t).pipe(Ji(r=>vd(SP(r.route.parent,i),xP(r.route,i),RP(n,r.path,e),AP(n,r.route,e))),ri(r=>r!==!0,!0))}function xP(n,t){return n!==null&&t&&t(new _p(n)),W(!0)}function SP(n,t){return n!==null&&t&&t(new pp(n)),W(!0)}function AP(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return W(!0);let r=i.map(s=>zr(()=>{let o=yl(t)??e,a=ro(s,o),c=vP(a)?a.canActivate(t,n):xn(o,()=>a(t,n));return fr(c).pipe(ri())}));return W(r).pipe(io())}function RP(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>fP(o)).filter(o=>o!==null).map(o=>zr(()=>{let a=o.guards.map(c=>{let d=yl(o.node)??e,f=ro(c,d),m=yP(f)?f.canActivateChild(i,n):xn(d,()=>f(i,n));return fr(m).pipe(ri())});return W(a).pipe(io())}));return W(s).pipe(io())}function DP(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return W(!0);let o=s.map(a=>{let c=yl(t)??r,d=ro(a,c),f=bP(d)?d.canDeactivate(n,t,e,i):xn(c,()=>d(n,t,e,i));return fr(f).pipe(ri())});return W(o).pipe(io())}function kP(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return W(!0);let s=r.map(o=>{let a=ro(o,n),c=_P(a)?a.canLoad(t,e):xn(n,()=>a(t,e));return fr(c)});return W(s).pipe(io(),CE(i))}function CE(n){return Tw(ke(t=>{if(typeof t!="boolean")throw gu(n,t)}),q(t=>t===!0))}function PP(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return W(!0);let s=r.map(o=>{let a=ro(o,n),c=wP(a)?a.canMatch(t,e):xn(n,()=>a(t,e));return fr(c)});return W(s).pipe(io(),CE(i))}var ml=class{constructor(t){this.segmentGroup=t||null}},pl=class extends Error{constructor(t){super(),this.urlTree=t}};function Ks(n){return Ur(new ml(n))}function MP(n){return Ur(new Re(4e3,!1))}function NP(n){return Ur(bE(!1,gn.GuardRejected))}var Tp=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return W(i);if(r.numberOfChildren>1||!r.children[de])return MP(`${t.redirectTo}`);r=r.children[de]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let a=e,{queryParams:c,fragment:d,routeConfig:f,url:m,outlet:g,params:b,data:E,title:D}=r,M=xn(s,()=>a({params:b,data:E,queryParams:c,fragment:d,routeConfig:f,url:m,outlet:g,title:D}));if(M instanceof Ni)throw new pl(M);e=M}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new pl(o);return o}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new Ni(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,i,r)}),new De(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Re(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},xp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function OP(n,t,e,i,r){let s=IE(n,t,e);return s.matched?(i=rP(t,i),PP(i,t,e,r).pipe(q(o=>o===!0?s:F({},xp)))):W(s)}function IE(n,t,e){if(t.path==="**")return FP(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?F({},xp):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||Pk)(e,n,t);if(!r)return F({},xp);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?F(F({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function FP(n){return{matched:!0,parameters:n.length>0?iE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function X0(n,t,e,i){return e.length>0&&jP(n,e,i)?{segmentGroup:new De(t,VP(i,new De(e,n.children))),slicedSegments:[]}:e.length===0&&BP(n,e,i)?{segmentGroup:new De(n.segments,LP(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new De(n.segments,n.children),slicedSegments:e}}function LP(n,t,e,i){let r={};for(let s of e)if(bu(n,t,s)&&!i[$n(s)]){let o=new De([],{});r[$n(s)]=o}return F(F({},i),r)}function VP(n,t){let e={};e[de]=t;for(let i of n)if(i.path===""&&$n(i)!==de){let r=new De([],{});e[$n(i)]=r}return e}function jP(n,t,e){return e.some(i=>bu(n,t,i)&&$n(i)!==de)}function BP(n,t,e){return e.some(i=>bu(n,t,i))}function bu(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function UP(n,t,e){return t.length===0&&!n.children[e]}var Sp=class{};function zP(n,t,e,i,r,s,o="emptyOnly"){return new Ap(n,t,e,i,r,o,s).recognize()}var $P=31,Ap=class{constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Tp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Re(4002,`'${t.segmentGroup}'`)}recognize(){let t=X0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(q(({children:e,rootSnapshot:i})=>{let r=new pn(i,e),s=new pu("",r),o=Xk(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new Xs([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,de,e).pipe(q(i=>({children:i,rootSnapshot:e})),Zi(i=>{if(i instanceof pl)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ml?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(q(o=>o instanceof pn?[o]:[]))}processChildren(t,e,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return mt(s).pipe(Ji(o=>{let a=i.children[o],c=sP(e,o);return this.processSegmentGroup(t,c,a,o,r)}),Va((o,a)=>(o.push(...a),o)),Am(null),Dw(),hn(o=>{if(o===null)return Ks(i);let a=TE(o);return WP(a),W(a)}))}processSegment(t,e,i,r,s,o,a){return mt(e).pipe(Ji(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,i,r,s,o,a).pipe(Zi(d=>{if(d instanceof ml)return W(null);throw d}))),ri(c=>!!c),Zi(c=>{if(EE(c))return UP(i,r,s)?W(new Sp):Ks(i);throw c}))}processSegmentAgainstRoute(t,e,i,r,s,o,a,c){return $n(i)!==o&&(o===de||!bu(r,s,i))?Ks(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o,c):Ks(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o,a){let{matched:c,parameters:d,consumedSegments:f,positionalParamSegments:m,remainingSegments:g}=IE(e,r,s);if(!c)return Ks(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>$P&&(this.allowRedirects=!1));let b=new Xs(s,d,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Z0(r),$n(r),r.component??r._loadedComponent??null,r,J0(r)),E=mu(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(E.params),b.data=Object.freeze(E.data);let D=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,m,b,t);return this.applyRedirects.lineralizeSegments(r,D).pipe(hn(M=>this.processSegment(t,i,e,M.concat(g),o,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a=OP(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe($e(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe($e(({routes:d})=>{let f=i._loadedInjector??t,{parameters:m,consumedSegments:g,remainingSegments:b}=c,E=new Xs(g,m,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Z0(i),$n(i),i.component??i._loadedComponent??null,i,J0(i)),D=mu(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(D.params),E.data=Object.freeze(D.data);let{segmentGroup:M,slicedSegments:ne}=X0(e,g,b,d);if(ne.length===0&&M.hasChildren())return this.processChildren(f,d,M,E).pipe(q(U=>new pn(E,U)));if(d.length===0&&ne.length===0)return W(new pn(E,[]));let te=$n(i)===s;return this.processSegment(f,d,M,ne,te?de:s,!0,E).pipe(q(U=>new pn(E,U instanceof pn?[U]:[])))}))):Ks(e)))}getChildConfig(t,e,i){return e.children?W({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?W({routes:e._loadedRoutes,injector:e._loadedInjector}):kP(t,e,i,this.urlSerializer).pipe(hn(r=>r?this.configLoader.loadChildren(t,e).pipe(ke(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):NP(e))):W({routes:[],injector:t})}};function WP(n){n.sort((t,e)=>t.value.outlet===de?-1:e.value.outlet===de?1:t.value.outlet.localeCompare(e.value.outlet))}function qP(n){let t=n.value.routeConfig;return t&&t.path===""}function TE(n){let t=[],e=new Set;for(let i of n){if(!qP(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=TE(i.children);t.push(new pn(i.value,r))}return t.filter(i=>!e.has(i))}function Z0(n){return n.data||{}}function J0(n){return n.resolve||{}}function GP(n,t,e,i,r,s){return hn(o=>zP(n,t,e,i,o.extractedUrl,r,s).pipe(q(({state:a,tree:c})=>we(F({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function HP(n,t){return hn(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return W(e);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of xE(c))o.add(d);let a=0;return mt(o).pipe(Ji(c=>s.has(c)?KP(c,i,n,t):(c.data=mu(c,c.parent,n).resolve,W(void 0))),ke(()=>a++),Rm(1),hn(c=>a===o.size?W(e):ii))})}function xE(n){let t=n.children.map(e=>xE(e)).flat();return[n,...t]}function KP(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!vE(r)&&(s[_l]=r.title),QP(s,n,t,i).pipe(q(o=>(n._resolvedData=o,n.data=mu(n,n.parent,e).resolve,null)))}function QP(n,t,e,i){let r=sp(n);if(r.length===0)return W({});let s={};return mt(r).pipe(hn(o=>YP(n[o],t,e,i).pipe(ri(),ke(a=>{if(a instanceof fl)throw gu(new eo,a);s[o]=a}))),Rm(1),Rw(s),Zi(o=>EE(o)?ii:Ur(o)))}function YP(n,t,e,i){let r=yl(t)??i,s=ro(n,r),o=s.resolve?s.resolve(t,e):xn(r,()=>s(t,e));return fr(o)}function ip(n){return $e(t=>{let e=n(t);return e?mt(e).pipe(q(()=>t)):W(t)})}var SE=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===de);return i}getResolvedTitleForRoute(e){return e.data[_l]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>P(XP),providedIn:"root"})}}return n})(),XP=(()=>{class n extends SE{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(x(W0))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),El=new V("",{providedIn:"root",factory:()=>({})}),ZP=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=se({type:n,selectors:[["ng-component"]],standalone:!0,features:[oe],decls:1,vars:0,template:function(i,r){i&1&&ye(0,"router-outlet")},dependencies:[kp],encapsulation:2})}}return n})();function Pp(n){let t=n.children&&n.children.map(Pp),e=t?we(F({},n),{children:t}):F({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==de&&(e.component=ZP),e}var gl=new V(""),Mp=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(Md)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return W(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=fr(e.loadComponent()).pipe(q(AE),ke(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),er(()=>{this.componentLoaders.delete(e)})),r=new Cm(i,()=>new $).pipe(Em());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return W({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=JP(i,this.compiler,e,this.onLoadEndListener).pipe(er(()=>{this.childrenLoaders.delete(i)})),o=new Cm(s,()=>new $).pipe(Em());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function JP(n,t,e,i){return fr(n.loadChildren()).pipe(q(AE),hn(r=>r instanceof Yw||Array.isArray(r)?W(r):mt(t.compileModuleAsync(r))),q(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(gl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Pp),injector:s}}))}function eM(n){return n&&typeof n=="object"&&"default"in n}function AE(n){return eM(n)?n.default:n}var Np=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>P(tM),providedIn:"root"})}}return n})(),tM=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),RE=new V(""),DE=new V("");function nM(n,t,e){let i=n.get(DE),r=n.get(Q);return n.get(z).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),a=r.startViewTransition(()=>(s(),iM(n))),{onViewTransitionCreated:c}=i;return c&&xn(n,()=>c({transition:a,from:t,to:e})),o})}function iM(n){return new Promise(t=>{oi({read:()=>setTimeout(t)},{injector:n})})}var rM=new V(""),Op=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $,this.transitionAbortSubject=new $,this.configLoader=P(Mp),this.environmentInjector=P(Un),this.urlSerializer=P(vl),this.rootContexts=P(bl),this.location=P(Ai),this.inputBindingEnabled=P(yu,{optional:!0})!==null,this.titleStrategy=P(SE),this.options=P(El,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(Np),this.createViewTransition=P(RE,{optional:!0}),this.navigationErrorHandler=P(rM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null;let e=r=>this.events.next(new fp(r)),i=r=>this.events.next(new mp(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(we(F(F({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new Ut({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:al,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Xe(s=>s.id!==0),q(s=>we(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),$e(s=>{let o=!1,a=!1;return W(s).pipe($e(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",gn.SupersededByNewNavigation),ii;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?we(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new ur(c.id,this.urlSerializer.serialize(c.rawUrl),m,cu.IgnoredSameUrlNavigation)),c.resolve(!1),ii}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return W(c).pipe($e(m=>{let g=this.transitions?.getValue();return this.events.next(new to(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),g!==this.transitions?.getValue()?ii:Promise.resolve(m)}),GP(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),ke(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=we(F({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let g=new du(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(g)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:m,extractedUrl:g,source:b,restoredState:E,extras:D}=c,M=new to(m,this.urlSerializer.serialize(g),b,E);this.events.next(M);let ne=gE(this.rootComponentType).snapshot;return this.currentTransition=s=we(F({},c),{targetSnapshot:ne,urlAfterRedirects:g,extras:we(F({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,W(s)}else{let m="";return this.events.next(new ur(c.id,this.urlSerializer.serialize(c.extractedUrl),m,cu.IgnoredByUrlHandlingStrategy)),c.resolve(!1),ii}}),ke(c=>{let d=new cp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),q(c=>(this.currentTransition=s=we(F({},c),{guards:hP(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),CP(this.environmentInjector,c=>this.events.next(c)),ke(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw gu(this.urlSerializer,c.guardsResult);let d=new dp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),Xe(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",gn.GuardRejected),!1)),ip(c=>{if(c.guards.canActivateChecks.length)return W(c).pipe(ke(d=>{let f=new up(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),$e(d=>{let f=!1;return W(d).pipe(HP(this.paramsInheritanceStrategy,this.environmentInjector),ke({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",gn.NoDataFromResolver)}}))}),ke(d=>{let f=new hp(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),ip(c=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(ke(g=>{f.component=g}),q(()=>{})));for(let g of f.children)m.push(...d(g));return m};return Ms(d(c.targetSnapshot.root)).pipe(Am(null),At(1))}),ip(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:c,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return f?mt(f).pipe(q(()=>s)):W(s)}),q(c=>{let d=aP(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=we(F({},c),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),ke(()=>{this.events.next(new ul)}),uP(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),At(1),ke({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),ot(this.transitionAbortSubject.pipe(ke(c=>{throw c}))),er(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",gn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zi(c=>{if(a=!0,wE(c))this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),dP(c)?this.events.next(new no(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let d=new dl(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let f=xn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof fl){let{message:m,cancellationCode:g}=gu(this.urlSerializer,f);this.events.next(new Mi(s.id,this.urlSerializer.serialize(s.extractedUrl),m,g)),this.events.next(new no(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let m=e.errorHandler(c);s.resolve(!!m)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return ii}))}))}cancelNavigationTransition(e,i,r){let s=new Mi(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sM(n){return n!==al}var oM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>P(aM),providedIn:"root"})}}return n})(),Rp=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},aM=(()=>{class n extends Rp{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=si(n)))(r||n)}})()}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:()=>P(lM),providedIn:"root"})}}return n})(),lM=(()=>{class n extends kE{constructor(){super(...arguments),this.location=P(Ai),this.urlSerializer=P(vl),this.options=P(El,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(Np),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ni,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof to)this.stateMemento=this.createStateMemento();else if(e instanceof ur)this.rawUrlTree=i.initialUrl;else if(e instanceof du){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof ul?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof Mi&&(e.code===gn.GuardRejected||e.code===gn.NoDataFromResolver)?this.restoreHistory(i):e instanceof dl?this.restoreHistory(i,!0):e instanceof fi&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof Ni?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=F(F({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=si(n)))(r||n)}})()}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(sl||{});function PE(n,t){n.events.pipe(Xe(e=>e instanceof fi||e instanceof Mi||e instanceof dl||e instanceof ur),q(e=>e instanceof fi||e instanceof ur?sl.COMPLETE:(e instanceof Mi?e.code===gn.Redirect||e.code===gn.SupersededByNewNavigation:!1)?sl.REDIRECTING:sl.FAILED),Xe(e=>e!==sl.REDIRECTING),At(1)).subscribe(()=>{t()})}function cM(n){throw n}var dM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P(Dd),this.stateManager=P(kE),this.options=P(El,{optional:!0})||{},this.pendingTasks=P(Cd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(Op),this.urlSerializer=P(vl),this.location=P(Ai),this.urlHandlingStrategy=P(Np),this._events=new $,this.errorHandler=this.options.errorHandler||cM,this.navigated=!1,this.routeReuseStrategy=P(oM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(gl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(yu,{optional:!0}),this.eventsSubscription=new St,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Mi&&i.code!==gn.Redirect&&i.code!==gn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof fi)this.navigated=!0;else if(i instanceof no){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=F({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||sM(r.source)},o);this.scheduleNavigation(a,al,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}fM(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),al,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let c=F({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Pp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:o,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let g=r?r.snapshot:this.routerState.snapshot.root;m=hE(g)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),m=this.currentUrlTree.root}return fE(m,e,f,d??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Xr(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,al,null,i)}navigate(e,i={skipLocationChange:!1}){return hM(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=F({},dM):i===!1?r=F({},uM):r=i,Xr(e))return G0(this.currentUrlTree,e,r);let s=this.parseUrl(e);return G0(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((m,g)=>{a=m,c=g});let f=this.pendingTasks.add();return PE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hM(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Re(4008,!1)}function fM(n){return!(n instanceof ul)&&!(n instanceof no)}var wu=(()=>{class n{constructor(e,i,r,s,o,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new $,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=e.events.subscribe(d=>{d instanceof fi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Xr(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:Gw(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Xr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(R(Pt),R(hr),$r("tabindex"),R(za),R(ie),R(qr))}}static{this.\u0275dir=Y({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&K("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Pe("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ge],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ge],replaceUrl:[2,"replaceUrl","replaceUrl",Ge],routerLink:"routerLink"},standalone:!0,features:[Dt,_t]})}}return n})();var vu=class{};var mM=(()=>{class n{constructor(e,i,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Xe(e=>e instanceof fi),Ji(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Nm(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return mt(r).pipe(Tm())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=W(null);let s=r.pipe(hn(o=>o===null?W(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return mt([s,o]).pipe(Tm())}else return s})}static{this.\u0275fac=function(i){return new(i||n)(x(Pt),x(Md),x(Un),x(vu),x(Mp))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ME=new V(""),pM=(()=>{class n{constructor(e,i,r,s,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof to?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof fi?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof ur&&e.code===cu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof uu&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new uu(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Ls()}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})();function NE(n,...t){return Qt([{provide:gl,multi:!0,useValue:n},[],{provide:hr,useFactory:OE,deps:[Pt]},{provide:Pd,multi:!0,useFactory:FE},t.map(e=>e.\u0275providers)])}function OE(n){return n.routerState.root}function Cl(n,t){return{\u0275kind:n,\u0275providers:t}}function FE(){let n=P(Se);return t=>{let e=n.get(rr);if(t!==e.components[0])return;let i=n.get(Pt),r=n.get(LE);n.get(Fp)===1&&i.initialNavigation(),n.get(VE,null,km.Optional)?.setUpPreloading(),n.get(ME,null,km.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var LE=new V("",{factory:()=>new $}),Fp=new V("",{providedIn:"root",factory:()=>1});function gM(){return Cl(2,[{provide:Fp,useValue:0},{provide:Om,multi:!0,deps:[Se],useFactory:t=>{let e=t.get(m0,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(Pt),s=t.get(LE);PE(r,()=>{i(!0)}),t.get(Op).afterPreactivation=()=>(i(!0),s.closed?W(void 0):s),r.initialNavigation()}))}}])}function _M(){return Cl(3,[{provide:Om,multi:!0,useFactory:()=>{let t=P(Pt);return()=>{t.setUpLocationChangeListener()}}},{provide:Fp,useValue:2}])}var VE=new V("");function vM(n){return Cl(0,[{provide:VE,useExisting:mM},{provide:vu,useExisting:n}])}function yM(){return Cl(8,[Y0,{provide:yu,useExisting:Y0}])}function bM(n){let t=[{provide:RE,useValue:nM},{provide:DE,useValue:F({skipNextTransition:!!n?.skipInitialTransition},n)}];return Cl(9,t)}var eE=new V("ROUTER_FORROOT_GUARD"),wM=[Ai,{provide:vl,useClass:eo},Pt,bl,{provide:hr,useFactory:OE,deps:[Pt]},Mp,[]],Eu=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[wM,[],{provide:gl,multi:!0,useValue:e},{provide:eE,useFactory:TM,deps:[[Pt,new Ze,new Pm]]},{provide:El,useValue:i||{}},i?.useHash?CM():IM(),EM(),i?.preloadingStrategy?vM(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?xM(i):[],i?.bindToComponentInputs?yM().\u0275providers:[],i?.enableViewTransitions?bM().\u0275providers:[],SM()]}}static forChild(e){return{ngModule:n,providers:[{provide:gl,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)(x(eE,8))}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({})}}return n})();function EM(){return{provide:ME,useFactory:()=>{let n=P(y0),t=P(z),e=P(El),i=P(Op),r=P(vl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new pM(r,i,n,t,e)}}}function CM(){return{provide:qr,useClass:Od}}function IM(){return{provide:qr,useClass:p0}}function TM(n){return"guarded"}function xM(n){return[n.initialNavigation==="disabled"?_M().\u0275providers:[],n.initialNavigation==="enabledBlocking"?gM().\u0275providers:[]]}var tE=new V("");function SM(){return[{provide:tE,useFactory:FE},{provide:Pd,multi:!0,useExisting:tE}]}function Zr(n){n||(Ow(Zr),n=P(Fw));let t=new Ye(e=>n.onDestroy(e.next.bind(e)));return e=>e.pipe(ot(t))}var GE=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(R(za),R(ie))}}static{this.\u0275dir=Y({type:n})}}return n})(),RM=(()=>{class n extends GE{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=si(n)))(r||n)}})()}static{this.\u0275dir=Y({type:n,features:[et]})}}return n})(),Mu=new V("");var DM={provide:Mu,useExisting:tr(()=>pi),multi:!0};function kM(){let n=Us()?Us().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var PM=new V(""),pi=(()=>{class n extends GE{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!kM())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(R(za),R(ie),R(PM,8))}}static{this.\u0275dir=Y({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&K("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[We([DM]),et]})}}return n})();function mr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function HE(n){return n!=null&&typeof n.length=="number"}var ao=new V(""),Dl=new V(""),MM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,nt=class{static min(t){return NM(t)}static max(t){return OM(t)}static required(t){return KE(t)}static requiredTrue(t){return FM(t)}static email(t){return LM(t)}static minLength(t){return VM(t)}static maxLength(t){return jM(t)}static pattern(t){return BM(t)}static nullValidator(t){return Iu(t)}static compose(t){return eC(t)}static composeAsync(t){return tC(t)}};function NM(n){return t=>{if(mr(t.value)||mr(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function OM(n){return t=>{if(mr(t.value)||mr(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function KE(n){return mr(n.value)?{required:!0}:null}function FM(n){return n.value===!0?null:{required:!0}}function LM(n){return mr(n.value)||MM.test(n.value)?null:{email:!0}}function VM(n){return t=>mr(t.value)||!HE(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function jM(n){return t=>HE(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function BM(n){if(!n)return Iu;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(mr(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Iu(n){return null}function QE(n){return n!=null}function YE(n){return kd(n)?mt(n):n}function XE(n){let t={};return n.forEach(e=>{t=e!=null?F(F({},t),e):t}),Object.keys(t).length===0?null:t}function ZE(n,t){return t.map(e=>e(n))}function UM(n){return!n.validate}function JE(n){return n.map(t=>UM(t)?t:e=>t.validate(e))}function eC(n){if(!n)return null;let t=n.filter(QE);return t.length==0?null:function(e){return XE(ZE(e,t))}}function Bp(n){return n!=null?eC(JE(n)):null}function tC(n){if(!n)return null;let t=n.filter(QE);return t.length==0?null:function(e){let i=ZE(e,t).map(YE);return yd(i).pipe(q(XE))}}function Up(n){return n!=null?tC(JE(n)):null}function BE(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function nC(n){return n._rawValidators}function iC(n){return n._rawAsyncValidators}function Lp(n){return n?Array.isArray(n)?n:[n]:[]}function Tu(n,t){return Array.isArray(n)?n.includes(t):n===t}function UE(n,t){let e=Lp(t);return Lp(n).forEach(r=>{Tu(e,r)||e.push(r)}),e}function zE(n,t){return Lp(t).filter(e=>!Tu(n,e))}var xu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Bp(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Up(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Oi=class extends xu{get formDirective(){return null}get path(){return null}},Wn=class extends xu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Su=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},zM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},oW=we(F({},zM),{"[class.ng-submitted]":"isSubmitted"}),gr=(()=>{class n extends Su{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(R(Wn,2))}}static{this.\u0275dir=Y({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Me("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[et]})}}return n})(),lo=(()=>{class n extends Su{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(R(Oi,10))}}static{this.\u0275dir=Y({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Me("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[et]})}}return n})();var Il="VALID",Cu="INVALID",so="PENDING",Tl="DISABLED",pr=class{},Au=class extends pr{constructor(t,e){super(),this.value=t,this.source=e}},Sl=class extends pr{constructor(t,e){super(),this.pristine=t,this.source=e}},Al=class extends pr{constructor(t,e){super(),this.touched=t,this.source=e}},oo=class extends pr{constructor(t,e){super(),this.status=t,this.source=e}},Vp=class extends pr{constructor(t){super(),this.source=t}},jp=class extends pr{constructor(t){super(),this.source=t}};function rC(n){return(Nu(n)?n.validators:n)||null}function $M(n){return Array.isArray(n)?Bp(n):n||null}function sC(n,t){return(Nu(t)?t.asyncValidators:n)||null}function WM(n){return Array.isArray(n)?Up(n):n||null}function Nu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function qM(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new Re(1e3,"");if(!i[e])throw new Re(1001,"")}function GM(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new Re(1002,"")})}var Ru=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ai(()=>this.statusReactive()),this.statusReactive=Je(void 0),this._pristine=ai(()=>this.pristineReactive()),this.pristineReactive=Je(!0),this._touched=ai(()=>this.touchedReactive()),this.touchedReactive=Je(!1),this._events=new $,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Sn(this.statusReactive)}set status(t){Sn(()=>this.statusReactive.set(t))}get valid(){return this.status===Il}get invalid(){return this.status===Cu}get pending(){return this.status==so}get disabled(){return this.status===Tl}get enabled(){return this.status!==Tl}get pristine(){return Sn(this.pristineReactive)}set pristine(t){Sn(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Sn(this.touchedReactive)}set touched(t){Sn(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(UE(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(UE(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(zE(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(zE(t,this._rawAsyncValidators))}hasValidator(t){return Tu(this._rawValidators,t)}hasAsyncValidator(t){return Tu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(we(F({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Al(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Al(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(we(F({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Sl(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Sl(!0,i))}markAsPending(t={}){this.status=so;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new oo(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(we(F({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Tl,this.errors=null,this._forEachChild(r=>{r.disable(we(F({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Au(this.value,i)),this._events.next(new oo(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(we(F({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Il,this._forEachChild(i=>{i.enable(we(F({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(we(F({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Il||this.status===so)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Au(this.value,e)),this._events.next(new oo(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(we(F({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tl:Il}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=so,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=YE(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new oo(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?Tl:this.errors?Cu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(so)?so:this._anyControlsHaveStatus(Cu)?Cu:Il}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Sl(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Al(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Nu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=$M(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=WM(this._rawAsyncValidators)}},mi=class extends Ru{constructor(t,e,i){super(rC(e),sC(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){GM(this,!0,t),Object.keys(t).forEach(i=>{qM(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var co=new V("CallSetDisabledState",{providedIn:"root",factory:()=>Ou}),Ou="always";function oC(n,t){return[...t.path,n]}function Rl(n,t,e=Ou){zp(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),KM(n,t),YM(n,t),QM(n,t),HM(n,t)}function Du(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Pu(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ku(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function HM(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function zp(n,t){let e=nC(n);t.validator!==null?n.setValidators(BE(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=iC(n);t.asyncValidator!==null?n.setAsyncValidators(BE(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();ku(t._rawValidators,r),ku(t._rawAsyncValidators,r)}function Pu(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=nC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(t.asyncValidator!==null){let r=iC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}let i=()=>{};return ku(t._rawValidators,i),ku(t._rawAsyncValidators,i),e}function KM(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&aC(n,t)})}function QM(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&aC(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function aC(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function YM(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function lC(n,t){n==null,zp(n,t)}function XM(n,t){return Pu(n,t)}function $p(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function ZM(n){return Object.getPrototypeOf(n.constructor)===RM}function cC(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Wp(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===pi?e=s:ZM(s)?i=s:r=s}),r||i||e||null}function JM(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var eN={provide:Oi,useExisting:tr(()=>qp)},xl=Promise.resolve(),qp=(()=>{class n extends Oi{get submitted(){return Sn(this.submittedReactive)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=ai(()=>this.submittedReactive()),this.submittedReactive=Je(!1),this._directives=new Set,this.ngSubmit=new le,this.form=new mi({},Bp(e),Up(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){xl.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Rl(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){xl.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){xl.then(()=>{let i=this._findContainer(e.path),r=new mi({});lC(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){xl.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){xl.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),cC(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||n)(R(ao,10),R(Dl,10),R(co,8))}}static{this.\u0275dir=Y({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&K("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[We([eN]),et]})}}return n})();function $E(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function WE(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _n=class extends Ru{constructor(t=null,e,i){super(rC(e),sC(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Nu(e)&&(e.nonNullable||e.initialValueIsDefault)&&(WE(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){$E(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){$E(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){WE(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var tN=n=>n instanceof _n;var nN={provide:Wn,useExisting:tr(()=>Gp)},qE=Promise.resolve(),Gp=(()=>{class n extends Wn{constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new _n,this._registered=!1,this.name="",this.update=new le,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Wp(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),$p(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Rl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){qE.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Ge(i);qE.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?oC(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(R(Oi,9),R(ao,10),R(Dl,10),R(Mu,10),R(Xt,8),R(co,8))}}static{this.\u0275dir=Y({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[We([nN]),et,_t]})}}return n})(),uo=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Y({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var Hp=new V(""),iN={provide:Wn,useExisting:tr(()=>Kp)},Kp=(()=>{class n extends Wn{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this.update=new le,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(i),this.valueAccessor=Wp(this,r)}ngOnChanges(e){if(this._isControlChanged(e)){let i=e.form.previousValue;i&&Du(i,this,!1),Rl(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}$p(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Du(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static{this.\u0275fac=function(i){return new(i||n)(R(ao,10),R(Dl,10),R(Mu,10),R(Hp,8),R(co,8))}}static{this.\u0275dir=Y({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[We([iN]),et,_t]})}}return n})(),rN={provide:Oi,useExisting:tr(()=>Fi)},Fi=(()=>{class n extends Oi{get submitted(){return Sn(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=ai(()=>this._submittedReactive()),this._submittedReactive=Je(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new le,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Rl(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Du(e.control||null,e,!1),JM(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),cC(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Vp(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new jp(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(Du(i||null,e),tN(r)&&(Rl(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);lC(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&XM(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zp(this.form,this),this._oldForm&&Pu(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(R(ao,10),R(Dl,10),R(co,8))}}static{this.\u0275dir=Y({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&K("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[We([rN]),et,_t]})}}return n})();var sN={provide:Wn,useExisting:tr(()=>Jr)},Jr=(()=>{class n extends Wn{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new le,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Wp(this,s)}ngOnChanges(e){this._added||this._setUpControl(),$p(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return oC(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(R(Oi,13),R(ao,10),R(Dl,10),R(Mu,10),R(Hp,8))}}static{this.\u0275dir=Y({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[We([sN]),et,_t]})}}return n})();var oN=(()=>{class n{constructor(){this._validator=Iu}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Iu,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Y({type:n,features:[_t]})}}return n})();var aN={provide:ao,useExisting:tr(()=>es),multi:!0};var es=(()=>{class n extends oN{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ge,this.createValidator=e=>KE}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=si(n)))(r||n)}})()}static{this.\u0275dir=Y({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Pe("required",r._enabled?"":null)},inputs:{required:"required"},features:[We([aN]),et]})}}return n})();var dC=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({})}}return n})();var _r=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:co,useValue:e.callSetDisabledState??Ou}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[dC]})}}return n})(),ho=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Hp,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:co,useValue:e.callSetDisabledState??Ou}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[dC]})}}return n})();var lN=new V("cdk-dir-doc",{providedIn:"root",factory:cN});function cN(){return P(Q)}var dN=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function uN(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?dN.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Dn=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new le,e){let i=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=uN(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(x(lN,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vr=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({})}}return n})();function ts(n){return n!=null&&`${n}`!="false"}function Li(n,t=0){return hN(n)?Number(n):arguments.length===2?t:0}function hN(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function yr(n){return Array.isArray(n)?n:[n]}function ft(n){return n==null?"":typeof n=="string"?n:`${n}px`}function gt(n){return n instanceof ie?n.nativeElement:n}var Yp;try{Yp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Yp=!1}var Ae=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?v0(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Yp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(x(Rt))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fo,uC=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Xp(){if(fo)return fo;if(typeof document!="object"||!document)return fo=new Set(uC),fo;let n=document.createElement("input");return fo=new Set(uC.filter(t=>(n.setAttribute("type",t),n.type===t))),fo}var Pl;function fN(){if(Pl==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Pl=!0}))}finally{Pl=Pl||!1}return Pl}function vn(n){return fN()?n:!!n.capture}var qn=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(qn||{}),Lu,ns;function Vu(){if(ns==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ns=!1,ns;if("scrollBehavior"in document.documentElement.style)ns=!0;else{let n=Element.prototype.scrollTo;n?ns=!/\{\s*\[native code\]\s*\}/.test(n.toString()):ns=!1}}return ns}function mo(){if(typeof document!="object"||!document)return qn.NORMAL;if(Lu==null){let n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),Lu=qn.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Lu=n.scrollLeft===0?qn.NEGATED:qn.INVERTED),n.remove()}return Lu}var Qp;function mN(){if(Qp==null){let n=typeof document<"u"?document.head:null;Qp=!!(n&&(n.createShadowRoot||n.attachShadow))}return Qp}function po(n){if(mN()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Ml(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Mt(n){return n.composedPath?n.composedPath()[0]:n.target}function Nl(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Zp=class{constructor(t){this._box=t,this._destroyed=new $,this._resizeSubject=new $,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Ye(e=>{let i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(Xe(e=>e.some(i=>i.target===t)),Ns({bufferSize:1,refCount:!0}),ot(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},hC=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=P(z),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new Zp(r)),this._observers.get(r).observe(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var pN=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fC=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({providers:[pN]})}}return n})();function ju(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var mC=new Set,is,gN=(()=>{class n{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):vN}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&_N(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(i){return new(i||n)(x(Ae),x(Ba,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _N(n,t){if(!mC.has(n))try{is||(is=document.createElement("style"),t&&is.setAttribute("nonce",t),is.setAttribute("type","text/css"),document.head.appendChild(is)),is.sheet&&(is.sheet.insertRule(`@media ${n} {body{ }}`,0),mC.add(n))}catch(e){console.error(e)}}function vN(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var gC=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new $}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return pC(yr(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=pC(yr(e)).map(o=>this._registerQuery(o).observable),s=Ms(r);return s=vd(s.pipe(At(1)),s.pipe(Ed(1),Sm(0))),s.pipe(q(o=>{let a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:d})=>{a.matches=a.matches||c,a.breakpoints[d]=c}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),s={observable:new Ye(o=>{let a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Tn(i),q(({matches:o})=>({query:e,matches:o})),ot(this._destroySubject)),mql:i};return this._queries.set(e,s),s}static{this.\u0275fac=function(i){return new(i||n)(x(gN),x(z))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pC(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var Ol=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return bN(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=yN(AN(e));if(i&&(_C(i)===-1||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=_C(e);return e.hasAttribute("contenteditable")?s!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!xN(e)?!1:r==="audio"?e.hasAttribute("controls")?s!==-1:!1:r==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return SN(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static{this.\u0275fac=function(i){return new(i||n)(x(Ae))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yN(n){try{return n.frameElement}catch{return null}}function bN(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function wN(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function EN(n){return IN(n)&&n.type=="hidden"}function CN(n){return TN(n)&&n.hasAttribute("href")}function IN(n){return n.nodeName.toLowerCase()=="input"}function TN(n){return n.nodeName.toLowerCase()=="a"}function bC(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function _C(n){if(!bC(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function xN(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function SN(n){return EN(n)?!1:wN(n)||CN(n)||n.hasAttribute("contenteditable")||bC(n)}function AN(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var eg=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,r,s=!1,o){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._injector=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?oi(t,{injector:this._injector}):setTimeout(t)}},zu=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._injector=P(Se),this._document=r}create(e,i=!1){return new eg(e,this._checker,this._ngZone,this._document,i,this._injector)}static{this.\u0275fac=function(i){return new(i||n)(x(Ol),x(z),x(Q))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Fl(n){return n.buttons===0||n.detail===0}function Ll(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var RN=new V("cdk-input-modality-detector-options"),DN={ignoreKeys:[18,17,224,91,16]},wC=650,go=vn({passive:!0,capture:!0}),kN=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Ut(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Mt(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<wC||(this._modality.next(Fl(o)?"keyboard":"mouse"),this._mostRecentTarget=Mt(o))},this._onTouchstart=o=>{if(Ll(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Mt(o)},this._options=F(F({},DN),s),this.modalityDetected=this._modality.pipe(Ed(1)),this.modalityChanged=this.modalityDetected.pipe(La()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,go),r.addEventListener("mousedown",this._onMousedown,go),r.addEventListener("touchstart",this._onTouchstart,go)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,go),document.removeEventListener("mousedown",this._onMousedown,go),document.removeEventListener("touchstart",this._onTouchstart,go))}static{this.\u0275fac=function(i){return new(i||n)(x(Ae),x(z),x(Q),x(RN,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Uu=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Uu||{}),PN=new V("cdk-focus-monitor-default-options"),Bu=vn({passive:!0,capture:!0}),_o=(()=>{class n{constructor(e,i,r,s,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new $,this._rootNodeFocusAndBlurListener=a=>{let c=Mt(a);for(let d=c;d;d=d.parentElement)a.type==="focus"?this._onFocus(a,d):this._onBlur(a,d)},this._document=s,this._detectionMode=o?.detectionMode||Uu.IMMEDIATE}monitor(e,i=!1){let r=gt(e);if(!this._platform.isBrowser||r.nodeType!==1)return W();let s=po(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;let a={checkChildren:i,subject:new $,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let i=gt(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){let s=gt(e),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===Uu.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===Uu.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?wC:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,i){let r=this._elementInfo.get(i),s=Mt(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Bu),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Bu)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ot(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Bu),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Bu),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||n)(x(z),x(Ae),x(kN),x(Q,8),x(PN,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rs=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(rs||{}),vC="cdk-high-contrast-black-on-white",yC="cdk-high-contrast-white-on-black",Jp="cdk-high-contrast-active",EC=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=P(gC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return rs.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return rs.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return rs.BLACK_ON_WHITE}return rs.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Jp,vC,yC),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===rs.BLACK_ON_WHITE?e.add(Jp,vC):i===rs.WHITE_ON_BLACK&&e.add(Jp,yC)}}static{this.\u0275fac=function(i){return new(i||n)(x(Ae),x(Q))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function MN(){return!0}var NN=new V("mat-sanity-checks",{providedIn:"root",factory:MN}),wt=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return Nl()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(i){return new(i||n)(x(EC),x(NN,8),x(Q))}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[vr,vr]})}}return n})();var Vl=class{constructor(t,e,i,r,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(r,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var kC=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kn=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(kn||{}),rg=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=kn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},CC=vn({passive:!0,capture:!0}),sg=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=Mt(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){let s=this._events.get(e);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,CC)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,CC)))}},IC={enterDuration:225,exitDuration:150},ON=800,TC=vn({passive:!0,capture:!0}),xC=["mousedown","touchstart"],SC=["mouseup","mouseleave","touchend","touchcancel"],og=class n{static{this._eventManager=new sg}constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=gt(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=F(F({},IC),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=i.radius||FN(t,e,r),a=t-r.left,c=e-r.top,d=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${a-o}px`,f.style.top=`${c-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f);let m=window.getComputedStyle(f),g=m.transitionProperty,b=m.transitionDuration,E=g==="none"||b==="0s"||b==="0s, 0s"||r.width===0&&r.height===0,D=new rg(this,f,i,E);f.style.transform="scale3d(1, 1, 1)",D.state=kn.FADING_IN,i.persistent||(this._mostRecentTransientRipple=D);let M=null;return!E&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let ne=()=>{M&&(M.fallbackTimer=null),clearTimeout(U),this._finishRippleTransition(D)},te=()=>this._destroyRipple(D),U=setTimeout(te,d+100);f.addEventListener("transitionend",ne),f.addEventListener("transitioncancel",te),M={onTransitionEnd:ne,onTransitionCancel:te,fallbackTimer:U}}),this._activeRipples.set(D,M),(E||!d)&&this._finishRippleTransition(D),D}fadeOutRipple(t){if(t.state===kn.FADING_OUT||t.state===kn.HIDDEN)return;let e=t.element,i=F(F({},IC),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=kn.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=gt(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,xC.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{SC.forEach(e=>{this._triggerElement.addEventListener(e,this,TC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===kn.FADING_IN?this._startFadeOutTransition(t):t.state===kn.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=kn.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=kn.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Fl(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+ON;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Ll(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===kn.VISIBLE||t.config.terminateOnPointerUp&&t.state===kn.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(xC.forEach(e=>n._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(SC.forEach(e=>t.removeEventListener(e,this,TC)),this._pointerUpEventsRegistered=!1))}};function FN(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var PC=new V("mat-ripple-global-options"),LN=(()=>{class n{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new og(this,i,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:F(F(F({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,i,F(F({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,F(F({},this.rippleConfig),e))}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(z),R(Ae),R(PC,8),R(Yt,8))}}static{this.\u0275dir=Y({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&Me("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return n})(),ag=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[wt,wt]})}}return n})();var VN=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[wt]})}}return n})();var lg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[ag,wt,VN]})}}return n})(),AC={capture:!0},RC=["focus","mousedown","mouseenter","touchstart"],ng="mat-ripple-loader-uninitialized",ig="mat-ripple-loader-class-name",DC="mat-ripple-loader-centered",$u="mat-ripple-loader-disabled",MC=(()=>{class n{constructor(){this._document=P(Q,{optional:!0}),this._animationMode=P(Yt,{optional:!0}),this._globalRippleOptions=P(PC,{optional:!0}),this._platform=P(Ae),this._ngZone=P(z),this._hosts=new Map,this._onInteraction=e=>{let i=Mt(e);if(i instanceof HTMLElement){let r=i.closest(`[${ng}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}},this._ngZone.runOutsideAngular(()=>{for(let e of RC)this._document?.addEventListener(e,this._onInteraction,AC)})}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);for(let i of RC)this._document?.removeEventListener(i,this._onInteraction,AC)}configureRipple(e,i){e.setAttribute(ng,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(ig))&&e.setAttribute(ig,i.className||""),i.centered&&e.setAttribute(DC,""),i.disabled&&e.setAttribute($u,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,i){let r=this._hosts.get(e);if(r){r.disabled=i;return}i?e.setAttribute($u,""):e.removeAttribute($u)}_createRipple(e){if(!this._document)return;let i=this._hosts.get(e);if(i)return i;e.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(ig)),e.append(r);let s=new LN(new ie(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=e,s.centered=e.hasAttribute(DC),s.disabled=e.hasAttribute($u),this.attachRipple(e,s),s}attachRipple(e,i){e.removeAttribute(ng),this._hosts.set(e,i)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.ngOnDestroy(),this._hosts.delete(e))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var BN=["notch"],UN=["matFormFieldNotchedOutline",""],zN=["*"],$N=["textField"],WN=["iconPrefixContainer"],qN=["textPrefixContainer"],GN=["iconSuffixContainer"],HN=["textSuffixContainer"],KN=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],QN=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function YN(n,t){n&1&&ye(0,"span",21)}function XN(n,t){if(n&1&&(N(0,"label",20),dt(1,1),ce(2,YN,1,0,"span",21),O()),n&2){let e=H(2);ee("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),Pe("for",e._control.disableAutomaticLabeling?null:e._control.id),B(2),Be(!e.hideRequiredMarker&&e._control.required?2:-1)}}function ZN(n,t){if(n&1&&ce(0,XN,3,5,"label",20),n&2){let e=H();Be(e._hasFloatingLabel()?0:-1)}}function JN(n,t){n&1&&ye(0,"div",7)}function eO(n,t){}function tO(n,t){if(n&1&&ce(0,eO,0,0,"ng-template",13),n&2){H(2);let e=Ad(1);ee("ngTemplateOutlet",e)}}function nO(n,t){if(n&1&&(N(0,"div",9),ce(1,tO,1,1,null,13),O()),n&2){let e=H();ee("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),B(),Be(e._forceDisplayInfixLabel()?-1:1)}}function iO(n,t){n&1&&(N(0,"div",10,2),dt(2,2),O())}function rO(n,t){n&1&&(N(0,"div",11,3),dt(2,3),O())}function sO(n,t){}function oO(n,t){if(n&1&&ce(0,sO,0,0,"ng-template",13),n&2){H();let e=Ad(1);ee("ngTemplateOutlet",e)}}function aO(n,t){n&1&&(N(0,"div",14,4),dt(2,4),O())}function lO(n,t){n&1&&(N(0,"div",15,5),dt(2,5),O())}function cO(n,t){n&1&&ye(0,"div",16)}function dO(n,t){if(n&1&&(N(0,"div",18),dt(1,6),O()),n&2){let e=H();ee("@transitionMessages",e._subscriptAnimationState)}}function uO(n,t){if(n&1&&(N(0,"mat-hint",22),G(1),O()),n&2){let e=H(2);ee("id",e._hintLabelId),B(),tt(e.hintLabel)}}function hO(n,t){if(n&1&&(N(0,"div",19),ce(1,uO,2,2,"mat-hint",22),dt(2,7),ye(3,"div",23),dt(4,8),O()),n&2){let e=H();ee("@transitionMessages",e._subscriptAnimationState),B(),Be(e.hintLabel?1:-1)}}var br=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Y({type:n,selectors:[["mat-label"]],standalone:!0})}}return n})(),fO=0,zC=new V("MatError"),vo=(()=>{class n{constructor(e,i){this.id=`mat-mdc-error-${fO++}`,e||i.nativeElement.setAttribute("aria-live","polite")}static{this.\u0275fac=function(i){return new(i||n)($r("aria-live"),R(ie))}}static{this.\u0275dir=Y({type:n,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(i,r){i&2&&Si("id",r.id)},inputs:{id:"id"},standalone:!0,features:[We([{provide:zC,useExisting:n}])]})}}return n})(),mO=0,NC=(()=>{class n{constructor(){this.align="start",this.id=`mat-mdc-hint-${mO++}`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Y({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){i&2&&(Si("id",r.id),Pe("align",null),Me("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return n})(),pO=new V("MatPrefix");var $C=new V("MatSuffix"),qu=(()=>{class n{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Y({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[We([{provide:$C,useExisting:n}])]})}}return n})(),WC=new V("FloatingLabelParent"),OC=(()=>{class n{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=P(hC),this._ngZone=P(z),this._parent=P(WC),this._resizeSubscription=new St}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return gO(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(i){return new(i||n)(R(ie))}}static{this.\u0275dir=Y({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){i&2&&Me("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return n})();function gO(n){let t=n;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let i=e.scrollWidth;return e.remove(),i}var FC="mdc-line-ripple--active",Wu="mdc-line-ripple--deactivating",LC=(()=>{class n{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=r=>{let s=this._elementRef.nativeElement.classList,o=s.contains(Wu);r.propertyName==="opacity"&&o&&s.remove(FC,Wu)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(Wu),e.add(FC)}deactivate(){this._elementRef.nativeElement.classList.add(Wu)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(z))}}static{this.\u0275dir=Y({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return n})(),VC=(()=>{class n{constructor(e,i){this._elementRef=e,this._ngZone=i,this.open=!1}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(z))}}static{this.\u0275cmp=se({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(i&1&&ut(BN,5),i&2){let s;Fe(s=Le())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){i&2&&Me("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[oe],attrs:UN,ngContentSelectors:zN,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,r){i&1&&(zn(),ye(0,"div",1),N(1,"div",2,0),dt(3),O(),ye(4,"div",3))},encapsulation:2,changeDetection:0})}}return n})(),_O={transitionMessages:jd("transitionMessages",[b0("enter",Hr({opacity:1,transform:"translateY(0%)"})),Ga("void => enter",[Hr({opacity:0,transform:"translateY(-5px)"}),qa("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Gu=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Y({type:n})}}return n})();var Hu=new V("MatFormField"),vO=new V("MAT_FORM_FIELD_DEFAULT_OPTIONS"),jC=0,BC="fill",yO="auto",UC="fixed",bO="translateY(-50%)",yo=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=ts(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||yO}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){let i=this._appearance,r=e||this._defaults?.appearance||BC;this._appearance=r,this._appearance==="outline"&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||UC}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||UC}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,i,r,s,o,a,c,d){this._elementRef=e,this._changeDetectorRef=i,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=c,this._labelChild=Kw(br),this._hideRequiredMarker=!1,this.color="primary",this._appearance=BC,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${jC++}`,this._hintLabelId=`mat-mdc-hint-${jC++}`,this._subscriptAnimationState="",this._destroyed=new $,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=P(Se),this.getLabelId=ai(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=ai(()=>!!this._labelChild()),a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let i=this._control,r="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(r+e.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(r+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(ot(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),ct(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),Sd(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(ot(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let i=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,r=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,o=this._textSuffixContainer?.nativeElement,a=i?.getBoundingClientRect().width??0,c=r?.getBoundingClientRect().width??0,d=s?.getBoundingClientRect().width??0,f=o?.getBoundingClientRect().width??0,m=this._dir.value==="rtl"?"-1":"1",g=`${a+c}px`,E=`calc(${m} * (${g} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${bO} translateX(${E})
    )`;let D=a+c+d+f;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${D}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(Xt),R(z),R(Dn),R(Ae),R(vO,8),R(Yt,8),R(Q))}}static{this.\u0275cmp=se({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(i&1&&(n0(s,r._labelChild,br,5),ir(s,Gu,5),ir(s,pO,5),ir(s,$C,5),ir(s,zC,5),ir(s,NC,5)),i&2){i0();let o;Fe(o=Le())&&(r._formFieldControl=o.first),Fe(o=Le())&&(r._prefixChildren=o),Fe(o=Le())&&(r._suffixChildren=o),Fe(o=Le())&&(r._errorChildren=o),Fe(o=Le())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(i&1&&(ut($N,5),ut(WN,5),ut(qN,5),ut(GN,5),ut(HN,5),ut(OC,5),ut(VC,5),ut(LC,5)),i&2){let s;Fe(s=Le())&&(r._textField=s.first),Fe(s=Le())&&(r._iconPrefixContainer=s.first),Fe(s=Le())&&(r._textPrefixContainer=s.first),Fe(s=Le())&&(r._iconSuffixContainer=s.first),Fe(s=Le())&&(r._textSuffixContainer=s.first),Fe(s=Le())&&(r._floatingLabel=s.first),Fe(s=Le())&&(r._notchedOutline=s.first),Fe(s=Le())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){i&2&&Me("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations",r._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[We([{provide:Hu,useExisting:n},{provide:WC,useExisting:n}]),oe],ngContentSelectors:QN,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(i&1){let s=kt();zn(KN),ce(0,ZN,1,1,"ng-template",null,0,a0),N(2,"div",6,1),K("click",function(a){return Te(s),xe(r._control.onContainerClick(a))}),ce(4,JN,1,0,"div",7),N(5,"div",8),ce(6,nO,2,2,"div",9)(7,iO,3,0,"div",10)(8,rO,3,0,"div",11),N(9,"div",12),ce(10,oO,1,1,null,13),dt(11),O(),ce(12,aO,3,0,"div",14)(13,lO,3,0,"div",15),O(),ce(14,cO,1,0,"div",16),O(),N(15,"div",17),ce(16,dO,2,1,"div",18)(17,hO,5,2,"div",19),O()}if(i&2){let s;B(2),Me("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),B(2),Be(!r._hasOutline()&&!r._control.disabled?4:-1),B(2),Be(r._hasOutline()?6:-1),B(),Be(r._hasIconPrefix?7:-1),B(),Be(r._hasTextPrefix?8:-1),B(2),Be(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),B(2),Be(r._hasTextSuffix?12:-1),B(),Be(r._hasIconSuffix?13:-1),B(),Be(r._hasOutline()?-1:14),B(),Me("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic"),B(),Be((s=r._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[OC,VC,g0,LC,NC],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[_O.transitionMessages]},changeDetection:0})}}return n})(),Gn=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[wt,vt,fC,wt]})}}return n})();var qC=vn({passive:!0}),GC=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return ii;let i=gt(e),r=this._monitoredElements.get(i);if(r)return r.subject;let s=new $,o="cdk-text-field-autofilled",a=c=>{c.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(o)?(i.classList.add(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,qC),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,qC)}}),s}stopMonitoring(e){let i=gt(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static{this.\u0275fac=function(i){return new(i||n)(x(Ae),x(z))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var HC=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({})}}return n})();var EO=new V("MAT_INPUT_VALUE_ACCESSOR"),CO=["button","checkbox","file","hidden","image","radio","range","reset","submit"],IO=0,bo=(()=>{class n{get disabled(){return this._disabled}set disabled(e){this._disabled=ts(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(nt.required)??!1}set required(e){this._required=ts(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&Xp().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=ts(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,i,r,s,o,a,c,d,f,m){this._elementRef=e,this._platform=i,this.ngControl=r,this._autofillMonitor=d,this._ngZone=f,this._formField=m,this._uid=`mat-input-${IO++}`,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new $,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(E=>Xp().has(E)),this._iOSKeyupListener=E=>{let D=E.target;!D.value&&D.selectionStart===0&&D.selectionEnd===0&&(D.setSelectionRange(1,1),D.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};let g=this._elementRef.nativeElement,b=g.nodeName.toLowerCase();this._inputValueAccessor=c||g,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&f.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Vl(a,r,o,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=b==="select",this._isTextarea=b==="textarea",this._isInFormField=!!m,this._isNativeSelect&&(this.controlType=g.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){CO.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}else return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(Ae),R(Wn,10),R(qp,8),R(Fi,8),R(kC),R(EO,10),R(GC),R(z),R(Hu,8))}}static{this.\u0275dir=Y({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){i&1&&K("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),i&2&&(Si("id",r.id)("disabled",r.disabled)("required",r.required),Pe("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Me("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[We([{provide:Gu,useExisting:n}]),_t]})}}return n})(),wo=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[wt,Gn,Gn,HC,wt]})}}return n})();var TO=["*"],Ku;function xO(){if(Ku===void 0&&(Ku=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Ku=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Ku}function jl(n){return xO()?.createHTML(n)||n}function KC(n){return Error(`Unable to find icon with the name "${n}"`)}function SO(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function QC(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function YC(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var ji=class{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}},AO=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new ji(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){let o=this._sanitizer.sanitize(fn.HTML,r);if(!o)throw YC(r);let a=jl(o);return this._addSvgIconConfig(e,i,new ji("",a,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new ji(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){let s=this._sanitizer.sanitize(fn.HTML,i);if(!s)throw YC(i);let o=jl(s);return this._addSvgIconSetConfig(e,new ji("",o,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let i=this._sanitizer.sanitize(fn.RESOURCE_URL,e);if(!i)throw QC(e);let r=this._cachedIconsByUrl.get(i);return r?W(Qu(r)):this._loadSvgIconFromConfig(new ji(e,null)).pipe(ke(s=>this._cachedIconsByUrl.set(i,s)),q(s=>Qu(s)))}getNamedSvgIcon(e,i=""){let r=XC(i,e),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(e,o):Ur(KC(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?W(Qu(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(q(i=>Qu(i)))}_getSvgFromIconSetConfigs(e,i){let r=this._extractIconWithNameFromAnySet(e,i);if(r)return W(r);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Zi(a=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(fn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(d)),W(null)})));return yd(s).pipe(q(()=>{let o=this._extractIconWithNameFromAnySet(e,i);if(!o)throw KC(e);return o}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){let o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(ke(i=>e.svgText=i),q(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?W(null):this._fetchIcon(e).pipe(ke(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){let s=e.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let a=this._svgElementFromString(jl("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){let i=this._document.createElement("DIV");i.innerHTML=e;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let i=this._svgElementFromString(jl("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){let{name:o,value:a}=r[s];o!=="id"&&i.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){let{url:i,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw SO();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(fn.RESOURCE_URL,i);if(!o)throw QC(i);let a=this._inProgressUrlFetches.get(o);if(a)return a;let c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(q(d=>jl(d)),er(()=>this._inProgressUrlFetches.delete(o)),wd());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(XC(e,i),r),this}_addSvgIconSetConfig(e,i){let r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){let i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](i,e);if(s)return RO(s)?new ji(s.url,null,s.options):new ji(s,null)}}static{this.\u0275fac=function(i){return new(i||n)(x(Pi,8),x(Jm),x(Q,8),x(Wr))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Qu(n){return n.cloneNode(!0)}function XC(n,t){return n+":"+t}function RO(n){return!!(n.url&&n.options)}var DO=new V("MAT_ICON_DEFAULT_OPTIONS"),kO=new V("mat-icon-location",{providedIn:"root",factory:PO});function PO(){let n=P(Q),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var ZC=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],MO=ZC.map(n=>`[${n}]`).join(", "),NO=/^url\(['"]?#(.*?)['"]?\)$/,Yu=(()=>{class n{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(e,i,r,s,o,a){this._elementRef=e,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=St.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=e.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){let i=e.querySelectorAll(MO),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)ZC.forEach(o=>{let a=i[s],c=a.getAttribute(o),d=c?c.match(NO):null;if(d){let f=r.get(a);f||(f=[],r.set(a,f)),f.push({name:o,value:d[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(At(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(AO),$r("aria-hidden"),R(kO),R(Wr),R(DO,8))}}static{this.\u0275cmp=se({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Pe("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),$a(r.color?"mat-"+r.color:""),Me("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Ge],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Dt,oe],ngContentSelectors:TO,decls:1,vars:0,template:function(i,r){i&1&&(zn(),dt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),Xu=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[wt,wt]})}}return n})();var OO=["mat-button",""],FO=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],LO=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var VO=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var jO=["mat-icon-button",""],BO=["*"];var UO=new V("MAT_BUTTON_CONFIG");var zO=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],eI=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,i,r,s){this._elementRef=e,this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=P(_o),this._rippleLoader=P(MC),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let o=P(UO,{optional:!0}),a=e.nativeElement,c=a.classList;this.disabledInteractive=o?.disabledInteractive??!1,this.color=o?.color??null,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:f}of zO)a.hasAttribute(d)&&c.add(...f)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(i){Ls()}}static{this.\u0275dir=Y({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Ge],disabled:[2,"disabled","disabled",Ge],ariaDisabled:[2,"aria-disabled","ariaDisabled",Ge],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ge]},features:[Dt]})}}return n})();var tI=(()=>{class n extends eI{constructor(e,i,r,s){super(e,i,r,s)}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(Ae),R(z),R(Yt,8))}}static{this.\u0275cmp=se({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Pe("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),$a(r.color?"mat-"+r.color:""),Me("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[et,oe],attrs:OO,ngContentSelectors:LO,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(zn(FO),ye(0,"span",0),dt(1),N(2,"span",1),dt(3,1),O(),dt(4,2),ye(5,"span",2)(6,"span",3)),i&2&&Me("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})();var Zu=(()=>{class n extends eI{constructor(e,i,r,s){super(e,i,r,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(Ae),R(z),R(Yt,8))}}static{this.\u0275cmp=se({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Pe("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),$a(r.color?"mat-"+r.color:""),Me("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[et,oe],attrs:jO,ngContentSelectors:BO,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(zn(),ye(0,"span",0),dt(1),ye(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color, var(--mat-app-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',VO],encapsulation:2,changeDetection:0})}}return n})();var Eo=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[wt,ag,wt]})}}return n})();var $O=(n,t)=>({error:n,note:t});function WO(n,t){if(n&1&&(N(0,"div",1),G(1),O()),n&2){let e=H();ee("@fade",void 0)("ngClass",js(3,$O,e.type=="error",e.type=="note")),B(),Wa(" ",e.message," ")}}var Hn=class n{message="";duration=2500;visible=!1;type="";setValues(t,e,i=2e3){this.message=t,this.type=e,this.duration=i}ngOnInit(){this.message&&this.show()}show(){this.message&&this.type&&this.duration&&(this.visible=!0,setTimeout(()=>{this.hide()},this.duration))}hide(){this.visible=!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-notification"]],standalone:!0,features:[oe],decls:1,vars:1,consts:[["class","notification",3,"ngClass",4,"ngIf"],[1,"notification",3,"ngClass"]],template:function(e,i){e&1&&ce(0,WO,2,6,"div",0),e&2&&ee("ngIf",i.visible)},dependencies:[vt,Gr,li],styles:[".notification[_ngcontent-%COMP%]{position:fixed;top:20px;left:50%;transform:translate(-50%);color:#fff;padding:15px;border-radius:5px;z-index:1000;box-shadow:0 2px 10px #0003}.error[_ngcontent-%COMP%]{background-color:#f44336}.note[_ngcontent-%COMP%]{background-color:#bf5ea5}"],data:{animation:[jd("fade",[Ga(":enter",[Hr({opacity:0}),qa("300ms",Hr({opacity:1}))]),Ga(":leave",[qa("300ms",Hr({opacity:0}))])])]}})};var wr=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-loader"]],standalone:!0,features:[oe],decls:1,vars:0,consts:[[1,"loader"]],template:function(e,i){e&1&&ye(0,"div",0)},styles:['.loader[_ngcontent-%COMP%]{width:50px;aspect-ratio:1;display:grid;-webkit-mask:conic-gradient(from 15deg,rgba(0,0,0,0),#000);animation:_ngcontent-%COMP%_l26 1s infinite steps(12)}.loader[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{background:radial-gradient(closest-side at 50% 12.5%,#f03355 96%,#0000) 50% 0/20% 80% repeat-y,radial-gradient(closest-side at 12.5% 50%,#f03355 96%,#0000) 0 50%/80% 20% repeat-x}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{content:"";grid-area:1/1;transform:rotate(30deg)}.loader[_ngcontent-%COMP%]:after{transform:rotate(60deg)}@keyframes _ngcontent-%COMP%_l26{to{transform:rotate(1turn)}}']})};var Ju=class{constructor(t,e,i,r,s,o){this.displayName=t;this.email=e;this.localId=i;this._token=r;this._refreshToken=s;this._expiresIn=o}get token(){return!this._expiresIn||this._expiresIn<new Date?null:this._token}};var Co=class n{url="https://us-central1-taskboard-eb7da.cloudfunctions.net/api";constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var an=class n{http=P(Pi);dataService=P(Co);router=P(Pt);user;getUser(){if(!this.user){let t=localStorage.getItem("user");t&&(this.user=JSON.parse(t))}}handleUser(t){let e=new Date().getTime()+ +t.expiresIn*1e3,i=new Date(e),r=new Ju(t.displayName,t.email,t.localId,t.idToken,t.refreshToken,i);this.user=r,console.log(r),localStorage.setItem("user",JSON.stringify(r)),this.user=r}register(t,e){let i={email:t.trim(),password:e.trim(),login:"Ann",returnSecureToken:!0};return this.http.post(`${this.dataService.url}/user/register`,i).pipe(ke(r=>{this.handleUser(r)}))}login(t,e){let i={email:t.trim(),password:e.trim(),returnSecureToken:!0};return this.http.post(`${this.dataService.url}/user/login`,i).pipe(ke(r=>{this.handleUser(r)}))}logout(){localStorage.removeItem("user"),this.user=null,this.router.navigate(["/login"])}constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var Io=class n{errors=[{error:"EMAIL_EXISTS",message:"The email address is already in use by another account."},{error:"OPERATION_NOT_ALLOWED",message:"Password sign-in is disabled for this project."},{error:"TOO_MANY_ATTEMPTS_TRY_LATER",message:"We have blocked all requests from this device due to unusual activity. Try again later."},{error:"EMAIL_NOT_FOUND",message:"There is no user record corresponding to this identifier. The user may have been deleted."},{error:"INVALID_PASSWORD",message:"The password is invalid or the user does not have a password."},{error:"USER_DISABLED",message:"The user account has been disabled by an administrator."},{error:"INVALID_LOGIN_CREDENTIALS",message:"The password or email is invalid"}];constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};var qO="firebase",GO="10.14.1";He(qO,GO,"app");var Jt=new Bs("ANGULARFIRE2_VERSION");function xo(n,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===e);if(s.length===1)return s[0]}return e.container.getProvider(n).getImmediate({optional:!0})}var os=(n,t)=>{let e=t?[t]:Qd(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},yn=class{constructor(){return os(HO)}},HO="app-check";function To(){}var eh=class{zone;delegate;constructor(t,e=xw){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,i)}},hg=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",To,{},To,To)),e.pipe(ke({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Pn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new eh(Zone.current)),this.insideAngular=e.run(()=>new eh(Zone.current,gd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(x(z))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function th(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function KO(n){return th().ngZone.runOutsideAngular(()=>n())}function ss(n){return th().ngZone.run(()=>n())}function gi(n){return QO(th())(n)}function QO(n){return function(e){return e=e.lift(new hg(n.ngZone)),e.pipe(Br(n.outsideAngular),Xi(n.insideAngular))}}var YO=(n,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),ss(()=>n.apply(void 0,i))},Er=(n,t)=>function(){let e,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(t&&(e||=ss(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",To,{},To,To))),i[s]=YO(i[s],e));let r=KO(()=>n.apply(this,i));if(!t)if(r instanceof Ye){let s=th();return r.pipe(Br(s.outsideAngular),Xi(s.insideAngular))}else return ss(()=>r);return r instanceof Ye?r.pipe(gi):r instanceof Promise?ss(()=>new Promise((s,o)=>r.then(a=>ss(()=>s(a)),a=>ss(()=>o(a))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:ss(()=>r)};var XO="firebase",ZO="10.14.1";on.registerVersion(XO,ZO,"app-compat");var JO=["ngOnDestroy"],rI=(n,t,e,i={})=>new Proxy(n,{get:(r,s)=>e.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(JO.indexOf(s)>-1)return()=>{};let o=t.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(d=>e.run(()=>d)):e.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,d)=>o.then(f=>{let m=f?.(...d);return i?.spy?.apply&&i.spy.apply(s,d,m),m})})})});var nh=class{constructor(t){return t}},So=new V("angularfire2.app.options"),Ao=new V("angularfire2.app.name");function Bl(n,t,e){let i=typeof e=="string"&&e||"[DEFAULT]",r=typeof e=="object"&&e||{};r.name=r.name||i;let o=on.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>on.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;e1("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new nh(o)}var e1=(n,...t)=>{Fm()&&typeof console<"u"&&console[n](...t)},t1={provide:nh,useFactory:Bl,deps:[So,z,[new Ze,Ao]]},sI=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:So,useValue:e},{provide:Ao,useValue:i}]}}constructor(e){on.registerVersion("angularfire",Jt.full,"core"),on.registerVersion("angularfire",Jt.full,"app-compat"),on.registerVersion("angular",Rd.full,e.toString())}static \u0275fac=function(i){return new(i||n)(x(Rt))};static \u0275mod=J({type:n});static \u0275inj=Z({providers:[t1]})}return n})();function ih(n,t,e,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return n1(r,o)||(iI("error",`${t} was already initialized on the ${e} Firebase App with different settings.${i1?" You may need to reload as Firebase is not HMR aware.":""}`),iI("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function n1(n,t){try{return n.toString()===t.toString()}catch{return n===t}}var i1=typeof module<"u"&&!!module.hot,iI=(n,...t)=>{Fm()&&typeof console<"u"&&console[n](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var Qn=class{constructor(t){return t}},Bi=class{constructor(){return Qd()}};function r1(n){return n&&n.length===1?n[0]:new Qn(ar())}var fg=new V("angularfire2._apps"),s1={provide:Qn,useFactory:r1,deps:[[new Ze,fg]]},o1={provide:Bi,deps:[[new Ze,fg]]};function a1(n){return(t,e)=>{let i=e.get(Rt);He("angularfire",Jt.full,"core"),He("angularfire",Jt.full,"app"),He("angular",Rd.full,i.toString());let r=t.runOutsideAngular(()=>n(e));return new Qn(r)}}function oI(n,...t){return Qt([s1,o1,{provide:fg,useFactory:a1(n),multi:!0,deps:[z,Se,Pn,...t]}])}var aI=Er(C0,!0);var l1=new Map,c1={activated:!1,tokenObservers:[]},d1={initialized:!1,enabled:!1};function Yn(n){return l1.get(n)||Object.assign({},c1)}function hI(){return d1}var u1="https://content-firebaseappcheck.googleapis.com/v1";var h1="exchangeDebugToken",lI={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},NG=24*60*60*1e3;var pg=class{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return lt(this,null,function*(){this.stop();try{this.pending=new ht,this.pending.promise.catch(e=>{}),yield f1(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new ht,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function f1(n){return new Promise(t=>{setTimeout(t,n)})}var m1={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Cr=new E0("appCheck","AppCheck",m1);function fI(n){if(!Yn(n).activated)throw Cr.create("use-before-activation",{appName:n.name})}function mI(i,r){return lt(this,arguments,function*({url:n,body:t},e){let s={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){let b=yield o.getHeartbeatsHeader();b&&(s["X-Firebase-Client"]=b)}let a={method:"POST",body:JSON.stringify(t),headers:s},c;try{c=yield fetch(n,a)}catch(b){throw Cr.create("fetch-network-error",{originalErrorMessage:b?.message})}if(c.status!==200)throw Cr.create("fetch-status-error",{httpStatus:c.status});let d;try{d=yield c.json()}catch(b){throw Cr.create("fetch-parse-error",{originalErrorMessage:b?.message})}let f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Cr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let m=Number(f[1])*1e3,g=Date.now();return{token:d.token,expireTimeMillis:g+m,issuedAtTimeMillis:g}})}function pI(n,t){let{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${u1}/projects/${e}/apps/${i}:${h1}?key=${r}`,body:{debug_token:t}}}var p1="firebase-app-check-database",g1=1,gg="firebase-app-check-store";var rh=null;function _1(){return rh||(rh=new Promise((n,t)=>{try{let e=indexedDB.open(p1,g1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Cr.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},e.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(gg,{keyPath:"compositeKey"})}}}catch(e){t(Cr.create("storage-open",{originalErrorMessage:e?.message}))}}),rh)}function v1(n,t){return y1(b1(n),t)}function y1(n,t){return lt(this,null,function*(){let i=(yield _1()).transaction(gg,"readwrite"),s=i.objectStore(gg).put({compositeKey:n,value:t});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var d;a(Cr.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})})}function b1(n){return`${n.options.appId}-${n.name}`}var _g=new ui("@firebase/app-check");function mg(n,t){return Lm()?v1(n,t).catch(e=>{_g.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function gI(){return hI().enabled}function _I(){return lt(this,null,function*(){let n=hI();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var w1={error:"UNKNOWN_ERROR"};function E1(n){return $s.encodeString(JSON.stringify(n),!1)}function vg(n,t=!1){return lt(this,null,function*(){let e=n.app;fI(e);let i=Yn(e),r=i.token,s;if(r&&!Ul(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(Ul(c)?r=c:yield mg(e,void 0))}if(!t&&r&&Ul(r))return{token:r.token};let o=!1;if(gI()){i.exchangeTokenPromise||(i.exchangeTokenPromise=mI(pI(e,yield _I()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let c=yield i.exchangeTokenPromise;return yield mg(e,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield Yn(e).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?_g.warn(c.message):_g.error(c),s=c}let a;return r?s?Ul(r)?a={token:r.token,internalError:s}:a=dI(s):(a={token:r.token},i.token=r,yield mg(e,r)):a=dI(s),o&&x1(e,a),a})}function C1(n){return lt(this,null,function*(){let t=n.app;fI(t);let{provider:e}=Yn(t);if(gI()){let i=yield _I(),{token:r}=yield mI(pI(t,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield e.getToken();return{token:i}}})}function I1(n,t,e,i){let{app:r}=n,s=Yn(r),o={next:e,error:i,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ul(s.token)){let a=s.token;Promise.resolve().then(()=>{e({token:a.token}),cI(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>cI(n))}function vI(n,t){let e=Yn(n),i=e.tokenObservers.filter(r=>r.next!==t);i.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function cI(n){let{app:t}=n,e=Yn(t),i=e.tokenRefresher;i||(i=T1(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function T1(n){let{app:t}=n;return new pg(()=>lt(this,null,function*(){let e=Yn(t),i;if(e.token?i=yield vg(n,!0):i=yield vg(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let e=Yn(t);if(e.token){let i=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,r=e.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},lI.RETRIAL_MIN_WAIT,lI.RETRIAL_MAX_WAIT)}function x1(n,t){let e=Yn(n).tokenObservers;for(let i of e)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function Ul(n){return n.expireTimeMillis-Date.now()>0}function dI(n){return{token:E1(w1),error:n}}var yg=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=Yn(this.app);for(let e of t)vI(this.app,e.next);return Promise.resolve()}};function S1(n,t){return new yg(n,t)}function A1(n){return{getToken:t=>vg(n,t),getLimitedUseToken:()=>C1(n),addTokenListener:t=>I1(n,"INTERNAL",t),removeTokenListener:t=>vI(n.app,t)}}var R1="@firebase/app-check",D1="0.8.8";var k1="app-check",uI="app-check-internal";function P1(){Ri(new mn(k1,n=>{let t=n.getProvider("app").getImmediate(),e=n.getProvider("heartbeat");return S1(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(uI).initialize()})),Ri(new mn(uI,n=>{let t=n.getProvider("app-check").getImmediate();return A1(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),He(R1,D1)}P1();var M1=["localhost","0.0.0.0","127.0.0.1"],GG=typeof window<"u"&&M1.includes(window.location.hostname);var bg=new V("angularfire2.auth.use-emulator"),wg=new V("angularfire2.auth.settings"),Eg=new V("angularfire2.auth.tenant-id"),Cg=new V("angularfire2.auth.langugage-code"),Ig=new V("angularfire2.auth.use-device-language"),Tg=new V("angularfire.auth.persistence"),xg=(n,t,e,i,r,s,o,a)=>ih(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=t.runOutsideAngular(()=>n.auth());if(e&&c.useEmulator(...e),i&&(c.tenantId=i),c.languageCode=r,s&&c.useDeviceLanguage(),o)for(let[d,f]of Object.entries(o))c.settings[d]=f;return a&&c.setPersistence(a),c},[e,i,r,s,o,a]),bI=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,s,o,a,c,d,f,m,g,b){let E=new $,D=W(void 0).pipe(Xi(o.outsideAngular),$e(()=>s.runOutsideAngular(()=>import("./chunk-G5YIBF5W.js"))),q(()=>Bl(e,s,i)),q(M=>xg(M,s,a,d,f,m,c,g)),Ns({bufferSize:1,refCount:!1}));if(zs(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=W(null);else{D.pipe(ri()).subscribe();let M=D.pipe($e(U=>U.getRedirectResult().then(Ie=>Ie,()=>null)),gi,Ns({bufferSize:1,refCount:!1})),ne=D.pipe($e(U=>new Ye(Ie=>({unsubscribe:s.runOutsideAngular(()=>U.onAuthStateChanged(Qe=>Ie.next(Qe),Qe=>Ie.error(Qe),()=>Ie.complete()))})))),te=D.pipe($e(U=>new Ye(Ie=>({unsubscribe:s.runOutsideAngular(()=>U.onIdTokenChanged(Qe=>Ie.next(Qe),Qe=>Ie.error(Qe),()=>Ie.complete()))}))));this.authState=M.pipe(Dm(ne),Br(o.outsideAngular),Xi(o.insideAngular)),this.user=M.pipe(Dm(te),Br(o.outsideAngular),Xi(o.insideAngular)),this.idToken=this.user.pipe($e(U=>U?mt(U.getIdToken()):W(null))),this.idTokenResult=this.user.pipe($e(U=>U?mt(U.getIdTokenResult()):W(null))),this.credential=ct(M,E,this.authState.pipe(Xe(U=>!U))).pipe(q(U=>U?.user?U:null),Br(o.outsideAngular),Xi(o.insideAngular))}return rI(this,D,s,{spy:{apply:(M,ne,te)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&te.then(U=>E.next(U))}}})}static \u0275fac=function(i){return new(i||n)(x(So),x(Ao,8),x(Rt),x(z),x(Pn),x(bg,8),x(wg,8),x(Eg,8),x(Cg,8),x(Ig,8),x(Tg,8),x(yn,8))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var wI="@firebase/database",EI="1.0.8";var V_="";function j_(n){V_=n}var Ng=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),fe(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:sr(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Og=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return at(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var JI=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Ng(t)}}catch{}return new Og},ls=JI("localStorage"),Fg=JI("sessionStorage");var Po=new ui("@firebase/database"),eT=function(){let n=1;return function(){return n++}}(),tT=function(n){let t=Hd(n),e=new Gd;e.update(t);let i=e.digest();return $s.encodeByteArray(i)},uc=function(...n){let t="";for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=uc.apply(null,i):typeof i=="object"?t+=fe(i):t+=i,t+=" "}return t},cs=null,CI=!0,nT=function(n,t){S(!t||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Po.logLevel=or.VERBOSE,cs=Po.log.bind(Po),t&&Fg.set("logging_enabled",!0)):typeof n=="function"?cs=n:(cs=null,Fg.remove("logging_enabled"))},Ct=function(...n){if(CI===!0&&(CI=!1,cs===null&&Fg.get("logging_enabled")===!0&&nT(!0)),cs){let t=uc.apply(null,n);cs(t)}},hc=function(n){return function(...t){Ct(n,...t)}},Lg=function(...n){let t="FIREBASE INTERNAL ERROR: "+uc(...n);Po.error(t)},yi=function(...n){let t=`FIREBASE FATAL ERROR: ${uc(...n)}`;throw Po.error(t),new Error(t)},$t=function(...n){let t="FIREBASE WARNING: "+uc(...n);Po.warn(t)},O1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$t("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ph=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},F1=function(n){if(pt()||document.readyState==="complete")n();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Sr="[MIN_NAME]",Ui="[MAX_NAME]",us=function(n,t){if(n===t)return 0;if(n===Sr||t===Ui)return-1;if(t===Sr||n===Ui)return 1;{let e=II(n),i=II(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},L1=function(n,t){return n===t?0:n<t?-1:1},zl=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+fe(t))},B_=function(n){if(typeof n!="object"||n===null)return fe(n);let t=[];for(let i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=fe(t[i]),e+=":",e+=B_(n[t[i]]);return e+="}",e},iT=function(n,t){let e=n.length;if(e<=t)return[n];let i=[];for(let r=0;r<e;r+=t)r+t>e?i.push(n.substring(r,e)):i.push(n.substring(r,r+t));return i};function It(n,t){for(let e in n)n.hasOwnProperty(e)&&t(e,n[e])}var rT=function(n){S(!Ph(n),"Invalid JSON number");let t=11,e=52,i=(1<<t-1)-1,r,s,o,a,c;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,e-a)-Math.pow(2,e))):(s=0,o=Math.round(n/Math.pow(2,1-i-e))));let d=[];for(c=e;c;c-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();let f=d.join(""),m="";for(c=0;c<64;c+=8){let g=parseInt(f.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),m=m+g}return m.toLowerCase()},V1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},j1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function B1(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");let i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}var U1=new RegExp("^-?(0*)\\d{1,10}$"),z1=-2147483648,$1=2147483647,II=function(n){if(U1.test(n)){let t=Number(n);if(t>=z1&&t<=$1)return t}return null},Uo=function(n){try{n()}catch(t){setTimeout(()=>{let e=t.stack||"";throw $t("Exception was thrown by user callback.",e),t},Math.floor(0))}},W1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Gl=function(n,t){let e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var Vg=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){$t(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var jg=class{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$t(t)}},Hl=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),oh="5",sT="v",oT="s",aT="r",lT="f",cT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,dT="ls",uT="p",Bg="ac",hT="websocket",fT="long_polling";var ah=class{constructor(t,e,i,r,s=!1,o="",a=!1,c=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ls.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ls.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function q1(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function mT(n,t,e){S(typeof t=="string","typeof type must == string"),S(typeof e=="object","typeof params must == object");let i;if(t===hT)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===fT)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);q1(n)&&(e.ns=n.namespace);let r=[];return It(e,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var Ug=class{constructor(){this.counters_={}}incrementCounter(t,e=1){at(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return Ud(this.counters_)}};var Sg={},Ag={};function U_(n){let t=n.toString();return Sg[t]||(Sg[t]=new Ug),Sg[t]}function G1(n,t){let e=n.toString();return Ag[e]||(Ag[e]=t()),Ag[e]}var zg=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Uo(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var TI="start",H1="close",K1="pLPCommand",Q1="pRTLPCB",pT="id",gT="pw",_T="ser",Y1="cb",X1="seg",Z1="ts",J1="d",eF="dframe",vT=1870,yT=30,tF=vT-yT,nF=25e3,iF=3e4,Xl=class n{constructor(t,e,i,r,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hc(t),this.stats_=U_(e),this.urlFn=c=>(this.appCheckToken&&(c[Bg]=this.appCheckToken),mT(e,fT,c))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new zg(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(iF)),F1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $g((...s)=>{let[o,a,c,d,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===TI)this.id=a,this.password=c;else if(o===H1)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[TI]="t",i[_T]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Y1]=this.scriptTagHolder.uniqueCallbackIdentifier),i[sT]=oh,this.transportSessionId&&(i[oT]=this.transportSessionId),this.lastSessionId&&(i[dT]=this.lastSessionId),this.applicationId&&(i[uT]=this.applicationId),this.appCheckToken&&(i[Bg]=this.appCheckToken),typeof location<"u"&&location.hostname&&cT.test(location.hostname)&&(i[aT]=lT);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return pt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!V1()&&!j1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=fe(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let i=Bd(e),r=iT(i,tF);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(pt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[eF]="t",i[pT]=t,i[gT]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=fe(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},$g=class n{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,pt())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=eT(),window[K1+this.uniqueCallbackIdentifier]=t,window[Q1+this.uniqueCallbackIdentifier]=e,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ct("frame writing exception"),a.stack&&Ct(a.stack),Ct(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Ct("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[pT]=this.myID,t[gT]=this.myPW,t[_T]=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+yT+i.length<=vT;){let o=this.pendingSegs.shift();i=i+"&"+X1+r+"="+o.seg+"&"+Z1+r+"="+o.ts+"&"+J1+r+"="+o.d,r++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(nF)),s=()=>{clearTimeout(r),i()};this.addTag(t,s)}addTag(t,e){pt()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Ct("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var rF=16384,sF=45e3,lh=null;typeof MozWebSocket<"u"?lh=MozWebSocket:typeof WebSocket<"u"&&(lh=WebSocket);var Do=(()=>{class n{constructor(e,i,r,s,o,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hc(this.connId),this.stats_=U_(i),this.connURL=n.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,o){let a={};return a[sT]=oh,!pt()&&typeof location<"u"&&location.hostname&&cT.test(location.hostname)&&(a[aT]=lT),i&&(a[oT]=i),r&&(a[dT]=r),s&&(a[Bg]=s),o&&(a[uT]=o),mT(e,hT,a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ls.set("previous_websocket_failure",!0);try{let r;if(pt()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${oh}/${V_}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new lh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&lh!==null&&!n.forceDisallow_}static previouslyFailed(){return ls.isInMemoryStorage||ls.get("previous_websocket_failure")===!0}markConnectionHealthy(){ls.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=sr(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){let i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();let i=fe(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=iT(i,rF);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(sF))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),bT=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Xl,Do]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let i=Do&&Do.isAvailable(),r=i&&!Do.previouslyFailed();if(e.webSocketOnly&&(i||$t("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Do];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),oF=6e4,aF=5e3,lF=10*1024,cF=100*1024,Rg="t",xI="d",dF="s",SI="r",uF="e",AI="o",RI="a",DI="n",kI="p",hF="h",Wg=class{constructor(t,e,i,r,s,o,a,c,d,f){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hc("c:"+this.id+":"),this.transportManager_=new bT(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Gl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>cF?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>lF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Rg in t){let e=t[Rg];e===RI?this.upgradeIfSecondaryHealthy_():e===SI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===AI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=zl("t",t),i=zl("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:kI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:RI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:DI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=zl("t",t),i=zl("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=zl(Rg,t);if(xI in t){let i=t[xI];if(e===hF){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(e===DI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===dF?this.onConnectionShutdown_(i):e===SI?this.onReset_(i):e===uF?Lg("Server Error: "+i):e===AI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Lg("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),oh!==i&&$t("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Gl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(oF))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(aF))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:kI,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ls.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ch=class{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}};var dh=class{constructor(t){this.allowedEvents_=t,this.listeners_={},S(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});let r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(t){S(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var uh=class n extends dh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qs()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(t){return S(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var PI=32,MI=768,Ce=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function Ee(){return new Ce("")}function ue(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ar(n){return n.pieces_.length-n.pieceNum_}function Ve(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Ce(n.pieces_,t)}function z_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function fF(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function Zl(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function wT(n){if(n.pieceNum_>=n.pieces_.length)return null;let t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Ce(t,0)}function Ke(n,t){let e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Ce)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Ce(e,0)}function he(n){return n.pieceNum_>=n.pieces_.length}function en(n,t){let e=ue(n),i=ue(t);if(e===null)return t;if(e===i)return en(Ve(n),Ve(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function mF(n,t){let e=Zl(n,0),i=Zl(t,0);for(let r=0;r<e.length&&r<i.length;r++){let s=us(e[r],i[r]);if(s!==0)return s}return e.length===i.length?0:e.length<i.length?-1:1}function $_(n,t){if(Ar(n)!==Ar(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Mn(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Ar(n)>Ar(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}var qg=class{constructor(t,e){this.errorPrefix_=e,this.parts_=Zl(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=di(this.parts_[i]);ET(this)}};function pF(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=di(t),ET(n)}function gF(n){let t=n.parts_.pop();n.byteLength_-=di(t),n.parts_.length>0&&(n.byteLength_-=1)}function ET(n){if(n.byteLength_>MI)throw new Error(n.errorPrefix_+"has a key path longer than "+MI+" bytes ("+n.byteLength_+").");if(n.parts_.length>PI)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+PI+") or object contains a cycle "+as(n))}function as(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Gg=class n extends dh{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(t){return S(t==="visible","Unknown event type: "+t),[this.visible_]}};var $l=1e3,_F=60*5*1e3,NI=30*1e3,vF=1.3,yF=3e4,bF="server_kill",OI=3,W_=(()=>{class n extends ch{constructor(e,i,r,s,o,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=n.nextPersistentConnectionId_++,this.log_=hc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$l,this.maxReconnectDelay_=_F,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!pt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Gg.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&uh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){let s=++this.requestNumber_,o={r:s,a:e,b:i};this.log_(fe(o)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();let i=new ht,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(e,i,r,s){this.initConnection_();let o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){let i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){let i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,c=>{let d=c.d,f=c.s;n.warnOnListenWarnings_(d,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(f,d))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&at(e,"w")){let r=Zt(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();$t(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Wd(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=NI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,i=$d(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let i=e.s,r=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){let r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);let o={p:e},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(e){let i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){let i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+fe(e));let i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):Lg("Unrecognized action received from server: "+fe(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>yF&&(this.reconnectDelay_=$l),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*vF)}this.onConnectStatus_(!1)}establishConnection_(){return lt(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,d=function(){c?c.close():(a=!0,r())},f=function(g){S(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:d,sendRequest:f};let m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,b]=yield Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?Ct("getToken() completed but was canceled"):(Ct("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=b&&b.token,c=new Wg(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,r,E=>{$t(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(bF)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&$t(g),d())}}})}interrupt(e){Ct("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ct("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Kr(this.interruptReasons_)&&(this.reconnectDelay_=$l,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;i?r=i.map(o=>B_(o)).join("$"):r="default";let s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){let r=new Ce(e).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Ct("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=OI&&(this.reconnectDelay_=NI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Ct("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=OI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},i="js";pt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),e["sdk."+i+"."+V_.replace(/\./g,"-")]=1,qs()?e["framework.cordova"]=1:zd()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=uh.getInstance().currentlyOnline();return Kr(this.interruptReasons_)&&e}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),me=class n{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new n(t,e)}};var Mo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let i=new me(Sr,t),r=new me(Sr,e);return this.compare(i,r)!==0}minPost(){return me.MIN}};var sh,hh=class extends Mo{static get __EMPTY_NODE(){return sh}static set __EMPTY_NODE(t){sh=t}compare(t,e){return us(t.name,e.name)}isDefinedOn(t){throw An("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return me.MIN}maxPost(){return new me(Ui,sh)}makePost(t,e){return S(typeof t=="string","KeyIndex indexValue must always be a string."),new me(t,sh)}toString(){return".key"}},vi=new hh;var ko=class{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?i(t.key,e):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Xn=(()=>{class n{constructor(e,i,r,s,o){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Nn.EMPTY_NODE,this.right=o??Nn.EMPTY_NODE}copy(e,i,r,s,o){return new n(e??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this,o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(e,r.key)===0){if(r.right.isEmpty())return Nn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Hg=class{copy(t,e,i,r,s){return this}insert(t,e,i){return new Xn(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Nn=class n{constructor(t,e=n.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Xn.BLACK,null,null))}remove(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Xn.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new ko(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new ko(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new ko(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new ko(this.root_,null,this.comparator_,!0,t)}};Nn.EMPTY_NODE=new Hg;function wF(n,t){return us(n.name,t.name)}function q_(n,t){return us(n,t)}var Kg;function EF(n){Kg=n}var CT=function(n){return typeof n=="number"?"number:"+rT(n):"string:"+n},IT=function(n){if(n.isLeafNode()){let t=n.val();S(typeof t=="string"||typeof t=="number"||typeof t=="object"&&at(t,".sv"),"Priority must be a string or number.")}else S(n===Kg||n.isEmpty(),"priority of unexpected type.");S(n===Kg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var FI,No=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),IT(this.priorityNode_)}static set __childrenNodeConstructor(e){FI=e}static get __childrenNodeConstructor(){return FI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return he(e)?this:ue(e)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){let r=ue(e);return r===null?i:i.isEmpty()&&r!==".priority"?this:(S(r!==".priority"||Ar(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ve(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+CT(this.priorityNode_.val())+":");let i=typeof this.value_;e+=i+":",i==="number"?e+=rT(this.value_):e+=this.value_,this.lazyHash_=tT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return S(s>=0,"Unknown leaf type: "+i),S(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),TT,xT;function CF(n){TT=n}function IF(n){xT=n}var Qg=class extends Mo{compare(t,e){let i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return s===0?us(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return me.MIN}maxPost(){return new me(Ui,new No("[PRIORITY-POST]",xT))}makePost(t,e){let i=TT(t);return new me(e,new No("[PRIORITY-POST]",i))}toString(){return".priority"}},Ue=new Qg;var TF=Math.log(2),Yg=class{constructor(t){let e=s=>parseInt(Math.log(s)/TF,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},fh=function(n,t,e,i){n.sort(t);let r=function(c,d){let f=d-c,m,g;if(f===0)return null;if(f===1)return m=n[c],g=e?e(m):m,new Xn(g,m.node,Xn.BLACK,null,null);{let b=parseInt(f/2,10)+c,E=r(c,b),D=r(b+1,d);return m=n[b],g=e?e(m):m,new Xn(g,m.node,Xn.BLACK,E,D)}},s=function(c){let d=null,f=null,m=n.length,g=function(E,D){let M=m-E,ne=m;m-=E;let te=r(M+1,ne),U=n[M],Ie=e?e(U):U;b(new Xn(Ie,U.node,D,null,te))},b=function(E){d?(d.left=E,d=E):(f=E,d=E)};for(let E=0;E<c.count;++E){let D=c.nextBitIsOne(),M=Math.pow(2,c.count-(E+1));D?g(M,Xn.BLACK):(g(M,Xn.BLACK),g(M,Xn.RED))}return f},o=new Yg(n.length),a=s(o);return new Nn(i||t,a)};var Dg,Ro={},Oo=class n{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return S(Ro&&Ue,"ChildrenNode.ts has not been loaded"),Dg=Dg||new n({".priority":Ro},{".priority":Ue}),Dg}get(t){let e=Zt(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Nn?e:null}hasIndex(t){return at(this.indexSet_,t.toString())}addIndex(t,e){S(t!==vi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=e.getIterator(me.Wrap),o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=fh(i,t.getCompare()):a=Ro;let c=t.toString(),d=Object.assign({},this.indexSet_);d[c]=t;let f=Object.assign({},this.indexes_);return f[c]=a,new n(f,d)}addToIndexes(t,e){let i=ci(this.indexes_,(r,s)=>{let o=Zt(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),r===Ro)if(o.isDefinedOn(t.node)){let a=[],c=e.getIterator(me.Wrap),d=c.getNext();for(;d;)d.name!==t.name&&a.push(d),d=c.getNext();return a.push(t),fh(a,o.getCompare())}else return Ro;else{let a=e.get(t.name),c=r;return a&&(c=c.remove(new me(t.name,a))),c.insert(t,t.node)}});return new n(i,this.indexSet_)}removeFromIndexes(t,e){let i=ci(this.indexes_,r=>{if(r===Ro)return r;{let s=e.get(t.name);return s?r.remove(new me(t.name,s)):r}});return new n(i,this.indexSet_)}};var Wl,ae=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&IT(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Wl||(Wl=new n(new Nn(q_),null,Oo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Wl}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let i=this.children_.get(e);return i===null?Wl:i}}getChild(e){let i=ue(e);return i===null?this:this.getImmediateChild(i).getChild(Ve(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(S(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{let r=new me(e,i),s,o;i.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?Wl:this.priorityNode_;return new n(s,a,o)}}updateChild(e,i){let r=ue(e);if(r===null)return i;{S(ue(e)!==".priority"||Ar(e)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(Ve(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(Ue,(a,c)=>{i[a]=c.val(e),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+CT(this.getPriority().val())+":"),this.forEachChild(Ue,(i,r)=>{let s=r.hash();s!==""&&(e+=":"+i+":"+s)}),this.lazyHash_=e===""?"":tT(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new me(e,i));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){let i=this.getFirstChildName(e);return i?new me(i,this.children_.get(i)):null}getLastChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){let i=this.getLastChildName(e);return i?new me(i,this.children_.get(i)):null}forEachChild(e,i){let r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{let s=this.children_.getIteratorFrom(e.name,me.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{let s=this.children_.getReverseIteratorFrom(e.name,me.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fc?-1:0}withIndex(e){if(e===vi||this.indexMap_.hasIndex(e))return this;{let i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===vi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Ue),s=i.getIterator(Ue),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===vi?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Xg=class extends ae{constructor(){super(new Nn(q_),ae.EMPTY_NODE,Oo.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ae.EMPTY_NODE}isEmpty(){return!1}},fc=new Xg;Object.defineProperties(me,{MIN:{value:new me(Sr,ae.EMPTY_NODE)},MAX:{value:new me(Ui,fc)}});hh.__EMPTY_NODE=ae.EMPTY_NODE;No.__childrenNodeConstructor=ae;EF(fc);IF(fc);var xF=!0;function it(n,t=null){if(n===null)return ae.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),S(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let e=n;return new No(e,it(t))}if(!(n instanceof Array)&&xF){let e=[],i=!1;if(It(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=it(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),e.push(new me(o,c)))}}),e.length===0)return ae.EMPTY_NODE;let s=fh(e,wF,o=>o.name,q_);if(i){let o=fh(e,Ue.getCompare());return new ae(s,it(t),new Oo({".priority":o},{".priority":Ue}))}else return new ae(s,it(t),Oo.Default)}else{let e=ae.EMPTY_NODE;return It(n,(i,r)=>{if(at(n,i)&&i.substring(0,1)!=="."){let s=it(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(it(t))}}CF(it);var Jl=class extends Mo{constructor(t){super(),this.indexPath_=t,S(!he(t)&&ue(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return s===0?us(t.name,e.name):s}makePost(t,e){let i=it(t),r=ae.EMPTY_NODE.updateChild(this.indexPath_,i);return new me(e,r)}maxPost(){let t=ae.EMPTY_NODE.updateChild(this.indexPath_,fc);return new me(Ui,t)}toString(){return Zl(this.indexPath_,0).join("/")}};var Zg=class extends Mo{compare(t,e){let i=t.node.compareTo(e.node);return i===0?us(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return me.MIN}maxPost(){return me.MAX}makePost(t,e){let i=it(t);return new me(e,i)}toString(){return".value"}},G_=new Zg;function ST(n){return{type:"value",snapshotNode:n}}function Fo(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function ec(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function tc(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function SF(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}var nc=class{constructor(t){this.index_=t}updateChild(t,e,i,r,s,o){S(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(e);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?t.hasChild(e)?o.trackChildChange(ec(e,a)):S(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Fo(e,i)):o.trackChildChange(tc(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(Ue,(r,s)=>{e.hasChild(r)||i.trackChildChange(ec(r,s))}),e.isLeafNode()||e.forEachChild(Ue,(r,s)=>{if(t.hasChild(r)){let o=t.getImmediateChild(r);o.equals(s)||i.trackChildChange(tc(r,s,o))}else i.trackChildChange(Fo(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?ae.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var mh=class n{constructor(t){this.indexedFilter_=new nc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=n.getStartPost_(t),this.endPost_=n.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,o){return this.matches(new me(e,i))||(i=ae.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,o)}updateFullNode(t,e,i){e.isLeafNode()&&(e=ae.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(ae.EMPTY_NODE);let s=this;return e.forEachChild(Ue,(o,a)=>{s.matches(new me(o,a))||(r=r.updateImmediateChild(o,ae.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}};var Jg=class{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{let i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new mh(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,o){return this.rangedFilter_.matches(new me(e,i))||(i=ae.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,o):this.fullLimitUpdateChild_(t,e,i,s,o)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=ae.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){r=ae.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=e.withIndex(this.index_),r=r.updatePriority(ae.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let o;if(this.reverse_){let m=this.index_.getCompare();o=(g,b)=>m(b,g)}else o=this.index_.getCompare();let a=t;S(a.numChildren()===this.limit_,"");let c=new me(e,i),d=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(a.hasChild(e)){let m=a.getImmediateChild(e),g=r.getChildAfterChild(this.index_,d,this.reverse_);for(;g!=null&&(g.name===e||a.hasChild(g.name));)g=r.getChildAfterChild(this.index_,g,this.reverse_);let b=g==null?1:o(g,c);if(f&&!i.isEmpty()&&b>=0)return s?.trackChildChange(tc(e,i,m)),a.updateImmediateChild(e,i);{s?.trackChildChange(ec(e,m));let D=a.updateImmediateChild(e,ae.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s?.trackChildChange(Fo(g.name,g.node)),D.updateImmediateChild(g.name,g.node)):D}}else return i.isEmpty()?t:f&&o(d,c)>=0?(s!=null&&(s.trackChildChange(ec(d.name,d.node)),s.trackChildChange(Fo(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(d.name,ae.EMPTY_NODE)):t}};var ic=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ue}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Sr}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ui}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ue}copy(){let t=new n;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function AF(n){return n.loadsAllData()?new nc(n.getIndex()):n.hasLimit()?new Jg(n):new mh(n)}function RF(n,t){let e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}function DF(n,t){let e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}function e_(n,t,e){let i=n.copy();return i.startSet_=!0,t===void 0&&(t=null),i.indexStartValue_=t,e!=null?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function kF(n,t,e){let i;return n.index_===vi||e?i=e_(n,t,e):i=e_(n,t,Ui),i.startAfterSet_=!0,i}function t_(n,t,e){let i=n.copy();return i.endSet_=!0,t===void 0&&(t=null),i.indexEndValue_=t,e!==void 0?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function PF(n,t,e){let i;return n.index_===vi||e?i=t_(n,t,e):i=t_(n,t,Sr),i.endBeforeSet_=!0,i}function Mh(n,t){let e=n.copy();return e.index_=t,e}function LI(n){let t={};if(n.isDefault())return t;let e;if(n.index_===Ue?e="$priority":n.index_===G_?e="$value":n.index_===vi?e="$key":(S(n.index_ instanceof Jl,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=fe(e),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";t[i]=fe(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+fe(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";t[i]=fe(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+fe(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function VI(n){let t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==Ue&&(t.i=n.index_.toString()),t}var n_=class n extends ch{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=hc("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(S(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=n.getListenId_(t,i),a={};this.listens_[o]=a;let c=LI(t._queryParams);this.restRequest_(s+".json",c,(d,f)=>{let m=f;if(d===404&&(m=null,d=null),d===null&&this.onDataUpdate_(s,m,!1,i),Zt(this.listens_,o)===a){let g;d?d===401?g="permission_denied":g="rest_error:"+d:g="ok",r(g,null)}})}unlisten(t,e){let i=n.getListenId_(t,e);delete this.listens_[i]}get(t){let e=LI(t._queryParams),i=t._path.toString(),r=new ht;return this.restRequest_(i+".json",e,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+qd(e);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=sr(a.responseText)}catch{$t("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&$t("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var i_=class{constructor(){this.rootNode_=ae.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function ph(){return{value:null,children:new Map}}function zo(n,t,e){if(he(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{let i=ue(t);n.children.has(i)||n.children.set(i,ph());let r=n.children.get(i);t=Ve(t),zo(r,t,e)}}function r_(n,t){if(he(t))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let e=n.value;return n.value=null,e.forEachChild(Ue,(i,r)=>{zo(n,new Ce(i),r)}),r_(n,t)}}else if(n.children.size>0){let e=ue(t);return t=Ve(t),n.children.has(e)&&r_(n.children.get(e),t)&&n.children.delete(e),n.children.size===0}else return!0}function s_(n,t,e){n.value!==null?e(t,n.value):MF(n,(i,r)=>{let s=new Ce(t.toString()+"/"+i);s_(r,s,e)})}function MF(n,t){n.children.forEach((e,i)=>{t(i,e)})}var o_=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&It(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}};var jI=10*1e3,NF=30*1e3,OF=5*60*1e3,a_=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new o_(t);let i=jI+(NF-jI)*Math.random();Gl(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),e={},i=!1;It(t,(r,s)=>{s>0&&at(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),Gl(this.reportStats_.bind(this),Math.floor(Math.random()*2*OF))}};var _i=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(_i||{});function H_(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function K_(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Q_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var l_=class n{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=_i.ACK_USER_WRITE,this.source=H_()}operationForChild(t){if(he(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new Ce(t));return new n(Ee(),e,this.revert)}}else return S(ue(this.path)===t,"operationForChild called for unrelated child."),new n(Ve(this.path),this.affectedTree,this.revert)}};var gh=class n{constructor(t,e){this.source=t,this.path=e,this.type=_i.LISTEN_COMPLETE}operationForChild(t){return he(this.path)?new n(this.source,Ee()):new n(this.source,Ve(this.path))}};var Lo=class n{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=_i.OVERWRITE}operationForChild(t){return he(this.path)?new n(this.source,Ee(),this.snap.getImmediateChild(t)):new n(this.source,Ve(this.path),this.snap)}};var rc=class n{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=_i.MERGE}operationForChild(t){if(he(this.path)){let e=this.children.subtree(new Ce(t));return e.isEmpty()?null:e.value?new Lo(this.source,Ee(),e.value):new n(this.source,Ee(),e)}else return S(ue(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var bi=class{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(he(t))return this.isFullyInitialized()&&!this.filtered_;let e=ue(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var c_=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function FF(n,t,e,i){let r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(SF(o.childName,o.snapshotNode))}),ql(n,r,"child_removed",t,i,e),ql(n,r,"child_added",t,i,e),ql(n,r,"child_moved",s,i,e),ql(n,r,"child_changed",t,i,e),ql(n,r,"value",t,i,e),r}function ql(n,t,e,i,r,s){let o=i.filter(a=>a.type===e);o.sort((a,c)=>VF(n,a,c)),o.forEach(a=>{let c=LF(n,a,s);r.forEach(d=>{d.respondsTo(a.type)&&t.push(d.createEvent(c,n.query_))})})}function LF(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function VF(n,t,e){if(t.childName==null||e.childName==null)throw An("Should only compare child_ events.");let i=new me(t.childName,t.snapshotNode),r=new me(e.childName,e.snapshotNode);return n.index_.compare(i,r)}function Nh(n,t){return{eventCache:n,serverCache:t}}function Kl(n,t,e,i){return Nh(new bi(t,e,i),n.serverCache)}function AT(n,t,e,i){return Nh(n.eventCache,new bi(t,e,i))}function _h(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ds(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var kg,jF=()=>(kg||(kg=new Nn(L1)),kg),tn=class n{constructor(t,e=jF()){this.value=t,this.children=e}static fromObject(t){let e=new n(null);return It(t,(i,r)=>{e=e.set(new Ce(i),r)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Ee(),value:this.value};if(he(t))return null;{let i=ue(t),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(Ve(t),e);return s!=null?{path:Ke(new Ce(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(he(t))return this;{let e=ue(t),i=this.children.get(e);return i!==null?i.subtree(Ve(t)):new n(null)}}set(t,e){if(he(t))return new n(e,this.children);{let i=ue(t),s=(this.children.get(i)||new n(null)).set(Ve(t),e),o=this.children.insert(i,s);return new n(this.value,o)}}remove(t){if(he(t))return this.children.isEmpty()?new n(null):new n(null,this.children);{let e=ue(t),i=this.children.get(e);if(i){let r=i.remove(Ve(t)),s;return r.isEmpty()?s=this.children.remove(e):s=this.children.insert(e,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(t){if(he(t))return this.value;{let e=ue(t),i=this.children.get(e);return i?i.get(Ve(t)):null}}setTree(t,e){if(he(t))return e;{let i=ue(t),s=(this.children.get(i)||new n(null)).setTree(Ve(t),e),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(t){return this.fold_(Ee(),t)}fold_(t,e){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Ke(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Ee(),e)}findOnPath_(t,e,i){let r=this.value?i(e,this.value):!1;if(r)return r;if(he(t))return null;{let s=ue(t),o=this.children.get(s);return o?o.findOnPath_(Ve(t),Ke(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Ee(),e)}foreachOnPath_(t,e,i){if(he(t))return this;{this.value&&i(e,this.value);let r=ue(t),s=this.children.get(r);return s?s.foreachOnPath_(Ve(t),Ke(e,r),i):new n(null)}}foreach(t){this.foreach_(Ee(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Ke(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}};var Zn=class n{constructor(t){this.writeTree_=t}static empty(){return new n(new tn(null))}};function Ql(n,t,e){if(he(t))return new Zn(new tn(e));{let i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,s=i.value,o=en(r,t);return s=s.updateChild(o,e),new Zn(n.writeTree_.set(r,s))}else{let r=new tn(e),s=n.writeTree_.setTree(t,r);return new Zn(s)}}}function d_(n,t,e){let i=n;return It(e,(r,s)=>{i=Ql(i,Ke(t,r),s)}),i}function BI(n,t){if(he(t))return Zn.empty();{let e=n.writeTree_.setTree(t,new tn(null));return new Zn(e)}}function u_(n,t){return hs(n,t)!=null}function hs(n,t){let e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(en(e.path,t)):null}function UI(n){let t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Ue,(i,r)=>{t.push(new me(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new me(i,r.value))}),t}function Tr(n,t){if(he(t))return n;{let e=hs(n,t);return e!=null?new Zn(new tn(e)):new Zn(n.writeTree_.subtree(t))}}function h_(n){return n.writeTree_.isEmpty()}function Vo(n,t){return RT(Ee(),n.writeTree_,t)}function RT(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):e=RT(Ke(n,r),s,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(Ke(n,".priority"),i)),e}}function Oh(n,t){return MT(t,n)}function BF(n,t,e,i,r){S(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=Ql(n.visibleWrites,t,e)),n.lastWriteId=i}function UF(n,t,e,i){S(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=d_(n.visibleWrites,t,e),n.lastWriteId=i}function zF(n,t){for(let e=0;e<n.allWrites.length;e++){let i=n.allWrites[e];if(i.writeId===t)return i}return null}function $F(n,t){let e=n.allWrites.findIndex(a=>a.writeId===t);S(e>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=e&&WF(a,i.path)?r=!1:Mn(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return qF(n),!0;if(i.snap)n.visibleWrites=BI(n.visibleWrites,i.path);else{let a=i.children;It(a,c=>{n.visibleWrites=BI(n.visibleWrites,Ke(i.path,c))})}return!0}else return!1}function WF(n,t){if(n.snap)return Mn(n.path,t);for(let e in n.children)if(n.children.hasOwnProperty(e)&&Mn(Ke(n.path,e),t))return!0;return!1}function qF(n){n.visibleWrites=DT(n.allWrites,GF,Ee()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function GF(n){return n.visible}function DT(n,t,e){let i=Zn.empty();for(let r=0;r<n.length;++r){let s=n[r];if(t(s)){let o=s.path,a;if(s.snap)Mn(e,o)?(a=en(e,o),i=Ql(i,a,s.snap)):Mn(o,e)&&(a=en(o,e),i=Ql(i,Ee(),s.snap.getChild(a)));else if(s.children){if(Mn(e,o))a=en(e,o),i=d_(i,a,s.children);else if(Mn(o,e))if(a=en(o,e),he(a))i=d_(i,Ee(),s.children);else{let c=Zt(s.children,ue(a));if(c){let d=c.getChild(Ve(a));i=Ql(i,Ee(),d)}}}else throw An("WriteRecord should have .snap or .children")}}return i}function kT(n,t,e,i,r){if(!i&&!r){let s=hs(n.visibleWrites,t);if(s!=null)return s;{let o=Tr(n.visibleWrites,t);if(h_(o))return e;if(e==null&&!u_(o,Ee()))return null;{let a=e||ae.EMPTY_NODE;return Vo(o,a)}}}else{let s=Tr(n.visibleWrites,t);if(!r&&h_(s))return e;if(!r&&e==null&&!u_(s,Ee()))return null;{let o=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(Mn(d.path,t)||Mn(t,d.path))},a=DT(n.allWrites,o,t),c=e||ae.EMPTY_NODE;return Vo(a,c)}}}function HF(n,t,e){let i=ae.EMPTY_NODE,r=hs(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Ue,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(e){let s=Tr(n.visibleWrites,t);return e.forEachChild(Ue,(o,a)=>{let c=Vo(Tr(s,new Ce(o)),a);i=i.updateImmediateChild(o,c)}),UI(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=Tr(n.visibleWrites,t);return UI(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function KF(n,t,e,i,r){S(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=Ke(t,e);if(u_(n.visibleWrites,s))return null;{let o=Tr(n.visibleWrites,s);return h_(o)?r.getChild(e):Vo(o,r.getChild(e))}}function QF(n,t,e,i){let r=Ke(t,e),s=hs(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(e)){let o=Tr(n.visibleWrites,r);return Vo(o,i.getNode().getImmediateChild(e))}else return null}function YF(n,t){return hs(n.visibleWrites,t)}function XF(n,t,e,i,r,s,o){let a,c=Tr(n.visibleWrites,t),d=hs(c,Ee());if(d!=null)a=d;else if(e!=null)a=Vo(c,e);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let f=[],m=o.getCompare(),g=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),b=g.getNext();for(;b&&f.length<r;)m(b,i)!==0&&f.push(b),b=g.getNext();return f}else return[]}function ZF(){return{visibleWrites:Zn.empty(),allWrites:[],lastWriteId:-1}}function vh(n,t,e,i){return kT(n.writeTree,n.treePath,t,e,i)}function Y_(n,t){return HF(n.writeTree,n.treePath,t)}function zI(n,t,e,i){return KF(n.writeTree,n.treePath,t,e,i)}function yh(n,t){return YF(n.writeTree,Ke(n.treePath,t))}function JF(n,t,e,i,r,s){return XF(n.writeTree,n.treePath,t,e,i,r,s)}function X_(n,t,e){return QF(n.writeTree,n.treePath,t,e)}function PT(n,t){return MT(Ke(n.treePath,t),n.writeTree)}function MT(n,t){return{treePath:n,writeTree:t}}var f_=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,i=t.childName;S(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),S(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(e==="child_added"&&s==="child_removed")this.changeMap.set(i,tc(i,t.snapshotNode,r.snapshotNode));else if(e==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&s==="child_changed")this.changeMap.set(i,ec(i,r.oldSnap));else if(e==="child_changed"&&s==="child_added")this.changeMap.set(i,Fo(i,t.snapshotNode));else if(e==="child_changed"&&s==="child_changed")this.changeMap.set(i,tc(i,t.snapshotNode,r.oldSnap));else throw An("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var m_=class{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}},NT=new m_,sc=class{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new bi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return X_(this.writes_,t,i)}}getChildAfterChild(t,e,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ds(this.viewCache_),s=JF(this.writes_,r,e,1,i,t);return s.length===0?null:s[0]}};function eL(n){return{filter:n}}function tL(n,t){S(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),S(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function nL(n,t,e,i,r){let s=new f_,o,a;if(e.type===_i.OVERWRITE){let d=e;d.source.fromUser?o=p_(n,t,d.path,d.snap,i,r,s):(S(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered()&&!he(d.path),o=bh(n,t,d.path,d.snap,i,r,a,s))}else if(e.type===_i.MERGE){let d=e;d.source.fromUser?o=rL(n,t,d.path,d.children,i,r,s):(S(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered(),o=g_(n,t,d.path,d.children,i,r,a,s))}else if(e.type===_i.ACK_USER_WRITE){let d=e;d.revert?o=aL(n,t,d.path,i,r,s):o=sL(n,t,d.path,d.affectedTree,i,r,s)}else if(e.type===_i.LISTEN_COMPLETE)o=oL(n,t,e.path,i,s);else throw An("Unknown operation type: "+e.type);let c=s.getChanges();return iL(t,o,c),{viewCache:o,changes:c}}function iL(n,t,e){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=_h(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(ST(_h(t)))}}function OT(n,t,e,i,r,s){let o=t.eventCache;if(yh(i,e)!=null)return t;{let a,c;if(he(e))if(S(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let d=ds(t),f=d instanceof ae?d:ae.EMPTY_NODE,m=Y_(i,f);a=n.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{let d=vh(i,ds(t));a=n.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{let d=ue(e);if(d===".priority"){S(Ar(e)===1,"Can't have a priority with additional path components");let f=o.getNode();c=t.serverCache.getNode();let m=zI(i,e,f,c);m!=null?a=n.filter.updatePriority(f,m):a=o.getNode()}else{let f=Ve(e),m;if(o.isCompleteForChild(d)){c=t.serverCache.getNode();let g=zI(i,e,o.getNode(),c);g!=null?m=o.getNode().getImmediateChild(d).updateChild(f,g):m=o.getNode().getImmediateChild(d)}else m=X_(i,d,t.serverCache);m!=null?a=n.filter.updateChild(o.getNode(),d,m,f,r,s):a=o.getNode()}}return Kl(t,a,o.isFullyInitialized()||he(e),n.filter.filtersNodes())}}function bh(n,t,e,i,r,s,o,a){let c=t.serverCache,d,f=o?n.filter:n.filter.getIndexedFilter();if(he(e))d=f.updateFullNode(c.getNode(),i,null);else if(f.filtersNodes()&&!c.isFiltered()){let b=c.getNode().updateChild(e,i);d=f.updateFullNode(c.getNode(),b,null)}else{let b=ue(e);if(!c.isCompleteForPath(e)&&Ar(e)>1)return t;let E=Ve(e),M=c.getNode().getImmediateChild(b).updateChild(E,i);b===".priority"?d=f.updatePriority(c.getNode(),M):d=f.updateChild(c.getNode(),b,M,E,NT,null)}let m=AT(t,d,c.isFullyInitialized()||he(e),f.filtersNodes()),g=new sc(r,m,s);return OT(n,m,e,r,g,a)}function p_(n,t,e,i,r,s,o){let a=t.eventCache,c,d,f=new sc(r,t,s);if(he(e))d=n.filter.updateFullNode(t.eventCache.getNode(),i,o),c=Kl(t,d,!0,n.filter.filtersNodes());else{let m=ue(e);if(m===".priority")d=n.filter.updatePriority(t.eventCache.getNode(),i),c=Kl(t,d,a.isFullyInitialized(),a.isFiltered());else{let g=Ve(e),b=a.getNode().getImmediateChild(m),E;if(he(g))E=i;else{let D=f.getCompleteChild(m);D!=null?z_(g)===".priority"&&D.getChild(wT(g)).isEmpty()?E=D:E=D.updateChild(g,i):E=ae.EMPTY_NODE}if(b.equals(E))c=t;else{let D=n.filter.updateChild(a.getNode(),m,E,g,f,o);c=Kl(t,D,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function $I(n,t){return n.eventCache.isCompleteForChild(t)}function rL(n,t,e,i,r,s,o){let a=t;return i.foreach((c,d)=>{let f=Ke(e,c);$I(t,ue(f))&&(a=p_(n,a,f,d,r,s,o))}),i.foreach((c,d)=>{let f=Ke(e,c);$I(t,ue(f))||(a=p_(n,a,f,d,r,s,o))}),a}function WI(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function g_(n,t,e,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,d;he(e)?d=i:d=new tn(null).setTree(e,i);let f=t.serverCache.getNode();return d.children.inorderTraversal((m,g)=>{if(f.hasChild(m)){let b=t.serverCache.getNode().getImmediateChild(m),E=WI(n,b,g);c=bh(n,c,new Ce(m),E,r,s,o,a)}}),d.children.inorderTraversal((m,g)=>{let b=!t.serverCache.isCompleteForChild(m)&&g.value===null;if(!f.hasChild(m)&&!b){let E=t.serverCache.getNode().getImmediateChild(m),D=WI(n,E,g);c=bh(n,c,new Ce(m),D,r,s,o,a)}}),c}function sL(n,t,e,i,r,s,o){if(yh(r,e)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(i.value!=null){if(he(e)&&c.isFullyInitialized()||c.isCompleteForPath(e))return bh(n,t,e,c.getNode().getChild(e),r,s,a,o);if(he(e)){let d=new tn(null);return c.getNode().forEachChild(vi,(f,m)=>{d=d.set(new Ce(f),m)}),g_(n,t,e,d,r,s,a,o)}else return t}else{let d=new tn(null);return i.foreach((f,m)=>{let g=Ke(e,f);c.isCompleteForPath(g)&&(d=d.set(f,c.getNode().getChild(g)))}),g_(n,t,e,d,r,s,a,o)}}function oL(n,t,e,i,r){let s=t.serverCache,o=AT(t,s.getNode(),s.isFullyInitialized()||he(e),s.isFiltered());return OT(n,o,e,i,NT,r)}function aL(n,t,e,i,r,s){let o;if(yh(i,e)!=null)return t;{let a=new sc(i,t,r),c=t.eventCache.getNode(),d;if(he(e)||ue(e)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=vh(i,ds(t));else{let m=t.serverCache.getNode();S(m instanceof ae,"serverChildren would be complete if leaf node"),f=Y_(i,m)}f=f,d=n.filter.updateFullNode(c,f,s)}else{let f=ue(e),m=X_(i,f,t.serverCache);m==null&&t.serverCache.isCompleteForChild(f)&&(m=c.getImmediateChild(f)),m!=null?d=n.filter.updateChild(c,f,m,Ve(e),a,s):t.eventCache.getNode().hasChild(f)?d=n.filter.updateChild(c,f,ae.EMPTY_NODE,Ve(e),a,s):d=c,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=vh(i,ds(t)),o.isLeafNode()&&(d=n.filter.updateFullNode(d,o,s)))}return o=t.serverCache.isFullyInitialized()||yh(i,Ee())!=null,Kl(t,d,o,n.filter.filtersNodes())}}var __=class{constructor(t,e){this.query_=t,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new nc(i.getIndex()),s=AF(i);this.processor_=eL(s);let o=e.serverCache,a=e.eventCache,c=r.updateFullNode(ae.EMPTY_NODE,o.getNode(),null),d=s.updateFullNode(ae.EMPTY_NODE,a.getNode(),null),f=new bi(c,o.isFullyInitialized(),r.filtersNodes()),m=new bi(d,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Nh(m,f),this.eventGenerator_=new c_(this.query_)}get query(){return this.query_}};function lL(n){return n.viewCache_.serverCache.getNode()}function cL(n){return _h(n.viewCache_)}function dL(n,t){let e=ds(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!he(t)&&!e.getImmediateChild(ue(t)).isEmpty())?e.getChild(t):null}function qI(n){return n.eventRegistrations_.length===0}function uL(n,t){n.eventRegistrations_.push(t)}function GI(n,t,e){let i=[];if(e){S(t==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(e,r);o&&i.push(o)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(t))r.push(o);else if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function HI(n,t,e,i){t.type===_i.MERGE&&t.source.queryId!==null&&(S(ds(n.viewCache_),"We should always have a full cache before handling merges"),S(_h(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=nL(n.processor_,r,t,e,i);return tL(n.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,FT(n,s.changes,s.viewCache.eventCache.getNode(),null)}function hL(n,t){let e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ue,(s,o)=>{i.push(Fo(s,o))}),e.isFullyInitialized()&&i.push(ST(e.getNode())),FT(n,i,e.getNode(),t)}function FT(n,t,e,i){let r=i?[i]:n.eventRegistrations_;return FF(n.eventGenerator_,t,e,r)}var wh,Eh=class{constructor(){this.views=new Map}};function fL(n){S(!wh,"__referenceConstructor has already been defined"),wh=n}function mL(){return S(wh,"Reference.ts has not been loaded"),wh}function pL(n){return n.views.size===0}function Z_(n,t,e,i){let r=t.source.queryId;if(r!==null){let s=n.views.get(r);return S(s!=null,"SyncTree gave us an op for an invalid query."),HI(s,t,e,i)}else{let s=[];for(let o of n.views.values())s=s.concat(HI(o,t,e,i));return s}}function LT(n,t,e,i,r){let s=t._queryIdentifier,o=n.views.get(s);if(!o){let a=vh(e,r?i:null),c=!1;a?c=!0:i instanceof ae?(a=Y_(e,i),c=!1):(a=ae.EMPTY_NODE,c=!1);let d=Nh(new bi(a,c,!1),new bi(i,r,!1));return new __(t,d)}return o}function gL(n,t,e,i,r,s){let o=LT(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,o),uL(o,e),hL(o,e)}function _L(n,t,e,i){let r=t._queryIdentifier,s=[],o=[],a=Rr(n);if(r==="default")for(let[c,d]of n.views.entries())o=o.concat(GI(d,e,i)),qI(d)&&(n.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{let c=n.views.get(r);c&&(o=o.concat(GI(c,e,i)),qI(c)&&(n.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Rr(n)&&s.push(new(mL())(t._repo,t._path)),{removed:s,events:o}}function VT(n){let t=[];for(let e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function xr(n,t){let e=null;for(let i of n.views.values())e=e||dL(i,t);return e}function jT(n,t){if(t._queryParams.loadsAllData())return Fh(n);{let i=t._queryIdentifier;return n.views.get(i)}}function BT(n,t){return jT(n,t)!=null}function Rr(n){return Fh(n)!=null}function Fh(n){for(let t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Ch;function vL(n){S(!Ch,"__referenceConstructor has already been defined"),Ch=n}function yL(){return S(Ch,"Reference.ts has not been loaded"),Ch}var bL=1,Ih=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new tn(null),this.pendingWriteTree_=ZF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function J_(n,t,e,i,r){return BF(n.pendingWriteTree_,t,e,i,r),r?$o(n,new Lo(H_(),t,e)):[]}function wL(n,t,e,i){UF(n.pendingWriteTree_,t,e,i);let r=tn.fromObject(e);return $o(n,new rc(H_(),t,r))}function Ir(n,t,e=!1){let i=zF(n.pendingWriteTree_,t);if($F(n.pendingWriteTree_,t)){let s=new tn(null);return i.snap!=null?s=s.set(Ee(),!0):It(i.children,o=>{s=s.set(new Ce(o),!0)}),$o(n,new l_(i.path,s,e))}else return[]}function mc(n,t,e){return $o(n,new Lo(K_(),t,e))}function EL(n,t,e){let i=tn.fromObject(e);return $o(n,new rc(K_(),t,i))}function CL(n,t){return $o(n,new gh(K_(),t))}function IL(n,t,e){let i=ev(n,e);if(i){let r=tv(i),s=r.path,o=r.queryId,a=en(s,t),c=new gh(Q_(o),a);return nv(n,s,c)}else return[]}function Th(n,t,e,i,r=!1){let s=t._path,o=n.syncPointTree_.get(s),a=[];if(o&&(t._queryIdentifier==="default"||BT(o,t))){let c=_L(o,t,e,i);pL(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let d=c.removed;if(a=c.events,!r){let f=d.findIndex(g=>g._queryParams.loadsAllData())!==-1,m=n.syncPointTree_.findOnPath(s,(g,b)=>Rr(b));if(f&&!m){let g=n.syncPointTree_.subtree(s);if(!g.isEmpty()){let b=SL(g);for(let E=0;E<b.length;++E){let D=b[E],M=D.query,ne=WT(n,D);n.listenProvider_.startListening(Yl(M),oc(n,M),ne.hashFn,ne.onComplete)}}}!m&&d.length>0&&!i&&(f?n.listenProvider_.stopListening(Yl(t),null):d.forEach(g=>{let b=n.queryToTagMap.get(Vh(g));n.listenProvider_.stopListening(Yl(g),b)}))}AL(n,d)}return a}function UT(n,t,e,i){let r=ev(n,i);if(r!=null){let s=tv(r),o=s.path,a=s.queryId,c=en(o,t),d=new Lo(Q_(a),c,e);return nv(n,o,d)}else return[]}function TL(n,t,e,i){let r=ev(n,i);if(r){let s=tv(r),o=s.path,a=s.queryId,c=en(o,t),d=tn.fromObject(e),f=new rc(Q_(a),c,d);return nv(n,o,f)}else return[]}function v_(n,t,e,i=!1){let r=t._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(g,b)=>{let E=en(g,r);s=s||xr(b,E),o=o||Rr(b)});let a=n.syncPointTree_.get(r);a?(o=o||Rr(a),s=s||xr(a,Ee())):(a=new Eh,n.syncPointTree_=n.syncPointTree_.set(r,a));let c;s!=null?c=!0:(c=!1,s=ae.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((b,E)=>{let D=xr(E,Ee());D&&(s=s.updateImmediateChild(b,D))}));let d=BT(a,t);if(!d&&!t._queryParams.loadsAllData()){let g=Vh(t);S(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");let b=RL();n.queryToTagMap.set(g,b),n.tagToQueryMap.set(b,g)}let f=Oh(n.pendingWriteTree_,r),m=gL(a,t,e,f,s,c);if(!d&&!o&&!i){let g=jT(a,t);m=m.concat(DL(n,t,g))}return m}function Lh(n,t,e){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(o,a)=>{let c=en(o,t),d=xr(a,c);if(d)return d});return kT(r,t,s,e,!0)}function xL(n,t){let e=t._path,i=null;n.syncPointTree_.foreachOnPath(e,(d,f)=>{let m=en(d,e);i=i||xr(f,m)});let r=n.syncPointTree_.get(e);r?i=i||xr(r,Ee()):(r=new Eh,n.syncPointTree_=n.syncPointTree_.set(e,r));let s=i!=null,o=s?new bi(i,!0,!1):null,a=Oh(n.pendingWriteTree_,t._path),c=LT(r,t,a,s?o.getNode():ae.EMPTY_NODE,s);return cL(c)}function $o(n,t){return zT(t,n.syncPointTree_,null,Oh(n.pendingWriteTree_,Ee()))}function zT(n,t,e,i){if(he(n.path))return $T(n,t,e,i);{let r=t.get(Ee());e==null&&r!=null&&(e=xr(r,Ee()));let s=[],o=ue(n.path),a=n.operationForChild(o),c=t.children.get(o);if(c&&a){let d=e?e.getImmediateChild(o):null,f=PT(i,o);s=s.concat(zT(a,c,d,f))}return r&&(s=s.concat(Z_(r,n,i,e))),s}}function $T(n,t,e,i){let r=t.get(Ee());e==null&&r!=null&&(e=xr(r,Ee()));let s=[];return t.children.inorderTraversal((o,a)=>{let c=e?e.getImmediateChild(o):null,d=PT(i,o),f=n.operationForChild(o);f&&(s=s.concat($T(f,a,c,d)))}),r&&(s=s.concat(Z_(r,n,i,e))),s}function WT(n,t){let e=t.query,i=oc(n,e);return{hashFn:()=>(lL(t)||ae.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?IL(n,e._path,i):CL(n,e._path);{let s=B1(r,e);return Th(n,e,null,s)}}}}function oc(n,t){let e=Vh(t);return n.queryToTagMap.get(e)}function Vh(n){return n._path.toString()+"$"+n._queryIdentifier}function ev(n,t){return n.tagToQueryMap.get(t)}function tv(n){let t=n.indexOf("$");return S(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Ce(n.substr(0,t))}}function nv(n,t,e){let i=n.syncPointTree_.get(t);S(i,"Missing sync point for query tag that we're tracking");let r=Oh(n.pendingWriteTree_,t);return Z_(i,e,r,null)}function SL(n){return n.fold((t,e,i)=>{if(e&&Rr(e))return[Fh(e)];{let r=[];return e&&(r=VT(e)),It(i,(s,o)=>{r=r.concat(o)}),r}})}function Yl(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(yL())(n._repo,n._path):n}function AL(n,t){for(let e=0;e<t.length;++e){let i=t[e];if(!i._queryParams.loadsAllData()){let r=Vh(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function RL(){return bL++}function DL(n,t,e){let i=t._path,r=oc(n,t),s=WT(n,e),o=n.listenProvider_.startListening(Yl(t),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)S(!Rr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((d,f,m)=>{if(!he(d)&&f&&Rr(f))return[Fh(f).query];{let g=[];return f&&(g=g.concat(VT(f).map(b=>b.query))),It(m,(b,E)=>{g=g.concat(E)}),g}});for(let d=0;d<c.length;++d){let f=c[d];n.listenProvider_.stopListening(Yl(f),oc(n,f))}}return o}var y_=class n{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new n(e)}node(){return this.node_}},b_=class n{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=Ke(this.path_,t);return new n(this.syncTree_,e)}node(){return Lh(this.syncTree_,this.path_)}},kL=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},KI=function(n,t,e){if(!n||typeof n!="object")return n;if(S(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return PL(n[".sv"],t,e);if(typeof n[".sv"]=="object")return ML(n[".sv"],t);S(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},PL=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:S(!1,"Unexpected server value: "+n)}},ML=function(n,t,e){n.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&S(!1,"Unexpected increment value: "+i);let r=t.node();if(S(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},qT=function(n,t,e,i){return rv(t,new b_(e,n),i)},iv=function(n,t,e){return rv(n,new y_(t),e)};function rv(n,t,e){let i=n.getPriority().val(),r=KI(i,t.getImmediateChild(".priority"),e),s;if(n.isLeafNode()){let o=n,a=KI(o.getValue(),t,e);return a!==o.getValue()||r!==o.getPriority().val()?new No(a,it(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new No(r))),o.forEachChild(Ue,(a,c)=>{let d=rv(c,t.getImmediateChild(a),e);d!==c&&(s=s.updateImmediateChild(a,d))}),s}}var ac=class{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}};function jh(n,t){let e=t instanceof Ce?t:new Ce(t),i=n,r=ue(e);for(;r!==null;){let s=Zt(i.node.children,r)||{children:{},childCount:0};i=new ac(r,i,s),e=Ve(e),r=ue(e)}return i}function fs(n){return n.node.value}function sv(n,t){n.node.value=t,w_(n)}function GT(n){return n.node.childCount>0}function NL(n){return fs(n)===void 0&&!GT(n)}function Bh(n,t){It(n.node.children,(e,i)=>{t(new ac(e,n,i))})}function HT(n,t,e,i){e&&!i&&t(n),Bh(n,r=>{HT(r,t,!0,i)}),e&&i&&t(n)}function OL(n,t,e){let i=e?n:n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function pc(n){return new Ce(n.parent===null?n.name:pc(n.parent)+"/"+n.name)}function w_(n){n.parent!==null&&FL(n.parent,n.name,n)}function FL(n,t,e){let i=NL(e),r=at(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,w_(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,w_(n))}var LL=/[\[\].#$\/\u0000-\u001F\u007F]/,VL=/[\[\].#$\u0000-\u001F\u007F]/,Pg=10*1024*1024,Uh=function(n){return typeof n=="string"&&n.length!==0&&!LL.test(n)},KT=function(n){return typeof n=="string"&&n.length!==0&&!VL.test(n)},jL=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),KT(n)},lc=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Ph(n)||n&&typeof n=="object"&&at(n,".sv")},wi=function(n,t,e,i){i&&t===void 0||gc(zt(n,"value"),t,e)},gc=function(n,t,e){let i=e instanceof Ce?new qg(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+as(i));if(typeof t=="function")throw new Error(n+"contains a function "+as(i)+" with contents = "+t.toString());if(Ph(t))throw new Error(n+"contains "+t.toString()+" "+as(i));if(typeof t=="string"&&t.length>Pg/3&&di(t)>Pg)throw new Error(n+"contains a string greater than "+Pg+" utf8 bytes "+as(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(It(t,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Uh(o)))throw new Error(n+" contains an invalid key ("+o+") "+as(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);pF(i,o),gc(n,a,i),gF(i)}),r&&s)throw new Error(n+' contains ".value" child '+as(i)+" in addition to actual children.")}},BL=function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];let s=Zl(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Uh(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(mF);let r=null;for(e=0;e<t.length;e++){if(i=t[e],r!==null&&Mn(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},QT=function(n,t,e,i){if(i&&t===void 0)return;let r=zt(n,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");let s=[];It(t,(o,a)=>{let c=new Ce(o);if(gc(r,a,Ke(e,c)),z_(c)===".priority"&&!lc(a))throw new Error(r+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),BL(r,s)},ov=function(n,t,e){if(!(e&&t===void 0)){if(Ph(t))throw new Error(zt(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lc(t))throw new Error(zt(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},_c=function(n,t,e,i){if(!(i&&e===void 0)&&!Uh(e))throw new Error(zt(n,t)+'was an invalid key = "'+e+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Wo=function(n,t,e,i){if(!(i&&e===void 0)&&!KT(e))throw new Error(zt(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},UL=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Wo(n,t,e,i)},bn=function(n,t){if(ue(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},YT=function(n,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Uh(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!jL(e))throw new Error(zt(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var E_=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function zh(n,t){let e=null;for(let i=0;i<t.length;i++){let r=t[i],s=r.getPath();e!==null&&!$_(s,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function XT(n,t,e){zh(n,e),ZT(n,i=>$_(i,t))}function wn(n,t,e){zh(n,e),ZT(n,i=>Mn(i,t)||Mn(t,i))}function ZT(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;t(s)?(zL(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function zL(n){for(let t=0;t<n.events.length;t++){let e=n.events[t];if(e!==null){n.events[t]=null;let i=e.getEventRunner();cs&&Ct("event: "+e.toString()),Uo(i)}}}var JT="repo_interrupt",$L=25,C_=class{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new E_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ph(),this.transactionQueueTree_=new ac,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function WL(n,t,e){if(n.stats_=U_(n.repoInfo_),n.forceRestClient_||W1())n.server_=new n_(n.repoInfo_,(i,r,s,o)=>{QI(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>YI(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{fe(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new W_(n.repoInfo_,t,(i,r,s,o)=>{QI(n,i,r,s,o)},i=>{YI(n,i)},i=>{qL(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=G1(n.repoInfo_,()=>new a_(n.stats_,n.server_)),n.infoData_=new i_,n.infoSyncTree_=new Ih({startListening:(i,r,s,o)=>{let a=[],c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=mc(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),av(n,"connected",!1),n.serverSyncTree_=new Ih({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{let d=o(a,c);wn(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function ex(n){let e=n.infoData_.getNode(new Ce(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function vc(n){return kL({timestamp:ex(n)})}function QI(n,t,e,i,r){n.dataUpdateCount++;let s=new Ce(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let o=[];if(r)if(i){let c=ci(e,d=>it(d));o=TL(n.serverSyncTree_,s,c,r)}else{let c=it(e);o=UT(n.serverSyncTree_,s,c,r)}else if(i){let c=ci(e,d=>it(d));o=EL(n.serverSyncTree_,s,c)}else{let c=it(e);o=mc(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=jo(n,s)),wn(n.eventQueue_,a,o)}function YI(n,t){av(n,"connected",t),t===!1&&KL(n)}function qL(n,t){It(t,(e,i)=>{av(n,e,i)})}function av(n,t,e){let i=new Ce("/.info/"+t),r=it(e);n.infoData_.updateSnapshot(i,r);let s=mc(n.infoSyncTree_,i,r);wn(n.eventQueue_,i,s)}function $h(n){return n.nextWriteId_++}function GL(n,t,e){let i=xL(n.serverSyncTree_,t);return i!=null?Promise.resolve(i):n.server_.get(t).then(r=>{let s=it(r).withIndex(t._queryParams.getIndex());v_(n.serverSyncTree_,t,e,!0);let o;if(t._queryParams.loadsAllData())o=mc(n.serverSyncTree_,t._path,s);else{let a=oc(n.serverSyncTree_,t);o=UT(n.serverSyncTree_,t._path,s,a)}return wn(n.eventQueue_,t._path,o),Th(n.serverSyncTree_,t,e,null,!0),s},r=>(qo(n,"get for query "+fe(t)+" failed: "+r),Promise.reject(new Error(r))))}function lv(n,t,e,i,r){qo(n,"set",{path:t.toString(),value:e,priority:i});let s=vc(n),o=it(e,i),a=Lh(n.serverSyncTree_,t),c=iv(o,a,s),d=$h(n),f=J_(n.serverSyncTree_,t,c,d,!0);zh(n.eventQueue_,f),n.server_.put(t.toString(),o.val(!0),(g,b)=>{let E=g==="ok";E||$t("set at "+t+" failed: "+g);let D=Ir(n.serverSyncTree_,d,!E);wn(n.eventQueue_,t,D),Dr(n,r,g,b)});let m=dv(n,t);jo(n,m),wn(n.eventQueue_,m,[])}function HL(n,t,e,i){qo(n,"update",{path:t.toString(),value:e});let r=!0,s=vc(n),o={};if(It(e,(a,c)=>{r=!1,o[a]=qT(Ke(t,a),it(c),n.serverSyncTree_,s)}),r)Ct("update() called with empty data.  Don't do anything."),Dr(n,i,"ok",void 0);else{let a=$h(n),c=wL(n.serverSyncTree_,t,o,a);zh(n.eventQueue_,c),n.server_.merge(t.toString(),e,(d,f)=>{let m=d==="ok";m||$t("update at "+t+" failed: "+d);let g=Ir(n.serverSyncTree_,a,!m),b=g.length>0?jo(n,t):t;wn(n.eventQueue_,b,g),Dr(n,i,d,f)}),It(e,d=>{let f=dv(n,Ke(t,d));jo(n,f)}),wn(n.eventQueue_,t,[])}}function KL(n){qo(n,"onDisconnectEvents");let t=vc(n),e=ph();s_(n.onDisconnect_,Ee(),(r,s)=>{let o=qT(r,s,n.serverSyncTree_,t);zo(e,r,o)});let i=[];s_(e,Ee(),(r,s)=>{i=i.concat(mc(n.serverSyncTree_,r,s));let o=dv(n,r);jo(n,o)}),n.onDisconnect_=ph(),wn(n.eventQueue_,Ee(),i)}function QL(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{i==="ok"&&r_(n.onDisconnect_,t),Dr(n,e,i,r)})}function XI(n,t,e,i){let r=it(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,o)=>{s==="ok"&&zo(n.onDisconnect_,t,r),Dr(n,i,s,o)})}function YL(n,t,e,i,r){let s=it(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(o,a)=>{o==="ok"&&zo(n.onDisconnect_,t,s),Dr(n,r,o,a)})}function XL(n,t,e,i){if(Kr(e)){Ct("onDisconnect().update() called with empty data.  Don't do anything."),Dr(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{r==="ok"&&It(e,(o,a)=>{let c=it(a);zo(n.onDisconnect_,Ke(t,o),c)}),Dr(n,i,r,s)})}function ZL(n,t,e){let i;ue(t._path)===".info"?i=v_(n.infoSyncTree_,t,e):i=v_(n.serverSyncTree_,t,e),XT(n.eventQueue_,t._path,i)}function I_(n,t,e){let i;ue(t._path)===".info"?i=Th(n.infoSyncTree_,t,e):i=Th(n.serverSyncTree_,t,e),XT(n.eventQueue_,t._path,i)}function tx(n){n.persistentConnection_&&n.persistentConnection_.interrupt(JT)}function JL(n){n.persistentConnection_&&n.persistentConnection_.resume(JT)}function qo(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Ct(e,...t)}function Dr(n,t,e,i){t&&Uo(()=>{if(e==="ok")t(null);else{let r=(e||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,t(o)}})}function eV(n,t,e,i,r,s){qo(n,"transaction on "+t);let o={path:t,update:e,onComplete:i,status:null,order:eT(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=cv(n,t,void 0);o.currentInputSnapshot=a;let c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{gc("transaction failed: Data returned ",c,o.path),o.status=0;let d=jh(n.transactionQueueTree_,t),f=fs(d)||[];f.push(o),sv(d,f);let m;typeof c=="object"&&c!==null&&at(c,".priority")?(m=Zt(c,".priority"),S(lc(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=(Lh(n.serverSyncTree_,t)||ae.EMPTY_NODE).getPriority().val();let g=vc(n),b=it(c,m),E=iv(b,a,g);o.currentOutputSnapshotRaw=b,o.currentOutputSnapshotResolved=E,o.currentWriteId=$h(n);let D=J_(n.serverSyncTree_,t,E,o.currentWriteId,o.applyLocally);wn(n.eventQueue_,t,D),Wh(n,n.transactionQueueTree_)}}function cv(n,t,e){return Lh(n.serverSyncTree_,t,e)||ae.EMPTY_NODE}function Wh(n,t=n.transactionQueueTree_){if(t||qh(n,t),fs(t)){let e=ix(n,t);S(e.length>0,"Sending zero length transaction queue"),e.every(r=>r.status===0)&&tV(n,pc(t),e)}else GT(t)&&Bh(t,e=>{Wh(n,e)})}function tV(n,t,e){let i=e.map(d=>d.currentWriteId),r=cv(n,t,i),s=r,o=r.hash();for(let d=0;d<e.length;d++){let f=e[d];S(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let m=en(t,f.path);s=s.updateChild(m,f.currentOutputSnapshotRaw)}let a=s.val(!0),c=t;n.server_.put(c.toString(),a,d=>{qo(n,"transaction put response",{path:c.toString(),status:d});let f=[];if(d==="ok"){let m=[];for(let g=0;g<e.length;g++)e[g].status=2,f=f.concat(Ir(n.serverSyncTree_,e[g].currentWriteId)),e[g].onComplete&&m.push(()=>e[g].onComplete(null,!0,e[g].currentOutputSnapshotResolved)),e[g].unwatcher();qh(n,jh(n.transactionQueueTree_,t)),Wh(n,n.transactionQueueTree_),wn(n.eventQueue_,t,f);for(let g=0;g<m.length;g++)Uo(m[g])}else{if(d==="datastale")for(let m=0;m<e.length;m++)e[m].status===3?e[m].status=4:e[m].status=0;else{$t("transaction at "+c.toString()+" failed: "+d);for(let m=0;m<e.length;m++)e[m].status=4,e[m].abortReason=d}jo(n,t)}},o)}function jo(n,t){let e=nx(n,t),i=pc(e),r=ix(n,e);return nV(n,r,i),i}function nV(n,t,e){if(t.length===0)return;let i=[],r=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],d=en(e,c.path),f=!1,m;if(S(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,m=c.abortReason,r=r.concat(Ir(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=$L)f=!0,m="maxretry",r=r.concat(Ir(n.serverSyncTree_,c.currentWriteId,!0));else{let g=cv(n,c.path,o);c.currentInputSnapshot=g;let b=t[a].update(g.val());if(b!==void 0){gc("transaction failed: Data returned ",b,c.path);let E=it(b);typeof b=="object"&&b!=null&&at(b,".priority")||(E=E.updatePriority(g.getPriority()));let M=c.currentWriteId,ne=vc(n),te=iv(E,g,ne);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=te,c.currentWriteId=$h(n),o.splice(o.indexOf(M),1),r=r.concat(J_(n.serverSyncTree_,c.path,te,c.currentWriteId,c.applyLocally)),r=r.concat(Ir(n.serverSyncTree_,M,!0))}else f=!0,m="nodata",r=r.concat(Ir(n.serverSyncTree_,c.currentWriteId,!0))}wn(n.eventQueue_,e,r),r=[],f&&(t[a].status=2,function(g){setTimeout(g,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(m==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(m),!1,null))))}qh(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Uo(i[a]);Wh(n,n.transactionQueueTree_)}function nx(n,t){let e,i=n.transactionQueueTree_;for(e=ue(t);e!==null&&fs(i)===void 0;)i=jh(i,e),t=Ve(t),e=ue(t);return i}function ix(n,t){let e=[];return rx(n,t,e),e.sort((i,r)=>i.order-r.order),e}function rx(n,t,e){let i=fs(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);Bh(t,r=>{rx(n,r,e)})}function qh(n,t){let e=fs(t);if(e){let i=0;for(let r=0;r<e.length;r++)e[r].status!==2&&(e[i]=e[r],i++);e.length=i,sv(t,e.length>0?e:void 0)}Bh(t,i=>{qh(n,i)})}function dv(n,t){let e=pc(nx(n,t)),i=jh(n.transactionQueueTree_,t);return OL(i,r=>{Mg(n,r)}),Mg(n,i),HT(i,r=>{Mg(n,r)}),e}function Mg(n,t){let e=fs(t);if(e){let i=[],r=[],s=-1;for(let o=0;o<e.length;o++)e[o].status===3||(e[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(S(e[o].status===0,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(Ir(n.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&i.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?sv(t,void 0):e.length=s+1,wn(n.eventQueue_,pc(t),r);for(let o=0;o<i.length;o++)Uo(i[o])}}function iV(n){let t="",e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function rV(n){let t={};n.charAt(0)==="?"&&(n=n.substring(1));for(let e of n.split("&")){if(e.length===0)continue;let i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):$t(`Invalid query segment '${e}' in query '${n}'`)}return t}var T_=function(n,t){let e=sV(n),i=e.namespace;e.domain==="firebase.com"&&yi(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&yi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||O1();let r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new ah(e.host,e.secure,i,r,t,"",i!==e.subdomain),path:new Ce(e.pathString)}},sV=function(n){let t="",e="",i="",r="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(a=n.substring(0,d-1),n=n.substring(d+2));let f=n.indexOf("/");f===-1&&(f=n.length);let m=n.indexOf("?");m===-1&&(m=n.length),t=n.substring(0,Math.min(f,m)),f<m&&(r=iV(n.substring(f,m)));let g=rV(n.substring(Math.min(n.length,m)));d=t.indexOf(":"),d>=0?(o=a==="https"||a==="wss",c=parseInt(t.substring(d+1),10)):d=t.length;let b=t.slice(0,d);if(b.toLowerCase()==="localhost")e="localhost";else if(b.split(".").length<=2)e=b;else{let E=t.indexOf(".");i=t.substring(0,E).toLowerCase(),e=t.substring(E+1),s=i}"ns"in g&&(s=g.ns)}return{host:t,port:c,domain:e,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var ZI="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",oV=function(){let n=0,t=[];return function(e){let i=e===n;n=e;let r,s=new Array(8);for(r=7;r>=0;r--)s[r]=ZI.charAt(e%64),e=Math.floor(e/64);S(e===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&t[r]===63;r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=ZI.charAt(t[r]);return S(o.length===20,"nextPushId: Length should be 20."),o}}();var xh=class{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+fe(this.snapshot.exportVal())}},Sh=class{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var cc=class{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Ah=class{constructor(t,e){this._repo=t,this._path=e}cancel(){let t=new ht;return QL(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){bn("OnDisconnect.remove",this._path);let t=new ht;return XI(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){bn("OnDisconnect.set",this._path),wi("OnDisconnect.set",t,this._path,!1);let e=new ht;return XI(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){bn("OnDisconnect.setWithPriority",this._path),wi("OnDisconnect.setWithPriority",t,this._path,!1),ov("OnDisconnect.setWithPriority",e,!1);let i=new ht;return YL(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){bn("OnDisconnect.update",this._path),QT("OnDisconnect.update",t,this._path,!1);let e=new ht;return XL(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}};var nn=class n{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return he(this._path)?null:z_(this._path)}get ref(){return new En(this._repo,this._path)}get _queryIdentifier(){let t=VI(this._queryParams),e=B_(t);return e==="{}"?"default":e}get _queryObject(){return VI(this._queryParams)}isEqual(t){if(t=bt(t),!(t instanceof n))return!1;let e=this._repo===t._repo,i=$_(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+fF(this._path)}};function Gh(n,t){if(n._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function Pr(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===vi){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Sr)throw new Error(i);if(typeof t!="string")throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Ui)throw new Error(i);if(typeof e!="string")throw new Error(r)}}else if(n.getIndex()===Ue){if(t!=null&&!lc(t)||e!=null&&!lc(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(S(n.getIndex()instanceof Jl||n.getIndex()===G_,"unknown index type."),t!=null&&typeof t=="object"||e!=null&&typeof e=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Hh(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var En=class n extends nn{constructor(t,e){super(t,e,new ic,!1)}get parent(){let t=wT(this._path);return t===null?null:new n(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},Bo=class n{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let e=new Ce(t),i=kr(this.ref,t);return new n(this._node.getChild(e),i,Ue)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>t(new n(r,kr(this.ref,i),Ue)))}hasChild(t){let e=new Ce(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function uv(n,t){return n=bt(n),n._checkNotDeleted("ref"),t!==void 0?kr(n._root,t):n._root}function hv(n,t){n=bt(n),n._checkNotDeleted("refFromURL");let e=T_(t,n._repo.repoInfo_.nodeAdmin);YT("refFromURL",e);let i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&yi("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),uv(n,e.path.toString())}function kr(n,t){return n=bt(n),ue(n._path)===null?UL("child","path",t,!1):Wo("child","path",t,!1),new En(n._repo,Ke(n._path,t))}function sx(n,t){n=bt(n),bn("push",n._path),wi("push",t,n._path,!0);let e=ex(n._repo),i=oV(e),r=kr(n,i),s=kr(n,i),o;return t!=null?o=Kh(s,t).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function ox(n){return bn("remove",n._path),Kh(n,null)}function Kh(n,t){n=bt(n),bn("set",n._path),wi("set",t,n._path,!1);let e=new ht;return lv(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function ax(n,t){n=bt(n),bn("setPriority",n._path),ov("setPriority",t,!1);let e=new ht;return lv(n._repo,Ke(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}function lx(n,t,e){if(bn("setWithPriority",n._path),wi("setWithPriority",t,n._path,!1),ov("setWithPriority",e,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";let i=new ht;return lv(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}function cx(n,t){QT("update",t,n._path,!1);let e=new ht;return HL(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function dx(n){n=bt(n);let t=new cc(()=>{}),e=new dc(t);return GL(n._repo,n,e).then(i=>new Bo(i,new En(n._repo,n._path),n._queryParams.getIndex()))}var dc=class n{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){let i=e._queryParams.getIndex();return new xh("value",this,new Bo(t.snapshotNode,new En(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Sh(this,t,e):null}matches(t){return t instanceof n?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Rh=class n{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e=t==="children_added"?"child_added":t;return e=e==="children_removed"?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Sh(this,t,e):null}createEvent(t,e){S(t.childName!=null,"Child events should have a childName.");let i=kr(new En(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new xh(t.type,this,new Bo(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof n?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function yc(n,t,e,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let c=e,d=(f,m)=>{I_(n._repo,n,a),c(f,m)};d.userCallback=e.userCallback,d.context=e.context,e=d}let o=new cc(e,s||void 0),a=t==="value"?new dc(o):new Rh(t,o);return ZL(n._repo,n,a),()=>I_(n._repo,n,a)}function Qh(n,t,e,i){return yc(n,"value",t,e,i)}function fv(n,t,e,i){return yc(n,"child_added",t,e,i)}function mv(n,t,e,i){return yc(n,"child_changed",t,e,i)}function pv(n,t,e,i){return yc(n,"child_moved",t,e,i)}function gv(n,t,e,i){return yc(n,"child_removed",t,e,i)}function _v(n,t,e){let i=null,r=e?new cc(e):null;t==="value"?i=new dc(r):t&&(i=new Rh(t,r)),I_(n._repo,n,i)}var Cn=class{},Dh=class extends Cn{constructor(t,e){super(),this._value=t,this._key=e,this.type="endAt"}_apply(t){wi("endAt",this._value,t._path,!0);let e=t_(t._queryParams,this._value,this._key);if(Hh(e),Pr(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nn(t._repo,t._path,e,t._orderByCalled)}};function ux(n,t){return _c("endAt","key",t,!0),new Dh(n,t)}var x_=class extends Cn{constructor(t,e){super(),this._value=t,this._key=e,this.type="endBefore"}_apply(t){wi("endBefore",this._value,t._path,!1);let e=PF(t._queryParams,this._value,this._key);if(Hh(e),Pr(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new nn(t._repo,t._path,e,t._orderByCalled)}};function hx(n,t){return _c("endBefore","key",t,!0),new x_(n,t)}var kh=class extends Cn{constructor(t,e){super(),this._value=t,this._key=e,this.type="startAt"}_apply(t){wi("startAt",this._value,t._path,!0);let e=e_(t._queryParams,this._value,this._key);if(Hh(e),Pr(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new nn(t._repo,t._path,e,t._orderByCalled)}};function fx(n=null,t){return _c("startAt","key",t,!0),new kh(n,t)}var S_=class extends Cn{constructor(t,e){super(),this._value=t,this._key=e,this.type="startAfter"}_apply(t){wi("startAfter",this._value,t._path,!1);let e=kF(t._queryParams,this._value,this._key);if(Hh(e),Pr(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new nn(t._repo,t._path,e,t._orderByCalled)}};function mx(n,t){return _c("startAfter","key",t,!0),new S_(n,t)}var A_=class extends Cn{constructor(t){super(),this._limit=t,this.type="limitToFirst"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new nn(t._repo,t._path,RF(t._queryParams,this._limit),t._orderByCalled)}};function px(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new A_(n)}var R_=class extends Cn{constructor(t){super(),this._limit=t,this.type="limitToLast"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new nn(t._repo,t._path,DF(t._queryParams,this._limit),t._orderByCalled)}};function gx(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new R_(n)}var D_=class extends Cn{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){Gh(t,"orderByChild");let e=new Ce(this._path);if(he(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let i=new Jl(e),r=Mh(t._queryParams,i);return Pr(r),new nn(t._repo,t._path,r,!0)}};function _x(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Wo("orderByChild","path",n,!1),new D_(n)}var k_=class extends Cn{constructor(){super(...arguments),this.type="orderByKey"}_apply(t){Gh(t,"orderByKey");let e=Mh(t._queryParams,vi);return Pr(e),new nn(t._repo,t._path,e,!0)}};function vx(){return new k_}var P_=class extends Cn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(t){Gh(t,"orderByPriority");let e=Mh(t._queryParams,Ue);return Pr(e),new nn(t._repo,t._path,e,!0)}};function yx(){return new P_}var M_=class extends Cn{constructor(){super(...arguments),this.type="orderByValue"}_apply(t){Gh(t,"orderByValue");let e=Mh(t._queryParams,G_);return Pr(e),new nn(t._repo,t._path,e,!0)}};function bx(){return new M_}var N_=class extends Cn{constructor(t,e){super(),this._value=t,this._key=e,this.type="equalTo"}_apply(t){if(wi("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Dh(this._value,this._key)._apply(new kh(this._value,this._key)._apply(t))}};function wx(n,t){return _c("equalTo","key",t,!0),new N_(n,t)}function On(n,...t){let e=bt(n);for(let i of t)e=i._apply(e);return e}fL(En);vL(En);var aV="FIREBASE_DATABASE_EMULATOR_HOST",O_={},lV=!1;function cV(n,t,e,i){n.repoInfo_=new ah(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function vv(n,t,e,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||yi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ct("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=T_(s,r),a=o.repoInfo,c,d;typeof process<"u"&&process.env&&(d=process.env[aV]),d?(c=!0,s=`http://${d}?ns=${a.namespace}`,o=T_(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let f=r&&c?new Hl(Hl.OWNER):new jg(n.name,n.options,t);YT("Invalid Firebase Database URL",o),he(o.path)||yi("Database URL must point to the root of a Firebase Database (not including a child path).");let m=uV(a,n,f,new Vg(n.name,e));return new F_(m,n)}function dV(n,t){let e=O_[t];(!e||e[n.key]!==n)&&yi(`Database ${t}(${n.repoInfo_}) has already been deleted.`),tx(n),delete e[n.key]}function uV(n,t,e,i){let r=O_[t.name];r||(r={},O_[t.name]=r);let s=r[n.toURLString()];return s&&yi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new C_(n,lV,e,i),r[n.toURLString()]=s,s}var F_=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(WL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new En(this._repo,Ee())),this._rootInternal}_delete(){return this._rootInternal!==null&&(dV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&yi("Cannot call "+t+" on a deleted database.")}};function Ex(){bT.IS_TRANSPORT_INITIALIZED&&$t("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Cx(){Ex(),Xl.forceDisallow()}function Ix(){Ex(),Do.forceDisallow(),Xl.forceAllow()}function Tx(n,t,e,i={}){n=bt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&yi("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&yi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Hl(Hl.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Ws(i.mockUserToken,n.app.options.projectId);s=new Hl(o)}cV(r,t,e,s)}function xx(n){n=bt(n),n._checkNotDeleted("goOffline"),tx(n._repo)}function Sx(n){n=bt(n),n._checkNotDeleted("goOnline"),JL(n._repo)}function Ax(n,t){nT(n,t)}function hV(n){j_(Hs),Ri(new mn("database",(t,{instanceIdentifier:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return vv(i,r,s,e)},"PUBLIC").setMultipleInstances(!0)),He(wI,EI,n),He(wI,EI,"esm2017")}var fV={".sv":"timestamp"};function Rx(){return fV}function Dx(n){return{".sv":{increment:n}}}var L_=class{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function kx(n,t,e){var i;if(n=bt(n),bn("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let r=(i=e?.applyLocally)!==null&&i!==void 0?i:!0,s=new ht,o=(c,d,f)=>{let m=null;c?s.reject(c):(m=new Bo(f,new En(n._repo,n._path),Ue),s.resolve(new L_(d,m)))},a=Qh(n,()=>{});return eV(n._repo,n._path,t,o,a,r),s.promise}W_.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};W_.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};hV();var mV="@firebase/database-compat",pV="1.0.8";var gV=new ui("@firebase/database-compat"),Px=function(n){let t="FIREBASE WARNING: "+n;gV.warn(t)};var _V=function(n,t,e,i){if(!(i&&e===void 0)&&typeof e!="boolean")throw new Error(zt(n,t)+"must be a boolean.")},vV=function(n,t,e){if(!(e&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(zt(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var yv=class{constructor(t){this._delegate=t}cancel(t){X("OnDisconnect.cancel",0,1,arguments.length),yt("OnDisconnect.cancel","onComplete",t,!0);let e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){X("OnDisconnect.remove",0,1,arguments.length),yt("OnDisconnect.remove","onComplete",t,!0);let e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){X("OnDisconnect.set",1,2,arguments.length),yt("OnDisconnect.set","onComplete",e,!0);let i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){X("OnDisconnect.setWithPriority",2,3,arguments.length),yt("OnDisconnect.setWithPriority","onComplete",i,!0);let r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if(X("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Px("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yt("OnDisconnect.update","onComplete",e,!0);let i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}};var bv=class{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return X("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var ms=class n{constructor(t,e){this._database=t,this._delegate=e}val(){return X("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return X("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return X("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return X("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return X("DataSnapshot.child",0,1,arguments.length),t=String(t),Wo("DataSnapshot.child","path",t,!1),new n(this._database,this._delegate.child(t))}hasChild(t){return X("DataSnapshot.hasChild",1,1,arguments.length),Wo("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return X("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return X("DataSnapshot.forEach",1,1,arguments.length),yt("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new n(this._database,e)))}hasChildren(){return X("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return X("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return X("DataSnapshot.ref",0,0,arguments.length),new zi(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Yh=class n{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;X("Query.on",2,4,arguments.length),yt("Query.on","callback",e,!1);let o=n.getCancelAndContextArgs_("Query.on",i,r),a=(d,f)=>{e.call(o.context,new ms(this.database,d),f)};a.userCallback=e,a.context=o.context;let c=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(t){case"value":return Qh(this._delegate,a,c),e;case"child_added":return fv(this._delegate,a,c),e;case"child_removed":return gv(this._delegate,a,c),e;case"child_changed":return mv(this._delegate,a,c),e;case"child_moved":return pv(this._delegate,a,c),e;default:throw new Error(zt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if(X("Query.off",0,3,arguments.length),vV("Query.off",t,!0),yt("Query.off","callback",e,!0),Vm("Query.off","context",i,!0),e){let r=()=>{};r.userCallback=e,r.context=i,_v(this._delegate,t,r)}else _v(this._delegate,t)}get(){return dx(this._delegate).then(t=>new ms(this.database,t))}once(t,e,i,r){X("Query.once",1,4,arguments.length),yt("Query.once","callback",e,!0);let s=n.getCancelAndContextArgs_("Query.once",i,r),o=new ht,a=(d,f)=>{let m=new ms(this.database,d);e&&e.call(s.context,m,f),o.resolve(m)};a.userCallback=e,a.context=s.context;let c=d=>{s.cancel&&s.cancel.call(s.context,d),o.reject(d)};switch(t){case"value":Qh(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":fv(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":gv(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":mv(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":pv(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(zt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(t){return X("Query.limitToFirst",1,1,arguments.length),new n(this.database,On(this._delegate,px(t)))}limitToLast(t){return X("Query.limitToLast",1,1,arguments.length),new n(this.database,On(this._delegate,gx(t)))}orderByChild(t){return X("Query.orderByChild",1,1,arguments.length),new n(this.database,On(this._delegate,_x(t)))}orderByKey(){return X("Query.orderByKey",0,0,arguments.length),new n(this.database,On(this._delegate,vx()))}orderByPriority(){return X("Query.orderByPriority",0,0,arguments.length),new n(this.database,On(this._delegate,yx()))}orderByValue(){return X("Query.orderByValue",0,0,arguments.length),new n(this.database,On(this._delegate,bx()))}startAt(t=null,e){return X("Query.startAt",0,2,arguments.length),new n(this.database,On(this._delegate,fx(t,e)))}startAfter(t=null,e){return X("Query.startAfter",0,2,arguments.length),new n(this.database,On(this._delegate,mx(t,e)))}endAt(t=null,e){return X("Query.endAt",0,2,arguments.length),new n(this.database,On(this._delegate,ux(t,e)))}endBefore(t=null,e){return X("Query.endBefore",0,2,arguments.length),new n(this.database,On(this._delegate,hx(t,e)))}equalTo(t,e){return X("Query.equalTo",1,2,arguments.length),new n(this.database,On(this._delegate,wx(t,e)))}toString(){return X("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return X("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if(X("Query.isEqual",1,1,arguments.length),!(t instanceof n)){let e="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(e)}return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){let r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,yt(t,"cancel",r.cancel,!0),r.context=i,Vm(t,"context",r.context,!0);else if(e)if(typeof e=="object"&&e!==null)r.context=e;else if(typeof e=="function")r.cancel=e;else throw new Error(zt(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new zi(this.database,new En(this._delegate._repo,this._delegate._path))}},zi=class n extends Yh{constructor(t,e){super(t,new nn(e._repo,e._path,new ic,!1)),this.database=t,this._delegate=e}getKey(){return X("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return X("Reference.child",1,1,arguments.length),typeof t=="number"&&(t=String(t)),new n(this.database,kr(this._delegate,t))}getParent(){X("Reference.parent",0,0,arguments.length);let t=this._delegate.parent;return t?new n(this.database,t):null}getRoot(){return X("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}set(t,e){X("Reference.set",1,2,arguments.length),yt("Reference.set","onComplete",e,!0);let i=Kh(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if(X("Reference.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Px("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bn("Reference.update",this._delegate._path),yt("Reference.update","onComplete",e,!0);let i=cx(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){X("Reference.setWithPriority",2,3,arguments.length),yt("Reference.setWithPriority","onComplete",i,!0);let r=lx(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){X("Reference.remove",0,1,arguments.length),yt("Reference.remove","onComplete",t,!0);let e=ox(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){X("Reference.transaction",1,3,arguments.length),yt("Reference.transaction","transactionUpdate",t,!1),yt("Reference.transaction","onComplete",e,!0),_V("Reference.transaction","applyLocally",i,!0);let r=kx(this._delegate,t,{applyLocally:i}).then(s=>new bv(s.committed,new ms(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){X("Reference.setPriority",1,2,arguments.length),yt("Reference.setPriority","onComplete",e,!0);let i=ax(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){X("Reference.push",0,2,arguments.length),yt("Reference.push","onComplete",e,!0);let i=sx(this._delegate,t),r=i.then(o=>new n(this.database,o));e&&r.then(()=>e(null),o=>e(o));let s=new n(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return bn("Reference.onDisconnect",this._delegate._path),new yv(new Ah(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var ps=class{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Cx,forceLongPolling:Ix}}useEmulator(t,e,i={}){Tx(this._delegate,t,e,i)}ref(t){if(X("database.ref",0,1,arguments.length),t instanceof zi){let e=hv(this._delegate,t.toString());return new zi(this,e)}else{let e=uv(this._delegate,t);return new zi(this,e)}}refFromURL(t){X("database.refFromURL",1,1,arguments.length);let i=hv(this._delegate,t);return new zi(this,i)}goOffline(){return X("database.goOffline",0,0,arguments.length),xx(this._delegate)}goOnline(){return X("database.goOnline",0,0,arguments.length),Sx(this._delegate)}};ps.ServerValue={TIMESTAMP:Rx(),increment:n=>Dx(n)};function yV({app:n,url:t,version:e,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){j_(e);let a=new Kd("database-standalone"),c=new Ka("auth-internal",a);c.setComponent(new mn("auth-internal",()=>i,"PRIVATE"));let d;return r&&(d=new Ka("app-check-internal",a),d.setComponent(new mn("app-check-internal",()=>r,"PRIVATE"))),{instance:new ps(vv(n,c,d,t,o),n),namespace:s}}var bV=Object.freeze({__proto__:null,initStandalone:yV});var wV=ps.ServerValue;function EV(n){n.INTERNAL.registerComponent(new mn("database-compat",(t,{instanceIdentifier:e})=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new ps(r,i)},"PUBLIC").setServiceProps({Reference:zi,Query:Yh,Database:ps,DataSnapshot:ms,enableLogging:Ax,INTERNAL:bV,ServerValue:wV}).setMultipleInstances(!0)),n.registerVersion(mV,pV)}EV(on);function bc(n,t,e="on",i=gd){return new Ye(r=>{let s=null;return s=n[e](t,(o,a)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:a})}),e==="once"&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),e==="on"?{unsubscribe(){s!=null&&n.off(t,s)}}:{unsubscribe(){}}}).pipe(q(r=>{let{snapshot:s,prevKey:o}=r,a=null;return s.exists()&&(a=s.key),{type:t,payload:s,prevKey:o,key:a}}),wd())}function CV(n){return typeof n=="string"}function IV(n){return typeof n.exportVal=="function"}function Lx(n){return n==null}function Vx(n){return typeof n.set=="function"}function Mx(n,t){return Vx(t)?t:n.ref(t)}function jx(n,t){if(CV(n))return t.stringCase();if(Vx(n))return t.firebaseCase();if(IV(n))return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof n}`)}function Bx(n){return(Lx(n)||n.length===0)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Ux(n,t,e){t=Bx(t);let i=t.map(r=>bc(n,r,"on",e));return ct(...i)}function TV(n,t,e){let i=Ux(n,t).pipe(Va((r,s)=>[...r,s],[]));return SV(n,i,e)}function xV(n,t){return bc(n,"value","on",t).pipe(q(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}function SV(n,t,e){return xV(n,e).pipe(Pw(t),q(([r,s])=>{let o=r.lastKeyToLoad,a=s.map(c=>c.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),kw(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),q(r=>r.actions))}function Nx(n,t){return function(i,r){return jx(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function AV(n){return function(e){return e?jx(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function RV(n,t,e){return bc(n,"value","once",e).pipe($e(i=>{let r=[W(i)];return t.forEach(s=>r.push(bc(n,s,"on",e))),ct(...r).pipe(Va(kV,[]))}),La())}function zx(n,t){let e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function DV(n,t){if(Lx(t))return 0;{let e=zx(n,t);return e===-1?n.length:e+1}}function kV(n,t){let{payload:e,prevKey:i,key:r}=t,s=zx(n,r),o=DV(n,i);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(c=>{let d={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,n=[...n,d],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==i&&(n=n.filter(c=>c.payload.key!==e.key),n.splice(o,0,t));else{if(i==null)return[t,...n];n=n.slice(),n.splice(o,0,t)}return n;case"child_removed":return n.filter(a=>a.payload.key!==e.key);case"child_changed":return n.map(a=>a.payload.key===r?t:a);case"child_moved":if(s>-1){let a=n.splice(s,1)[0];return n=n.slice(),n.splice(o,0,a),n}return n;default:return n}}function Ox(n,t,e){return t=Bx(t),RV(n,t,e)}function PV(n,t){let e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Nx(i,"update"),set:Nx(i,"set"),push:r=>i.push(r),remove:AV(i),snapshotChanges(r){return Ox(n,r,e).pipe(gi)},stateChanges(r){return Ux(n,r,e).pipe(gi)},auditTrail(r){return TV(n,r,e).pipe(gi)},valueChanges(r,s){return Ox(n,r,e).pipe(q(a=>a.map(c=>s&&s.idField?we(F({},c.payload.val()),{[s.idField]:c.key}):c.payload.val())),gi)}}}function Fx(n,t){return function(){return bc(n,"value","on",t)}}function MV(n,t){return{query:n,snapshotChanges(){return Fx(n,t.schedulers.outsideAngular)().pipe(gi)},update(e){return n.ref.update(e)},set(e){return n.ref.set(e)},remove(){return n.ref.remove()},valueChanges(){return Fx(n,t.schedulers.outsideAngular)().pipe(gi,q(i=>i.payload.exists()?i.payload.val():null))}}}var NV=new V("angularfire2.realtimeDatabaseURL"),OV=new V("angularfire2.database.use-emulator"),FV=(()=>{class n{schedulers;database;constructor(e,i,r,s,o,a,c,d,f,m,g,b,E,D,M){this.schedulers=a;let ne=c,te=Bl(e,o,i);d&&xg(te,o,f,g,b,E,m,D),this.database=ih(`${te.name}.database.${r}`,"AngularFireDatabase",te.name,()=>{let U=o.runOutsideAngular(()=>te.database(r||void 0));return ne&&U.useEmulator(...ne),U},[ne])}list(e,i){let r=this.schedulers.ngZone.runOutsideAngular(()=>Mx(this.database,e)),s=r;return i&&(s=i(r)),PV(s,this)}object(e){let i=this.schedulers.ngZone.runOutsideAngular(()=>Mx(this.database,e));return MV(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||n)(x(So),x(Ao,8),x(NV,8),x(Rt),x(z),x(Pn),x(OV,8),x(bI,8),x(bg,8),x(wg,8),x(Eg,8),x(Cg,8),x(Ig,8),x(Tg,8),x(yn,8))};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),$x=(()=>{class n{constructor(){on.registerVersion("angularfire",Jt.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=J({type:n});static \u0275inj=Z({providers:[FV]})}return n})();var LV=(n,t)=>({active:n,disabled:t});function VV(n,t){n&1&&ye(0,"app-loader")}function jV(n,t){if(n&1&&(N(0,"mat-error"),G(1),O()),n&2){let e=H(2);B(),tt(e.errorEmailMessage())}}function BV(n,t){if(n&1&&(N(0,"mat-error"),G(1),O()),n&2){let e=H(2);B(),tt(e.errorPasswordMessage())}}function UV(n,t){if(n&1){let e=kt();N(0,"form",3),K("ngSubmit",function(){Te(e);let r=H();return xe(r.onSubmit(r.form.valid))}),N(1,"mat-form-field")(2,"mat-label"),G(3,"Enter your email"),O(),N(4,"input",4),K("blur",function(){Te(e);let r=H();return xe(r.updateEmailErrorMessage())}),O(),ce(5,jV,2,1,"mat-error"),O(),N(6,"mat-form-field")(7,"mat-label"),G(8,"Enter your password"),O(),N(9,"input",5),K("blur",function(){Te(e);let r=H();return xe(r.updatePasswordErrorMessage())}),O(),N(10,"button",6),K("click",function(r){Te(e);let s=H();return xe(s.clickEvent(r))}),N(11,"mat-icon"),G(12),O()(),ce(13,BV,2,1,"mat-error"),O(),N(14,"button",7),G(15,"Submit"),O(),N(16,"div",8)(17,"p"),G(18,"Don't have an account? "),N(19,"a",9),G(20,"Create one!"),O()()()()}if(n&2){let e=H();ee("formGroup",e.form),B(5),Be(e.form.controls.email.invalid?5:-1),B(4),ee("type",e.hide()?"password":"text"),B(),Pe("aria-label","Hide password")("aria-pressed",e.hide()),B(2),tt(e.hide()?"visibility_off":"visibility"),B(),Be(e.form.controls.password.invalid?13:-1),B(),ee("ngClass",js(9,LV,e.form.valid,e.form.invalid)),B(5),ee("routerLink","/register")}}var Xh=class n{form=new mi({email:new _n("",[nt.required,nt.email]),password:new _n("",[nt.required,nt.minLength(8)])});hide=Je(!0);errorEmailMessage=Je("");errorPasswordMessage=Je("");authService=P(an);errorsService=P(Io);isLoading=!1;notificationMessage="";notification;router=P(Pt);subscription;constructor(){ct(this.form.controls.email.statusChanges,this.form.controls.email.valueChanges).pipe(Zr()).subscribe(()=>this.updateEmailErrorMessage()),ct(this.form.controls.password.statusChanges,this.form.controls.password.valueChanges).pipe(Zr()).subscribe(()=>this.updatePasswordErrorMessage())}ngOnInit(){this.authService.getUser(),this.authService.user&&this.router.navigate(["/main"])}ngOnDestroy(){this.subscription?.unsubscribe()}updateEmailErrorMessage(){this.form.controls.email.hasError("required")?this.errorEmailMessage.set("You must enter a value"):this.form.controls.email.hasError("email")?this.errorEmailMessage.set("Not a valid email"):this.errorEmailMessage.set("")}updatePasswordErrorMessage(){this.form.controls.password.hasError("required")?this.errorPasswordMessage.set("You must enter a value"):this.form.controls.password.hasError("minlength")?this.errorPasswordMessage.set("Value should not be less then 8 characters long"):this.errorPasswordMessage.set("")}clickEvent(t){this.hide.set(!this.hide()),t.stopPropagation()}showNotification(t,e){return console.log("message: ",t),t?(this.notificationMessage=t,this.isLoading=!1,this.notification&&(this.notification.setValues(this.notificationMessage,e),this.notification.show()),!0):!1}onSubmit(t){t&&this.form.value.email&&this.form.value.password?(this.isLoading=!0,this.subscription=this.authService.login(this.form.value.email,this.form.value.password).subscribe({next:e=>{this.isLoading=!1,this.router.navigate(["/main"])},error:e=>{this.notificationMessage="",this.isLoading=!1,this.showNotification(e.error.error,"error")}})):(this.updateEmailErrorMessage(),this.updatePasswordErrorMessage())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-log-in-page"]],viewQuery:function(e,i){if(e&1&&ut(Hn,5),e&2){let r;Fe(r=Le())&&(i.notification=r.first)}},standalone:!0,features:[oe],decls:4,vars:2,consts:[[1,"wrapper"],[4,"ngIf"],["class","example-container",3,"formGroup","ngSubmit",4,"ngIf"],[1,"example-container",3,"ngSubmit","formGroup"],["matInput","","placeholder","pat@example.com","formControlName","email","required","",3,"blur"],["matInput","","formControlName","password",3,"blur","type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["type","submit",1,"sbt-btn",3,"ngClass"],[1,"text"],[3,"routerLink"]],template:function(e,i){e&1&&(N(0,"div",0),ye(1,"app-notification"),ce(2,VV,1,0,"app-loader",1)(3,UV,21,12,"form",2),O()),e&2&&(B(2),ee("ngIf",i.isLoading),B(),ee("ngIf",!i.isLoading))},dependencies:[Gn,yo,br,vo,qu,wo,bo,_r,uo,pi,gr,lo,es,ho,Fi,Jr,Eo,Zu,Xu,Yu,vt,Gr,li,Eu,wu,Hn,wr,sI,$x],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:80vh;font-size:1.2em;box-sizing:border-box}.example-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;box-sizing:border-box;width:400px;border-radius:10px;border:1px solid #9a8fbf;box-shadow:0 0 43px #9a8fbf}.example-right-align[_ngcontent-%COMP%]{text-align:right}input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:200px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.sbt-btn.disabled[_ngcontent-%COMP%]{opacity:.6}.text[_ngcontent-%COMP%]{margin:20px}a[_ngcontent-%COMP%]{color:gray;cursor:pointer}p[_ngcontent-%COMP%]{margin:5px}@media (width <= 290px){.example-container[_ngcontent-%COMP%]{padding:5px}}"]})};var zV=(n,t)=>({active:n,disabled:t});function $V(n,t){n&1&&ye(0,"app-loader")}function WV(n,t){if(n&1&&(N(0,"mat-error"),G(1),O()),n&2){let e=H(2);B(),tt(e.errorEmailMessage())}}function qV(n,t){if(n&1&&(N(0,"mat-error"),G(1),O()),n&2){let e=H(2);B(),tt(e.errorPasswordMessage())}}function GV(n,t){n&1&&(N(0,"mat-error"),G(1,"Passwords are not the same!"),O())}function HV(n,t){if(n&1){let e=kt();N(0,"form",3),K("ngSubmit",function(){Te(e);let r=H();return xe(r.onSubmit(r.form.valid))}),N(1,"mat-form-field")(2,"mat-label"),G(3,"Enter your email"),O(),N(4,"input",4),K("blur",function(){Te(e);let r=H();return xe(r.updateEmailErrorMessage())}),O(),ce(5,WV,2,1,"mat-error"),O(),N(6,"mat-form-field")(7,"mat-label"),G(8,"Enter your password"),O(),N(9,"input",5),K("blur",function(){Te(e);let r=H();return xe(r.updatePasswordErrorMessage())}),O(),N(10,"button",6),K("click",function(r){Te(e);let s=H();return xe(s.clickEvent(r))}),N(11,"mat-icon"),G(12),O()(),ce(13,qV,2,1,"mat-error"),O(),N(14,"mat-form-field")(15,"mat-label"),G(16,"Enter your password"),O(),N(17,"input",7),K("blur",function(){Te(e);let r=H();return xe(r.updatePasswordErrorMessage())}),O(),N(18,"button",6),K("click",function(r){Te(e);let s=H();return xe(s.clickEvent(r,1))}),N(19,"mat-icon"),G(20),O()(),ce(21,GV,2,0,"mat-error"),O(),N(22,"button",8),G(23,"Submit"),O(),N(24,"div",9)(25,"p"),G(26,"Already have an account? "),N(27,"a",10),G(28,"Log in!"),O()()()()}if(n&2){let e=H();ee("formGroup",e.form),B(5),Be(e.form.controls.email.invalid?5:-1),B(4),ee("type",e.hide()?"password":"text"),B(),Pe("aria-label","Hide password")("aria-pressed",e.hide()),B(2),tt(e.hide()?"visibility_off":"visibility"),B(),Be(e.form.controls.password.invalid?13:-1),B(4),ee("type",e.hide1()?"password":"text"),B(),Pe("aria-label","Hide password")("aria-pressed",e.hide1()),B(2),tt(e.hide1()?"visibility_off":"visibility"),B(),Be(e.form.controls.password!=e.form.controls.password1?21:-1),B(),ee("ngClass",js(14,zV,e.form.valid,e.form.invalid)),B(5),ee("routerLink","/login")}}var Zh=class n{form=new mi({email:new _n("",[nt.required,nt.email]),password:new _n("",[nt.required,nt.minLength(8)]),password1:new _n("",[nt.required,nt.minLength(8)])});hide=Je(!0);hide1=Je(!0);errorEmailMessage=Je("");errorPasswordMessage=Je("");errorPassword1Message=Je("");authService=P(an);errorsService=P(Io);isLoading=!1;notificationMessage="";notification;router=P(Pt);subscription;constructor(){ct(this.form.controls.email.statusChanges,this.form.controls.email.valueChanges).pipe(Zr()).subscribe(()=>this.updateEmailErrorMessage()),ct(this.form.controls.password.statusChanges,this.form.controls.password.valueChanges).pipe(Zr()).subscribe(()=>this.updatePasswordErrorMessage())}ngOnDestroy(){this.subscription?.unsubscribe()}ngOnInit(){this.authService.getUser(),this.authService.user&&this.router.navigate(["/main"])}updateEmailErrorMessage(){this.form.controls.email.hasError("required")?this.errorEmailMessage.set("You must enter a value"):this.form.controls.email.hasError("email")?this.errorEmailMessage.set("Not a valid email"):this.errorEmailMessage.set("")}updatePasswordErrorMessage(){this.form.controls.password.hasError("required")?this.errorPasswordMessage.set("You must enter a value"):this.form.controls.password.hasError("minlength")?this.errorPasswordMessage.set("Value should not be less then 8 characters long"):this.errorPasswordMessage.set("")}clickEvent(t,e=0){e?this.hide1.set(!this.hide1()):this.hide.set(!this.hide()),t.stopPropagation()}showNotification(t,e){return t?(this.notificationMessage=t,this.isLoading=!1,this.notification&&(this.notification.setValues(this.notificationMessage,e),this.notification.show()),!0):!1}onSubmit(t){t&&this.form.value.email&&this.form.value.password?(this.isLoading=!0,this.subscription=this.authService.register(this.form.value.email,this.form.value.password).subscribe({next:e=>{this.isLoading=!1,this.router.navigate(["/main"])},error:e=>{this.notificationMessage="",this.isLoading=!1,this.showNotification(e.error.error,"error")}})):(this.updateEmailErrorMessage(),this.updatePasswordErrorMessage())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-register-page"]],viewQuery:function(e,i){if(e&1&&ut(Hn,5),e&2){let r;Fe(r=Le())&&(i.notification=r.first)}},standalone:!0,features:[oe],decls:4,vars:2,consts:[[1,"wrapper"],[4,"ngIf"],["class","example-container",3,"formGroup","ngSubmit",4,"ngIf"],[1,"example-container",3,"ngSubmit","formGroup"],["matInput","","placeholder","pat@example.com","formControlName","email","required","",3,"blur"],["matInput","","formControlName","password",3,"blur","type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","password1",3,"blur","type"],["type","submit",1,"sbt-btn",3,"ngClass"],[1,"text"],[3,"routerLink"]],template:function(e,i){e&1&&(N(0,"div",0),ye(1,"app-notification"),ce(2,$V,1,0,"app-loader",1)(3,HV,29,17,"form",2),O()),e&2&&(B(2),ee("ngIf",i.isLoading),B(),ee("ngIf",!i.isLoading))},dependencies:[Gn,yo,br,vo,qu,wo,bo,_r,uo,pi,gr,lo,es,ho,Fi,Jr,Eo,Zu,Xu,Yu,vt,Gr,li,wr,Hn,Eu,wu],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:80vh;font-size:1.2em;box-sizing:border-box}.example-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;box-sizing:border-box;width:400px;border-radius:10px;border:1px solid #9a8fbf;box-shadow:0 0 43px #9a8fbf}.example-right-align[_ngcontent-%COMP%]{text-align:right}input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:200px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.sbt-btn.disabled[_ngcontent-%COMP%]{opacity:.6}.text[_ngcontent-%COMP%]{margin:20px}a[_ngcontent-%COMP%]{color:gray;cursor:pointer}p[_ngcontent-%COMP%]{margin:5px}@media (width <= 290px){.example-container[_ngcontent-%COMP%]{padding:5px}}"]})};var KV=20,wc=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new $,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=KV){return this._platform.isBrowser?new Ye(i=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(xm(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):W()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Xe(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=gt(i),s=e.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return bd(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(x(z),x(Ae),x(Q,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wx=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new $,this._elementScrolled=new Ye(o=>this.ngZone.runOutsideAngular(()=>bd(this.elementRef.nativeElement,"scroll").pipe(ot(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=r?e.end:e.start),e.right==null&&(e.right=r?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&mo()!=qn.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),mo()==qn.INVERTED?e.left=e.right:mo()==qn.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;Vu()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",r="right",s=this.elementRef.nativeElement;if(e=="top")return s.scrollTop;if(e=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let o=this.dir&&this.dir.value=="rtl";return e=="start"?e=o?r:i:e=="end"&&(e=o?i:r),o&&mo()==qn.INVERTED?e==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&mo()==qn.NEGATED?e==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(wc),R(z),R(Dn,8))}}static{this.\u0275dir=Y({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return n})(),QV=20,Ec=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new $,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect(),o=-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,a=-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:a}}change(e=QV){return e>0?this._change.pipe(xm(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(x(Ae),x(z),x(Q,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Go=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({})}}return n})(),wv=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({imports:[vr,Go,vr,Go]})}}return n})();function oS(n){let t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return i==="canvas"?Hx(n,t):(i==="input"||i==="select"||i==="textarea")&&Gx(n,t),qx("canvas",n,t,Hx),qx("input, textarea, select",n,t,Gx),t}function qx(n,t,e,i){let r=t.querySelectorAll(n);if(r.length){let s=e.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}var YV=0;function Gx(n,t){t.type!=="file"&&(t.value=n.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${YV++}`)}function Hx(n,t){let e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function Dv(n){let t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function Iv(n,t,e){let{top:i,bottom:r,left:s,right:o}=n;return e>=i&&e<=r&&t>=s&&t<=o}function Ic(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function Kx(n,t,e,i){let{top:r,right:s,bottom:o,left:a,width:c,height:d}=n,f=c*t,m=d*t;return i>r-m&&i<o+m&&e>a-f&&e<s+f}var nf=class{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Dv(e)})})}handleScroll(t){let e=Mt(t),i=this.positions.get(e);if(!i)return null;let r=i.scrollPosition,s,o;if(e===this._document){let d=this.getViewportScrollPosition();s=d.top,o=d.left}else s=e.scrollTop,o=e.scrollLeft;let a=r.top-s,c=r.left-o;return this.positions.forEach((d,f)=>{d.clientRect&&e!==f&&e.contains(f)&&Ic(d.clientRect,a,c)}),r.top=s,r.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function aS(n,t){let e=n.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function kv(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function Ho(n,t){let e=t?"":"none";kv(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Qx(n,t,e){kv(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function rf(n,t){return t&&t!="none"?n+" "+t:n}function Yx(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=sf(t.left,t.top)}function sf(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function Xx(n){let t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function XV(n){let t=getComputedStyle(n),e=Cv(t,"transition-property"),i=e.find(a=>a==="transform"||a==="all");if(!i)return 0;let r=e.indexOf(i),s=Cv(t,"transition-duration"),o=Cv(t,"transition-delay");return Xx(s[r])+Xx(o[r])}function Cv(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}var ZV=new Set(["position"]),Tv=class{get element(){return this._preview}constructor(t,e,i,r,s,o,a,c,d){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=r,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=d}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),Zx(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return XV(this._preview)}addEventListener(t,e){this._preview.addEventListener(t,e)}removeEventListener(t,e){this._preview.removeEventListener(t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,r;if(i&&t){let s=t.matchSize?this._initialDomRect:null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),r=aS(o,this._document),this._previewEmbeddedView=o,t.matchSize?Yx(r,s):r.style.transform=sf(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=oS(this._rootElement),Yx(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return kv(r.style,{"pointer-events":"none",margin:Zx(r)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},ZV),Ho(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}};function Zx(n){return"showPopover"in n}var Jx=vn({passive:!0}),Jh=vn({passive:!1}),eS=vn({passive:!1,capture:!0}),JV=800,tS=new Set(["position"]),xv=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Ho(e,t)))}constructor(t,e,i,r,s,o){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=Je(!1),this._moveEvents=new $,this._pointerMoveSubscription=St.EMPTY,this._pointerUpSubscription=St.EMPTY,this._scrollSubscription=St.EMPTY,this._resizeSubscription=St.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this.scale=1,this._disabled=!1,this.beforeStarted=new $,this.started=new $,this.released=new $,this.ended=new $,this.entered=new $,this.exited=new $,this.dropped=new $,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{let c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging()){let f=Math.abs(c.x-this._pickupPositionOnPage.x),m=Math.abs(c.y-this._pickupPositionOnPage.y);if(f+m>=this._config.dragStartThreshold){let b=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),E=this._dropContainer;if(!b){this._endDragSequence(a);return}(!E||!E.isDragging()&&!E.isReceiving())&&(a.cancelable&&a.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(a)))}return}a.cancelable&&a.preventDefault();let d=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,c);else{let f=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,m=this._activeTransform;m.x=d.x-f.x+this._passiveTransform.x,m.y=d.y-f.y+this._passiveTransform.y,this._applyRootElementTransform(m.x,m.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:a,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new nf(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>gt(i)),this._handles.forEach(i=>Ho(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=gt(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,Jh),e.addEventListener("touchstart",this._pointerDown,Jx),e.addEventListener("dragstart",this._nativeDragStart,Jh)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?gt(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),Ho(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),Ho(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",iS,eS)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Cc(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{e.addEventListener("selectstart",iS,eS)}),i){let r=this._rootElement,s=r.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(a,r),this._initialTransform=r.style.transform||"",this._preview=new Tv(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(s,e)),Qx(r,!1,tS),this._document.body.appendChild(s.replaceChild(o,r)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),r=Cc(e),s=!r&&e.button!==0,o=this._rootElement,a=Mt(e),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+JV>Date.now(),d=r?Ll(e):Fl(e);if(a&&a.draggable&&e.type==="mousedown"&&e.preventDefault(),i||s||c||d)return;if(this._handles.length){let g=o.style;this._rootElementTapHighlight=g.webkitTapHighlightColor||"",g.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(g=>this._updateOnScroll(g)),this._boundaryElement&&(this._boundaryRect=Dv(this._boundaryElement));let f=this._previewTemplate;this._pickupPositionInElement=f&&f.template&&!f.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let m=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:m.x,y:m.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Qx(this._rootElement,!0,tS),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),s=this._getDragDistance(r),o=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,o,s,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=o=>{(!o||this._preview&&Mt(o)===this._preview.element&&o.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,e*1.5);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=aS(this._placeholderRef,this._document)):i=oS(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){let r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():t,o=Cc(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,d=o.pageY-s.top-a.top;return{x:s.left-t.left+c,y:s.top-t.top+d}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=Cc(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),f=a.top+o,m=a.bottom-(d-o),g=a.left+s,b=a.right-(c-s);i=nS(i,g,b),r=nS(r,f,m)}return{x:i,y:r}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,Ho(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,Jh),t.removeEventListener("touchstart",this._pointerDown,Jx),t.removeEventListener("dragstart",this._nativeDragStart,Jh)}_applyRootElementTransform(t,e){let i=1/this.scale,r=sf(t*i,e*i),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=rf(r,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=sf(t,e);this._preview.setTransform(rf(r,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let s=r.left-i.left,o=i.right-r.right,a=r.top-i.top,c=i.bottom-r.bottom;r.width>i.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,r.height>i.height?(a>0&&(e+=a),c>0&&(e-=c)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:Cc(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=Mt(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Ic(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=po(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return gt(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function nS(n,t,e){return Math.max(t,Math.min(e,n))}function Cc(n){return n.type[0]==="t"}function iS(n){n.preventDefault()}function lf(n,t,e){let i=of(t,n.length-1),r=of(e,n.length-1);if(i===r)return;let s=n[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)n[a]=n[a+o];n[r]=s}function lS(n,t,e,i){let r=of(e,n.length-1),s=of(i,t.length);n.length&&t.splice(s,0,n.splice(r,1)[0])}function of(n,t){return Math.max(0,Math.min(t,n))}var af=class{constructor(t){this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,r);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(M=>M.drag===t),d=s[o],f=s[c].clientRect,m=d.clientRect,g=c>o?1:-1,b=this._getItemOffsetPx(f,m,g),E=this._getSiblingOffsetPx(c,s,g),D=s.slice();return lf(s,c,o),s.forEach((M,ne)=>{if(D[ne]===M)return;let te=M.drag===t,U=te?b:E,Ie=te?t.getPlaceholderElement():M.drag.getRootElement();M.offset+=U;let Qe=Math.round(M.offset*(1/M.drag.scale));a?(Ie.style.transform=rf(`translate3d(${Qe}px, 0, 0)`,M.initialTransform),Ic(M.clientRect,0,U)):(Ie.style.transform=rf(`translate3d(0, ${Qe}px, 0)`,M.initialTransform),Ic(M.clientRect,U,0))}),this._previousSwap.overlaps=Iv(m,e,i),this._previousSwap.drag=d.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:c,currentIndex:o}}enter(t,e,i,r){let s=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,o=this._activeDraggables,a=o.indexOf(t),c=t.getPlaceholderElement(),d=o[s];if(d===t&&(d=o[s+1]),!d&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(d=o[0]),a>-1&&o.splice(a,1),d&&!this._dragDropRegistry.isDragging(d)){let f=d.getRootElement();f.parentElement.insertBefore(c,f),o.splice(s,0,t)}else this._element.appendChild(c),o.push(t);c.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{Ic(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:Dv(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){let r=this.orientation==="horizontal",s=r?e.left-t.left:e.top-t.top;return i===-1&&(s+=r?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){let r=this.orientation==="horizontal",s=e[t].clientRect,o=e[t+i*-1],a=s[r?"width":"height"]*i;if(o){let c=r?"left":"top",d=r?"right":"bottom";i===-1?a-=o.clientRect[c]-s[d]:a+=s[c]-o.clientRect[d]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let o=i[i.length-1].clientRect;return r?t>=o.right:e>=o.bottom}else{let o=i[0].clientRect;return r?t<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(t,e,i,r){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===t)return!1;if(r){let d=s?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return s?e>=Math.floor(c.left)&&e<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,t)?-1:o}},Sv=class{constructor(t,e){this._document=t,this._dragDropRegistry=e,this._previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1},this._relatedNodes=[]}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let r=e[i];this._relatedNodes.push([r,r.nextSibling])}this.withItems(t)}sort(t,e,i,r){let s=this._getItemIndexFromPointerPosition(t,e,i),o=this._previousSwap;if(s===-1||this._activeItems[s]===t)return null;let a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===r.x&&o.deltaY===r.y)return null;let c=this.getItemIndex(t),d=t.getPlaceholderElement(),f=a.getRootElement();s>c?f.after(d):f.before(d),lf(this._activeItems,c,s);let m=this._getRootNode().elementFromPoint(e,i);return o.deltaX=r.x,o.deltaY=r.y,o.drag=a,o.overlaps=f===m||f.contains(m),{previousIndex:c,currentIndex:s}}enter(t,e,i,r){let s=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,i):r;s===-1&&(s=this._getClosestItemIndexToPointer(t,e,i));let o=this._activeItems[s],a=this._activeItems.indexOf(t);a>-1&&this._activeItems.splice(a,1),o&&!this._dragDropRegistry.isDragging(o)?(this._activeItems.splice(s,0,t),o.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[r,s]=this._relatedNodes[i];r.parentNode===t&&r.nextSibling!==s&&(s===null?t.appendChild(r):s.parentNode===t&&t.insertBefore(r,s))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let r=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),s=r?this._activeItems.findIndex(o=>{let a=o.getRootElement();return r===a||a.contains(r)}):-1;return s===-1||!this._sortPredicate(s,t)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=po(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let r=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let a=this._activeItems[o];if(a!==t){let{x:c,y:d}=a.getRootElement().getBoundingClientRect(),f=Math.hypot(e-c,i-d);f<r&&(r=f,s=o)}}return s}},rS=.05,cS=.05,Fn=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(Fn||{}),rn=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(rn||{}),Av=class{constructor(t,e,i,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new $,this.entered=new $,this.exited=new $,this.dropped=new $,this.sorted=new $,this.receivingStarted=new $,this.receivingStopped=new $,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=St.EMPTY,this._verticalScrollDirection=Fn.NONE,this._horizontalScrollDirection=rn.NONE,this._stopScrollTimers=new $,this._cachedShadowRoot=null,this._scrollableElements=[],this._direction="ltr",this._startScrollInterval=()=>{this._stopScrolling(),Aw(0,Im).pipe(ot(this._stopScrollTimers)).subscribe(()=>{let a=this._scrollNode,c=this.autoScrollStep;this._verticalScrollDirection===Fn.UP?a.scrollBy(0,-c):this._verticalScrollDirection===Fn.DOWN&&a.scrollBy(0,c),this._horizontalScrollDirection===rn.LEFT?a.scrollBy(-c,0):this._horizontalScrollDirection===rn.RIGHT&&a.scrollBy(c,0)})};let o=this.element=gt(t);this._document=i,this.withOrientation("vertical").withElementContainer(o),e.registerDropContainer(this),this._parentPositions=new nf(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,s,o,a,c={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>t.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof af&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new Sv(this._document,this._dragDropRegistry);else{let e=new af(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=gt(this.element),i=this._scrollableElements.indexOf(this._container),r=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),r>-1&&this._scrollableElements.splice(r,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._domRect||!Kx(this._domRect,rS,e,i))return;let s=this._sortStrategy.sort(t,e,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=Fn.NONE,s=rn.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||Kx(o.clientRect,rS,t,e)&&([r,s]=ej(a,o.clientRect,this._direction,t,e),(r||s)&&(i=a))}),!r&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};r=dS(c,e),s=uS(c,t),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return this._domRect!=null&&Iv(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!Iv(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let r=this._getShadowRoot().elementFromPoint(e,i);return r?r===this._container||this._container.contains(r):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=po(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function dS(n,t){let{top:e,bottom:i,height:r}=n,s=r*cS;return t>=e-s&&t<=e+s?Fn.UP:t>=i-s&&t<=i+s?Fn.DOWN:Fn.NONE}function uS(n,t){let{left:e,right:i,width:r}=n,s=r*cS;return t>=e-s&&t<=e+s?rn.LEFT:t>=i-s&&t<=i+s?rn.RIGHT:rn.NONE}function ej(n,t,e,i,r){let s=dS(t,r),o=uS(t,i),a=Fn.NONE,c=rn.NONE;if(s){let d=n.scrollTop;s===Fn.UP?d>0&&(a=Fn.UP):n.scrollHeight-d>n.clientHeight&&(a=Fn.DOWN)}if(o){let d=n.scrollLeft;e==="rtl"?o===rn.RIGHT?d<0&&(c=rn.RIGHT):n.scrollWidth+d>n.clientWidth&&(c=rn.LEFT):o===rn.LEFT?d>0&&(c=rn.LEFT):n.scrollWidth-d>n.clientWidth&&(c=rn.RIGHT)}return[a,c]}var ef=vn({passive:!1,capture:!0}),tf=new Set,tj=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=se({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[oe],decls:0,vars:0,template:function(i,r){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}}return n})(),nj=(()=>{class n{constructor(e,i){this._ngZone=e,this._appRef=P(rr),this._environmentInjector=P(Un),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=Je([]),this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new $,this.pointerUp=new $,this.scroll=new $,this._preventDefaultWhileDragging=r=>{this._activeDragInstances().length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,ef)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ef)}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._loadResets(),this._activeDragInstances.update(r=>[...r,e]),this._activeDragInstances().length===1)){let r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ef}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:ef}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(e){this._activeDragInstances.update(i=>{let r=i.indexOf(e);return r>-1?(i.splice(r,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this.scroll];return e&&e!==this._document&&i.push(new Ye(r=>this._ngZone.runOutsideAngular(()=>{let o=a=>{this._activeDragInstances().length&&r.next(a)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),ct(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}_loadResets(){if(!tf.has(this._appRef)){tf.add(this._appRef);let e=d0(tj,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{tf.delete(this._appRef),tf.size===0&&e.destroy()})}}static{this.\u0275fac=function(i){return new(i||n)(x(z),x(Q))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ij={dragStartThreshold:5,pointerDirectionChangeThreshold:5},Pv=(()=>{class n{constructor(e,i,r,s){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(e,i=ij){return new xv(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new Av(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(i){return new(i||n)(x(Q),x(z),x(Ec),x(nj))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sS=new V("CDK_DRAG_PARENT");var rj=new V("CdkDragHandle");var hS=new V("CDK_DRAG_CONFIG"),sj="cdk-drag",fS=new V("CdkDropList"),mS=(()=>{class n{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}constructor(e,i,r,s,o,a,c,d,f,m,g){this.element=e,this.dropContainer=i,this._ngZone=s,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=f,this._selfHandle=m,this._parentDrag=g,this._destroyed=new $,this._handles=new Ut([]),this.scale=1,this.started=new le,this.released=new le,this.ended=new le,this.entered=new le,this.exited=new le,this.dropped=new le,this.moved=new Ye(b=>{let E=this._dragRef.moved.pipe(q(D=>({source:this,pointerPosition:D.pointerPosition,event:D.event,delta:D.delta,distance:D.distance}))).subscribe(b);return()=>{E.unsubscribe()}}),this._injector=P(Se),this._dragRef=d.createDrag(e,{dragStartThreshold:a&&a.dragStartThreshold!=null?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&a.pointerDirectionChangeThreshold!=null?a.pointerDirectionChangeThreshold:5,zIndex:a?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),a&&this._assignDefaults(a),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this),i._dropListRef.beforeStarted.pipe(ot(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){oi(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,r=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let e=n._dragInstances.indexOf(this);e>-1&&n._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),r=i.indexOf(e);r>-1&&(i.splice(r,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):gt(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,r=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof r=="object"&&r?r:Li(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(At(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains(sj)){e.withParent(n._dragInstances.find(r=>r.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:r,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:d,previewContainer:f}=e;this.disabled=c??!1,this.dragStartDelay=r||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),d&&(this.rootElementSelector=d),f&&(this.previewContainer=f)}_setupHandlesListener(){this._handles.pipe(ke(e=>{let i=e.map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),$e(e=>ct(...e.map(i=>i._stateChanges.pipe(Tn(i))))),ot(this._destroyed)).subscribe(e=>{let i=this._dragRef,r=e.element.nativeElement;e.disabled?i.disableHandle(r):i.enableHandle(r)})}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(fS,12),R(Q),R(z),R(nr),R(hS,8),R(Dn,8),R(Pv),R(Xt),R(rj,10),R(sS,12))}}static{this.\u0275dir=Y({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,r){i&2&&Me("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Ge],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Nd]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[We([{provide:sS,useExisting:n}]),Dt,_t]})}}return n})(),Rv=new V("CdkDropListGroup"),pS=(()=>{class n{constructor(){this._items=new Set,this.disabled=!1}ngOnDestroy(){this._items.clear()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Y({type:n,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:[2,"cdkDropListGroupDisabled","disabled",Ge]},exportAs:["cdkDropListGroup"],standalone:!0,features:[We([{provide:Rv,useExisting:n}]),Dt]})}}return n})(),oj=0,gS=(()=>{class n{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}constructor(e,i,r,s,o,a,c){this.element=e,this._changeDetectorRef=r,this._scrollDispatcher=s,this._dir=o,this._group=a,this._destroyed=new $,this.connectedTo=[],this.id=`cdk-drop-list-${oj++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new le,this.entered=new le,this.exited=new le,this.sorted=new le,this._unsortedItems=new Set,this._dropListRef=i.createDropList(e),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(d,f)=>this.enterPredicate(d.data,f.data),this._dropListRef.sortPredicate=(d,f,m)=>this.sortPredicate(d,f.data,m.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),a&&a._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=n._dropLists.indexOf(this);e>-1&&n._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(Tn(this._dir.value),ot(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=yr(this.connectedTo).map(r=>{if(typeof r=="string"){let s=n._dropLists.find(o=>o.id===r);return s}return r});if(this._group&&this._group._items.forEach(r=>{i.indexOf(r)===-1&&i.push(r)}),!this._scrollableParentsResolved){let r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let r=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(r)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Li(this.autoScrollStep,2),e.connectedTo(i.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),ct(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:r,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:a}=e;this.disabled=r??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=a||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(Pv),R(Xt),R(wc),R(Dn,8),R(Rv,12),R(hS,8))}}static{this.\u0275dir=Y({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,r){i&2&&(Pe("id",r.id),Me("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Ge],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Ge],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Ge],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[We([{provide:Rv,useValue:void 0},{provide:fS,useExisting:n}]),Dt]})}}return n})();var Ko=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({providers:[Pv],imports:[Go]})}}return n})();var cf=class n{dataService=P(Co);http=P(Pi);createTask(t){t.id||this.http.post(`${this.dataService.url}/tasks`,t).subscribe(e=>{console.log(e)})}constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function aj(n,t){if(n&1){let e=kt();N(0,"div",3)(1,"div",4),G(2),O(),N(3,"div",5)(4,"img",6),K("click",function(){Te(e);let r=H();return xe(r.edit())}),O(),N(5,"img",7),K("click",function(){Te(e);let r=H();return xe(r.delete())}),O()()()}if(n&2){let e=H();B(2),tt(e.task==null?null:e.task.task)}}function lj(n,t){if(n&1){let e=kt();N(0,"div",8)(1,"textarea",9),o0("ngModelChange",function(r){Te(e);let s=H();return s0(s.message,r)||(s.message=r),xe(r)}),G(2),O(),N(3,"button",10),K("click",function(){Te(e);let r=H();return xe(r.edit())}),G(4,"Save"),O()()}if(n&2){let e=H();B(),r0("ngModel",e.message),B(),tt(e.task==null?null:e.task.task)}}var df=class n{ngOnInit(){this.task?.task?this.message=this.task?.task:this.edit()}message="";task;dragDisabled=new le;onEditMode=!1;taskService=P(cf);edit(){this.onEditMode=!this.onEditMode,this.onEditMode||this.task&&(this.task?.changeMessage(this.message),console.log(this.message),this.taskService.createTask(this.task))}delete(){console.log("bin")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-task"]],inputs:{task:"task"},outputs:{dragDisabled:"dragDisabled"},standalone:!0,features:[oe],decls:3,vars:2,consts:[[1,"wrapper"],["class","normal",4,"ngIf"],["class","edited",4,"ngIf"],[1,"normal"],[1,"task"],[1,"icon-container"],["src","edit.png","alt","edit",1,"img",3,"click"],["src","bin.png","alt","edit",1,"img",3,"click"],[1,"edited"],["name","message","id","message",1,"text-edit",3,"ngModelChange","ngModel"],[1,"sbt-btn","active",3,"click"]],template:function(e,i){e&1&&(N(0,"div",0),ce(1,aj,6,1,"div",1)(2,lj,5,2,"div",2),O()),e&2&&(B(),ee("ngIf",!i.onEditMode),B(),ee("ngIf",i.onEditMode))},dependencies:[vt,li,Ko,_r,pi,gr,Gp],styles:[".wrapper[_ngcontent-%COMP%]{width:100%}.edited[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.normal[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:10px}.icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px;width:20%}.task[_ngcontent-%COMP%]{width:80%}.img[_ngcontent-%COMP%]{width:25px;transition:all .4s ease-in-out}.img[_ngcontent-%COMP%]:hover{transform:scale(1.2);cursor:pointer}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:200px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.sbt-btn.disabled[_ngcontent-%COMP%]{opacity:.6}.text-edit[_ngcontent-%COMP%]{width:80%;height:80px}@media screen and (max-width: 325px){.img[_ngcontent-%COMP%]{width:18px}.icon-container[_ngcontent-%COMP%]{width:25%}.task[_ngcontent-%COMP%]{width:75%}.sbt-btn[_ngcontent-%COMP%]{width:100px}}"]})};var uf=class{constructor(t,e,i,r,s){this.creatorId=t;this.userId=e;this.task=i;this.status=r;this.id=s}changeMessage(t){this.task=t}};function cj(n,t){if(n&1){let e=kt();N(0,"app-task",6),K("dragDisabled",function(){Te(e);let r=H();return xe(r.disableDrag=!r.disableDrag)}),O()}if(n&2){let e=t.$implicit,i=H();ee("cdkDragDisabled",i.disableDrag)("task",e)}}var hf=class n{title="";tasks=[];type;connectedTo=[];id;arrayChanged=new le;disableDrag=!1;drop(t){t.previousContainer===t.container?lf(t.container.data,t.previousIndex,t.currentIndex):lS(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),this.arrayChanged.emit(!0)}createTask(){this.tasks.push(new uf("1","1","",this.type))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-board"]],inputs:{title:"title",tasks:"tasks",type:"type",connectedTo:"connectedTo",id:"id"},outputs:{arrayChanged:"arrayChanged"},standalone:!0,features:[oe],decls:10,vars:3,consts:[[1,"wrapper",3,"id"],[1,"title"],[1,"drag-area"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"example-box",3,"cdkDragDisabled","task"],[1,"sbt-btn","active",3,"click"],["cdkDrag","",1,"example-box",3,"dragDisabled","cdkDragDisabled","task"]],template:function(e,i){e&1&&(N(0,"div",0)(1,"div",1)(2,"div"),G(3),O()(),N(4,"div",2)(5,"div",3),K("cdkDropListDropped",function(s){return i.drop(s)}),Zw(6,cj,1,2,"app-task",4,Xw),O()(),N(8,"button",5),K("click",function(){return i.createTask()}),G(9,"+"),O()()),e&2&&(ee("id",i.id),B(3),tt(i.title),B(2),ee("cdkDropListData",i.tasks),B(),Jw(i.tasks))},dependencies:[vt,Ko,gS,mS,df],styles:[".wrapper[_ngcontent-%COMP%]{width:300px;min-height:200px;border:1px solid lightgrey;border-radius:10px;overflow:hidden}.title[_ngcontent-%COMP%]{background-color:#6b4a8c;color:#fff;font-size:1.2em;text-align:center;padding:5px}.example-container[_ngcontent-%COMP%]{width:400px;max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.example-list[_ngcontent-%COMP%]{border:solid 1px #ccc;min-height:60px;background:#fff;border-radius:4px;overflow:hidden;display:block}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#fff;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:100%;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}@media screen and (max-width: 325px){.wrapper[_ngcontent-%COMP%]{width:200px}}"]})};var Qo=class n{http=P(Pi);url="https://taskboard-eb7da-default-rtdb.firebaseio.com/teams.json";addTeam(t){return this.http.post(this.url,t)}getTeams(t){return this.http.get(this.url).pipe(q(e=>{e.filter(i=>{let r=!1;return i.members.forEach(s=>{s.userId==t&&(r=!0)}),r})}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})};function dj(n,t){if(n&1){let e=kt();e0(0),N(1,"app-board",4),K("arrayChanged",function(){Te(e);let r=H();return xe(r.arrayChanged())}),O(),t0()}if(n&2){let e=t.$implicit;B(),ee("id",e.id)("title",e.title)("tasks",e.tasks)("connectedTo",e.connectedTo)("type",e.ref)}}var ff=class n{teamService=P(Qo);authService=P(an);ngOnInit(){this.authService.getUser()}boards=[{title:"To do",ref:"do",id:"list-1",tasks:[],connectedTo:["list-2, list-3"]},{title:"In process",ref:"progress",id:"list-2",tasks:[],connectedTo:["list-1, list-3"]},{title:"Done",ref:"done",id:"list-3",tasks:[],connectedTo:["list-2, list-1"]}];click(){console.log(this.boards)}arrayChanged(){}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-main-page"]],standalone:!0,features:[oe],decls:5,vars:1,consts:[[1,"wrapper"],["cdkDropListGroup","",1,"board-container"],[4,"ngFor","ngForOf"],[3,"click"],[3,"arrayChanged","id","title","tasks","connectedTo","type"]],template:function(e,i){e&1&&(N(0,"div",0)(1,"div",1),ce(2,dj,2,5,"ng-container",2),O(),N(3,"button",3),K("click",function(){return i.click()}),G(4,"Submit"),O()()),e&2&&(B(2),ee("ngForOf",i.boards))},dependencies:[hf,vt,Ld,Ko,pS],styles:[".wrapper[_ngcontent-%COMP%]{min-height:80vh}.board-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:row;gap:20px;justify-content:center;flex-wrap:wrap}app-dialog[_ngcontent-%COMP%]{z-index:3}"]})};var vS=()=>{let n=P(an),t=P(Pt);return n.user?!0:(t.navigate(["/login"]),!1)};var yS=[{path:"login",component:Xh},{path:"register",component:Zh},{path:"main",component:ff,canActivate:[vS]},{path:"**",redirectTo:"login",pathMatch:"full"}];var uj="@",hj=(()=>{class n{constructor(e,i,r,s,o){this.doc=e,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=P(Hw,{optional:!0}),this.loadingSchedulerFn=P(fj,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-ZUKHXHC3.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(r=>{throw new Re(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(e,i){let r=this.delegate.createRenderer(e,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new Mv(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let a=o.createRenderer(e,i);s.use(a),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){Ls()}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac})}}return n})(),Mv=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,r){this.delegate.insertBefore(t,e,i,r)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i)),this.delegate.listen(t,e,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(uj)}},fj=new V("");function bS(n="animations"){return Mm("NgAsyncAnimations"),Qt([{provide:xd,useFactory:(t,e,i)=>new hj(t,e,i,n),deps:[Q,eu,z]},{provide:Yt,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var wS="auth",Tc=class{constructor(t){return t}},gs=class{constructor(){return os(wS)}};var Nv=new V("angularfire2.auth-instances");function f2(n,t){let e=xo(wS,n,t);return e&&new Tc(e)}function m2(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Tc(i)}}var p2={provide:gs,deps:[[new Ze,Nv]]},g2={provide:Tc,useFactory:f2,deps:[[new Ze,Nv],Qn]};function ES(n,...t){return He("angularfire",Jt.full,"auth"),Qt([g2,p2,{provide:Nv,useFactory:m2(n),multi:!0,deps:[z,Se,Pn,Bi,[new Ze,yn],...t]}])}var CS=Er(jm,!0);var IS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TS={};var Ov,xS;(function(){var n;function t(T,_){function y(){}y.prototype=_.prototype,T.D=_.prototype,T.prototype=new y,T.prototype.constructor=T,T.C=function(w,C,A){for(var v=Array(arguments.length-2),Ii=2;Ii<arguments.length;Ii++)v[Ii-2]=arguments[Ii];return _.prototype[C].apply(w,v)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,_,y){y||(y=0);var w=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)w[C]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(C=0;16>C;++C)w[C]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=T.g[0],y=T.g[1],C=T.g[2];var A=T.g[3],v=_+(A^y&(C^A))+w[0]+3614090360&4294967295;_=y+(v<<7&4294967295|v>>>25),v=A+(C^_&(y^C))+w[1]+3905402710&4294967295,A=_+(v<<12&4294967295|v>>>20),v=C+(y^A&(_^y))+w[2]+606105819&4294967295,C=A+(v<<17&4294967295|v>>>15),v=y+(_^C&(A^_))+w[3]+3250441966&4294967295,y=C+(v<<22&4294967295|v>>>10),v=_+(A^y&(C^A))+w[4]+4118548399&4294967295,_=y+(v<<7&4294967295|v>>>25),v=A+(C^_&(y^C))+w[5]+1200080426&4294967295,A=_+(v<<12&4294967295|v>>>20),v=C+(y^A&(_^y))+w[6]+2821735955&4294967295,C=A+(v<<17&4294967295|v>>>15),v=y+(_^C&(A^_))+w[7]+4249261313&4294967295,y=C+(v<<22&4294967295|v>>>10),v=_+(A^y&(C^A))+w[8]+1770035416&4294967295,_=y+(v<<7&4294967295|v>>>25),v=A+(C^_&(y^C))+w[9]+2336552879&4294967295,A=_+(v<<12&4294967295|v>>>20),v=C+(y^A&(_^y))+w[10]+4294925233&4294967295,C=A+(v<<17&4294967295|v>>>15),v=y+(_^C&(A^_))+w[11]+2304563134&4294967295,y=C+(v<<22&4294967295|v>>>10),v=_+(A^y&(C^A))+w[12]+1804603682&4294967295,_=y+(v<<7&4294967295|v>>>25),v=A+(C^_&(y^C))+w[13]+4254626195&4294967295,A=_+(v<<12&4294967295|v>>>20),v=C+(y^A&(_^y))+w[14]+2792965006&4294967295,C=A+(v<<17&4294967295|v>>>15),v=y+(_^C&(A^_))+w[15]+1236535329&4294967295,y=C+(v<<22&4294967295|v>>>10),v=_+(C^A&(y^C))+w[1]+4129170786&4294967295,_=y+(v<<5&4294967295|v>>>27),v=A+(y^C&(_^y))+w[6]+3225465664&4294967295,A=_+(v<<9&4294967295|v>>>23),v=C+(_^y&(A^_))+w[11]+643717713&4294967295,C=A+(v<<14&4294967295|v>>>18),v=y+(A^_&(C^A))+w[0]+3921069994&4294967295,y=C+(v<<20&4294967295|v>>>12),v=_+(C^A&(y^C))+w[5]+3593408605&4294967295,_=y+(v<<5&4294967295|v>>>27),v=A+(y^C&(_^y))+w[10]+38016083&4294967295,A=_+(v<<9&4294967295|v>>>23),v=C+(_^y&(A^_))+w[15]+3634488961&4294967295,C=A+(v<<14&4294967295|v>>>18),v=y+(A^_&(C^A))+w[4]+3889429448&4294967295,y=C+(v<<20&4294967295|v>>>12),v=_+(C^A&(y^C))+w[9]+568446438&4294967295,_=y+(v<<5&4294967295|v>>>27),v=A+(y^C&(_^y))+w[14]+3275163606&4294967295,A=_+(v<<9&4294967295|v>>>23),v=C+(_^y&(A^_))+w[3]+4107603335&4294967295,C=A+(v<<14&4294967295|v>>>18),v=y+(A^_&(C^A))+w[8]+1163531501&4294967295,y=C+(v<<20&4294967295|v>>>12),v=_+(C^A&(y^C))+w[13]+2850285829&4294967295,_=y+(v<<5&4294967295|v>>>27),v=A+(y^C&(_^y))+w[2]+4243563512&4294967295,A=_+(v<<9&4294967295|v>>>23),v=C+(_^y&(A^_))+w[7]+1735328473&4294967295,C=A+(v<<14&4294967295|v>>>18),v=y+(A^_&(C^A))+w[12]+2368359562&4294967295,y=C+(v<<20&4294967295|v>>>12),v=_+(y^C^A)+w[5]+4294588738&4294967295,_=y+(v<<4&4294967295|v>>>28),v=A+(_^y^C)+w[8]+2272392833&4294967295,A=_+(v<<11&4294967295|v>>>21),v=C+(A^_^y)+w[11]+1839030562&4294967295,C=A+(v<<16&4294967295|v>>>16),v=y+(C^A^_)+w[14]+4259657740&4294967295,y=C+(v<<23&4294967295|v>>>9),v=_+(y^C^A)+w[1]+2763975236&4294967295,_=y+(v<<4&4294967295|v>>>28),v=A+(_^y^C)+w[4]+1272893353&4294967295,A=_+(v<<11&4294967295|v>>>21),v=C+(A^_^y)+w[7]+4139469664&4294967295,C=A+(v<<16&4294967295|v>>>16),v=y+(C^A^_)+w[10]+3200236656&4294967295,y=C+(v<<23&4294967295|v>>>9),v=_+(y^C^A)+w[13]+681279174&4294967295,_=y+(v<<4&4294967295|v>>>28),v=A+(_^y^C)+w[0]+3936430074&4294967295,A=_+(v<<11&4294967295|v>>>21),v=C+(A^_^y)+w[3]+3572445317&4294967295,C=A+(v<<16&4294967295|v>>>16),v=y+(C^A^_)+w[6]+76029189&4294967295,y=C+(v<<23&4294967295|v>>>9),v=_+(y^C^A)+w[9]+3654602809&4294967295,_=y+(v<<4&4294967295|v>>>28),v=A+(_^y^C)+w[12]+3873151461&4294967295,A=_+(v<<11&4294967295|v>>>21),v=C+(A^_^y)+w[15]+530742520&4294967295,C=A+(v<<16&4294967295|v>>>16),v=y+(C^A^_)+w[2]+3299628645&4294967295,y=C+(v<<23&4294967295|v>>>9),v=_+(C^(y|~A))+w[0]+4096336452&4294967295,_=y+(v<<6&4294967295|v>>>26),v=A+(y^(_|~C))+w[7]+1126891415&4294967295,A=_+(v<<10&4294967295|v>>>22),v=C+(_^(A|~y))+w[14]+2878612391&4294967295,C=A+(v<<15&4294967295|v>>>17),v=y+(A^(C|~_))+w[5]+4237533241&4294967295,y=C+(v<<21&4294967295|v>>>11),v=_+(C^(y|~A))+w[12]+1700485571&4294967295,_=y+(v<<6&4294967295|v>>>26),v=A+(y^(_|~C))+w[3]+2399980690&4294967295,A=_+(v<<10&4294967295|v>>>22),v=C+(_^(A|~y))+w[10]+4293915773&4294967295,C=A+(v<<15&4294967295|v>>>17),v=y+(A^(C|~_))+w[1]+2240044497&4294967295,y=C+(v<<21&4294967295|v>>>11),v=_+(C^(y|~A))+w[8]+1873313359&4294967295,_=y+(v<<6&4294967295|v>>>26),v=A+(y^(_|~C))+w[15]+4264355552&4294967295,A=_+(v<<10&4294967295|v>>>22),v=C+(_^(A|~y))+w[6]+2734768916&4294967295,C=A+(v<<15&4294967295|v>>>17),v=y+(A^(C|~_))+w[13]+1309151649&4294967295,y=C+(v<<21&4294967295|v>>>11),v=_+(C^(y|~A))+w[4]+4149444226&4294967295,_=y+(v<<6&4294967295|v>>>26),v=A+(y^(_|~C))+w[11]+3174756917&4294967295,A=_+(v<<10&4294967295|v>>>22),v=C+(_^(A|~y))+w[2]+718787259&4294967295,C=A+(v<<15&4294967295|v>>>17),v=y+(A^(C|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(C+(v<<21&4294967295|v>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+A&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var y=_-this.blockSize,w=this.B,C=this.h,A=0;A<_;){if(C==0)for(;A<=y;)r(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<_;)if(w[C++]=T.charCodeAt(A++),C==this.blockSize){r(this,w),C=0;break}}else for(;A<_;)if(w[C++]=T[A++],C==this.blockSize){r(this,w),C=0;break}}this.h=C,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var y=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=y&255,y/=256;for(this.u(T),T=Array(16),_=y=0;4>_;++_)for(var w=0;32>w;w+=8)T[y++]=this.g[_]>>>w&255;return T};function s(T,_){var y=a;return Object.prototype.hasOwnProperty.call(y,T)?y[T]:y[T]=_(T)}function o(T,_){this.h=_;for(var y=[],w=!0,C=T.length-1;0<=C;C--){var A=T[C]|0;w&&A==_||(y[C]=A,w=!1)}this.g=y}var a={};function c(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return M(d(-T));for(var _=[],y=1,w=0;T>=y;w++)_[w]=T/y|0,y*=4294967296;return new o(_,0)}function f(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return M(f(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(_,8)),w=m,C=0;C<T.length;C+=8){var A=Math.min(8,T.length-C),v=parseInt(T.substring(C,C+A),_);8>A?(A=d(Math.pow(_,A)),w=w.j(A).add(d(v))):(w=w.j(y),w=w.add(d(v)))}return w}var m=c(0),g=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(D(this))return-M(this).m();for(var T=0,_=1,y=0;y<this.g.length;y++){var w=this.i(y);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(D(this))return"-"+M(this).toString(T);for(var _=d(Math.pow(T,6)),y=this,w="";;){var C=Ie(y,_).g;y=ne(y,C.j(_));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(T);if(y=C,E(y))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function D(T){return T.h==-1}n.l=function(T){return T=ne(this,T),D(T)?-1:E(T)?0:1};function M(T){for(var _=T.g.length,y=[],w=0;w<_;w++)y[w]=~T.g[w];return new o(y,~T.h).add(g)}n.abs=function(){return D(this)?M(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],w=0,C=0;C<=_;C++){var A=w+(this.i(C)&65535)+(T.i(C)&65535),v=(A>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);w=v>>>16,A&=65535,v&=65535,y[C]=v<<16|A}return new o(y,y[y.length-1]&-2147483648?-1:0)};function ne(T,_){return T.add(M(_))}n.j=function(T){if(E(this)||E(T))return m;if(D(this))return D(T)?M(this).j(M(T)):M(M(this).j(T));if(D(T))return M(this.j(M(T)));if(0>this.l(b)&&0>T.l(b))return d(this.m()*T.m());for(var _=this.g.length+T.g.length,y=[],w=0;w<2*_;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<T.g.length;C++){var A=this.i(w)>>>16,v=this.i(w)&65535,Ii=T.i(C)>>>16,va=T.i(C)&65535;y[2*w+2*C]+=v*va,te(y,2*w+2*C),y[2*w+2*C+1]+=A*va,te(y,2*w+2*C+1),y[2*w+2*C+1]+=v*Ii,te(y,2*w+2*C+1),y[2*w+2*C+2]+=A*Ii,te(y,2*w+2*C+2)}for(w=0;w<_;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=_;w<2*_;w++)y[w]=0;return new o(y,0)};function te(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function U(T,_){this.g=T,this.h=_}function Ie(T,_){if(E(_))throw Error("division by zero");if(E(T))return new U(m,m);if(D(T))return _=Ie(M(T),_),new U(M(_.g),M(_.h));if(D(_))return _=Ie(T,M(_)),new U(M(_.g),_.h);if(30<T.g.length){if(D(T)||D(_))throw Error("slowDivide_ only works with positive integers.");for(var y=g,w=_;0>=w.l(T);)y=Qe(y),w=Qe(w);var C=Ft(y,1),A=Ft(w,1);for(w=Ft(w,2),y=Ft(y,2);!E(w);){var v=A.add(w);0>=v.l(T)&&(C=C.add(y),A=v),w=Ft(w,1),y=Ft(y,1)}return _=ne(T,C.j(_)),new U(C,_)}for(C=m;0<=T.l(_);){for(y=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=d(y),v=A.j(_);D(v)||0<v.l(T);)y-=w,A=d(y),v=A.j(_);E(A)&&(A=g),C=C.add(A),T=ne(T,v)}return new U(C,T)}n.A=function(T){return Ie(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)&T.i(w);return new o(y,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)|T.i(w);return new o(y,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)^T.i(w);return new o(y,this.h^T.h)};function Qe(T){for(var _=T.g.length+1,y=[],w=0;w<_;w++)y[w]=T.i(w)<<1|T.i(w-1)>>>31;return new o(y,T.h)}function Ft(T,_){var y=_>>5;_%=32;for(var w=T.g.length-y,C=[],A=0;A<w;A++)C[A]=0<_?T.i(A+y)>>>_|T.i(A+y+1)<<32-_:T.i(A+y);return new o(C,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,xS=TS.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Ov=TS.Integer=o}).apply(typeof IS<"u"?IS:typeof self<"u"?self:typeof window<"u"?window:{});var mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$i={};var SS,_2,AS,RS,DS,kS,PS,MS,NS;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,u,h){return l==Array.prototype||l==Object.prototype||(l[u]=h.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof mf=="object"&&mf];for(var u=0;u<l.length;++u){var h=l[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=e(this);function r(l,u){if(u)e:{var h=i;l=l.split(".");for(var p=0;p<l.length-1;p++){var I=l[p];if(!(I in h))break e;h=h[I]}l=l[l.length-1],p=h[l],u=u(p),u!=p&&u!=null&&t(h,l,{configurable:!0,writable:!0,value:u})}}function s(l,u){l instanceof String&&(l+="");var h=0,p=!1,I={next:function(){if(!p&&h<l.length){var k=h++;return{value:u(k,l[k]),done:!1}}return p=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(l){return l||function(){return s(this,function(u,h){return h})}});var o=o||{},a=this||self;function c(l){var u=typeof l;return u=u!="object"?u:l?Array.isArray(l)?"array":u:"null",u=="array"||u=="object"&&typeof l.length=="number"}function d(l){var u=typeof l;return u=="object"&&l!=null||u=="function"}function f(l,u,h){return l.call.apply(l.bind,arguments)}function m(l,u,h){if(!l)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,p),l.apply(u,I)}}return function(){return l.apply(u,arguments)}}function g(l,u,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function b(l,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),l.apply(this,p)}}function E(l,u){function h(){}h.prototype=u.prototype,l.aa=u.prototype,l.prototype=new h,l.prototype.constructor=l,l.Qb=function(p,I,k){for(var j=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)j[Oe-2]=arguments[Oe];return u.prototype[I].apply(p,j)}}function D(l){let u=l.length;if(0<u){let h=Array(u);for(let p=0;p<u;p++)h[p]=l[p];return h}return[]}function M(l,u){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(c(p)){let I=l.length||0,k=p.length||0;l.length=I+k;for(let j=0;j<k;j++)l[I+j]=p[j]}else l.push(p)}}class ne{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function te(l){return/^[\s\xa0]*$/.test(l)}function U(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function Ie(l){return Ie[" "](l),l}Ie[" "]=function(){};var Qe=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function Ft(l,u,h){for(let p in l)u.call(h,l[p],p,l)}function T(l,u){for(let h in l)u.call(void 0,l[h],h,l)}function _(l){let u={};for(let h in l)u[h]=l[h];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,u){let h,p;for(let I=1;I<arguments.length;I++){p=arguments[I];for(h in p)l[h]=p[h];for(let k=0;k<y.length;k++)h=y[k],Object.prototype.hasOwnProperty.call(p,h)&&(l[h]=p[h])}}function C(l){var u=1;l=l.split(":");let h=[];for(;0<u&&l.length;)h.push(l.shift()),u--;return l.length&&h.push(l.join(":")),h}function A(l){a.setTimeout(()=>{throw l},0)}function v(){var l=Xf;let u=null;return l.g&&(u=l.g,l.g=l.g.next,l.g||(l.h=null),u.next=null),u}class Ii{constructor(){this.h=this.g=null}add(u,h){let p=va.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var va=new ne(()=>new aD,l=>l.reset());class aD{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ya,ba=!1,Xf=new Ii,Ib=()=>{let l=a.Promise.resolve(void 0);ya=()=>{l.then(lD)}};var lD=()=>{for(var l;l=v();){try{l.h.call(l.g)}catch(h){A(h)}var u=va;u.j(l),100>u.h&&(u.h++,l.next=u.g,u.g=l)}ba=!1};function Hi(){this.s=this.s,this.C=this.C}Hi.prototype.s=!1,Hi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Hi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Lt(l,u){this.type=l,this.g=this.target=u,this.defaultPrevented=!1}Lt.prototype.h=function(){this.defaultPrevented=!0};var cD=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,u=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let h=()=>{};a.addEventListener("test",h,u),a.removeEventListener("test",h,u)}catch{}return l}();function wa(l,u){if(Lt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var h=this.type=l.type,p=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=u,u=l.relatedTarget){if(Qe){e:{try{Ie(u.nodeName);var I=!0;break e}catch{}I=!1}I||(u=null)}}else h=="mouseover"?u=l.fromElement:h=="mouseout"&&(u=l.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:dD[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&wa.aa.h.call(this)}}E(wa,Lt);var dD={2:"touch",3:"pen",4:"mouse"};wa.prototype.h=function(){wa.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ea="closure_listenable_"+(1e6*Math.random()|0),uD=0;function hD(l,u,h,p,I){this.listener=l,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=I,this.key=++uD,this.da=this.fa=!1}function Jc(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ed(l){this.src=l,this.g={},this.h=0}ed.prototype.add=function(l,u,h,p,I){var k=l.toString();l=this.g[k],l||(l=this.g[k]=[],this.h++);var j=Jf(l,u,p,I);return-1<j?(u=l[j],h||(u.fa=!1)):(u=new hD(u,this.src,k,!!p,I),u.fa=h,l.push(u)),u};function Zf(l,u){var h=u.type;if(h in l.g){var p=l.g[h],I=Array.prototype.indexOf.call(p,u,void 0),k;(k=0<=I)&&Array.prototype.splice.call(p,I,1),k&&(Jc(u),l.g[h].length==0&&(delete l.g[h],l.h--))}}function Jf(l,u,h,p){for(var I=0;I<l.length;++I){var k=l[I];if(!k.da&&k.listener==u&&k.capture==!!h&&k.ha==p)return I}return-1}var em="closure_lm_"+(1e6*Math.random()|0),tm={};function Tb(l,u,h,p,I){if(p&&p.once)return Sb(l,u,h,p,I);if(Array.isArray(u)){for(var k=0;k<u.length;k++)Tb(l,u[k],h,p,I);return null}return h=sm(h),l&&l[Ea]?l.K(u,h,d(p)?!!p.capture:!!p,I):xb(l,u,h,!1,p,I)}function xb(l,u,h,p,I,k){if(!u)throw Error("Invalid event type");var j=d(I)?!!I.capture:!!I,Oe=im(l);if(Oe||(l[em]=Oe=new ed(l)),h=Oe.add(u,h,p,j,k),h.proxy)return h;if(p=fD(),h.proxy=p,p.src=l,p.listener=h,l.addEventListener)cD||(I=j),I===void 0&&(I=!1),l.addEventListener(u.toString(),p,I);else if(l.attachEvent)l.attachEvent(Rb(u.toString()),p);else if(l.addListener&&l.removeListener)l.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function fD(){function l(h){return u.call(l.src,l.listener,h)}let u=mD;return l}function Sb(l,u,h,p,I){if(Array.isArray(u)){for(var k=0;k<u.length;k++)Sb(l,u[k],h,p,I);return null}return h=sm(h),l&&l[Ea]?l.L(u,h,d(p)?!!p.capture:!!p,I):xb(l,u,h,!0,p,I)}function Ab(l,u,h,p,I){if(Array.isArray(u))for(var k=0;k<u.length;k++)Ab(l,u[k],h,p,I);else p=d(p)?!!p.capture:!!p,h=sm(h),l&&l[Ea]?(l=l.i,u=String(u).toString(),u in l.g&&(k=l.g[u],h=Jf(k,h,p,I),-1<h&&(Jc(k[h]),Array.prototype.splice.call(k,h,1),k.length==0&&(delete l.g[u],l.h--)))):l&&(l=im(l))&&(u=l.g[u.toString()],l=-1,u&&(l=Jf(u,h,p,I)),(h=-1<l?u[l]:null)&&nm(h))}function nm(l){if(typeof l!="number"&&l&&!l.da){var u=l.src;if(u&&u[Ea])Zf(u.i,l);else{var h=l.type,p=l.proxy;u.removeEventListener?u.removeEventListener(h,p,l.capture):u.detachEvent?u.detachEvent(Rb(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=im(u))?(Zf(h,l),h.h==0&&(h.src=null,u[em]=null)):Jc(l)}}}function Rb(l){return l in tm?tm[l]:tm[l]="on"+l}function mD(l,u){if(l.da)l=!0;else{u=new wa(u,this);var h=l.listener,p=l.ha||l.src;l.fa&&nm(l),l=h.call(p,u)}return l}function im(l){return l=l[em],l instanceof ed?l:null}var rm="__closure_events_fn_"+(1e9*Math.random()>>>0);function sm(l){return typeof l=="function"?l:(l[rm]||(l[rm]=function(u){return l.handleEvent(u)}),l[rm])}function Vt(){Hi.call(this),this.i=new ed(this),this.M=this,this.F=null}E(Vt,Hi),Vt.prototype[Ea]=!0,Vt.prototype.removeEventListener=function(l,u,h,p){Ab(this,l,u,h,p)};function Ht(l,u){var h,p=l.F;if(p)for(h=[];p;p=p.F)h.push(p);if(l=l.M,p=u.type||u,typeof u=="string")u=new Lt(u,l);else if(u instanceof Lt)u.target=u.target||l;else{var I=u;u=new Lt(p,l),w(u,I)}if(I=!0,h)for(var k=h.length-1;0<=k;k--){var j=u.g=h[k];I=td(j,p,!0,u)&&I}if(j=u.g=l,I=td(j,p,!0,u)&&I,I=td(j,p,!1,u)&&I,h)for(k=0;k<h.length;k++)j=u.g=h[k],I=td(j,p,!1,u)&&I}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var l=this.i,u;for(u in l.g){for(var h=l.g[u],p=0;p<h.length;p++)Jc(h[p]);delete l.g[u],l.h--}}this.F=null},Vt.prototype.K=function(l,u,h,p){return this.i.add(String(l),u,!1,h,p)},Vt.prototype.L=function(l,u,h,p){return this.i.add(String(l),u,!0,h,p)};function td(l,u,h,p){if(u=l.i.g[String(u)],!u)return!0;u=u.concat();for(var I=!0,k=0;k<u.length;++k){var j=u[k];if(j&&!j.da&&j.capture==h){var Oe=j.listener,xt=j.ha||j.src;j.fa&&Zf(l.i,j),I=Oe.call(xt,p)!==!1&&I}}return I&&!p.defaultPrevented}function Db(l,u,h){if(typeof l=="function")h&&(l=g(l,h));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:a.setTimeout(l,u||0)}function kb(l){l.g=Db(()=>{l.g=null,l.i&&(l.i=!1,kb(l))},l.l);let u=l.h;l.h=null,l.m.apply(null,u)}class pD extends Hi{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:kb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ca(l){Hi.call(this),this.h=l,this.g={}}E(Ca,Hi);var Pb=[];function Mb(l){Ft(l.g,function(u,h){this.g.hasOwnProperty(h)&&nm(u)},l),l.g={}}Ca.prototype.N=function(){Ca.aa.N.call(this),Mb(this)},Ca.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var om=a.JSON.stringify,gD=a.JSON.parse,_D=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function am(){}am.prototype.h=null;function Nb(l){return l.h||(l.h=l.i())}function Ob(){}var Ia={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lm(){Lt.call(this,"d")}E(lm,Lt);function cm(){Lt.call(this,"c")}E(cm,Lt);var Fr={},Fb=null;function nd(){return Fb=Fb||new Vt}Fr.La="serverreachability";function Lb(l){Lt.call(this,Fr.La,l)}E(Lb,Lt);function Ta(l){let u=nd();Ht(u,new Lb(u))}Fr.STAT_EVENT="statevent";function Vb(l,u){Lt.call(this,Fr.STAT_EVENT,l),this.stat=u}E(Vb,Lt);function Kt(l){let u=nd();Ht(u,new Vb(u,l))}Fr.Ma="timingevent";function jb(l,u){Lt.call(this,Fr.Ma,l),this.size=u}E(jb,Lt);function xa(l,u){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},u)}function Sa(){this.g=!0}Sa.prototype.xa=function(){this.g=!1};function vD(l,u,h,p,I,k){l.info(function(){if(l.g)if(k)for(var j="",Oe=k.split("&"),xt=0;xt<Oe.length;xt++){var be=Oe[xt].split("=");if(1<be.length){var jt=be[0];be=be[1];var Bt=jt.split("_");j=2<=Bt.length&&Bt[1]=="type"?j+(jt+"="+be+"&"):j+(jt+"=redacted&")}}else j=null;else j=k;return"XMLHTTP REQ ("+p+") [attempt "+I+"]: "+u+`
`+h+`
`+j})}function yD(l,u,h,p,I,k,j){l.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+I+"]: "+u+`
`+h+`
`+k+" "+j})}function Rs(l,u,h,p){l.info(function(){return"XMLHTTP TEXT ("+u+"): "+wD(l,h)+(p?" "+p:"")})}function bD(l,u){l.info(function(){return"TIMEOUT: "+u})}Sa.prototype.info=function(){};function wD(l,u){if(!l.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(l=0;l<h.length;l++)if(Array.isArray(h[l])){var p=h[l];if(!(2>p.length)){var I=p[1];if(Array.isArray(I)&&!(1>I.length)){var k=I[0];if(k!="noop"&&k!="stop"&&k!="close")for(var j=1;j<I.length;j++)I[j]=""}}}}return om(h)}catch{return u}}var id={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dm;function rd(){}E(rd,am),rd.prototype.g=function(){return new XMLHttpRequest},rd.prototype.i=function(){return{}},dm=new rd;function Ki(l,u,h,p){this.j=l,this.i=u,this.l=h,this.R=p||1,this.U=new Ca(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ub}function Ub(){this.i=null,this.g="",this.h=!1}var zb={},um={};function hm(l,u,h){l.L=1,l.v=ld(Ti(u)),l.m=h,l.P=!0,$b(l,null)}function $b(l,u){l.F=Date.now(),sd(l),l.A=Ti(l.v);var h=l.A,p=l.R;Array.isArray(p)||(p=[String(p)]),iw(h.i,"t",p),l.C=0,h=l.j.J,l.h=new Ub,l.g=ww(l.j,h?u:null,!l.m),0<l.O&&(l.M=new pD(g(l.Y,l,l.g),l.O)),u=l.U,h=l.g,p=l.ca;var I="readystatechange";Array.isArray(I)||(I&&(Pb[0]=I.toString()),I=Pb);for(var k=0;k<I.length;k++){var j=Tb(h,I[k],p||u.handleEvent,!1,u.h||u);if(!j)break;u.g[j.key]=j}u=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,u)):(l.u="GET",l.g.ea(l.A,l.u,null,u)),Ta(),vD(l.i,l.u,l.A,l.l,l.R,l.m)}Ki.prototype.ca=function(l){l=l.target;let u=this.M;u&&xi(l)==3?u.j():this.Y(l)},Ki.prototype.Y=function(l){try{if(l==this.g)e:{let Bt=xi(this.g);var u=this.g.Ba();let Ps=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||dw(this.g)))){this.J||Bt!=4||u==7||(u==8||0>=Ps?Ta(3):Ta(2)),fm(this);var h=this.g.Z();this.X=h;t:if(Wb(this)){var p=dw(this.g);l="";var I=p.length,k=xi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),Aa(this);var j="";break t}this.h.i=new a.TextDecoder}for(u=0;u<I;u++)this.h.h=!0,l+=this.h.i.decode(p[u],{stream:!(k&&u==I-1)});p.length=0,this.h.g+=l,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,yD(this.i,this.u,this.A,this.l,this.R,Bt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,xt=this.g;if((Oe=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Oe)){var be=Oe;break t}}be=null}if(h=be)Rs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mm(this,h);else{this.o=!1,this.s=3,Kt(12),Lr(this),Aa(this);break e}}if(this.P){h=!0;let Bn;for(;!this.J&&this.C<j.length;)if(Bn=ED(this,j),Bn==um){Bt==4&&(this.s=4,Kt(14),h=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==zb){this.s=4,Kt(15),Rs(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else Rs(this.i,this.l,Bn,null),mm(this,Bn);if(Wb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||j.length!=0||this.h.h||(this.s=1,Kt(16),h=!1),this.o=this.o&&h,!h)Rs(this.i,this.l,j,"[Invalid Chunked Response]"),Lr(this),Aa(this);else if(0<j.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),bm(jt),jt.M=!0,Kt(11))}}else Rs(this.i,this.l,j,null),mm(this,j);Bt==4&&Lr(this),this.o&&!this.J&&(Bt==4?_w(this.j,this):(this.o=!1,sd(this)))}else jD(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),Lr(this),Aa(this)}}}catch{}finally{}};function Wb(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ED(l,u){var h=l.C,p=u.indexOf(`
`,h);return p==-1?um:(h=Number(u.substring(h,p)),isNaN(h)?zb:(p+=1,p+h>u.length?um:(u=u.slice(p,p+h),l.C=p+h,u)))}Ki.prototype.cancel=function(){this.J=!0,Lr(this)};function sd(l){l.S=Date.now()+l.I,qb(l,l.I)}function qb(l,u){if(l.B!=null)throw Error("WatchDog timer not null");l.B=xa(g(l.ba,l),u)}function fm(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ki.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(bD(this.i,this.A),this.L!=2&&(Ta(),Kt(17)),Lr(this),this.s=2,Aa(this)):qb(this,this.S-l)};function Aa(l){l.j.G==0||l.J||_w(l.j,l)}function Lr(l){fm(l);var u=l.M;u&&typeof u.ma=="function"&&u.ma(),l.M=null,Mb(l.U),l.g&&(u=l.g,l.g=null,u.abort(),u.ma())}function mm(l,u){try{var h=l.j;if(h.G!=0&&(h.g==l||pm(h.h,l))){if(!l.K&&pm(h.h,l)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var I=p;if(I[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<l.F)fd(h),ud(h);else break e;ym(h),Kt(18)}}else h.za=I[1],0<h.za-h.T&&37500>I[2]&&h.F&&h.v==0&&!h.C&&(h.C=xa(g(h.Za,h),6e3));if(1>=Kb(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else jr(h,11)}else if((l.K||h.g==l)&&fd(h),!te(u))for(I=h.Da.g.parse(u),u=0;u<I.length;u++){let be=I[u];if(h.T=be[0],be=be[1],h.G==2)if(be[0]=="c"){h.K=be[1],h.ia=be[2];let jt=be[3];jt!=null&&(h.la=jt,h.j.info("VER="+h.la));let Bt=be[4];Bt!=null&&(h.Aa=Bt,h.j.info("SVER="+h.Aa));let Ps=be[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(p=1.5*Ps,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let Bn=l.g;if(Bn){let pd=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pd){var k=p.h;k.g||pd.indexOf("spdy")==-1&&pd.indexOf("quic")==-1&&pd.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(gm(k,k.h),k.h=null))}if(p.D){let wm=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;wm&&(p.ya=wm,ze(p.I,p.D,wm))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-l.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var j=l;if(p.qa=bw(p,p.J?p.ia:null,p.W),j.K){Qb(p.h,j);var Oe=j,xt=p.L;xt&&(Oe.I=xt),Oe.B&&(fm(Oe),sd(Oe)),p.g=j}else pw(p);0<h.i.length&&hd(h)}else be[0]!="stop"&&be[0]!="close"||jr(h,7);else h.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?jr(h,7):vm(h):be[0]!="noop"&&h.l&&h.l.ta(be),h.v=0)}}Ta(4)}catch{}}var CD=class{constructor(l,u){this.g=l,this.map=u}};function Gb(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hb(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Kb(l){return l.h?1:l.g?l.g.size:0}function pm(l,u){return l.h?l.h==u:l.g?l.g.has(u):!1}function gm(l,u){l.g?l.g.add(u):l.h=u}function Qb(l,u){l.h&&l.h==u?l.h=null:l.g&&l.g.has(u)&&l.g.delete(u)}Gb.prototype.cancel=function(){if(this.i=Yb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Yb(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let u=l.i;for(let h of l.g.values())u=u.concat(h.D);return u}return D(l.i)}function ID(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var u=[],h=l.length,p=0;p<h;p++)u.push(l[p]);return u}u=[],h=0;for(p in l)u[h++]=l[p];return u}function TD(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var u=[];l=l.length;for(var h=0;h<l;h++)u.push(h);return u}u=[],h=0;for(let p in l)u[h++]=p;return u}}}function Xb(l,u){if(l.forEach&&typeof l.forEach=="function")l.forEach(u,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,u,void 0);else for(var h=TD(l),p=ID(l),I=p.length,k=0;k<I;k++)u.call(void 0,p[k],h&&h[k],l)}var Zb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xD(l,u){if(l){l=l.split("&");for(var h=0;h<l.length;h++){var p=l[h].indexOf("="),I=null;if(0<=p){var k=l[h].substring(0,p);I=l[h].substring(p+1)}else k=l[h];u(k,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function Vr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Vr){this.h=l.h,od(this,l.j),this.o=l.o,this.g=l.g,ad(this,l.s),this.l=l.l;var u=l.i,h=new ka;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),Jb(this,h),this.m=l.m}else l&&(u=String(l).match(Zb))?(this.h=!1,od(this,u[1]||"",!0),this.o=Ra(u[2]||""),this.g=Ra(u[3]||"",!0),ad(this,u[4]),this.l=Ra(u[5]||"",!0),Jb(this,u[6]||"",!0),this.m=Ra(u[7]||"")):(this.h=!1,this.i=new ka(null,this.h))}Vr.prototype.toString=function(){var l=[],u=this.j;u&&l.push(Da(u,ew,!0),":");var h=this.g;return(h||u=="file")&&(l.push("//"),(u=this.o)&&l.push(Da(u,ew,!0),"@"),l.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&l.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&l.push("/"),l.push(Da(h,h.charAt(0)=="/"?RD:AD,!0))),(h=this.i.toString())&&l.push("?",h),(h=this.m)&&l.push("#",Da(h,kD)),l.join("")};function Ti(l){return new Vr(l)}function od(l,u,h){l.j=h?Ra(u,!0):u,l.j&&(l.j=l.j.replace(/:$/,""))}function ad(l,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);l.s=u}else l.s=null}function Jb(l,u,h){u instanceof ka?(l.i=u,PD(l.i,l.h)):(h||(u=Da(u,DD)),l.i=new ka(u,l.h))}function ze(l,u,h){l.i.set(u,h)}function ld(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ra(l,u){return l?u?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Da(l,u,h){return typeof l=="string"?(l=encodeURI(l).replace(u,SD),h&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function SD(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ew=/[#\/\?@]/g,AD=/[#\?:]/g,RD=/[#\?]/g,DD=/[#\?@]/g,kD=/#/g;function ka(l,u){this.h=this.g=null,this.i=l||null,this.j=!!u}function Qi(l){l.g||(l.g=new Map,l.h=0,l.i&&xD(l.i,function(u,h){l.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=ka.prototype,n.add=function(l,u){Qi(this),this.i=null,l=Ds(this,l);var h=this.g.get(l);return h||this.g.set(l,h=[]),h.push(u),this.h+=1,this};function tw(l,u){Qi(l),u=Ds(l,u),l.g.has(u)&&(l.i=null,l.h-=l.g.get(u).length,l.g.delete(u))}function nw(l,u){return Qi(l),u=Ds(l,u),l.g.has(u)}n.forEach=function(l,u){Qi(this),this.g.forEach(function(h,p){h.forEach(function(I){l.call(u,I,p,this)},this)},this)},n.na=function(){Qi(this);let l=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){let I=l[p];for(let k=0;k<I.length;k++)h.push(u[p])}return h},n.V=function(l){Qi(this);let u=[];if(typeof l=="string")nw(this,l)&&(u=u.concat(this.g.get(Ds(this,l))));else{l=Array.from(this.g.values());for(let h=0;h<l.length;h++)u=u.concat(l[h])}return u},n.set=function(l,u){return Qi(this),this.i=null,l=Ds(this,l),nw(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[u]),this.h+=1,this},n.get=function(l,u){return l?(l=this.V(l),0<l.length?String(l[0]):u):u};function iw(l,u,h){tw(l,u),0<h.length&&(l.i=null,l.g.set(Ds(l,u),D(h)),l.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];let k=encodeURIComponent(String(p)),j=this.V(p);for(p=0;p<j.length;p++){var I=k;j[p]!==""&&(I+="="+encodeURIComponent(String(j[p]))),l.push(I)}}return this.i=l.join("&")};function Ds(l,u){return u=String(u),l.j&&(u=u.toLowerCase()),u}function PD(l,u){u&&!l.j&&(Qi(l),l.i=null,l.g.forEach(function(h,p){var I=p.toLowerCase();p!=I&&(tw(this,p),iw(this,I,h))},l)),l.j=u}function MD(l,u){let h=new Sa;if(a.Image){let p=new Image;p.onload=b(Yi,h,"TestLoadImage: loaded",!0,u,p),p.onerror=b(Yi,h,"TestLoadImage: error",!1,u,p),p.onabort=b(Yi,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=b(Yi,h,"TestLoadImage: timeout",!1,u,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=l}else u(!1)}function ND(l,u){let h=new Sa,p=new AbortController,I=setTimeout(()=>{p.abort(),Yi(h,"TestPingServer: timeout",!1,u)},1e4);fetch(l,{signal:p.signal}).then(k=>{clearTimeout(I),k.ok?Yi(h,"TestPingServer: ok",!0,u):Yi(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(I),Yi(h,"TestPingServer: error",!1,u)})}function Yi(l,u,h,p,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),p(h)}catch{}}function OD(){this.g=new _D}function FD(l,u,h){let p=h||"";try{Xb(l,function(I,k){let j=I;d(I)&&(j=om(I)),u.push(p+k+"="+encodeURIComponent(j))})}catch(I){throw u.push(p+"type="+encodeURIComponent("_badmap")),I}}function Pa(l){this.l=l.Ub||null,this.j=l.eb||!1}E(Pa,am),Pa.prototype.g=function(){return new cd(this.l,this.j)},Pa.prototype.i=function(l){return function(){return l}}({});function cd(l,u){Vt.call(this),this.D=l,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(cd,Vt),n=cd.prototype,n.open=function(l,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=u,this.readyState=1,Na(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(u.body=l),(this.D||a).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ma(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rw(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function rw(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var u=l.value?l.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!l.done}))&&(this.response=this.responseText+=u)}l.done?Ma(this):Na(this),this.readyState==3&&rw(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Ma(this))},n.Qa=function(l){this.g&&(this.response=l,Ma(this))},n.ga=function(){this.g&&Ma(this)};function Ma(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Na(l)}n.setRequestHeader=function(l,u){this.u.append(l,u)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,l.push(h[0]+": "+h[1]),h=u.next();return l.join(`\r
`)};function Na(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(cd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function sw(l){let u="";return Ft(l,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function _m(l,u,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=sw(h),typeof l=="string"?h!=null&&encodeURIComponent(String(h)):ze(l,u,h))}function st(l){Vt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(st,Vt);var LD=/^https?$/i,VD=["POST","PUT"];n=st.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);u=u?u.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dm.g(),this.v=this.o?Nb(this.o):Nb(dm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(u,String(l),!0),this.B=!1}catch(k){ow(this,k);return}if(l=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var I in p)h.set(I,p[I]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let k of p.keys())h.set(k,p.get(k));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(k=>k.toLowerCase()=="content-type"),I=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(VD,u,void 0))||p||I||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,j]of h)this.g.setRequestHeader(k,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cw(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){ow(this,k)}};function ow(l,u){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=u,l.m=5,aw(l),dd(l)}function aw(l){l.A||(l.A=!0,Ht(l,"complete"),Ht(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ht(this,"complete"),Ht(this,"abort"),dd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dd(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?lw(this):this.bb())},n.bb=function(){lw(this)};function lw(l){if(l.h&&typeof o<"u"&&(!l.v[1]||xi(l)!=4||l.Z()!=2)){if(l.u&&xi(l)==4)Db(l.Ea,0,l);else if(Ht(l,"readystatechange"),xi(l)==4){l.h=!1;try{let j=l.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var p;if(p=j===0){var I=String(l.D).match(Zb)[1]||null;!I&&a.self&&a.self.location&&(I=a.self.location.protocol.slice(0,-1)),p=!LD.test(I?I.toLowerCase():"")}h=p}if(h)Ht(l,"complete"),Ht(l,"success");else{l.m=6;try{var k=2<xi(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",aw(l)}}finally{dd(l)}}}}function dd(l,u){if(l.g){cw(l);let h=l.g,p=l.v[0]?()=>{}:null;l.g=null,l.v=null,u||Ht(l,"ready");try{h.onreadystatechange=p}catch{}}}function cw(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function xi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var u=this.g.responseText;return l&&u.indexOf(l)==0&&(u=u.substring(l.length)),gD(u)}};function dw(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function jD(l){let u={};l=(l.g&&2<=xi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<l.length;p++){if(te(l[p]))continue;var h=C(l[p]);let I=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let k=u[I]||[];u[I]=k,k.push(h)}T(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oa(l,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[l]||u}function uw(l){this.Aa=0,this.i=[],this.j=new Sa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oa("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oa("baseRetryDelayMs",5e3,l),this.cb=Oa("retryDelaySeedMs",1e4,l),this.Wa=Oa("forwardChannelMaxRetries",2,l),this.wa=Oa("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Gb(l&&l.concurrentRequestLimit),this.Da=new OD,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=uw.prototype,n.la=8,n.G=1,n.connect=function(l,u,h,p){Kt(0),this.W=l,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=bw(this,null,this.W),hd(this)};function vm(l){if(hw(l),l.G==3){var u=l.U++,h=Ti(l.I);if(ze(h,"SID",l.K),ze(h,"RID",u),ze(h,"TYPE","terminate"),Fa(l,h),u=new Ki(l,l.j,u),u.L=2,u.v=ld(Ti(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=u.v,h=!0),h||(u.g=ww(u.j,null),u.g.ea(u.v)),u.F=Date.now(),sd(u)}yw(l)}function ud(l){l.g&&(bm(l),l.g.cancel(),l.g=null)}function hw(l){ud(l),l.u&&(a.clearTimeout(l.u),l.u=null),fd(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function hd(l){if(!Hb(l.h)&&!l.s){l.s=!0;var u=l.Ga;ya||Ib(),ba||(ya(),ba=!0),Xf.add(u,l),l.B=0}}function BD(l,u){return Kb(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=u.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=xa(g(l.Ga,l,u),vw(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let I=new Ki(this,this.j,l),k=this.o;if(this.S&&(k?(k=_(k),w(k,this.S)):k=this.S),this.m!==null||this.O||(I.H=k,k=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=mw(this,I,u),h=Ti(this.I),ze(h,"RID",l),ze(h,"CVER",22),this.D&&ze(h,"X-HTTP-Session-Id",this.D),Fa(this,h),k&&(this.O?u="headers="+encodeURIComponent(String(sw(k)))+"&"+u:this.m&&_m(h,this.m,k)),gm(this.h,I),this.Ua&&ze(h,"TYPE","init"),this.P?(ze(h,"$req",u),ze(h,"SID","null"),I.T=!0,hm(I,h,null)):hm(I,h,u),this.G=2}}else this.G==3&&(l?fw(this,l):this.i.length==0||Hb(this.h)||fw(this))};function fw(l,u){var h;u?h=u.l:h=l.U++;let p=Ti(l.I);ze(p,"SID",l.K),ze(p,"RID",h),ze(p,"AID",l.T),Fa(l,p),l.m&&l.o&&_m(p,l.m,l.o),h=new Ki(l,l.j,h,l.B+1),l.m===null&&(h.H=l.o),u&&(l.i=u.D.concat(l.i)),u=mw(l,h,1e3),h.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),gm(l.h,h),hm(h,p,u)}function Fa(l,u){l.H&&Ft(l.H,function(h,p){ze(u,p,h)}),l.l&&Xb({},function(h,p){ze(u,p,h)})}function mw(l,u,h){h=Math.min(l.i.length,h);var p=l.l?g(l.l.Na,l.l,l):null;e:{var I=l.i;let k=-1;for(;;){let j=["count="+h];k==-1?0<h?(k=I[0].g,j.push("ofs="+k)):k=0:j.push("ofs="+k);let Oe=!0;for(let xt=0;xt<h;xt++){let be=I[xt].g,jt=I[xt].map;if(be-=k,0>be)k=Math.max(0,I[xt].g-100),Oe=!1;else try{FD(jt,j,"req"+be+"_")}catch{p&&p(jt)}}if(Oe){p=j.join("&");break e}}}return l=l.i.splice(0,h),u.D=l,p}function pw(l){if(!l.g&&!l.u){l.Y=1;var u=l.Fa;ya||Ib(),ba||(ya(),ba=!0),Xf.add(u,l),l.v=0}}function ym(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=xa(g(l.Fa,l),vw(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,gw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=xa(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),ud(this),gw(this))};function bm(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function gw(l){l.g=new Ki(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var u=Ti(l.qa);ze(u,"RID","rpc"),ze(u,"SID",l.K),ze(u,"AID",l.T),ze(u,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(u,"TO",l.ja),ze(u,"TYPE","xmlhttp"),Fa(l,u),l.m&&l.o&&_m(u,l.m,l.o),l.L&&(l.g.I=l.L);var h=l.g;l=l.ia,h.L=1,h.v=ld(Ti(u)),h.m=null,h.P=!0,$b(h,l)}n.Za=function(){this.C!=null&&(this.C=null,ud(this),ym(this),Kt(19))};function fd(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function _w(l,u){var h=null;if(l.g==u){fd(l),bm(l),l.g=null;var p=2}else if(pm(l.h,u))h=u.D,Qb(l.h,u),p=1;else return;if(l.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var I=l.B;p=nd(),Ht(p,new jb(p,h)),hd(l)}else pw(l);else if(I=u.s,I==3||I==0&&0<u.X||!(p==1&&BD(l,u)||p==2&&ym(l)))switch(h&&0<h.length&&(u=l.h,u.i=u.i.concat(h)),I){case 1:jr(l,5);break;case 4:jr(l,10);break;case 3:jr(l,6);break;default:jr(l,2)}}}function vw(l,u){let h=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(h*=2),h*u}function jr(l,u){if(l.j.info("Error code "+u),u==2){var h=g(l.fb,l),p=l.Xa;let I=!p;p=new Vr(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||od(p,"https"),ld(p),I?MD(p.toString(),h):ND(p.toString(),h)}else Kt(2);l.G=0,l.l&&l.l.sa(u),yw(l),hw(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function yw(l){if(l.G=0,l.ka=[],l.l){let u=Yb(l.h);(u.length!=0||l.i.length!=0)&&(M(l.ka,u),M(l.ka,l.i),l.h.i.length=0,D(l.i),l.i.length=0),l.l.ra()}}function bw(l,u,h){var p=h instanceof Vr?Ti(h):new Vr(h);if(p.g!="")u&&(p.g=u+"."+p.g),ad(p,p.s);else{var I=a.location;p=I.protocol,u=u?u+"."+I.hostname:I.hostname,I=+I.port;var k=new Vr(null);p&&od(k,p),u&&(k.g=u),I&&ad(k,I),h&&(k.l=h),p=k}return h=l.D,u=l.ya,h&&u&&ze(p,h,u),ze(p,"VER",l.la),Fa(l,p),p}function ww(l,u,h){if(u&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=l.Ca&&!l.pa?new st(new Pa({eb:h})):new st(l.pa),u.Ha(l.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ew(){}n=Ew.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function md(){}md.prototype.g=function(l,u){return new un(l,u)};function un(l,u){Vt.call(this),this.g=new uw(u),this.l=l,this.h=u&&u.messageUrlParams||null,l=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(l?l["X-WebChannel-Content-Type"]=u.messageContentType:l={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(l?l["X-WebChannel-Client-Profile"]=u.va:l={"X-WebChannel-Client-Profile":u.va}),this.g.S=l,(l=u&&u.Sb)&&!te(l)&&(this.g.m=l),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!te(u)&&(this.g.D=u,l=this.h,l!==null&&u in l&&(l=this.h,u in l&&delete l[u])),this.j=new ks(this)}E(un,Vt),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){vm(this.g)},un.prototype.o=function(l){var u=this.g;if(typeof l=="string"){var h={};h.__data__=l,l=h}else this.u&&(h={},h.__data__=om(l),l=h);u.i.push(new CD(u.Ya++,l)),u.G==3&&hd(u)},un.prototype.N=function(){this.g.l=null,delete this.j,vm(this.g),delete this.g,un.aa.N.call(this)};function Cw(l){lm.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var u=l.__sm__;if(u){e:{for(let h in u){l=h;break e}l=void 0}(this.i=l)&&(l=this.i,u=u!==null&&l in u?u[l]:void 0),this.data=u}else this.data=l}E(Cw,lm);function Iw(){cm.call(this),this.status=1}E(Iw,cm);function ks(l){this.g=l}E(ks,Ew),ks.prototype.ua=function(){Ht(this.g,"a")},ks.prototype.ta=function(l){Ht(this.g,new Cw(l))},ks.prototype.sa=function(l){Ht(this.g,new Iw)},ks.prototype.ra=function(){Ht(this.g,"b")},md.prototype.createWebChannel=md.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,NS=$i.createWebChannelTransport=function(){return new md},MS=$i.getStatEventTarget=function(){return nd()},PS=$i.Event=Fr,kS=$i.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},id.NO_ERROR=0,id.TIMEOUT=8,id.HTTP_ERROR=6,DS=$i.ErrorCode=id,Bb.COMPLETE="complete",RS=$i.EventType=Bb,Ob.EventType=Ia,Ia.OPEN="a",Ia.CLOSE="b",Ia.ERROR="c",Ia.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,AS=$i.WebChannel=Ob,_2=$i.FetchXmlHttpFactory=Pa,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,SS=$i.XhrIo=st}).apply(typeof mf<"u"?mf:typeof self<"u"?self:typeof window<"u"?window:{});var OS="@firebase/firestore";var Nt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");var Sc="10.14.0";var Xo=new ui("@firebase/firestore");function Jn(n,...t){if(Xo.logLevel<=or.DEBUG){let e=t.map(Xv);Xo.debug(`Firestore (${Sc}): ${n}`,...e)}}function BS(n,...t){if(Xo.logLevel<=or.ERROR){let e=t.map(Xv);Xo.error(`Firestore (${Sc}): ${n}`,...e)}}function v2(n,...t){if(Xo.logLevel<=or.WARN){let e=t.map(Xv);Xo.warn(`Firestore (${Sc}): ${n}`,...e)}}function Xv(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function ln(n="Unexpected state"){let t=`FIRESTORE (${Sc}) INTERNAL ASSERTION FAILED: `+n;throw BS(t),new Error(t)}function _s(n,t){n||ln()}var sn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ot=class extends w0{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vs=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var pf=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Lv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Nt.UNAUTHENTICATED))}shutdown(){}},Vv=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},jv=class{constructor(t){this.t=t,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){_s(this.o===void 0);let i=this.i,r=c=>this.i!==i?(i=this.i,e(c)):Promise.resolve(),s=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vs,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;t.enqueueRetryable(()=>lt(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{Jn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Jn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vs)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Jn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_s(typeof i.accessToken=="string"),new pf(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return _s(t===null||typeof t=="string"),new Nt(t)}},Bv=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Uv=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Bv(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zv=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$v=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){_s(this.o===void 0);let i=s=>{s.error!=null&&Jn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Jn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{Jn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):Jn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(_s(typeof e.token=="string"),this.R=e.token,new zv(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function US(n,t){return n<t?-1:n>t?1:0}var Wv=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&ln(),i===void 0?i=t.length-e:i>t.length-e&&ln(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},Mr=class n extends Wv{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new Ot(sn.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}};var ys=class n{constructor(t){this.path=t}static fromPath(t){return new n(Mr.fromString(t))}static fromName(t){return new n(Mr.fromString(t).popFirst(5))}static empty(){return new n(Mr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Mr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Mr.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new Mr(t.slice()))}};var qv=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};qv.UNKNOWN_ID=-1;function y2(n){return n.name==="IndexedDbTransactionError"}function b2(n){return n===0&&1/n==-1/0}var w2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_K=[...w2,"documentOverlays"],E2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],C2=E2,I2=[...C2,"indexConfiguration","indexState","indexEntries"];var vK=[...I2,"globals"];var Zo=class n{constructor(t,e){this.comparator=t,this.root=e||Ci.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Yo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Yo(this.root,t,this.comparator,!1)}getReverseIterator(){return new Yo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Yo(this.root,t,this.comparator,!0)}},Yo=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ci=class n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new n(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ln();let t=this.left.check();if(t!==this.right.check())throw ln();return t+(this.isRed()?0:1)}};Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1;Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw ln()}get value(){throw ln()}get color(){throw ln()}get left(){throw ln()}get right(){throw ln()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Ci(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var gf=class n{constructor(t){this.comparator=t,this.data=new Zo(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new _f(this.data.getIterator())}getIteratorFrom(t){return new _f(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},_f=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Jo=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Gv("Invalid base64 string: "+s):s}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return US(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Jo.EMPTY_BYTE_STRING=new Jo("");var T2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function x2(n){if(_s(!!n),typeof n=="string"){let t=0,e=T2.exec(n);if(_s(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:xc(n.seconds),nanos:xc(n.nanos)}}function xc(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function S2(n){return typeof n=="string"?Jo.fromBase64String(n):Jo.fromUint8Array(n)}var Hv=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};function A2(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function R2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var bK=new Zo(ys.comparator);var wK=new Zo(ys.comparator);var EK=new Zo(ys.comparator),CK=new gf(ys.comparator);var IK=new gf(US);var FS,ge;(ge=FS||(FS={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var TK=new Ov([4294967295,4294967295],0);var vf=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(xc(t.integerValue));else if("doubleValue"in t){let i=xc(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),b2(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),typeof i=="string"&&(i=x2(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(S2(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?R2(t)?this.dt(e,Number.MAX_SAFE_INTEGER):A2(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):ln()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let i=t.fields||{};this.dt(e,55);for(let r of Object.keys(i))this.Vt(r,e),this.Tt(i[r],e)}wt(t,e){var i,r;let s=t.fields||{};this.dt(e,53);let o="value",a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(e,15),e.At(xc(a)),this.Vt(o,e),this.Tt(s[o],e)}bt(t,e){let i=t.values||[];this.dt(e,50);for(let r of i)this.Tt(r,e)}yt(t,e){this.dt(e,37),ys.fromName(t).path.forEach(i=>{this.dt(e,60),this.Dt(i,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};vf.vt=new vf;var xK=new Uint8Array(0);var Ei=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Ei.DEFAULT_COLLECTION_PERCENTILE=10,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ei.DEFAULT=new Ei(41943040,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ei.DISABLED=new Ei(-1,0,0);function Fv(){return typeof document<"u"?document:null}var Kv=class{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-i);r>0&&Jn("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Qv=class n{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){let o=Date.now()+i,a=new n(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ot(sn.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var LS,VS;(VS=LS||(LS={})).ea="default",VS.Cache="cache";function D2(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var jS=new Map;function k2(n,t,e,i){if(t===!0&&i===!0)throw new Ot(sn.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function P2(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":ln()}function M2(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ot(sn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=P2(n);throw new Ot(sn.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var yf=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Ot(sn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ot(sn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}k2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D2((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ot(sn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ot(sn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ot(sn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},bf=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ot(sn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ot(sn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yf(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Lv;switch(i.type){case"firstParty":return new Uv(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ot(sn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return lt(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=jS.get(e);i&&(Jn("ComponentProvider","Removing Datastore"),jS.delete(e),i.terminate())}(this),Promise.resolve()}};function zS(n,t,e,i={}){var r;let s=(n=M2(n,bf))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&v2("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=Nt.MOCK_USER;else{a=Ws(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new Ot(sn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Nt(d)}n._authCredentials=new Vv(new pf(a,c))}}var wf=class{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Kv(this,"async_queue_retry"),this.Vu=()=>{let i=Fv();i&&Jn("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;let e=Fv();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;let e=Fv();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});let e=new vs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}pu(){return lt(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!y2(t))throw t;Jn("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(t){let e=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw BS("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=e,e}enqueueAfterDelay(t,e,i){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);let r=Qv.createAndSchedule(this,t,e,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&ln()}verifyOperationInProgress(){}wu(){return lt(this,null,function*(){let t;do t=this.mu,yield t;while(t!==this.mu)})}Su(t){for(let e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){let e=this.Tu.indexOf(t);this.Tu.splice(e,1)}};var Yv=class extends bf{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new wf,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return lt(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new wf(t),this._firestoreClient=void 0,yield t}})}};function $S(n,t){let e=typeof n=="object"?n:ar(),i=typeof n=="string"?n:t||"(default)",r=Gs(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=Ha("firestore");s&&zS(r,...s)}return r}var SK=new RegExp("[~\\*/\\[\\]]");(function(t,e=!0){(function(r){Sc=r})(Hs),Ri(new mn("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Yv(new jv(i.getProvider("auth-internal")),new $v(i.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ot(sn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hv(d.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),He(OS,"4.7.3",t),He(OS,"4.7.3","esm2017")})();var Ac=class{constructor(t){return t}},WS="firestore",Zv=class{constructor(){return os(WS)}};var Jv=new V("angularfire2.firestore-instances");function N2(n,t){let e=xo(WS,n,t);return e&&new Ac(e)}function O2(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Ac(i)}}var F2={provide:Zv,deps:[[new Ze,Jv]]},L2={provide:Ac,useFactory:N2,deps:[[new Ze,Jv],Qn]};function qS(n,...t){return He("angularfire",Jt.full,"fst"),Qt([L2,F2,{provide:Jv,useFactory:O2(n),multi:!0,deps:[z,Se,Pn,Bi,[new Ze,gs],[new Ze,yn],...t]}])}var GS=Er($S,!0);var HS="@firebase/database",KS="1.0.8";var Xy="";function V2(n){Xy=n}var ay=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),fe(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:sr(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var ly=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return at(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var xA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ay(t)}}catch{}return new ly},ws=xA("localStorage"),cy=xA("sessionStorage");var ia=new ui("@firebase/database"),j2=function(){let n=1;return function(){return n++}}(),SA=function(n){let t=Hd(n),e=new Gd;e.update(t);let i=e.digest();return $s.encodeByteArray(i)},Uc=function(...n){let t="";for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=Uc.apply(null,i):typeof i=="object"?t+=fe(i):t+=i,t+=" "}return t},Es=null,QS=!0,B2=function(n,t){S(!t||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(ia.logLevel=or.VERBOSE,Es=ia.log.bind(ia),t&&cy.set("logging_enabled",!0)):typeof n=="function"?Es=n:(Es=null,cy.remove("logging_enabled"))},Wt=function(...n){if(QS===!0&&(QS=!1,Es===null&&cy.get("logging_enabled")===!0&&B2(!0)),Es){let t=Uc.apply(null,n);Es(t)}},zc=function(n){return function(...t){Wt(n,...t)}},dy=function(...n){let t="FIREBASE INTERNAL ERROR: "+Uc(...n);ia.error(t)},qi=function(...n){let t=`FIREBASE FATAL ERROR: ${Uc(...n)}`;throw ia.error(t),new Error(t)},In=function(...n){let t="FIREBASE WARNING: "+Uc(...n);ia.warn(t)},U2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&In("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},AA=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},z2=function(n){if(pt()||document.readyState==="complete")n();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},sa="[MIN_NAME]",Cs="[MAX_NAME]",ha=function(n,t){if(n===t)return 0;if(n===sa||t===Cs)return-1;if(t===sa||n===Cs)return 1;{let e=YS(n),i=YS(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},$2=function(n,t){return n===t?0:n<t?-1:1},Rc=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+fe(t))},Zy=function(n){if(typeof n!="object"||n===null)return fe(n);let t=[];for(let i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=fe(t[i]),e+=":",e+=Zy(n[t[i]]);return e+="}",e},RA=function(n,t){let e=n.length;if(e<=t)return[n];let i=[];for(let r=0;r<e;r+=t)r+t>e?i.push(n.substring(r,e)):i.push(n.substring(r,r+t));return i};function jn(n,t){for(let e in n)n.hasOwnProperty(e)&&t(e,n[e])}var DA=function(n){S(!AA(n),"Invalid JSON number");let t=11,e=52,i=(1<<t-1)-1,r,s,o,a,c;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,e-a)-Math.pow(2,e))):(s=0,o=Math.round(n/Math.pow(2,1-i-e))));let d=[];for(c=e;c;c-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();let f=d.join(""),m="";for(c=0;c<64;c+=8){let g=parseInt(f.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),m=m+g}return m.toLowerCase()},W2=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},q2=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var G2=new RegExp("^-?(0*)\\d{1,10}$"),H2=-2147483648,K2=2147483647,YS=function(n){if(G2.test(n)){let t=Number(n);if(t>=H2&&t<=K2)return t}return null},$c=function(n){try{n()}catch(t){setTimeout(()=>{let e=t.stack||"";throw In("Exception was thrown by user callback.",e),t},Math.floor(0))}},Q2=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Nc=function(n,t){let e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var uy=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){In(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var hy=class{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Wt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',In(t)}},Oc=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Cf="5",kA="v",PA="s",MA="r",NA="f",OA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,FA="ls",LA="p",fy="ac",VA="websocket",jA="long_polling";var If=class{constructor(t,e,i,r,s=!1,o="",a=!1,c=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ws.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ws.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function Y2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function BA(n,t,e){S(typeof t=="string","typeof type must == string"),S(typeof e=="object","typeof params must == object");let i;if(t===VA)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===jA)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Y2(n)&&(e.ns=n.namespace);let r=[];return jn(e,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var my=class{constructor(){this.counters_={}}incrementCounter(t,e=1){at(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return Ud(this.counters_)}};var ey={},ty={};function Jy(n){let t=n.toString();return ey[t]||(ey[t]=new my),ey[t]}function X2(n,t){let e=n.toString();return ty[e]||(ty[e]=t()),ty[e]}var py=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&$c(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var XS="start",Z2="close",J2="pLPCommand",eB="pRTLPCB",UA="id",zA="pw",$A="ser",tB="cb",nB="seg",iB="ts",rB="d",sB="dframe",WA=1870,qA=30,oB=WA-qA,aB=25e3,lB=3e4,gy=class n{constructor(t,e,i,r,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zc(t),this.stats_=Jy(e),this.urlFn=c=>(this.appCheckToken&&(c[fy]=this.appCheckToken),BA(e,jA,c))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new py(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(lB)),z2(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _y((...s)=>{let[o,a,c,d,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===XS)this.id=a,this.password=c;else if(o===Z2)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[XS]="t",i[$A]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[tB]=this.scriptTagHolder.uniqueCallbackIdentifier),i[kA]=Cf,this.transportSessionId&&(i[PA]=this.transportSessionId),this.lastSessionId&&(i[FA]=this.lastSessionId),this.applicationId&&(i[LA]=this.applicationId),this.appCheckToken&&(i[fy]=this.appCheckToken),typeof location<"u"&&location.hostname&&OA.test(location.hostname)&&(i[MA]=NA);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return pt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!W2()&&!q2()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=fe(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let i=Bd(e),r=RA(i,oB);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(pt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[sB]="t",i[UA]=t,i[zA]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=fe(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},_y=class n{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,pt())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=j2(),window[J2+this.uniqueCallbackIdentifier]=t,window[eB+this.uniqueCallbackIdentifier]=e,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Wt("frame writing exception"),a.stack&&Wt(a.stack),Wt(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Wt("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[UA]=this.myID,t[zA]=this.myPW,t[$A]=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+qA+i.length<=WA;){let o=this.pendingSegs.shift();i=i+"&"+nB+r+"="+o.seg+"&"+iB+r+"="+o.ts+"&"+rB+r+"="+o.d,r++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(aB)),s=()=>{clearTimeout(r),i()};this.addTag(t,s)}addTag(t,e){pt()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Wt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var cB=16384,dB=45e3,Tf=null;typeof MozWebSocket<"u"?Tf=MozWebSocket:typeof WebSocket<"u"&&(Tf=WebSocket);var Dc=(()=>{class n{constructor(e,i,r,s,o,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zc(this.connId),this.stats_=Jy(i),this.connURL=n.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,o){let a={};return a[kA]=Cf,!pt()&&typeof location<"u"&&location.hostname&&OA.test(location.hostname)&&(a[MA]=NA),i&&(a[PA]=i),r&&(a[FA]=r),s&&(a[fy]=s),o&&(a[LA]=o),BA(e,VA,a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ws.set("previous_websocket_failure",!0);try{let r;if(pt()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Cf}/${Xy}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Tf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Tf!==null&&!n.forceDisallow_}static previouslyFailed(){return ws.isInMemoryStorage||ws.get("previous_websocket_failure")===!0}markConnectionHealthy(){ws.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=sr(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){let i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();let i=fe(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=RA(i,cB);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dB))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),uB=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[gy,Dc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let i=Dc&&Dc.isAvailable(),r=i&&!Dc.previouslyFailed();if(e.webSocketOnly&&(i||In("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Dc];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),hB=6e4,fB=5e3,mB=10*1024,pB=100*1024,ny="t",ZS="d",gB="s",JS="r",_B="e",eA="o",tA="a",nA="n",iA="p",vB="h",vy=class{constructor(t,e,i,r,s,o,a,c,d,f){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zc("c:"+this.id+":"),this.transportManager_=new uB(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Nc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pB?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>mB?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ny in t){let e=t[ny];e===tA?this.upgradeIfSecondaryHealthy_():e===JS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===eA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=Rc("t",t),i=Rc("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:iA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:tA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:nA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=Rc("t",t),i=Rc("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=Rc(ny,t);if(ZS in t){let i=t[ZS];if(e===vB){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(e===nA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===gB?this.onConnectionShutdown_(i):e===JS?this.onReset_(i):e===_B?dy("Server Error: "+i):e===eA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dy("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Cf!==i&&In("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Nc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hB))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(fB))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:iA,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ws.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var xf=class{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}};var Sf=class{constructor(t){this.allowedEvents_=t,this.listeners_={},S(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});let r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(t){S(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var Af=class n extends Sf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qs()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(t){return S(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var rA=32,sA=768,je=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function Ne(){return new je("")}function _e(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Or(n){return n.pieces_.length-n.pieceNum_}function qe(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new je(n.pieces_,t)}function GA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function yB(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function HA(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function KA(n){if(n.pieceNum_>=n.pieces_.length)return null;let t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new je(t,0)}function Tt(n,t){let e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof je)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new je(e,0)}function pe(n){return n.pieceNum_>=n.pieces_.length}function Ln(n,t){let e=_e(n),i=_e(t);if(e===null)return t;if(e===i)return Ln(qe(n),qe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function QA(n,t){if(Or(n)!==Or(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function ti(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Or(n)>Or(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}var yy=class{constructor(t,e){this.errorPrefix_=e,this.parts_=HA(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=di(this.parts_[i]);YA(this)}};function bB(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=di(t),YA(n)}function wB(n){let t=n.parts_.pop();n.byteLength_-=di(t),n.parts_.length>0&&(n.byteLength_-=1)}function YA(n){if(n.byteLength_>sA)throw new Error(n.errorPrefix_+"has a key path longer than "+sA+" bytes ("+n.byteLength_+").");if(n.parts_.length>rA)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+rA+") or object contains a cycle "+bs(n))}function bs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var by=class n extends Sf{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(t){return S(t==="visible","Unknown event type: "+t),[this.visible_]}};var kc=1e3,EB=60*5*1e3,oA=30*1e3,CB=1.3,IB=3e4,TB="server_kill",aA=3,eb=(()=>{class n extends xf{constructor(e,i,r,s,o,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=n.nextPersistentConnectionId_++,this.log_=zc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kc,this.maxReconnectDelay_=EB,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!pt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");by.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Af.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){let s=++this.requestNumber_,o={r:s,a:e,b:i};this.log_(fe(o)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();let i=new ht,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(e,i,r,s){this.initConnection_();let o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){let i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){let i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,c=>{let d=c.d,f=c.s;n.warnOnListenWarnings_(d,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(f,d))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&at(e,"w")){let r=Zt(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();In(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Wd(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=oA)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,i=$d(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let i=e.s,r=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){let r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);let o={p:e},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(e){let i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){let i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+fe(e));let i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):dy("Unrecognized action received from server: "+fe(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=kc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>IB&&(this.reconnectDelay_=kc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CB)}this.onConnectStatus_(!1)}establishConnection_(){return lt(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,d=function(){c?c.close():(a=!0,r())},f=function(g){S(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:d,sendRequest:f};let m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,b]=yield Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?Wt("getToken() completed but was canceled"):(Wt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=b&&b.token,c=new vy(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,r,E=>{In(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(TB)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&In(g),d())}}})}interrupt(e){Wt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Kr(this.interruptReasons_)&&(this.reconnectDelay_=kc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;i?r=i.map(o=>Zy(o)).join("$"):r="default";let s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){let r=new je(e).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Wt("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=aA&&(this.reconnectDelay_=oA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Wt("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=aA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},i="js";pt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),e["sdk."+i+"."+Xy.replace(/\./g,"-")]=1,qs()?e["framework.cordova"]=1:zd()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=Af.getInstance().currentlyOnline();return Kr(this.interruptReasons_)&&e}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),ve=class n{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new n(t,e)}};var oa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let i=new ve(sa,t),r=new ve(sa,e);return this.compare(i,r)!==0}minPost(){return ve.MIN}};var Ef,Rf=class extends oa{static get __EMPTY_NODE(){return Ef}static set __EMPTY_NODE(t){Ef=t}compare(t,e){return ha(t.name,e.name)}isDefinedOn(t){throw An("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return ve.MIN}maxPost(){return new ve(Cs,Ef)}makePost(t,e){return S(typeof t=="string","KeyIndex indexValue must always be a string."),new ve(t,Ef)}toString(){return".key"}},ra=new Rf;var ta=class{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?i(t.key,e):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},ei=(()=>{class n{constructor(e,i,r,s,o){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Vn.EMPTY_NODE,this.right=o??Vn.EMPTY_NODE}copy(e,i,r,s,o){return new n(e??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this,o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(e,r.key)===0){if(r.right.isEmpty())return Vn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),wy=class{copy(t,e,i,r,s){return this}insert(t,e,i){return new ei(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Vn=class n{constructor(t,e=n.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ei.BLACK,null,null))}remove(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ei.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new ta(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new ta(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new ta(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new ta(this.root_,null,this.comparator_,!0,t)}};Vn.EMPTY_NODE=new wy;function xB(n,t){return ha(n.name,t.name)}function tb(n,t){return ha(n,t)}var Ey;function SB(n){Ey=n}var XA=function(n){return typeof n=="number"?"number:"+DA(n):"string:"+n},ZA=function(n){if(n.isLeafNode()){let t=n.val();S(typeof t=="string"||typeof t=="number"||typeof t=="object"&&at(t,".sv"),"Priority must be a string or number.")}else S(n===Ey||n.isEmpty(),"priority of unexpected type.");S(n===Ey||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var lA,aa=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ZA(this.priorityNode_)}static set __childrenNodeConstructor(e){lA=e}static get __childrenNodeConstructor(){return lA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pe(e)?this:_e(e)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){let r=_e(e);return r===null?i:i.isEmpty()&&r!==".priority"?this:(S(r!==".priority"||Or(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(qe(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+XA(this.priorityNode_.val())+":");let i=typeof this.value_;e+=i+":",i==="number"?e+=DA(this.value_):e+=this.value_,this.lazyHash_=SA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return S(s>=0,"Unknown leaf type: "+i),S(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),JA,eR;function AB(n){JA=n}function RB(n){eR=n}var Cy=class extends oa{compare(t,e){let i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return s===0?ha(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(Cs,new aa("[PRIORITY-POST]",eR))}makePost(t,e){let i=JA(t);return new ve(e,new aa("[PRIORITY-POST]",i))}toString(){return".priority"}},Gt=new Cy;var DB=Math.log(2),Iy=class{constructor(t){let e=s=>parseInt(Math.log(s)/DB,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Df=function(n,t,e,i){n.sort(t);let r=function(c,d){let f=d-c,m,g;if(f===0)return null;if(f===1)return m=n[c],g=e?e(m):m,new ei(g,m.node,ei.BLACK,null,null);{let b=parseInt(f/2,10)+c,E=r(c,b),D=r(b+1,d);return m=n[b],g=e?e(m):m,new ei(g,m.node,ei.BLACK,E,D)}},s=function(c){let d=null,f=null,m=n.length,g=function(E,D){let M=m-E,ne=m;m-=E;let te=r(M+1,ne),U=n[M],Ie=e?e(U):U;b(new ei(Ie,U.node,D,null,te))},b=function(E){d?(d.left=E,d=E):(f=E,d=E)};for(let E=0;E<c.count;++E){let D=c.nextBitIsOne(),M=Math.pow(2,c.count-(E+1));D?g(M,ei.BLACK):(g(M,ei.BLACK),g(M,ei.RED))}return f},o=new Iy(n.length),a=s(o);return new Vn(i||t,a)};var iy,ea={},la=class n{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return S(ea&&Gt,"ChildrenNode.ts has not been loaded"),iy=iy||new n({".priority":ea},{".priority":Gt}),iy}get(t){let e=Zt(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vn?e:null}hasIndex(t){return at(this.indexSet_,t.toString())}addIndex(t,e){S(t!==ra,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=e.getIterator(ve.Wrap),o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Df(i,t.getCompare()):a=ea;let c=t.toString(),d=Object.assign({},this.indexSet_);d[c]=t;let f=Object.assign({},this.indexes_);return f[c]=a,new n(f,d)}addToIndexes(t,e){let i=ci(this.indexes_,(r,s)=>{let o=Zt(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),r===ea)if(o.isDefinedOn(t.node)){let a=[],c=e.getIterator(ve.Wrap),d=c.getNext();for(;d;)d.name!==t.name&&a.push(d),d=c.getNext();return a.push(t),Df(a,o.getCompare())}else return ea;else{let a=e.get(t.name),c=r;return a&&(c=c.remove(new ve(t.name,a))),c.insert(t,t.node)}});return new n(i,this.indexSet_)}removeFromIndexes(t,e){let i=ci(this.indexes_,r=>{if(r===ea)return r;{let s=e.get(t.name);return s?r.remove(new ve(t.name,s)):r}});return new n(i,this.indexSet_)}};var Pc,rt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ZA(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pc||(Pc=new n(new Vn(tb),null,la.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pc}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let i=this.children_.get(e);return i===null?Pc:i}}getChild(e){let i=_e(e);return i===null?this:this.getImmediateChild(i).getChild(qe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(S(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{let r=new ve(e,i),s,o;i.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?Pc:this.priorityNode_;return new n(s,a,o)}}updateChild(e,i){let r=_e(e);if(r===null)return i;{S(_e(e)!==".priority"||Or(e)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(qe(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(Gt,(a,c)=>{i[a]=c.val(e),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+XA(this.getPriority().val())+":"),this.forEachChild(Gt,(i,r)=>{let s=r.hash();s!==""&&(e+=":"+i+":"+s)}),this.lazyHash_=e===""?"":SA(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new ve(e,i));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){let i=this.getFirstChildName(e);return i?new ve(i,this.children_.get(i)):null}getLastChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){let i=this.getLastChildName(e);return i?new ve(i,this.children_.get(i)):null}forEachChild(e,i){let r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{let s=this.children_.getIteratorFrom(e.name,ve.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{let s=this.children_.getReverseIteratorFrom(e.name,ve.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Wc?-1:0}withIndex(e){if(e===ra||this.indexMap_.hasIndex(e))return this;{let i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===ra||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Gt),s=i.getIterator(Gt),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===ra?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Ty=class extends rt{constructor(){super(new Vn(tb),rt.EMPTY_NODE,la.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return rt.EMPTY_NODE}isEmpty(){return!1}},Wc=new Ty;Object.defineProperties(ve,{MIN:{value:new ve(sa,rt.EMPTY_NODE)},MAX:{value:new ve(Cs,Wc)}});Rf.__EMPTY_NODE=rt.EMPTY_NODE;aa.__childrenNodeConstructor=rt;SB(Wc);RB(Wc);var kB=!0;function qt(n,t=null){if(n===null)return rt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),S(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let e=n;return new aa(e,qt(t))}if(!(n instanceof Array)&&kB){let e=[],i=!1;if(jn(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=qt(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),e.push(new ve(o,c)))}}),e.length===0)return rt.EMPTY_NODE;let s=Df(e,xB,o=>o.name,tb);if(i){let o=Df(e,Gt.getCompare());return new rt(s,qt(t),new la({".priority":o},{".priority":Gt}))}else return new rt(s,qt(t),la.Default)}else{let e=rt.EMPTY_NODE;return jn(n,(i,r)=>{if(at(n,i)&&i.substring(0,1)!=="."){let s=qt(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(qt(t))}}AB(qt);var xy=class extends oa{constructor(t){super(),this.indexPath_=t,S(!pe(t)&&_e(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return s===0?ha(t.name,e.name):s}makePost(t,e){let i=qt(t),r=rt.EMPTY_NODE.updateChild(this.indexPath_,i);return new ve(e,r)}maxPost(){let t=rt.EMPTY_NODE.updateChild(this.indexPath_,Wc);return new ve(Cs,t)}toString(){return HA(this.indexPath_,0).join("/")}};var Sy=class extends oa{compare(t,e){let i=t.node.compareTo(e.node);return i===0?ha(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(t,e){let i=qt(t);return new ve(e,i)}toString(){return".value"}},PB=new Sy;function MB(n){return{type:"value",snapshotNode:n}}function NB(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function OB(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function cA(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function FB(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}var Ay=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sa}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gt}copy(){let t=new n;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function dA(n){let t={};if(n.isDefault())return t;let e;if(n.index_===Gt?e="$priority":n.index_===PB?e="$value":n.index_===ra?e="$key":(S(n.index_ instanceof xy,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=fe(e),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";t[i]=fe(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+fe(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";t[i]=fe(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+fe(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function uA(n){let t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==Gt&&(t.i=n.index_.toString()),t}var Ry=class n extends xf{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=zc("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(S(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=n.getListenId_(t,i),a={};this.listens_[o]=a;let c=dA(t._queryParams);this.restRequest_(s+".json",c,(d,f)=>{let m=f;if(d===404&&(m=null,d=null),d===null&&this.onDataUpdate_(s,m,!1,i),Zt(this.listens_,o)===a){let g;d?d===401?g="permission_denied":g="rest_error:"+d:g="ok",r(g,null)}})}unlisten(t,e){let i=n.getListenId_(t,e);delete this.listens_[i]}get(t){let e=dA(t._queryParams),i=t._path.toString(),r=new ht;return this.restRequest_(i+".json",e,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+qd(e);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=sr(a.responseText)}catch{In("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&In("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var Dy=class{constructor(){this.rootNode_=rt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function kf(){return{value:null,children:new Map}}function tR(n,t,e){if(pe(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{let i=_e(t);n.children.has(i)||n.children.set(i,kf());let r=n.children.get(i);t=qe(t),tR(r,t,e)}}function ky(n,t,e){n.value!==null?e(t,n.value):LB(n,(i,r)=>{let s=new je(t.toString()+"/"+i);ky(r,s,e)})}function LB(n,t){n.children.forEach((e,i)=>{t(i,e)})}var Py=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&jn(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}};var hA=10*1e3,VB=30*1e3,jB=5*60*1e3,My=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Py(t);let i=hA+(VB-hA)*Math.random();Nc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),e={},i=!1;jn(t,(r,s)=>{s>0&&at(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),Nc(this.reportStats_.bind(this),Math.floor(Math.random()*2*jB))}};var Wi=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Wi||{});function nR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function iR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function rR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Ny=class n{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Wi.ACK_USER_WRITE,this.source=nR()}operationForChild(t){if(pe(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new je(t));return new n(Ne(),e,this.revert)}}else return S(_e(this.path)===t,"operationForChild called for unrelated child."),new n(qe(this.path),this.affectedTree,this.revert)}};var ca=class n{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Wi.OVERWRITE}operationForChild(t){return pe(this.path)?new n(this.source,Ne(),this.snap.getImmediateChild(t)):new n(this.source,qe(this.path),this.snap)}};var Pf=class n{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Wi.MERGE}operationForChild(t){if(pe(this.path)){let e=this.children.subtree(new je(t));return e.isEmpty()?null:e.value?new ca(this.source,Ne(),e.value):new n(this.source,Ne(),e)}else return S(_e(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Vc=class{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(pe(t))return this.isFullyInitialized()&&!this.filtered_;let e=_e(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function BB(n,t,e,i){let r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(FB(o.childName,o.snapshotNode))}),Mc(n,r,"child_removed",t,i,e),Mc(n,r,"child_added",t,i,e),Mc(n,r,"child_moved",s,i,e),Mc(n,r,"child_changed",t,i,e),Mc(n,r,"value",t,i,e),r}function Mc(n,t,e,i,r,s){let o=i.filter(a=>a.type===e);o.sort((a,c)=>zB(n,a,c)),o.forEach(a=>{let c=UB(n,a,s);r.forEach(d=>{d.respondsTo(a.type)&&t.push(d.createEvent(c,n.query_))})})}function UB(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function zB(n,t,e){if(t.childName==null||e.childName==null)throw An("Should only compare child_ events.");let i=new ve(t.childName,t.snapshotNode),r=new ve(e.childName,e.snapshotNode);return n.index_.compare(i,r)}function sR(n,t){return{eventCache:n,serverCache:t}}function Fc(n,t,e,i){return sR(new Vc(t,e,i),n.serverCache)}function oR(n,t,e,i){return sR(n.eventCache,new Vc(t,e,i))}function Oy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Is(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var ry,$B=()=>(ry||(ry=new Vn($2)),ry),cn=class n{constructor(t,e=$B()){this.value=t,this.children=e}static fromObject(t){let e=new n(null);return jn(t,(i,r)=>{e=e.set(new je(i),r)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Ne(),value:this.value};if(pe(t))return null;{let i=_e(t),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(qe(t),e);return s!=null?{path:Tt(new je(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(pe(t))return this;{let e=_e(t),i=this.children.get(e);return i!==null?i.subtree(qe(t)):new n(null)}}set(t,e){if(pe(t))return new n(e,this.children);{let i=_e(t),s=(this.children.get(i)||new n(null)).set(qe(t),e),o=this.children.insert(i,s);return new n(this.value,o)}}remove(t){if(pe(t))return this.children.isEmpty()?new n(null):new n(null,this.children);{let e=_e(t),i=this.children.get(e);if(i){let r=i.remove(qe(t)),s;return r.isEmpty()?s=this.children.remove(e):s=this.children.insert(e,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(t){if(pe(t))return this.value;{let e=_e(t),i=this.children.get(e);return i?i.get(qe(t)):null}}setTree(t,e){if(pe(t))return e;{let i=_e(t),s=(this.children.get(i)||new n(null)).setTree(qe(t),e),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(t){return this.fold_(Ne(),t)}fold_(t,e){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Tt(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Ne(),e)}findOnPath_(t,e,i){let r=this.value?i(e,this.value):!1;if(r)return r;if(pe(t))return null;{let s=_e(t),o=this.children.get(s);return o?o.findOnPath_(qe(t),Tt(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Ne(),e)}foreachOnPath_(t,e,i){if(pe(t))return this;{this.value&&i(e,this.value);let r=_e(t),s=this.children.get(r);return s?s.foreachOnPath_(qe(t),Tt(e,r),i):new n(null)}}foreach(t){this.foreach_(Ne(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Tt(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}};var ni=class n{constructor(t){this.writeTree_=t}static empty(){return new n(new cn(null))}};function Lc(n,t,e){if(pe(t))return new ni(new cn(e));{let i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,s=i.value,o=Ln(r,t);return s=s.updateChild(o,e),new ni(n.writeTree_.set(r,s))}else{let r=new cn(e),s=n.writeTree_.setTree(t,r);return new ni(s)}}}function fA(n,t,e){let i=n;return jn(e,(r,s)=>{i=Lc(i,Tt(t,r),s)}),i}function mA(n,t){if(pe(t))return ni.empty();{let e=n.writeTree_.setTree(t,new cn(null));return new ni(e)}}function Fy(n,t){return Ts(n,t)!=null}function Ts(n,t){let e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(Ln(e.path,t)):null}function pA(n){let t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Gt,(i,r)=>{t.push(new ve(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new ve(i,r.value))}),t}function Nr(n,t){if(pe(t))return n;{let e=Ts(n,t);return e!=null?new ni(new cn(e)):new ni(n.writeTree_.subtree(t))}}function Ly(n){return n.writeTree_.isEmpty()}function da(n,t){return aR(Ne(),n.writeTree_,t)}function aR(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):e=aR(Tt(n,r),s,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(Tt(n,".priority"),i)),e}}function lR(n,t){return fR(t,n)}function WB(n,t,e,i,r){S(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=Lc(n.visibleWrites,t,e)),n.lastWriteId=i}function qB(n,t){for(let e=0;e<n.allWrites.length;e++){let i=n.allWrites[e];if(i.writeId===t)return i}return null}function GB(n,t){let e=n.allWrites.findIndex(a=>a.writeId===t);S(e>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=e&&HB(a,i.path)?r=!1:ti(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return KB(n),!0;if(i.snap)n.visibleWrites=mA(n.visibleWrites,i.path);else{let a=i.children;jn(a,c=>{n.visibleWrites=mA(n.visibleWrites,Tt(i.path,c))})}return!0}else return!1}function HB(n,t){if(n.snap)return ti(n.path,t);for(let e in n.children)if(n.children.hasOwnProperty(e)&&ti(Tt(n.path,e),t))return!0;return!1}function KB(n){n.visibleWrites=cR(n.allWrites,QB,Ne()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function QB(n){return n.visible}function cR(n,t,e){let i=ni.empty();for(let r=0;r<n.length;++r){let s=n[r];if(t(s)){let o=s.path,a;if(s.snap)ti(e,o)?(a=Ln(e,o),i=Lc(i,a,s.snap)):ti(o,e)&&(a=Ln(o,e),i=Lc(i,Ne(),s.snap.getChild(a)));else if(s.children){if(ti(e,o))a=Ln(e,o),i=fA(i,a,s.children);else if(ti(o,e))if(a=Ln(o,e),pe(a))i=fA(i,Ne(),s.children);else{let c=Zt(s.children,_e(a));if(c){let d=c.getChild(qe(a));i=Lc(i,Ne(),d)}}}else throw An("WriteRecord should have .snap or .children")}}return i}function dR(n,t,e,i,r){if(!i&&!r){let s=Ts(n.visibleWrites,t);if(s!=null)return s;{let o=Nr(n.visibleWrites,t);if(Ly(o))return e;if(e==null&&!Fy(o,Ne()))return null;{let a=e||rt.EMPTY_NODE;return da(o,a)}}}else{let s=Nr(n.visibleWrites,t);if(!r&&Ly(s))return e;if(!r&&e==null&&!Fy(s,Ne()))return null;{let o=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(ti(d.path,t)||ti(t,d.path))},a=cR(n.allWrites,o,t),c=e||rt.EMPTY_NODE;return da(a,c)}}}function YB(n,t,e){let i=rt.EMPTY_NODE,r=Ts(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Gt,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(e){let s=Nr(n.visibleWrites,t);return e.forEachChild(Gt,(o,a)=>{let c=da(Nr(s,new je(o)),a);i=i.updateImmediateChild(o,c)}),pA(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=Nr(n.visibleWrites,t);return pA(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function XB(n,t,e,i,r){S(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=Tt(t,e);if(Fy(n.visibleWrites,s))return null;{let o=Nr(n.visibleWrites,s);return Ly(o)?r.getChild(e):da(o,r.getChild(e))}}function ZB(n,t,e,i){let r=Tt(t,e),s=Ts(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(e)){let o=Nr(n.visibleWrites,r);return da(o,i.getNode().getImmediateChild(e))}else return null}function JB(n,t){return Ts(n.visibleWrites,t)}function eU(n,t,e,i,r,s,o){let a,c=Nr(n.visibleWrites,t),d=Ts(c,Ne());if(d!=null)a=d;else if(e!=null)a=da(c,e);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let f=[],m=o.getCompare(),g=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),b=g.getNext();for(;b&&f.length<r;)m(b,i)!==0&&f.push(b),b=g.getNext();return f}else return[]}function tU(){return{visibleWrites:ni.empty(),allWrites:[],lastWriteId:-1}}function Vy(n,t,e,i){return dR(n.writeTree,n.treePath,t,e,i)}function uR(n,t){return YB(n.writeTree,n.treePath,t)}function gA(n,t,e,i){return XB(n.writeTree,n.treePath,t,e,i)}function Mf(n,t){return JB(n.writeTree,Tt(n.treePath,t))}function nU(n,t,e,i,r,s){return eU(n.writeTree,n.treePath,t,e,i,r,s)}function nb(n,t,e){return ZB(n.writeTree,n.treePath,t,e)}function hR(n,t){return fR(Tt(n.treePath,t),n.writeTree)}function fR(n,t){return{treePath:n,writeTree:t}}var jy=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,i=t.childName;S(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),S(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(e==="child_added"&&s==="child_removed")this.changeMap.set(i,cA(i,t.snapshotNode,r.snapshotNode));else if(e==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&s==="child_changed")this.changeMap.set(i,OB(i,r.oldSnap));else if(e==="child_changed"&&s==="child_added")this.changeMap.set(i,NB(i,t.snapshotNode));else if(e==="child_changed"&&s==="child_changed")this.changeMap.set(i,cA(i,t.snapshotNode,r.oldSnap));else throw An("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var By=class{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}},mR=new By,jc=class{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new Vc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nb(this.writes_,t,i)}}getChildAfterChild(t,e,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Is(this.viewCache_),s=nU(this.writes_,r,e,1,i,t);return s.length===0?null:s[0]}};function iU(n,t){S(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),S(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function rU(n,t,e,i,r){let s=new jy,o,a;if(e.type===Wi.OVERWRITE){let d=e;d.source.fromUser?o=Uy(n,t,d.path,d.snap,i,r,s):(S(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered()&&!pe(d.path),o=Nf(n,t,d.path,d.snap,i,r,a,s))}else if(e.type===Wi.MERGE){let d=e;d.source.fromUser?o=oU(n,t,d.path,d.children,i,r,s):(S(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered(),o=zy(n,t,d.path,d.children,i,r,a,s))}else if(e.type===Wi.ACK_USER_WRITE){let d=e;d.revert?o=cU(n,t,d.path,i,r,s):o=aU(n,t,d.path,d.affectedTree,i,r,s)}else if(e.type===Wi.LISTEN_COMPLETE)o=lU(n,t,e.path,i,s);else throw An("Unknown operation type: "+e.type);let c=s.getChanges();return sU(t,o,c),{viewCache:o,changes:c}}function sU(n,t,e){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Oy(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(MB(Oy(t)))}}function pR(n,t,e,i,r,s){let o=t.eventCache;if(Mf(i,e)!=null)return t;{let a,c;if(pe(e))if(S(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let d=Is(t),f=d instanceof rt?d:rt.EMPTY_NODE,m=uR(i,f);a=n.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{let d=Vy(i,Is(t));a=n.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{let d=_e(e);if(d===".priority"){S(Or(e)===1,"Can't have a priority with additional path components");let f=o.getNode();c=t.serverCache.getNode();let m=gA(i,e,f,c);m!=null?a=n.filter.updatePriority(f,m):a=o.getNode()}else{let f=qe(e),m;if(o.isCompleteForChild(d)){c=t.serverCache.getNode();let g=gA(i,e,o.getNode(),c);g!=null?m=o.getNode().getImmediateChild(d).updateChild(f,g):m=o.getNode().getImmediateChild(d)}else m=nb(i,d,t.serverCache);m!=null?a=n.filter.updateChild(o.getNode(),d,m,f,r,s):a=o.getNode()}}return Fc(t,a,o.isFullyInitialized()||pe(e),n.filter.filtersNodes())}}function Nf(n,t,e,i,r,s,o,a){let c=t.serverCache,d,f=o?n.filter:n.filter.getIndexedFilter();if(pe(e))d=f.updateFullNode(c.getNode(),i,null);else if(f.filtersNodes()&&!c.isFiltered()){let b=c.getNode().updateChild(e,i);d=f.updateFullNode(c.getNode(),b,null)}else{let b=_e(e);if(!c.isCompleteForPath(e)&&Or(e)>1)return t;let E=qe(e),M=c.getNode().getImmediateChild(b).updateChild(E,i);b===".priority"?d=f.updatePriority(c.getNode(),M):d=f.updateChild(c.getNode(),b,M,E,mR,null)}let m=oR(t,d,c.isFullyInitialized()||pe(e),f.filtersNodes()),g=new jc(r,m,s);return pR(n,m,e,r,g,a)}function Uy(n,t,e,i,r,s,o){let a=t.eventCache,c,d,f=new jc(r,t,s);if(pe(e))d=n.filter.updateFullNode(t.eventCache.getNode(),i,o),c=Fc(t,d,!0,n.filter.filtersNodes());else{let m=_e(e);if(m===".priority")d=n.filter.updatePriority(t.eventCache.getNode(),i),c=Fc(t,d,a.isFullyInitialized(),a.isFiltered());else{let g=qe(e),b=a.getNode().getImmediateChild(m),E;if(pe(g))E=i;else{let D=f.getCompleteChild(m);D!=null?GA(g)===".priority"&&D.getChild(KA(g)).isEmpty()?E=D:E=D.updateChild(g,i):E=rt.EMPTY_NODE}if(b.equals(E))c=t;else{let D=n.filter.updateChild(a.getNode(),m,E,g,f,o);c=Fc(t,D,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function _A(n,t){return n.eventCache.isCompleteForChild(t)}function oU(n,t,e,i,r,s,o){let a=t;return i.foreach((c,d)=>{let f=Tt(e,c);_A(t,_e(f))&&(a=Uy(n,a,f,d,r,s,o))}),i.foreach((c,d)=>{let f=Tt(e,c);_A(t,_e(f))||(a=Uy(n,a,f,d,r,s,o))}),a}function vA(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function zy(n,t,e,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,d;pe(e)?d=i:d=new cn(null).setTree(e,i);let f=t.serverCache.getNode();return d.children.inorderTraversal((m,g)=>{if(f.hasChild(m)){let b=t.serverCache.getNode().getImmediateChild(m),E=vA(n,b,g);c=Nf(n,c,new je(m),E,r,s,o,a)}}),d.children.inorderTraversal((m,g)=>{let b=!t.serverCache.isCompleteForChild(m)&&g.value===null;if(!f.hasChild(m)&&!b){let E=t.serverCache.getNode().getImmediateChild(m),D=vA(n,E,g);c=Nf(n,c,new je(m),D,r,s,o,a)}}),c}function aU(n,t,e,i,r,s,o){if(Mf(r,e)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(i.value!=null){if(pe(e)&&c.isFullyInitialized()||c.isCompleteForPath(e))return Nf(n,t,e,c.getNode().getChild(e),r,s,a,o);if(pe(e)){let d=new cn(null);return c.getNode().forEachChild(ra,(f,m)=>{d=d.set(new je(f),m)}),zy(n,t,e,d,r,s,a,o)}else return t}else{let d=new cn(null);return i.foreach((f,m)=>{let g=Tt(e,f);c.isCompleteForPath(g)&&(d=d.set(f,c.getNode().getChild(g)))}),zy(n,t,e,d,r,s,a,o)}}function lU(n,t,e,i,r){let s=t.serverCache,o=oR(t,s.getNode(),s.isFullyInitialized()||pe(e),s.isFiltered());return pR(n,o,e,i,mR,r)}function cU(n,t,e,i,r,s){let o;if(Mf(i,e)!=null)return t;{let a=new jc(i,t,r),c=t.eventCache.getNode(),d;if(pe(e)||_e(e)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=Vy(i,Is(t));else{let m=t.serverCache.getNode();S(m instanceof rt,"serverChildren would be complete if leaf node"),f=uR(i,m)}f=f,d=n.filter.updateFullNode(c,f,s)}else{let f=_e(e),m=nb(i,f,t.serverCache);m==null&&t.serverCache.isCompleteForChild(f)&&(m=c.getImmediateChild(f)),m!=null?d=n.filter.updateChild(c,f,m,qe(e),a,s):t.eventCache.getNode().hasChild(f)?d=n.filter.updateChild(c,f,rt.EMPTY_NODE,qe(e),a,s):d=c,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Vy(i,Is(t)),o.isLeafNode()&&(d=n.filter.updateFullNode(d,o,s)))}return o=t.serverCache.isFullyInitialized()||Mf(i,Ne())!=null,Fc(t,d,o,n.filter.filtersNodes())}}function dU(n,t){let e=Is(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!pe(t)&&!e.getImmediateChild(_e(t)).isEmpty())?e.getChild(t):null}function yA(n,t,e,i){t.type===Wi.MERGE&&t.source.queryId!==null&&(S(Is(n.viewCache_),"We should always have a full cache before handling merges"),S(Oy(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=rU(n.processor_,r,t,e,i);return iU(n.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,uU(n,s.changes,s.viewCache.eventCache.getNode(),null)}function uU(n,t,e,i){let r=i?[i]:n.eventRegistrations_;return BB(n.eventGenerator_,t,e,r)}var bA;function hU(n){S(!bA,"__referenceConstructor has already been defined"),bA=n}function ib(n,t,e,i){let r=t.source.queryId;if(r!==null){let s=n.views.get(r);return S(s!=null,"SyncTree gave us an op for an invalid query."),yA(s,t,e,i)}else{let s=[];for(let o of n.views.values())s=s.concat(yA(o,t,e,i));return s}}function rb(n,t){let e=null;for(let i of n.views.values())e=e||dU(i,t);return e}var wA;function fU(n){S(!wA,"__referenceConstructor has already been defined"),wA=n}var Of=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new cn(null),this.pendingWriteTree_=tU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function mU(n,t,e,i,r){return WB(n.pendingWriteTree_,t,e,i,r),r?Lf(n,new ca(nR(),t,e)):[]}function na(n,t,e=!1){let i=qB(n.pendingWriteTree_,t);if(GB(n.pendingWriteTree_,t)){let s=new cn(null);return i.snap!=null?s=s.set(Ne(),!0):jn(i.children,o=>{s=s.set(new je(o),!0)}),Lf(n,new Ny(i.path,s,e))}else return[]}function Ff(n,t,e){return Lf(n,new ca(iR(),t,e))}function pU(n,t,e){let i=cn.fromObject(e);return Lf(n,new Pf(iR(),t,i))}function gU(n,t,e,i){let r=yR(n,i);if(r!=null){let s=bR(r),o=s.path,a=s.queryId,c=Ln(o,t),d=new ca(rR(a),c,e);return wR(n,o,d)}else return[]}function _U(n,t,e,i){let r=yR(n,i);if(r){let s=bR(r),o=s.path,a=s.queryId,c=Ln(o,t),d=cn.fromObject(e),f=new Pf(rR(a),c,d);return wR(n,o,f)}else return[]}function gR(n,t,e){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(o,a)=>{let c=Ln(o,t),d=rb(a,c);if(d)return d});return dR(r,t,s,e,!0)}function Lf(n,t){return _R(t,n.syncPointTree_,null,lR(n.pendingWriteTree_,Ne()))}function _R(n,t,e,i){if(pe(n.path))return vR(n,t,e,i);{let r=t.get(Ne());e==null&&r!=null&&(e=rb(r,Ne()));let s=[],o=_e(n.path),a=n.operationForChild(o),c=t.children.get(o);if(c&&a){let d=e?e.getImmediateChild(o):null,f=hR(i,o);s=s.concat(_R(a,c,d,f))}return r&&(s=s.concat(ib(r,n,i,e))),s}}function vR(n,t,e,i){let r=t.get(Ne());e==null&&r!=null&&(e=rb(r,Ne()));let s=[];return t.children.inorderTraversal((o,a)=>{let c=e?e.getImmediateChild(o):null,d=hR(i,o),f=n.operationForChild(o);f&&(s=s.concat(vR(f,a,c,d)))}),r&&(s=s.concat(ib(r,n,i,e))),s}function yR(n,t){return n.tagToQueryMap.get(t)}function bR(n){let t=n.indexOf("$");return S(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new je(n.substr(0,t))}}function wR(n,t,e){let i=n.syncPointTree_.get(t);S(i,"Missing sync point for query tag that we're tracking");let r=lR(n.pendingWriteTree_,t);return ib(i,e,r,null)}var $y=class n{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new n(e)}node(){return this.node_}},Wy=class n{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=Tt(this.path_,t);return new n(this.syncTree_,e)}node(){return gR(this.syncTree_,this.path_)}},vU=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},EA=function(n,t,e){if(!n||typeof n!="object")return n;if(S(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return yU(n[".sv"],t,e);if(typeof n[".sv"]=="object")return bU(n[".sv"],t);S(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},yU=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:S(!1,"Unexpected server value: "+n)}},bU=function(n,t,e){n.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&S(!1,"Unexpected increment value: "+i);let r=t.node();if(S(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},wU=function(n,t,e,i){return sb(t,new Wy(e,n),i)},EU=function(n,t,e){return sb(n,new $y(t),e)};function sb(n,t,e){let i=n.getPriority().val(),r=EA(i,t.getImmediateChild(".priority"),e),s;if(n.isLeafNode()){let o=n,a=EA(o.getValue(),t,e);return a!==o.getValue()||r!==o.getPriority().val()?new aa(a,qt(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new aa(r))),o.forEachChild(Gt,(a,c)=>{let d=sb(c,t.getImmediateChild(a),e);d!==c&&(s=s.updateImmediateChild(a,d))}),s}}var Bc=class{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}};function ob(n,t){let e=t instanceof je?t:new je(t),i=n,r=_e(e);for(;r!==null;){let s=Zt(i.node.children,r)||{children:{},childCount:0};i=new Bc(r,i,s),e=qe(e),r=_e(e)}return i}function fa(n){return n.node.value}function ER(n,t){n.node.value=t,qy(n)}function CR(n){return n.node.childCount>0}function CU(n){return fa(n)===void 0&&!CR(n)}function Vf(n,t){jn(n.node.children,(e,i)=>{t(new Bc(e,n,i))})}function IR(n,t,e,i){e&&!i&&t(n),Vf(n,r=>{IR(r,t,!0,i)}),e&&i&&t(n)}function IU(n,t,e){let i=e?n:n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function qc(n){return new je(n.parent===null?n.name:qc(n.parent)+"/"+n.name)}function qy(n){n.parent!==null&&TU(n.parent,n.name,n)}function TU(n,t,e){let i=CU(e),r=at(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,qy(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,qy(n))}var xU=/[\[\].#$\/\u0000-\u001F\u007F]/,SU=/[\[\].#$\u0000-\u001F\u007F]/,sy=10*1024*1024,TR=function(n){return typeof n=="string"&&n.length!==0&&!xU.test(n)},AU=function(n){return typeof n=="string"&&n.length!==0&&!SU.test(n)},RU=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),AU(n)};var xR=function(n,t,e){let i=e instanceof je?new yy(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+bs(i));if(typeof t=="function")throw new Error(n+"contains a function "+bs(i)+" with contents = "+t.toString());if(AA(t))throw new Error(n+"contains "+t.toString()+" "+bs(i));if(typeof t=="string"&&t.length>sy/3&&di(t)>sy)throw new Error(n+"contains a string greater than "+sy+" utf8 bytes "+bs(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(jn(t,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!TR(o)))throw new Error(n+" contains an invalid key ("+o+") "+bs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bB(i,o),xR(n,a,i),wB(i)}),r&&s)throw new Error(n+' contains ".value" child '+bs(i)+" in addition to actual children.")}};var DU=function(n,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!TR(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!RU(e))throw new Error(zt(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Gy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function kU(n,t){let e=null;for(let i=0;i<t.length;i++){let r=t[i],s=r.getPath();e!==null&&!QA(s,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function xs(n,t,e){kU(n,e),PU(n,i=>ti(i,t)||ti(t,i))}function PU(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;t(s)?(MU(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function MU(n){for(let t=0;t<n.events.length;t++){let e=n.events[t];if(e!==null){n.events[t]=null;let i=e.getEventRunner();Es&&Wt("event: "+e.toString()),$c(i)}}}var NU="repo_interrupt",OU=25,Hy=class{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kf(),this.transactionQueueTree_=new Bc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function FU(n,t,e){if(n.stats_=Jy(n.repoInfo_),n.forceRestClient_||Q2())n.server_=new Ry(n.repoInfo_,(i,r,s,o)=>{CA(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>IA(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{fe(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new eb(n.repoInfo_,t,(i,r,s,o)=>{CA(n,i,r,s,o)},i=>{IA(n,i)},i=>{VU(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=X2(n.repoInfo_,()=>new My(n.stats_,n.server_)),n.infoData_=new Dy,n.infoSyncTree_=new Of({startListening:(i,r,s,o)=>{let a=[],c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=Ff(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ab(n,"connected",!1),n.serverSyncTree_=new Of({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{let d=o(a,c);xs(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function LU(n){let e=n.infoData_.getNode(new je(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function SR(n){return vU({timestamp:LU(n)})}function CA(n,t,e,i,r){n.dataUpdateCount++;let s=new je(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let o=[];if(r)if(i){let c=ci(e,d=>qt(d));o=_U(n.serverSyncTree_,s,c,r)}else{let c=qt(e);o=gU(n.serverSyncTree_,s,c,r)}else if(i){let c=ci(e,d=>qt(d));o=pU(n.serverSyncTree_,s,c)}else{let c=qt(e);o=Ff(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=cb(n,s)),xs(n.eventQueue_,a,o)}function IA(n,t){ab(n,"connected",t),t===!1&&BU(n)}function VU(n,t){jn(t,(e,i)=>{ab(n,e,i)})}function ab(n,t,e){let i=new je("/.info/"+t),r=qt(e);n.infoData_.updateSnapshot(i,r);let s=Ff(n.infoSyncTree_,i,r);xs(n.eventQueue_,i,s)}function jU(n){return n.nextWriteId_++}function BU(n){AR(n,"onDisconnectEvents");let t=SR(n),e=kf();ky(n.onDisconnect_,Ne(),(r,s)=>{let o=wU(r,s,n.serverSyncTree_,t);tR(e,r,o)});let i=[];ky(e,Ne(),(r,s)=>{i=i.concat(Ff(n.serverSyncTree_,r,s));let o=WU(n,r);cb(n,o)}),n.onDisconnect_=kf(),xs(n.eventQueue_,Ne(),i)}function UU(n){n.persistentConnection_&&n.persistentConnection_.interrupt(NU)}function AR(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Wt(e,...t)}function RR(n,t,e){return gR(n.serverSyncTree_,t,e)||rt.EMPTY_NODE}function lb(n,t=n.transactionQueueTree_){if(t||jf(n,t),fa(t)){let e=kR(n,t);S(e.length>0,"Sending zero length transaction queue"),e.every(r=>r.status===0)&&zU(n,qc(t),e)}else CR(t)&&Vf(t,e=>{lb(n,e)})}function zU(n,t,e){let i=e.map(d=>d.currentWriteId),r=RR(n,t,i),s=r,o=r.hash();for(let d=0;d<e.length;d++){let f=e[d];S(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let m=Ln(t,f.path);s=s.updateChild(m,f.currentOutputSnapshotRaw)}let a=s.val(!0),c=t;n.server_.put(c.toString(),a,d=>{AR(n,"transaction put response",{path:c.toString(),status:d});let f=[];if(d==="ok"){let m=[];for(let g=0;g<e.length;g++)e[g].status=2,f=f.concat(na(n.serverSyncTree_,e[g].currentWriteId)),e[g].onComplete&&m.push(()=>e[g].onComplete(null,!0,e[g].currentOutputSnapshotResolved)),e[g].unwatcher();jf(n,ob(n.transactionQueueTree_,t)),lb(n,n.transactionQueueTree_),xs(n.eventQueue_,t,f);for(let g=0;g<m.length;g++)$c(m[g])}else{if(d==="datastale")for(let m=0;m<e.length;m++)e[m].status===3?e[m].status=4:e[m].status=0;else{In("transaction at "+c.toString()+" failed: "+d);for(let m=0;m<e.length;m++)e[m].status=4,e[m].abortReason=d}cb(n,t)}},o)}function cb(n,t){let e=DR(n,t),i=qc(e),r=kR(n,e);return $U(n,r,i),i}function $U(n,t,e){if(t.length===0)return;let i=[],r=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],d=Ln(e,c.path),f=!1,m;if(S(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,m=c.abortReason,r=r.concat(na(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=OU)f=!0,m="maxretry",r=r.concat(na(n.serverSyncTree_,c.currentWriteId,!0));else{let g=RR(n,c.path,o);c.currentInputSnapshot=g;let b=t[a].update(g.val());if(b!==void 0){xR("transaction failed: Data returned ",b,c.path);let E=qt(b);typeof b=="object"&&b!=null&&at(b,".priority")||(E=E.updatePriority(g.getPriority()));let M=c.currentWriteId,ne=SR(n),te=EU(E,g,ne);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=te,c.currentWriteId=jU(n),o.splice(o.indexOf(M),1),r=r.concat(mU(n.serverSyncTree_,c.path,te,c.currentWriteId,c.applyLocally)),r=r.concat(na(n.serverSyncTree_,M,!0))}else f=!0,m="nodata",r=r.concat(na(n.serverSyncTree_,c.currentWriteId,!0))}xs(n.eventQueue_,e,r),r=[],f&&(t[a].status=2,function(g){setTimeout(g,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(m==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(m),!1,null))))}jf(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)$c(i[a]);lb(n,n.transactionQueueTree_)}function DR(n,t){let e,i=n.transactionQueueTree_;for(e=_e(t);e!==null&&fa(i)===void 0;)i=ob(i,e),t=qe(t),e=_e(t);return i}function kR(n,t){let e=[];return PR(n,t,e),e.sort((i,r)=>i.order-r.order),e}function PR(n,t,e){let i=fa(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);Vf(t,r=>{PR(n,r,e)})}function jf(n,t){let e=fa(t);if(e){let i=0;for(let r=0;r<e.length;r++)e[r].status!==2&&(e[i]=e[r],i++);e.length=i,ER(t,e.length>0?e:void 0)}Vf(t,i=>{jf(n,i)})}function WU(n,t){let e=qc(DR(n,t)),i=ob(n.transactionQueueTree_,t);return IU(i,r=>{oy(n,r)}),oy(n,i),IR(i,r=>{oy(n,r)}),e}function oy(n,t){let e=fa(t);if(e){let i=[],r=[],s=-1;for(let o=0;o<e.length;o++)e[o].status===3||(e[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(S(e[o].status===0,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(na(n.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&i.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?ER(t,void 0):e.length=s+1,xs(n.eventQueue_,qc(t),r);for(let o=0;o<i.length;o++)$c(i[o])}}function qU(n){let t="",e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function GU(n){let t={};n.charAt(0)==="?"&&(n=n.substring(1));for(let e of n.split("&")){if(e.length===0)continue;let i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):In(`Invalid query segment '${e}' in query '${n}'`)}return t}var TA=function(n,t){let e=HU(n),i=e.namespace;e.domain==="firebase.com"&&qi(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&qi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||U2();let r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new If(e.host,e.secure,i,r,t,"",i!==e.subdomain),path:new je(e.pathString)}},HU=function(n){let t="",e="",i="",r="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(a=n.substring(0,d-1),n=n.substring(d+2));let f=n.indexOf("/");f===-1&&(f=n.length);let m=n.indexOf("?");m===-1&&(m=n.length),t=n.substring(0,Math.min(f,m)),f<m&&(r=qU(n.substring(f,m)));let g=GU(n.substring(Math.min(n.length,m)));d=t.indexOf(":"),d>=0?(o=a==="https"||a==="wss",c=parseInt(t.substring(d+1),10)):d=t.length;let b=t.slice(0,d);if(b.toLowerCase()==="localhost")e="localhost";else if(b.split(".").length<=2)e=b;else{let E=t.indexOf(".");i=t.substring(0,E).toLowerCase(),e=t.substring(E+1),s=i}"ns"in g&&(s=g.ns)}return{host:t,port:c,domain:e,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var Ky=class n{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return pe(this._path)?null:GA(this._path)}get ref(){return new ua(this._repo,this._path)}get _queryIdentifier(){let t=uA(this._queryParams),e=Zy(t);return e==="{}"?"default":e}get _queryObject(){return uA(this._queryParams)}isEqual(t){if(t=bt(t),!(t instanceof n))return!1;let e=this._repo===t._repo,i=QA(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+yB(this._path)}};var ua=class n extends Ky{constructor(t,e){super(t,e,new Ay,!1)}get parent(){let t=KA(this._path);return t===null?null:new n(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};hU(ua);fU(ua);var KU="FIREBASE_DATABASE_EMULATOR_HOST",Qy={},QU=!1;function YU(n,t,e,i){n.repoInfo_=new If(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function XU(n,t,e,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||qi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=TA(s,r),a=o.repoInfo,c,d;typeof process<"u"&&process.env&&(d=process.env[KU]),d?(c=!0,s=`http://${d}?ns=${a.namespace}`,o=TA(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let f=r&&c?new Oc(Oc.OWNER):new hy(n.name,n.options,t);DU("Invalid Firebase Database URL",o),pe(o.path)||qi("Database URL must point to the root of a Firebase Database (not including a child path).");let m=JU(a,n,f,new uy(n.name,e));return new Yy(m,n)}function ZU(n,t){let e=Qy[t];(!e||e[n.key]!==n)&&qi(`Database ${t}(${n.repoInfo_}) has already been deleted.`),UU(n),delete e[n.key]}function JU(n,t,e,i){let r=Qy[t.name];r||(r={},Qy[t.name]=r);let s=r[n.toURLString()];return s&&qi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Hy(n,QU,e,i),r[n.toURLString()]=s,s}var Yy=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(FU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ua(this._repo,Ne())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ZU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&qi("Cannot call "+t+" on a deleted database.")}};function MR(n=ar(),t){let e=Gs(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){let i=Ha("database");i&&NR(e,...i)}return e}function NR(n,t,e,i={}){n=bt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&qi("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&qi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Oc(Oc.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Ws(i.mockUserToken,n.app.options.projectId);s=new Oc(o)}YU(r,t,e,s)}function ez(n){V2(Hs),Ri(new mn("database",(t,{instanceIdentifier:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return XU(i,r,s,e)},"PUBLIC").setMultipleInstances(!0)),He(HS,KS,n),He(HS,KS,"esm2017")}eb.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};eb.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};ez();var Gc=class{constructor(t){return t}},OR="database",db=class{constructor(){return os(OR)}};var ub=new V("angularfire2.database-instances");function tz(n,t){let e=xo(OR,n,t);return e&&new Gc(e)}function nz(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Gc(i)}}var iz={provide:db,deps:[[new Ze,ub]]},rz={provide:Gc,useFactory:tz,deps:[[new Ze,ub],Qn]};function FR(n,...t){return He("angularfire",Jt.full,"rtdb"),Qt([rz,iz,{provide:ub,useFactory:nz(n),multi:!0,deps:[z,Se,Pn,Bi,[new Ze,gs],[new Ze,yn],...t]}])}var LR=Er(MR,!0);var VR={providers:[l0({eventCoalescing:!0}),NE(yS),bS(),FR(()=>LR()),O0(F0()),oI(()=>aI({projectId:"taskboard-eb7da",appId:"1:354177238938:web:d0c3f172c0e4083d1edc23",databaseURL:"https://taskboard-eb7da-default-rtdb.firebaseio.com",storageBucket:"taskboard-eb7da.appspot.com",apiKey:"AIzaSyAM82XcacqdPNT5p4AGJ8rm7yQA5wnfIJA",authDomain:"taskboard-eb7da.firebaseapp.com",messagingSenderId:"354177238938",measurementId:"G-SW2E9JZEH1"})),ES(()=>CS()),qS(()=>GS())]};var Bf=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-footer"]],standalone:!0,features:[oe],decls:1,vars:0,consts:[[1,"wrapper"]],template:function(e,i){e&1&&ye(0,"div",0)},styles:[".wrapper[_ngcontent-%COMP%]{width:100%;min-height:10vh;background-color:#3b2559}"]})};var Hc=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},ma=class extends Hc{constructor(t,e,i,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},pa=class extends Hc{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},hb=class extends Hc{constructor(t){super(),this.element=t instanceof ie?t.nativeElement:t}},ga=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof ma)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof pa)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof hb)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Uf=class extends ga{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(t){let i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Se.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var Kc=(()=>{class n extends ga{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new le,this.attachDomPortal=s=>{this._document;let o=s.element;o.parentNode;let a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(s,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static{this.\u0275fac=function(i){return new(i||n)(R(Td),R(nr),R(Q))}}static{this.\u0275dir=Y({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[et]})}}return n})();var zf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({})}}return n})();var jR=Vu(),fb=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ft(-this._previousScrollPosition.left),t.style.top=ft(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),jR&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),jR&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var mb=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Xe(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},$f=class{enable(){}disable(){}attach(){}};function pb(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,s=n.right<e.left,o=n.left>e.right;return i||r||s||o})}function BR(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,s=n.left<e.left,o=n.right>e.right;return i||r||s||o})}var gb=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();pb(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},sz=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new $f,this.close=o=>new mb(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new fb(this._viewportRuler,this._document),this.reposition=o=>new gb(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(i){return new(i||n)(x(wc),x(Ec),x(z),x(Q))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qc=class{constructor(t){if(this.scrollStrategy=new $f,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var _b=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var GR=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(i){return new(i||n)(x(Q))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),oz=(()=>{class n extends GR{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||n)(x(Q),x(z,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),az=(()=>{class n extends GR{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Mt(s)},this._clickListener=s=>{let o=Mt(s),a=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let d=c.length-1;d>-1;d--){let f=c[d];if(f._outsidePointerEvents.observers.length<1||!f.hasAttached())continue;if(UR(f.overlayElement,o)||UR(f.overlayElement,a))break;let m=f._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s)}}}add(e){if(super.add(e),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||n)(x(Q),x(Ae),x(z,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function UR(n,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===n)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var _a=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Nl()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let i=this._document.createElement("div");i.classList.add(e),Nl()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||n)(x(Q),x(Ae))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Gi=class{constructor(t,e,i,r,s,o,a,c,d,f=!1,m){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=d,this._animationsDisabled=f,this._injector=m,this._backdropElement=null,this._backdropClick=new $,this._attachments=new $,this._detachments=new $,this._locationChanges=St.EMPTY,this._backdropClickHandler=g=>this._backdropClick.next(g),this._backdropTransitionendHandler=g=>{this._disposeBackdrop(g.target)},this._keydownEvents=new $,this._outsidePointerEvents=new $,this._renders=new $,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Sn(()=>Sd(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=oi(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=F(F({},this._config),t),this._updateElementSize()}setDirection(t){this._config=we(F({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=ft(this._config.width),t.height=ft(this._config.height),t.minWidth=ft(this._config.minWidth),t.minHeight=ft(this._config.minHeight),t.maxWidth=ft(this._config.maxWidth),t.maxHeight=ft(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){let r=yr(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(ot(ct(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},zR="cdk-overlay-connected-position-bounding-box",lz=/([A-Za-z%]+)$/,vb=class{get positions(){return this._preferredPositions}constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new $,this._resizeSubscription=St.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(zR),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,r,a),d=this._getOverlayPoint(c,e,a),f=this._getOverlayFit(d,e,i,a);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(f,d,i)){s.push({position:a,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:d,originPoint:c,position:a,overlayRect:e})}if(s.length){let a=null,c=-1;for(let d of s){let f=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);f>c&&(c=f,a=d)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ss(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(zR),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=i.originX=="start"?o:a}e.left<0&&(r-=e.left);let s;return i.originY=="center"?s=t.top+t.height/2:s=i.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return i.overlayY=="center"?s=-e.height/2:s=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){let s=WR(e),{x:o,y:a}=t,c=this._getOffset(r,"x"),d=this._getOffset(r,"y");c&&(o+=c),d&&(a+=d);let f=0-o,m=o+s.width-i.width,g=0-a,b=a+s.height-i.height,E=this._subtractOverflows(s.width,f,m),D=this._subtractOverflows(s.height,g,b),M=E*D;return{visibleArea:M,isCompletelyWithinViewport:s.width*s.height===M,fitsInViewportVertically:D===s.height,fitsInViewportHorizontally:E==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,s=i.right-e.x,o=$R(this._overlayRef.getConfig().minHeight),a=$R(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||o!=null&&o<=r,d=t.fitsInViewportHorizontally||a!=null&&a<=s;return c&&d}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=WR(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),c=Math.max(s.top-i.top-t.y,0),d=Math.max(s.left-i.left-t.x,0),f=0,m=0;return r.width<=s.width?f=d||-o:f=t.x<this._viewportMargin?s.left-i.left-t.x:0,r.height<=s.height?m=c||-a:m=t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:f,y:m},{x:t.x+f,y:t.y+m}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!cz(this._lastScrollVisibility,i)){let r=new _b(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(e.overlayY==="top")o=t.y,s=i.height-o+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let b=Math.min(i.bottom-t.y+i.top,t.y),E=this._lastBoundingBoxSize.height;s=b*2,o=t.y-b,s>E&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-E/2)}let c=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,d=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,f,m,g;if(d)g=i.width-t.x+this._viewportMargin*2,f=t.x-this._viewportMargin;else if(c)m=t.x,f=i.right-t.x;else{let b=Math.min(i.right-t.x+i.left,t.x),E=this._lastBoundingBoxSize.width;f=b*2,m=t.x-b,f>E&&!this._isInitialRender&&!this._growAfterOpen&&(m=t.x-E/2)}return{top:o,left:m,bottom:a,right:g,width:f,height:s}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ft(i.height),r.top=ft(i.top),r.bottom=ft(i.bottom),r.width=ft(i.width),r.left=ft(i.left),r.right=ft(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=ft(s)),o&&(r.maxWidth=ft(o))}this._lastBoundingBoxSize=i,Ss(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ss(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ss(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();Ss(i,this._getExactOverlayY(e,t,f)),Ss(i,this._getExactOverlayX(e,t,f))}else i.position="static";let a="",c=this._getOffset(e,"x"),d=this._getOffset(e,"y");c&&(a+=`translateX(${c}px) `),d&&(a+=`translateY(${d}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=ft(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=ft(o.maxWidth):s&&(i.maxWidth="")),Ss(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=ft(s.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=ft(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:BR(t,i),isOriginOutsideView:pb(t,i),isOverlayClipped:BR(e,i),isOverlayOutsideView:pb(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&yr(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof ie)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function Ss(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function $R(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(lz);return!e||e==="px"?parseFloat(t):null}return n||null}function WR(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function cz(n,t){return n===t?!0:n.isOriginClipped===t.isOriginClipped&&n.isOriginOutsideView===t.isOriginOutsideView&&n.isOverlayClipped===t.isOverlayClipped&&n.isOverlayOutsideView===t.isOverlayOutsideView}var qR="cdk-global-overlay-wrapper",yb=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(qR),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),f=this._xPosition,m=this._xOffset,g=this._overlayRef.getConfig().direction==="rtl",b="",E="",D="";c?D="flex-start":f==="center"?(D="center",g?E=m:b=m):g?f==="left"||f==="end"?(D="flex-end",b=m):(f==="right"||f==="start")&&(D="flex-start",E=m):f==="left"||f==="start"?(D="flex-start",b=m):(f==="right"||f==="end")&&(D="flex-end",E=m),t.position=this._cssPosition,t.marginLeft=c?"0":b,t.marginTop=d?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":E,e.justifyContent=D,e.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(qR),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},dz=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new yb}flexibleConnectedTo(e){return new vb(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||n)(x(Ec),x(Q),x(Ae),x(_a))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uz=0,dn=(()=>{class n{constructor(e,i,r,s,o,a,c,d,f,m,g,b){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=d,this._directionality=f,this._location=m,this._outsideClickDispatcher=g,this._animationsModuleType=b}create(e){let i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new Qc(e);return o.direction=o.direction||this._directionality.value,new Gi(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Un))}position(){return this._positionBuilder}_createPaneElement(e){let i=this._document.createElement("div");return i.id=`cdk-overlay-${uz++}`,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(rr)),new Uf(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||n)(x(sz),x(_a),x(Td),x(dz),x(oz),x(Se),x(z),x(Q),x(Dn),x(Ai),x(az),x(Yt,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var hz=new V("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=P(dn);return()=>n.scrollStrategies.reposition()}});function fz(n){return()=>n.scrollStrategies.reposition()}var mz={provide:hz,deps:[dn],useFactory:fz},Wf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({providers:[dn,mz],imports:[vr,zf,wv,wv]})}}return n})();var pz=new V("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=P(dn);return()=>n.scrollStrategies.reposition()}});function gz(n){return()=>n.scrollStrategies.reposition()}var _z={provide:pz,deps:[dn],useFactory:gz};var KR=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=J({type:n})}static{this.\u0275inj=Z({providers:[_z],imports:[vt,Wf,lg,wt,Go,Gn,lg,wt]})}}return n})();function vz(n,t){}var As=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var Eb=(()=>{class n extends ga{constructor(e,i,r,s,o,a,c,d){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=d,this._platform=P(Ae),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=P(Xt),this._injector=P(Se),this._isDestroyed=!1,this.attachDomPortal=f=>{this._portalOutlet.hasAttached();let m=this._portalOutlet.attachDomPortal(f);return this._contentAttached(),m},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){this._isDestroyed||oi(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=Ml(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,i=Ml();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ml()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(zu),R(Q,8),R(As),R(Ol),R(z),R(Gi),R(_o))}}static{this.\u0275cmp=se({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&ut(Kc,7),i&2){let s;Fe(s=Le())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&Pe("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[et,oe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&ce(0,vz,0,0,"ng-template",0)},dependencies:[Kc],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return n})(),Yc=class{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new $,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!ju(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},yz=new V("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=P(dn);return()=>n.scrollStrategies.block()}}),bz=new V("DialogData"),wz=new V("DefaultDialogConfig");var Ez=0,QR=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,i,r,s,o,a){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new $,this._afterOpenedAtThisLevel=new $,this._ariaHiddenElements=new Map,this.afterAllClosed=zr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Tn(void 0))),this._scrollStrategy=a}open(e,i){let r=this._defaultOptions||new As;i=F(F({},r),i),i.id=i.id||`cdk-dialog-${Ez++}`,i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new Yc(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(e,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){bb(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){bb(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),bb(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new Qc({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){let s=r.injector||r.viewContainerRef?.injector,o=[{provide:As,useValue:r},{provide:Yc,useValue:i},{provide:Gi,useValue:e}],a;r.container?typeof r.container=="function"?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=Eb;let c=new ma(a,r.viewContainerRef,Se.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return e.attach(c).instance}_attachDialogContent(e,i,r,s){if(e instanceof Vs){let o=this._createInjector(s,i,r,void 0),a={$implicit:s.data,dialogRef:i};s.templateContext&&(a=F(F({},a),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),r.attachTemplatePortal(new pa(e,null,a,o))}else{let o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new ma(e,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,r,s){let o=e.injector||e.viewContainerRef?.injector,a=[{provide:bz,useValue:e.data},{provide:Yc,useValue:i}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(i,e,r)):a.push(...e.providers)),e.direction&&(!o||!o.get(Dn,null,{optional:!0}))&&a.push({provide:Dn,useValue:{value:e.direction,change:W()}}),Se.create({parent:o||s,providers:a})}_removeOpenDialog(e,i){let r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==e&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(i){return new(i||n)(x(dn),x(Se),x(wz,8),x(n,12),x(_a),x(yz))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bb(n,t){let e=n.length;for(;e--;)t(n[e])}function Cz(n,t){}var Xc=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},Cb="mdc-dialog--open",YR="mdc-dialog--opening",XR="mdc-dialog--closing",Iz=150,Tz=75,xz=(()=>{class n extends Eb{constructor(e,i,r,s,o,a,c,d,f){super(e,i,r,s,o,a,c,f),this._animationMode=d,this._animationStateChanged=new le,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?JR(this._config.enterAnimationDuration)??Iz:0,this._exitAnimationDuration=this._animationsEnabled?JR(this._config.exitAnimationDuration)??Tz:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(ZR,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(YR,Cb)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Cb),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(Cb),this._animationsEnabled?(this._hostElement.style.setProperty(ZR,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(XR)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(YR,XR)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static{this.\u0275fac=function(i){return new(i||n)(R(ie),R(zu),R(Q,8),R(Xc),R(Ol),R(z),R(Gi),R(Yt,8),R(_o))}}static{this.\u0275cmp=se({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(Si("id",r._config.id),Pe("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Me("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[et,oe],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(N(0,"div",0)(1,"div",1),ce(2,Cz,0,0,"ng-template",2),O()())},dependencies:[Kc],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}}return n})(),ZR="--mat-dialog-transition-duration";function JR(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?Li(n.substring(0,n.length-2)):n.endsWith("s")?Li(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var qf=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(qf||{}),Zc=class{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new $,this._beforeClosed=new $,this._state=qf.OPEN,this.disableClose=e.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Xe(r=>r.state==="opened"),At(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Xe(r=>r.state==="closed"),At(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),ct(this.backdropClick(),this.keydownEvents().pipe(Xe(r=>r.keyCode===27&&!this.disableClose&&!ju(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),eD(this,r.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Xe(e=>e.state==="closing"),At(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=qf.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=qf.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function eD(n,t,e){return n._closeInteractionType=t,n.close(e)}var Sz=new V("MatMdcDialogData"),Az=new V("mat-mdc-dialog-default-options"),Rz=new V("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=P(dn);return()=>n.scrollStrategies.block()}});var Dz=0,Gf=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,i,r,s,o,a,c,d){this._overlay=e,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new $,this._afterOpenedAtThisLevel=new $,this.dialogConfigClass=Xc,this.afterAllClosed=zr(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Tn(void 0))),this._dialog=i.get(QR),this._dialogRefConstructor=Zc,this._dialogContainerType=xz,this._dialogDataToken=Sz}open(e,i){let r;i=F(F({},this._defaultOptions||new Xc),i),i.id=i.id||`mat-mdc-dialog-${Dz++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(e,we(F({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:As,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static{this.\u0275fac=function(i){return new(i||n)(x(dn),x(Se),x(Ai,8),x(Az,8),x(Rz),x(n,12),x(_a),x(Yt,8))}}static{this.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kz=0,tD=(()=>{class n{constructor(e,i,r){this.dialogRef=e,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=oD(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){let i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){eD(this.dialogRef,e.screenX===0&&e.screenY===0?"keyboard":"mouse",this.dialogResult)}static{this.\u0275fac=function(i){return new(i||n)(R(Zc,8),R(ie),R(Gf))}}static{this.\u0275dir=Y({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,r){i&1&&K("click",function(o){return r._onButtonClick(o)}),i&2&&Pe("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],standalone:!0,features:[_t]})}}return n})(),nD=(()=>{class n{constructor(e,i,r){this._dialogRef=e,this._elementRef=i,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=oD(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static{this.\u0275fac=function(i){return new(i||n)(R(Zc,8),R(ie),R(Gf))}}static{this.\u0275dir=Y({type:n,standalone:!0})}}return n})(),iD=(()=>{class n extends nD{constructor(){super(...arguments),this.id=`mat-mdc-dialog-title-${kz++}`}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=si(n)))(r||n)}})()}static{this.\u0275dir=Y({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){i&2&&Si("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[et]})}}return n})(),rD=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Y({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[Qw([Wx])]})}}return n})(),sD=(()=>{class n extends nD{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=si(n)))(r||n)}})()}static{this.\u0275dir=Y({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,r){i&2&&Me("mat-mdc-dialog-actions-align-start",r.align==="start")("mat-mdc-dialog-actions-align-center",r.align==="center")("mat-mdc-dialog-actions-align-end",r.align==="end")},inputs:{align:"align"},standalone:!0,features:[et]})}}return n})();function oD(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}var Hf=class n{message="";title="";answer=new le;emitAnswer(t){this.answer.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-dialog"]],inputs:{message:"message",title:"title"},outputs:{answer:"answer"},standalone:!0,features:[oe],decls:10,vars:2,consts:[["classs","wrapper"],["mat-dialog-title",""],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","mat-dialog-close","","cdkFocusInitial","",3,"click"]],template:function(e,i){e&1&&(N(0,"div",0)(1,"h2",1),G(2),O(),N(3,"mat-dialog-content"),G(4),O(),N(5,"mat-dialog-actions")(6,"button",2),K("click",function(){return i.emitAnswer(!1)}),G(7,"No"),O(),N(8,"button",3),K("click",function(){return i.emitAnswer(!0)}),G(9,"Ok"),O()()()),e&2&&(B(2),tt(i.title),B(2),Wa(" ",i.message," "))},dependencies:[Eo,tI,sD,tD,iD,rD],styles:[".wrapper[_ngcontent-%COMP%]{z-index:4}"]})};function Pz(n,t){n&1&&(N(0,"div",8),ye(1,"app-loader"),O())}function Mz(n,t){if(n&1&&(N(0,"mat-error"),G(1),O()),n&2){let e=H(3);B(),tt(e.errorNameMessage())}}function Nz(n,t){if(n&1&&(N(0,"mat-error"),G(1),O()),n&2){let e=H(3);B(),tt(e.errorDescriptionMessage())}}function Oz(n,t){if(n&1&&(N(0,"div"),G(1),O()),n&2){let e=t.$implicit;B(),tt(e)}}function Fz(n,t){n&1&&(N(0,"div",19),G(1,"No additional members"),O())}function Lz(n,t){if(n&1){let e=kt();N(0,"form",9),K("ngSubmit",function(){Te(e);let r=H(2);return xe(r.submitTeam())}),N(1,"mat-form-field")(2,"mat-label"),G(3,"Team name"),O(),N(4,"input",10),K("blur",function(){Te(e);let r=H(2);return xe(r.updateNameErrorMessage())}),O(),ce(5,Mz,2,1,"mat-error"),O(),N(6,"mat-form-field")(7,"mat-label"),G(8,"Project description"),O(),N(9,"textarea",11),K("blur",function(){Te(e);let r=H(2);return xe(r.updateDescriptionErrorMessage())}),O(),ce(10,Nz,2,1,"mat-error"),O(),N(11,"div",12)(12,"mat-form-field")(13,"mat-label"),G(14,"New member"),O(),ye(15,"input",13),O(),N(16,"button",14),K("click",function(){Te(e);let r=H(2);return xe(r.addMember())}),G(17,"+"),O(),N(18,"div",15),ce(19,Oz,2,1,"div",16)(20,Fz,2,0,"div",17),O()(),N(21,"button",18),G(22,"Create"),O()()}if(n&2){let e=H(2);ee("formGroup",e.form),B(5),Be(e.form.controls.name.invalid?5:-1),B(5),Be(e.form.controls.description.invalid?10:-1),B(5),ee("formControl",e.member),B(4),ee("ngForOf",e.memberEmails),B(),ee("ngIf",e.memberEmails.length===0)}}function Vz(n,t){if(n&1){let e=kt();N(0,"div",1),ye(1,"app-notification"),N(2,"div",2)(3,"div",3)(4,"div"),G(5," Create a new Team"),O(),N(6,"div",4),K("click",function(){Te(e);let r=H();return xe(r.closeWindow())}),G(7,"X"),O()(),ce(8,Pz,2,0,"div",5)(9,Lz,23,6,"form",6),O(),N(10,"div",7),K("click",function(){Te(e);let r=H();return xe(r.closeWindow())}),O()()}if(n&2){let e=H();B(8),ee("ngIf",e.isLoading),B(),ee("ngIf",!e.isLoading)}}var Kf=class n{visible=!1;visibility=new le;notification;isLoading=!1;notificationMessage="";authService=P(an);closeWindow(){this.visibility.emit(!1),this.resetAllForms()}dialogMessage="Are you sure you don't want to add any members tot he team?";dialogTitle="Team members";teamService=P(Qo);memberEmails=[];form=new mi({name:new _n("",[nt.required,nt.minLength(3)]),description:new _n("",[nt.required,nt.minLength(10)])});member=new _n("",[nt.required,nt.email]);resetAllForms(){this.form.reset(),this.member.reset(),this.form.controls.name.setErrors(null),this.form.controls.description.setErrors(null),this.member.setErrors(null),this.memberEmails=[]}addTeam(){}submitTeam(){this.form.valid?this.memberEmails.length===0?this.openDialog("500ms","500ms"):this.addTeam():(this.updateDescriptionErrorMessage(),this.updateNameErrorMessage())}addMember(){this.member.errors===null&&this.member.value!==null?(this.memberEmails.push(this.member.value),console.log(this.memberEmails),this.member.reset(),this.member.setErrors(null)):console.log(this.member)}errorNameMessage=Je("");updateNameErrorMessage(){this.form.controls.name.hasError("required")?this.errorNameMessage.set("You must enter a value"):this.form.controls.name.hasError("minlength")?this.errorNameMessage.set("Name should be at least 3 characters long"):this.errorNameMessage.set("")}errorDescriptionMessage=Je("");updateDescriptionErrorMessage(){this.form.controls.description.hasError("required")?this.errorDescriptionMessage.set("You must enter a value"):this.form.controls.description.hasError("minlength")?this.errorDescriptionMessage.set("Description should be at least 10 characters long"):this.errorDescriptionMessage.set("")}dialog=P(Gf);openDialog(t,e){let i=this.dialog.open(Hf,{width:"250px",enterAnimationDuration:t,exitAnimationDuration:e});i.componentInstance.message=this.dialogMessage,i.componentInstance.title=this.dialogTitle,i.componentInstance.answer.subscribe(r=>{r?this.addTeam():(this.updateDescriptionErrorMessage(),this.updateNameErrorMessage())})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-create-team"]],viewQuery:function(e,i){if(e&1&&ut(Hn,5),e&2){let r;Fe(r=Le())&&(i.notification=r.first)}},inputs:{visible:"visible"},outputs:{visibility:"visibility"},standalone:!0,features:[oe],decls:1,vars:1,consts:[["class","wrapper",4,"ngIf"],[1,"wrapper"],[1,"window"],[1,"title"],[1,"cross",3,"click"],["class","loader-container",4,"ngIf"],["class","forms",3,"formGroup","ngSubmit",4,"ngIf"],[1,"background",3,"click"],[1,"loader-container"],[1,"forms",3,"ngSubmit","formGroup"],["matInput","","formControlName","name",3,"blur"],["matInput","","formControlName","description",3,"blur"],[1,"add-m"],["matInput","","placeholder","pat@example.com","required","",3,"formControl"],["type","button",1,"sbt-btn","active","add",3,"click"],[1,"email-list"],[4,"ngFor","ngForOf"],["class","note",4,"ngIf"],["type","submit",1,"sbt-btn","active","submit"],[1,"note"]],template:function(e,i){e&1&&ce(0,Vz,11,2,"div",0),e&2&&ee("ngIf",i.visible)},dependencies:[Gn,yo,br,vo,wo,bo,KR,_r,uo,pi,gr,lo,es,ho,Kp,Fi,Jr,vt,Ld,li,wr,Hn],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.background[_ngcontent-%COMP%]{background-color:#000;opacity:.4;position:fixed;top:0;left:0;width:100%;height:100vh;z-index:2}.window[_ngcontent-%COMP%]{width:500px;min-height:200px;background-color:#fff;opacity:1;position:fixed;z-index:3;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:10px;overflow:hidden}.title[_ngcontent-%COMP%]{background-color:#6b4a8c;color:#fff;font-size:1.2em;text-align:center;padding:10px;position:relative}.forms[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.add[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50px;margin:5px 0 0}.submit[_ngcontent-%COMP%]{width:100px}.add-m[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px;flex-wrap:wrap}.email-list[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.note[_ngcontent-%COMP%]{color:gray;font-style:italic}app-dialog[_ngcontent-%COMP%]{z-index:4}.cross[_ngcontent-%COMP%]{position:absolute;right:10px;top:5px;padding:5px;transition:all .5s ease-in-out}.cross[_ngcontent-%COMP%]:hover{background-color:#bf5ea5;border-radius:5px;cursor:pointer}.loader-container[_ngcontent-%COMP%]{padding:20px;display:flex;justify-content:center;align-items:center}@media (width <= 530px){.window[_ngcontent-%COMP%]{width:400px}}@media (width <= 420px){.window[_ngcontent-%COMP%]{width:300px}.add-m[_ngcontent-%COMP%]{gap:5px}.add-m[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:auto auto 20px}}@media (width <= 320px){.window[_ngcontent-%COMP%]{width:250px}}"]})};var Qf=class n{createTeamVisible=!1;authService=P(an);changeVisibility(t){this.createTeamVisible=t}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-header"]],standalone:!0,features:[oe],decls:6,vars:1,consts:[[1,"wrapper"],[1,"sbt-btn","active",3,"click"],[3,"visibility","visible"]],template:function(e,i){e&1&&(N(0,"div",0)(1,"button",1),K("click",function(){return i.changeVisibility(!0)}),G(2,"+ New Team"),O(),N(3,"button",1),K("click",function(){return i.logout()}),G(4,"Logout"),O()(),N(5,"app-create-team",2),K("visibility",function(s){return i.changeVisibility(s)}),O()),e&2&&(B(5),ee("visible",i.createTeamVisible))},dependencies:[Kf],styles:[".wrapper[_ngcontent-%COMP%]{width:100%;min-height:10vh;background-color:#3b2559;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:100px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.sbt-btn.disabled[_ngcontent-%COMP%]{opacity:.6}"]})};var Yf=class n{title="taskBoard";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=se({type:n,selectors:[["app-root"]],standalone:!0,features:[We([{provide:qr,useClass:Od}]),oe],decls:3,vars:0,template:function(e,i){e&1&&ye(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[kp,Qf,Bf],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}app-header[_ngcontent-%COMP%], app-footer[_ngcontent-%COMP%]{background-color:#3b2559}"]})};$0(Yf,VR).catch(n=>console.error(n));

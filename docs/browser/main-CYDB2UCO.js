import{A as Ct,B as Jm,C as iu,D as _i,E as It,F as In,G as il,H as ru,I as yr,J as vi,K as ji,L as lo,M as co,N as P0,O as br,P as su,Q as Ze,R as gn,S as ep,a as S,b as Vn,c as so,d as Yd,e as Xd,f as nl,g as gt,h as oo,i as ao,j as Zd,k as bt,l as Zm,m as D0,n as k0,o as vr,p as _e,q as Jd,r as eu,s as ht,t as on,u as ds,v as gi,w as tu,x as nu,y as ie,z as Ht}from"./chunk-WS25ZRHA.js";import{$ as ur,$a as Nd,$b as no,A as jw,Aa as re,Ab as to,Ac as Gd,B as mt,Ba as G,Bb as ge,Bc as Ft,C as it,Ca as ss,Cb as Li,Cc as _r,D as Um,Da as de,Db as H,Dc as ut,E as lr,Ea as Kw,Eb as B,Ec as T0,F as cr,Fa as Od,Fb as Jn,Fc as Hd,G as zm,Ga as Qw,Gb as pt,Gc as Ne,H as $m,Ha as Mt,Hb as fr,Hc as x0,I as Pt,Ia as sn,Ib as Ke,Ic as S0,J as Bw,Ja as Ya,Jb as Re,Jc as ro,K as Ha,Ka as Ys,Kb as De,Kc as A0,L as dr,La as Xs,Lb as u0,Lc as Kd,M as hi,Ma as Yw,Mb as h0,N as Wm,Na as Xw,Nb as Vd,O as Uw,Oa as Zw,Ob as $,Oc as Qd,P as Ka,Pa as Jw,Pb as Ve,Pc as el,Q as kd,Qa as e0,Qb as Cn,R as Qs,Ra as t0,Rb as f0,Rc as cs,S as Pd,Sa as n0,Sb as m0,Sc as R0,T as zw,Ta as En,Tb as p0,Tc as tl,U as Nn,Ua as i0,Ub as Qe,V as He,Va as Xa,Vb as ne,W as qm,Wa as F,Wb as mr,X as dt,Xa as k,Xb as pr,Y as Fe,Ya as Zs,Yb as os,Z as $w,Za as Js,Zb as as,_ as Pe,_a as r0,_b as g0,a as kt,aa as V,ab as Fd,ac as jd,b as Fw,ba as se,bb as Za,bc as Bd,c as nt,ca as Ww,cb as hr,cc as Ud,d as Lm,da as j,db as Km,dc as Ym,e as Vm,ea as Gm,eb as st,ec as zd,f as W,fa as x,fb as s0,fc as gr,g as vt,ga as A,gb as ot,gc as $d,h as xd,ha as rt,hb as o0,hc as _0,i as Lw,ia as Hm,ib as Ot,ic as Xm,j as jm,ja as Qa,jb as a0,jc as Nt,k as ui,ka as ee,kb as Qm,kc as v0,l as ar,la as oe,lb as Q,lc as Xe,m as ts,ma as te,mb as Ld,mc as Wd,n as yt,na as rn,nb as mi,nc as pi,o as K,oa as qw,ob as Oe,oc as Ln,p as ns,pa as Zn,pb as U,pc as y0,q as Sd,qa as Fn,qb as Le,qc as b0,r as Vw,ra as Gw,rb as Ja,rc as io,s as Y,sa as Et,sb as $e,sc as w0,t as Ks,ta as X,tb as l0,tc as E0,u as wn,ua as Z,ub as c0,uc as J,v as Bm,va as fi,vb as d0,vc as C0,w as Ad,wa as rs,wb as P,wc as ls,x as is,xa as Ae,xb as D,xc as I0,y as Rd,ya as Hw,yb as he,yc as qd,z as Dd,za as Md,zb as eo,zc as Vi}from"./chunk-AKSPAWY5.js";import{a as L,b as Ie,f as ft}from"./chunk-QNRXXQ26.js";var sl=class{},ol=class{},Bi=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var np=class{encodeKey(t){return M0(t)}encodeValue(t){return M0(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function YD(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],c=e.get(o)||[];c.push(a),e.set(o,c)}),e}var XD=/%(\d[a-f0-9])/gi,ZD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function M0(n){return encodeURIComponent(n).replace(XD,(t,e)=>ZD[e]??t)}function ou(n){return`${n}`}var Er=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new np,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=YD(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(ou):[ou(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(ou(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(ou(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var ip=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function JD(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function O0(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function N0(n){return typeof Blob<"u"&&n instanceof Blob}function F0(n){return typeof FormData<"u"&&n instanceof FormData}function ek(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var rl=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(JD(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Bi,this.context??=new ip,!this.params)this.params=new Er,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||O0(this.body)||N0(this.body)||F0(this.body)||ek(this.body)?this.body:this.body instanceof Er?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||F0(this.body)?null:N0(this.body)?this.body.type||null:O0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Er?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,d=t.headers||this.headers,f=t.params||this.params,m=t.context??this.context;return t.setHeaders!==void 0&&(d=Object.keys(t.setHeaders).reduce((g,b)=>g.set(b,t.setHeaders[b]),d)),t.setParams&&(f=Object.keys(t.setParams).reduce((g,b)=>g.set(b,t.setParams[b]),f)),new n(e,i,o,{params:f,headers:d,context:m,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}},Cr=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Cr||{}),al=class{constructor(t,e=200,i="OK"){this.headers=t.headers||new Bi,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},au=class n extends al{constructor(t={}){super(t),this.type=Cr.ResponseHeader}clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ll=class n extends al{constructor(t={}){super(t),this.type=Cr.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},wr=class extends al{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},B0=200,tk=204;function tp(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Ui=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof rl)s=e;else{let c;r.headers instanceof Bi?c=r.headers:c=new Bi(r.headers);let d;r.params&&(r.params instanceof Er?d=r.params:d=new Er({fromObject:r.params})),s=new rl(e,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=K(s).pipe(cr(c=>this.handler.handle(c)));if(e instanceof rl||r.observe==="events")return o;let a=o.pipe(it(c=>c instanceof ll));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Y(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Y(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Y(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(Y(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new Er().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,tp(r,i))}post(e,i,r={}){return this.request("POST",e,tp(r,i))}put(e,i,r={}){return this.request("PUT",e,tp(r,i))}static{this.\u0275fac=function(i){return new(i||n)(x(sl))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),nk=/^\)\]\}',?\n/,ik="X-Request-URL";function L0(n){if(n.url)return n.url;let t=ik.toLocaleLowerCase();return n.headers.get(t)}var rp=(()=>{class n{constructor(){this.fetchImpl=A(sp,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=A(G)}handle(e){return new nt(i=>{let r=new AbortController;return this.doRequest(e,r.signal,i).then(op,s=>i.error(new wr({error:s}))),()=>r.abort()})}doRequest(e,i,r){return ft(this,null,function*(){let s=this.createRequestInit(e),o;try{let b=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,L({signal:i},s)));rk(b),r.next({type:Cr.Sent}),o=yield b}catch(b){r.error(new wr({error:b,status:b.status??0,statusText:b.statusText,url:e.urlWithParams,headers:b.headers}));return}let a=new Bi(o.headers),c=o.statusText,d=L0(o)??e.urlWithParams,f=o.status,m=null;if(e.reportProgress&&r.next(new au({headers:a,status:f,statusText:c,url:d})),o.body){let b=o.headers.get("content-length"),E=[],M=o.body.getReader(),N=0,ce,le,q=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>ft(this,null,function*(){for(;;){let{done:tt,value:zt}=yield M.read();if(tt)break;if(E.push(zt),N+=zt.length,e.reportProgress){le=e.responseType==="text"?(le??"")+(ce??=new TextDecoder).decode(zt,{stream:!0}):void 0;let T=()=>r.next({type:Cr.DownloadProgress,total:b?+b:void 0,loaded:N,partialText:le});q?q.run(T):T()}}}));let Se=this.concatChunks(E,N);try{let tt=o.headers.get("Content-Type")??"";m=this.parseBody(e,Se,tt)}catch(tt){r.error(new wr({error:tt,headers:new Bi(o.headers),status:o.status,statusText:o.statusText,url:L0(o)??e.urlWithParams}));return}}f===0&&(f=m?B0:0),f>=200&&f<300?(r.next(new ll({body:m,headers:a,status:f,statusText:c,url:d})),r.complete()):r.error(new wr({error:m,headers:a,status:f,statusText:c,url:d}))})}parseBody(e,i,r){switch(e.responseType){case"json":let s=new TextDecoder().decode(i).replace(nk,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(e){let i={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((s,o)=>i[s]=o.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let s=e.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:r}}concatChunks(e,i){let r=new Uint8Array(i),s=0;for(let o of e)r.set(o,s),s+=o.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),sp=class{};function op(){}function rk(n){n.then(op,op)}function sk(n,t){return t(n)}function ok(n,t,e){return(i,r)=>Fn(e,()=>t(i,s=>n(s,r)))}var U0=new j(""),ak=new j(""),lk=new j("",{providedIn:"root",factory:()=>!0});var V0=(()=>{class n extends sl{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=A(Md),this.contributeToStability=A(lk)}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(U0),...this.injector.get(ak,[])]));this.chain=i.reduceRight((r,s)=>ok(r,s,this.injector),sk)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(dr(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(x(ol),x(Zn))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();var ck=/^\)\]\}',?\n/;function dk(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var j0=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Pe(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?yt(i.\u0275loadImpl()):K(null)).pipe(He(()=>new nt(s=>{let o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((M,N)=>o.setRequestHeader(M,N.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let M=e.detectContentTypeHeader();M!==null&&o.setRequestHeader("Content-Type",M)}if(e.responseType){let M=e.responseType.toLowerCase();o.responseType=M!=="json"?M:"text"}let a=e.serializeBody(),c=null,d=()=>{if(c!==null)return c;let M=o.statusText||"OK",N=new Bi(o.getAllResponseHeaders()),ce=dk(o)||e.url;return c=new au({headers:N,status:o.status,statusText:M,url:ce}),c},f=()=>{let{headers:M,status:N,statusText:ce,url:le}=d(),q=null;N!==tk&&(q=typeof o.response>"u"?o.responseText:o.response),N===0&&(N=q?B0:0);let Se=N>=200&&N<300;if(e.responseType==="json"&&typeof q=="string"){let tt=q;q=q.replace(ck,"");try{q=q!==""?JSON.parse(q):null}catch(zt){q=tt,Se&&(Se=!1,q={error:zt,text:q})}}Se?(s.next(new ll({body:q,headers:M,status:N,statusText:ce,url:le||void 0})),s.complete()):s.error(new wr({error:q,headers:M,status:N,statusText:ce,url:le||void 0}))},m=M=>{let{url:N}=d(),ce=new wr({error:M,status:o.status||0,statusText:o.statusText||"Unknown Error",url:N||void 0});s.error(ce)},g=!1,b=M=>{g||(s.next(d()),g=!0);let N={type:Cr.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(N.total=M.total),e.responseType==="text"&&o.responseText&&(N.partialText=o.responseText),s.next(N)},E=M=>{let N={type:Cr.UploadProgress,loaded:M.loaded};M.lengthComputable&&(N.total=M.total),s.next(N)};return o.addEventListener("load",f),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),e.reportProgress&&(o.addEventListener("progress",b),a!==null&&o.upload&&o.upload.addEventListener("progress",E)),o.send(a),s.next({type:Cr.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",f),o.removeEventListener("timeout",m),e.reportProgress&&(o.removeEventListener("progress",b),a!==null&&o.upload&&o.upload.removeEventListener("progress",E)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(x(Kd))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),z0=new j(""),uk="XSRF-TOKEN",hk=new j("",{providedIn:"root",factory:()=>uk}),fk="X-XSRF-TOKEN",mk=new j("",{providedIn:"root",factory:()=>fk}),lu=class{},pk=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gd(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(x(J),x(Mt),x(hk))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();function gk(n,t){let e=n.url.toLowerCase();if(!A(z0)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let i=A(lu).getToken(),r=A(mk);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),t(n)}var $0=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}($0||{});function _k(n,t){return{\u0275kind:n,\u0275providers:t}}function W0(...n){let t=[Ui,j0,V0,{provide:sl,useExisting:V0},{provide:ol,useFactory:()=>A(rp,{optional:!0})??A(j0)},{provide:U0,useValue:gk,multi:!0},{provide:z0,useValue:!0},{provide:lu,useClass:pk}];for(let e of n)t.push(...e.\u0275providers);return rn(t)}function q0(){return _k($0.Fetch,[rp,{provide:ol,useExisting:rp}])}var cp=class extends E0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},dp=class n extends cp{static makeCurrent(){w0(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=bk();return e==null?null:wk(e)}resetBaseElement(){cl=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Gd(document.cookie,t)}},cl=null;function bk(){return cl=cl||document.querySelector("base"),cl?cl.getAttribute("href"):null}function wk(n){return new URL(n,document.baseURI).pathname}var Ek=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),up=new j(""),K0=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new Pe(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||n)(x(up),x(G))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),cu=class{constructor(t){this._doc=t}},ap="ng-app-id",Q0=(()=>{class n{constructor(e,i,r,s={}){this.doc=e,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ro(s),this.resetHostNodes()}addStyles(e){for(let i of e)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(e){for(let i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){let i=this.styleRef;i.get(e)?.elements?.forEach(r=>r.remove()),i.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${ap}="${this.appId}"]`);if(e?.length){let i=new Map;return e.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(e,i){let r=this.styleRef;if(r.has(e)){let s=r.get(e);return s.usage+=i,s.usage}return r.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){let r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===e)return r.delete(i),s.removeAttribute(ap),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(ap,this.appId),e.appendChild(o),o}}addStyleToHost(e,i){let r=this.getStyleElement(e,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(x(J),x(Od),x(Ya,8),x(Mt))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),lp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fp=/%COMP%/g,Y0="%COMP%",Ck=`_nghost-${Y0}`,Ik=`_ngcontent-${Y0}`,Tk=!0,xk=new j("",{providedIn:"root",factory:()=>Tk});function Sk(n){return Ik.replace(fp,n)}function Ak(n){return Ck.replace(fp,n)}function X0(n,t){return t.map(e=>e.replace(fp,n))}var du=(()=>{class n{constructor(e,i,r,s,o,a,c,d=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=ro(a),this.defaultRenderer=new dl(e,o,c,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Qa.ShadowDom&&(i=Ie(L({},i),{encapsulation:Qa.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof uu?r.applyToHost(e):r instanceof ul&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Qa.Emulated:s=new uu(c,d,i,this.appId,f,o,a,m);break;case Qa.ShadowDom:return new hp(c,d,e,i,o,a,this.nonce,m);default:s=new ul(c,d,i,f,o,a,m);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(x(K0),x(Q0),x(Od),x(xk),x(J),x(Mt),x(G),x(Ya))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),dl=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(lp[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(G0(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(G0(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Pe(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=lp[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=lp[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Xa.DashCase|Xa.Important)?t.style.setProperty(e,i,r&Xa.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Xa.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=io().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function G0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hp=class extends dl{constructor(t,e,i,r,s,o,a,c){super(t,s,o,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=X0(r.id,r.styles);for(let f of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ul=class extends dl{constructor(t,e,i,r,s,o,a,c){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?X0(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},uu=class extends ul{constructor(t,e,i,r,s,o,a,c){let d=r+"-"+i.id;super(t,e,i,s,o,a,c,d),this.contentAttr=Sk(d),this.hostAttr=Ak(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},Rk=(()=>{class n extends cu{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(x(J))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),H0=["alt","control","meta","shift"],Dk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Pk=(()=>{class n extends cu{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,i,r){let s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>io().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),H0.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),o+=d+".")}),o+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(e,i){let r=Dk[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),H0.forEach(o=>{if(o!==r){let a=kk[o];a(e)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(e,i,r){return s=>{n.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(i){return new(i||n)(x(J))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();function Z0(n,t){return v0(L({rootComponent:n},Mk(t)))}function Mk(n){return{appProviders:[...Vk,...n?.providers??[]],platformProviders:Lk}}function Ok(){dp.makeCurrent()}function Nk(){return new ss}function Fk(){return Kw(document),document}var Lk=[{provide:Mt,useValue:x0},{provide:Qw,useValue:Ok,multi:!0},{provide:J,useFactory:Fk,deps:[]}];var Vk=[{provide:qw,useValue:"root"},{provide:ss,useFactory:Nk,deps:[]},{provide:up,useClass:Rk,multi:!0,deps:[J,G,Mt]},{provide:up,useClass:Pk,multi:!0,deps:[J]},du,Q0,K0,{provide:Fd,useExisting:du},{provide:Kd,useClass:Ek,deps:[]},[]];var J0=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||n)(x(J))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mp=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=x(jk),r},providedIn:"root"})}}return n})(),jk=(()=>{class n extends mp{constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case En.NONE:return i;case En.HTML:return Xs(i,"HTML")?Ys(i):n0(this._doc,String(i)).toString();case En.STYLE:return Xs(i,"Style")?Ys(i):i;case En.SCRIPT:if(Xs(i,"Script"))return Ys(i);throw new Pe(5200,!1);case En.URL:return Xs(i,"URL")?Ys(i):t0(String(i));case En.RESOURCE_URL:if(Xs(i,"ResourceURL"))return Ys(i);throw new Pe(5201,!1);default:throw new Pe(5202,!1)}}bypassSecurityTrustHtml(e){return Yw(e)}bypassSecurityTrustStyle(e){return Xw(e)}bypassSecurityTrustScript(e){return Zw(e)}bypassSecurityTrustUrl(e){return Jw(e)}bypassSecurityTrustResourceUrl(e){return e0(e)}static{this.\u0275fac=function(i){return new(i||n)(x(J))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fe="primary",xl=Symbol("RouteTitle"),yp=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function go(n){return new yp(n)}function Bk(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Uk(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!yi(n[e],t[e]))return!1;return!0}function yi(n,t){let e=n?bp(n):void 0,i=t?bp(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!uE(n[r],t[r]))return!1;return!0}function bp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function uE(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function hE(n){return n.length>0?n[n.length-1]:null}function xr(n){return Sd(n)?n:Ud(n)?yt(Promise.resolve(n)):K(n)}var zk={exact:mE,subset:pE},fE={exact:$k,subset:Wk,ignored:()=>!0};function tE(n,t,e){return zk[e.paths](n.root,t.root,e.matrixParams)&&fE[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function $k(n,t){return yi(n,t)}function mE(n,t,e){if(!hs(n.segments,t.segments)||!mu(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!mE(n.children[i],t.children[i],e))return!1;return!0}function Wk(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>uE(n[e],t[e]))}function pE(n,t,e){return gE(n,t,t.segments,e)}function gE(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!hs(r,e)||t.hasChildren()||!mu(r,e,i))}else if(n.segments.length===e.length){if(!hs(n.segments,e)||!mu(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!pE(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!hs(n.segments,r)||!mu(n.segments,r,i)||!n.children[fe]?!1:gE(n.children[fe],t,s,i)}}function mu(n,t,e){return t.every((i,r)=>fE[e](n[r].parameters,i.parameters))}var $i=class{constructor(t=new Me([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=go(this.queryParams),this._queryParamMap}toString(){return Hk.serialize(this)}},Me=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pu(this)}},us=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=go(this.parameters),this._parameterMap}toString(){return vE(this)}};function qk(n,t){return hs(n,t)&&n.every((e,i)=>yi(e.parameters,t[i].parameters))}function hs(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function Gk(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===fe&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==fe&&(e=e.concat(t(r,i)))}),e}var Sl=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>new _o,providedIn:"root"})}}return n})(),_o=class{parse(t){let e=new Ep(t);return new $i(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${hl(t.root,!0)}`,i=Yk(t.queryParams),r=typeof t.fragment=="string"?`#${Kk(t.fragment)}`:"";return`${e}${i}${r}`}},Hk=new _o;function pu(n){return n.segments.map(t=>vE(t)).join("/")}function hl(n,t){if(!n.hasChildren())return pu(n);if(t){let e=n.children[fe]?hl(n.children[fe],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==fe&&i.push(`${r}:${hl(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=Gk(n,(i,r)=>r===fe?[hl(n.children[fe],!1)]:[`${r}:${hl(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${pu(n)}/${e[0]}`:`${pu(n)}/(${e.join("//")})`}}function _E(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hu(n){return _E(n).replace(/%3B/gi,";")}function Kk(n){return encodeURI(n)}function wp(n){return _E(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gu(n){return decodeURIComponent(n)}function nE(n){return gu(n.replace(/\+/g,"%20"))}function vE(n){return`${wp(n.path)}${Qk(n.parameters)}`}function Qk(n){return Object.entries(n).map(([t,e])=>`;${wp(t)}=${wp(e)}`).join("")}function Yk(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${hu(e)}=${hu(r)}`).join("&"):`${hu(e)}=${hu(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Xk=/^[^\/()?;#]+/;function pp(n){let t=n.match(Xk);return t?t[0]:""}var Zk=/^[^\/()?;=#]+/;function Jk(n){let t=n.match(Zk);return t?t[0]:""}var eP=/^[^=?&#]+/;function tP(n){let t=n.match(eP);return t?t[0]:""}var nP=/^[^&#]+/;function iP(n){let t=n.match(nP);return t?t[0]:""}var Ep=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[fe]=new Me(t,e)),i}parseSegment(){let t=pp(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Pe(4009,!1);return this.capture(t),new us(gu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Jk(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=pp(this.remaining);r&&(i=r,this.capture(i))}t[gu(e)]=gu(i)}parseQueryParam(t){let e=tP(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=iP(this.remaining);o&&(i=o,this.capture(i))}let r=nE(e),s=nE(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=pp(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Pe(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=fe);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[fe]:new Me([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Pe(4011,!1)}};function yE(n){return n.segments.length>0?new Me([],{[fe]:n}):n}function bE(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=bE(r);if(i===fe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new Me(n.segments,t);return rP(e)}function rP(n){if(n.numberOfChildren===1&&n.children[fe]){let t=n.children[fe];return new Me(n.segments.concat(t.segments),t.children)}return n}function fs(n){return n instanceof $i}function sP(n,t,e=null,i=null){let r=wE(n);return EE(r,t,e,i)}function wE(n){let t;function e(s){let o={};for(let c of s.children){let d=e(c);o[c.outlet]=d}let a=new Me(s.url,o);return s===n&&(t=a),a}let i=e(n.root),r=yE(i);return t??r}function EE(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return gp(r,r,r,e,i);let s=oP(t);if(s.toRoot())return gp(r,r,new Me([],{}),e,i);let o=aP(s,r,n),a=o.processChildren?pl(o.segmentGroup,o.index,s.commands):IE(o.segmentGroup,o.index,s.commands);return gp(r,o.segmentGroup,a,e,i)}function _u(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function vl(n){return typeof n=="object"&&n!=null&&n.outlets}function gp(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([c,d])=>{s[c]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===t?o=e:o=CE(n,t,e);let a=yE(bE(o));return new $i(a,s,r)}function CE(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=CE(s,t,e)}),new Me(n.segments,i)}var vu=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&_u(i[0]))throw new Pe(4003,!1);let r=i.find(vl);if(r&&r!==hE(i))throw new Pe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function oP(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new vu(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,d])=>{a[c]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new vu(e,t,i)}var fo=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function aP(n,t,e){if(n.isAbsolute)return new fo(t,!0,0);if(!e)return new fo(t,!1,NaN);if(e.parent===null)return new fo(e,!0,0);let i=_u(n.commands[0])?0:1,r=e.segments.length-1+i;return lP(e,r,n.numberOfDoubleDots)}function lP(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Pe(4005,!1);r=i.segments.length}return new fo(i,!1,r-s)}function cP(n){return vl(n[0])?n[0].outlets:{[fe]:n}}function IE(n,t,e){if(n??=new Me([],{}),n.segments.length===0&&n.hasChildren())return pl(n,t,e);let i=dP(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Me(n.segments.slice(0,i.pathIndex),{});return s.children[fe]=new Me(n.segments.slice(i.pathIndex),n.children),pl(s,0,r)}else return i.match&&r.length===0?new Me(n.segments,{}):i.match&&!n.hasChildren()?Cp(n,t,e):i.match?pl(n,0,r):Cp(n,t,e)}function pl(n,t,e){if(e.length===0)return new Me(n.segments,{});{let i=cP(e),r={};if(Object.keys(i).some(s=>s!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let s=pl(n.children[fe],t,e);return new Me(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=IE(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Me(n.segments,r)}}function dP(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],a=e[i];if(vl(a))break;let c=`${a}`,d=i<e.length-1?e[i+1]:null;if(r>0&&c===void 0)break;if(c&&d&&typeof d=="object"&&d.outlets===void 0){if(!rE(c,d,o))return s;i+=2}else{if(!rE(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Cp(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(vl(s)){let c=uP(s.outlets);return new Me(i,c)}if(r===0&&_u(e[0])){let c=n.segments[t];i.push(new us(c.path,iE(e[0]))),r++;continue}let o=vl(s)?s.outlets[fe]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&_u(a)?(i.push(new us(o,iE(a))),r+=2):(i.push(new us(o,{})),r++)}return new Me(i,{})}function uP(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Cp(new Me([],{}),0,i))}),t}function iE(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function rE(n,t,e){return n==e.path&&yi(t,e.parameters)}var gl="imperative",xt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(xt||{}),jn=class{constructor(t,e){this.id=t,this.url=e}},vo=class extends jn{constructor(t,e,i="imperative",r=null){super(t,e),this.type=xt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},bi=class extends jn{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=xt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},xn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(xn||{}),yu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(yu||{}),zi=class extends jn{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=xt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ir=class extends jn{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=xt.NavigationSkipped}},yl=class extends jn{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=xt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},bu=class extends jn{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=xt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ip=class extends jn{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=xt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tp=class extends jn{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=xt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xp=class extends jn{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=xt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sp=class extends jn{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=xt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ap=class{constructor(t){this.route=t,this.type=xt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rp=class{constructor(t){this.route=t,this.type=xt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Dp=class{constructor(t){this.snapshot=t,this.type=xt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kp=class{constructor(t){this.snapshot=t,this.type=xt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pp=class{constructor(t){this.snapshot=t,this.type=xt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mp=class{constructor(t){this.snapshot=t,this.type=xt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wu=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=xt.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},bl=class{},yo=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function hP(n,t){return n.providers&&!n._injector&&(n._injector=Qm(n.providers,t,`Route: ${n.path}`)),n._injector??t}function ei(n){return n.outlet||fe}function fP(n,t){let e=n.filter(i=>ei(i)===t);return e.push(...n.filter(i=>ei(i)!==t)),e}function Al(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Op=class{get injector(){return Al(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new Rl(this.rootInjector),this.attachRef=null}},Rl=(()=>{class n{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Op(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||n)(x(Zn))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Eu=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Np(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Np(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Fp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Fp(t,this._root).map(e=>e.value)}};function Np(n,t){if(n===t.value)return t;for(let e of t.children){let i=Np(n,e);if(i)return i}return null}function Fp(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Fp(n,e);if(i.length)return i.unshift(t),i}return[]}var Tn=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ho(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Cu=class extends Eu{constructor(t,e){super(t),this.snapshot=e,qp(this,t)}toString(){return this.snapshot.toString()}};function TE(n){let t=mP(n),e=new vt([new us("",{})]),i=new vt({}),r=new vt({}),s=new vt({}),o=new vt(""),a=new Tr(e,i,s,o,r,fe,n,t.root);return a.snapshot=t.root,new Cu(new Tn(a,[]),t)}function mP(n){let t={},e={},i={},r="",s=new mo([],t,i,r,e,fe,n,null,{});return new Tu("",new Tn(s,[]))}var Tr=class{constructor(t,e,i,r,s,o,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(d=>d[xl]))??K(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(t=>go(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(t=>go(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Iu(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:L(L({},t.params),n.params),data:L(L({},t.data),n.data),resolve:L(L(L(L({},n.data),t.data),r?.data),n._resolvedData)}:i={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},r&&SE(r)&&(i.resolve[xl]=r.title),i}var mo=class{get title(){return this.data?.[xl]}constructor(t,e,i,r,s,o,a,c,d){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=go(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=go(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Tu=class extends Eu{constructor(t,e){super(e),this.url=t,qp(this,e)}toString(){return xE(this._root)}};function qp(n,t){t.value._routerState=n,t.children.forEach(e=>qp(n,e))}function xE(n){let t=n.children.length>0?` { ${n.children.map(xE).join(", ")} } `:"";return`${n.value}${t}`}function _p(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,yi(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),yi(t.params,e.params)||n.paramsSubject.next(e.params),Uk(t.url,e.url)||n.urlSubject.next(e.url),yi(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Lp(n,t){let e=yi(n.params,t.params)&&qk(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Lp(n.parent,t.parent))}function SE(n){return typeof n.title=="string"||n.title===null}var Gp=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new re,this.deactivateEvents=new re,this.attachEvents=new re,this.detachEvents=new re,this.parentContexts=A(Rl),this.location=A(hr),this.changeDetector=A(Nt),this.inputBinder=A(Ru,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Pe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Pe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Pe(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Pe(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Vp(e,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=te({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Et]})}}return n})(),Vp=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Tr?this.route:t===Rl?this.childContexts:this.parent.get(t,e)}},Ru=new j(""),sE=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:i}=e,r=Ks([i.queryParams,i.params,i.data]).pipe(He(([s,o,a],c)=>(a=L(L(L({},s),o),a),c===0?K(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(e);return}let o=b0(i.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();function pP(n,t,e){let i=wl(n,t._root,e?e._root:void 0);return new Cu(i,t)}function wl(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=gP(n,t,e);return new Tn(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>wl(n,a)),o}}let i=_P(t.value),r=t.children.map(s=>wl(n,s));return new Tn(i,r)}}function gP(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return wl(n,i,r);return wl(n,i)})}function _P(n){return new Tr(new vt(n.url),new vt(n.params),new vt(n.queryParams),new vt(n.fragment),new vt(n.data),n.outlet,n.component,n)}var El=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},AE="ngNavigationCancelingError";function xu(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=fs(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=RE(!1,xn.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function RE(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[AE]=!0,e.cancellationCode=t,e}function vP(n){return DE(n)&&fs(n.url)}function DE(n){return!!n&&n[AE]}var yP=(n,t,e,i)=>Y(r=>(new jp(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),jp=class{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),_p(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=ho(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=ho(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=ho(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=ho(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Mp(s.value.snapshot))}),t.children.length&&this.forwardEvent(new kp(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(_p(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),_p(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,i)}},Su=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},po=class{constructor(t,e){this.component=t,this.route=e}};function bP(n,t,e){let i=n._root,r=t?t._root:null;return fl(i,r,e,[i.value])}function wP(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function wo(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!Ww(n)?n:t.get(n):i}function fl(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ho(t);return n.children.forEach(o=>{EP(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>_l(a,e.getContext(o),r)),r}function EP(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=CP(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Su(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?fl(n,t,a?a.children:null,i,r):fl(n,t,e,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new po(a.outlet.component,o))}else o&&_l(t,a,r),r.canActivateChecks.push(new Su(i)),s.component?fl(n,null,a?a.children:null,i,r):fl(n,null,e,i,r);return r}function CP(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!hs(n.url,t.url);case"pathParamsOrQueryParamsChange":return!hs(n.url,t.url)||!yi(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lp(n,t)||!yi(n.queryParams,t.queryParams);case"paramsChange":default:return!Lp(n,t)}}function _l(n,t,e){let i=ho(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?_l(o,t.children.getContext(s),e):_l(o,null,e):_l(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new po(t.outlet.component,r)):e.canDeactivateChecks.push(new po(null,r)):e.canDeactivateChecks.push(new po(null,r))}function Dl(n){return typeof n=="function"}function IP(n){return typeof n=="boolean"}function TP(n){return n&&Dl(n.canLoad)}function xP(n){return n&&Dl(n.canActivate)}function SP(n){return n&&Dl(n.canActivateChild)}function AP(n){return n&&Dl(n.canDeactivate)}function RP(n){return n&&Dl(n.canMatch)}function kE(n){return n instanceof Vw||n?.name==="EmptyError"}var fu=Symbol("INITIAL_VALUE");function bo(){return He(n=>Ks(n.map(t=>t.pipe(Pt(1),Nn(fu)))).pipe(Y(t=>{for(let e of t)if(e!==!0){if(e===fu)return fu;if(e===!1||DP(e))return e}return!0}),it(t=>t!==fu),Pt(1)))}function DP(n){return fs(n)||n instanceof El}function kP(n,t){return wn(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?K(Ie(L({},e),{guardsResult:!0})):PP(o,i,r,n).pipe(wn(a=>a&&IP(a)?MP(i,s,n,t):K(a)),Y(a=>Ie(L({},e),{guardsResult:a})))})}function PP(n,t,e,i){return yt(n).pipe(wn(r=>VP(r.component,r.route,e,t,i)),hi(r=>r!==!0,!0))}function MP(n,t,e,i){return yt(t).pipe(cr(r=>Ad(NP(r.route.parent,i),OP(r.route,i),LP(n,r.path,e),FP(n,r.route,e))),hi(r=>r!==!0,!0))}function OP(n,t){return n!==null&&t&&t(new Pp(n)),K(!0)}function NP(n,t){return n!==null&&t&&t(new Dp(n)),K(!0)}function FP(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return K(!0);let r=i.map(s=>is(()=>{let o=Al(t)??e,a=wo(s,o),c=xP(a)?a.canActivate(t,n):Fn(o,()=>a(t,n));return xr(c).pipe(hi())}));return K(r).pipe(bo())}function LP(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>wP(o)).filter(o=>o!==null).map(o=>is(()=>{let a=o.guards.map(c=>{let d=Al(o.node)??e,f=wo(c,d),m=SP(f)?f.canActivateChild(i,n):Fn(d,()=>f(i,n));return xr(m).pipe(hi())});return K(a).pipe(bo())}));return K(s).pipe(bo())}function VP(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return K(!0);let o=s.map(a=>{let c=Al(t)??r,d=wo(a,c),f=AP(d)?d.canDeactivate(n,t,e,i):Fn(c,()=>d(n,t,e,i));return xr(f).pipe(hi())});return K(o).pipe(bo())}function jP(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return K(!0);let s=r.map(o=>{let a=wo(o,n),c=TP(a)?a.canLoad(t,e):Fn(n,()=>a(t,e));return xr(c)});return K(s).pipe(bo(),PE(i))}function PE(n){return Fw(Fe(t=>{if(typeof t!="boolean")throw xu(n,t)}),Y(t=>t===!0))}function BP(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return K(!0);let s=r.map(o=>{let a=wo(o,n),c=RP(a)?a.canMatch(t,e):Fn(n,()=>a(t,e));return xr(c)});return K(s).pipe(bo(),PE(i))}var Cl=class{constructor(t){this.segmentGroup=t||null}},Il=class extends Error{constructor(t){super(),this.urlTree=t}};function uo(n){return ns(new Cl(n))}function UP(n){return ns(new Pe(4e3,!1))}function zP(n){return ns(RE(!1,xn.GuardRejected))}var Bp=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return K(i);if(r.numberOfChildren>1||!r.children[fe])return UP(`${t.redirectTo}`);r=r.children[fe]}}applyRedirectCommands(t,e,i,r,s){if(typeof e!="string"){let a=e,{queryParams:c,fragment:d,routeConfig:f,url:m,outlet:g,params:b,data:E,title:M}=r,N=Fn(s,()=>a({params:b,data:E,queryParams:c,fragment:d,routeConfig:f,url:m,outlet:g,title:M}));if(N instanceof $i)throw new Il(N);e=N}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e[0]==="/")throw new Il(o);return o}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new $i(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,i,r)}),new Me(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Pe(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},Up={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $P(n,t,e,i,r){let s=ME(n,t,e);return s.matched?(i=hP(t,i),BP(i,t,e,r).pipe(Y(o=>o===!0?s:L({},Up)))):K(s)}function ME(n,t,e){if(t.path==="**")return WP(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?L({},Up):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||Bk)(e,n,t);if(!r)return L({},Up);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?L(L({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function WP(n){return{matched:!0,parameters:n.length>0?hE(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function oE(n,t,e,i){return e.length>0&&HP(n,e,i)?{segmentGroup:new Me(t,GP(i,new Me(e,n.children))),slicedSegments:[]}:e.length===0&&KP(n,e,i)?{segmentGroup:new Me(n.segments,qP(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new Me(n.segments,n.children),slicedSegments:e}}function qP(n,t,e,i){let r={};for(let s of e)if(Du(n,t,s)&&!i[ei(s)]){let o=new Me([],{});r[ei(s)]=o}return L(L({},i),r)}function GP(n,t){let e={};e[fe]=t;for(let i of n)if(i.path===""&&ei(i)!==fe){let r=new Me([],{});e[ei(i)]=r}return e}function HP(n,t,e){return e.some(i=>Du(n,t,i)&&ei(i)!==fe)}function KP(n,t,e){return e.some(i=>Du(n,t,i))}function Du(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function QP(n,t,e){return t.length===0&&!n.children[e]}var zp=class{};function YP(n,t,e,i,r,s,o="emptyOnly"){return new $p(n,t,e,i,r,o,s).recognize()}var XP=31,$p=class{constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Bp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Pe(4002,`'${t.segmentGroup}'`)}recognize(){let t=oE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Y(({children:e,rootSnapshot:i})=>{let r=new Tn(i,e),s=new Tu("",r),o=sP(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new mo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,fe,e).pipe(Y(i=>({children:i,rootSnapshot:e})),lr(i=>{if(i instanceof Il)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Cl?this.noMatchError(i):i}))}processSegmentGroup(t,e,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i,s):this.processSegment(t,e,i,i.segments,r,!0,s).pipe(Y(o=>o instanceof Tn?[o]:[]))}processChildren(t,e,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return yt(s).pipe(cr(o=>{let a=i.children[o],c=fP(e,o);return this.processSegmentGroup(t,c,a,o,r)}),Ka((o,a)=>(o.push(...a),o)),$m(null),Uw(),wn(o=>{if(o===null)return uo(i);let a=OE(o);return ZP(a),K(a)}))}processSegment(t,e,i,r,s,o,a){return yt(e).pipe(cr(c=>this.processSegmentAgainstRoute(c._injector??t,e,c,i,r,s,o,a).pipe(lr(d=>{if(d instanceof Cl)return K(null);throw d}))),hi(c=>!!c),lr(c=>{if(kE(c))return QP(i,r,s)?K(new zp):uo(i);throw c}))}processSegmentAgainstRoute(t,e,i,r,s,o,a,c){return ei(i)!==o&&(o===fe||!Du(r,s,i))?uo(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o,c):uo(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o,a){let{matched:c,parameters:d,consumedSegments:f,positionalParamSegments:m,remainingSegments:g}=ME(e,r,s);if(!c)return uo(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>XP&&(this.allowRedirects=!1));let b=new mo(s,d,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,aE(r),ei(r),r.component??r._loadedComponent??null,r,lE(r)),E=Iu(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(E.params),b.data=Object.freeze(E.data);let M=this.applyRedirects.applyRedirectCommands(f,r.redirectTo,m,b,t);return this.applyRedirects.lineralizeSegments(r,M).pipe(wn(N=>this.processSegment(t,i,e,N.concat(g),o,!1,a)))}matchSegmentAgainstRoute(t,e,i,r,s,o){let a=$P(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(He(c=>c.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(He(({routes:d})=>{let f=i._loadedInjector??t,{parameters:m,consumedSegments:g,remainingSegments:b}=c,E=new mo(g,m,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,aE(i),ei(i),i.component??i._loadedComponent??null,i,lE(i)),M=Iu(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(M.params),E.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:ce}=oE(e,g,b,d);if(ce.length===0&&N.hasChildren())return this.processChildren(f,d,N,E).pipe(Y(q=>new Tn(E,q)));if(d.length===0&&ce.length===0)return K(new Tn(E,[]));let le=ei(i)===s;return this.processSegment(f,d,N,ce,le?fe:s,!0,E).pipe(Y(q=>new Tn(E,q instanceof Tn?[q]:[])))}))):uo(e)))}getChildConfig(t,e,i){return e.children?K({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?K({routes:e._loadedRoutes,injector:e._loadedInjector}):jP(t,e,i,this.urlSerializer).pipe(wn(r=>r?this.configLoader.loadChildren(t,e).pipe(Fe(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):zP(e))):K({routes:[],injector:t})}};function ZP(n){n.sort((t,e)=>t.value.outlet===fe?-1:e.value.outlet===fe?1:t.value.outlet.localeCompare(e.value.outlet))}function JP(n){let t=n.value.routeConfig;return t&&t.path===""}function OE(n){let t=[],e=new Set;for(let i of n){if(!JP(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=OE(i.children);t.push(new Tn(i.value,r))}return t.filter(i=>!e.has(i))}function aE(n){return n.data||{}}function lE(n){return n.resolve||{}}function eM(n,t,e,i,r,s){return wn(o=>YP(n,t,e,i,o.extractedUrl,r,s).pipe(Y(({state:a,tree:c})=>Ie(L({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function tM(n,t){return wn(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return K(e);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let d of NE(c))o.add(d);let a=0;return yt(o).pipe(cr(c=>s.has(c)?nM(c,i,n,t):(c.data=Iu(c,c.parent,n).resolve,K(void 0))),Fe(()=>a++),Wm(1),wn(c=>a===o.size?K(e):ui))})}function NE(n){let t=n.children.map(e=>NE(e)).flat();return[n,...t]}function nM(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!SE(r)&&(s[xl]=r.title),iM(s,n,t,i).pipe(Y(o=>(n._resolvedData=o,n.data=Iu(n,n.parent,e).resolve,null)))}function iM(n,t,e,i){let r=bp(n);if(r.length===0)return K({});let s={};return yt(r).pipe(wn(o=>rM(n[o],t,e,i).pipe(hi(),Fe(a=>{if(a instanceof El)throw xu(new _o,a);s[o]=a}))),Wm(1),Bw(s),lr(o=>kE(o)?ui:ns(o)))}function rM(n,t,e,i){let r=Al(t)??i,s=wo(n,r),o=s.resolve?s.resolve(t,e):Fn(r,()=>s(t,e));return xr(o)}function vp(n){return He(t=>{let e=n(t);return e?yt(e).pipe(Y(()=>t)):K(t)})}var FE=(()=>{class n{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===fe);return i}getResolvedTitleForRoute(e){return e.data[xl]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>A(sM),providedIn:"root"})}}return n})(),sM=(()=>{class n extends FE{constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(x(J0))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kl=new j("",{providedIn:"root",factory:()=>({})}),oM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ee({type:n,selectors:[["ng-component"]],standalone:!0,features:[ne],decls:1,vars:0,template:function(i,r){i&1&&he(0,"router-outlet")},dependencies:[Gp],encapsulation:2})}}return n})();function Hp(n){let t=n.children&&n.children.map(Hp),e=t?Ie(L({},n),{children:t}):L({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==fe&&(e.component=oM),e}var Tl=new j(""),Kp=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=A($d)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return K(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=xr(e.loadComponent()).pipe(Y(LE),Fe(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),dr(()=>{this.componentLoaders.delete(e)})),r=new Vm(i,()=>new W).pipe(Lm());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return K({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=aM(i,this.compiler,e,this.onLoadEndListener).pipe(dr(()=>{this.childrenLoaders.delete(i)})),o=new Vm(s,()=>new W).pipe(Lm());return this.childrenLoaders.set(i,o),o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aM(n,t,e,i){return xr(n.loadChildren()).pipe(Y(LE),wn(r=>r instanceof a0||Array.isArray(r)?K(r):yt(t.compileModuleAsync(r))),Y(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(Tl,[],{optional:!0,self:!0}).flat()),{routes:o.map(Hp),injector:s}}))}function lM(n){return n&&typeof n=="object"&&"default"in n}function LE(n){return lM(n)?n.default:n}var Qp=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>A(cM),providedIn:"root"})}}return n})(),cM=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VE=new j(""),jE=new j("");function dM(n,t,e){let i=n.get(jE),r=n.get(J);return n.get(G).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),a=r.startViewTransition(()=>(s(),uM(n))),{onViewTransitionCreated:c}=i;return c&&Fn(n,()=>c({transition:a,from:t,to:e})),o})}function uM(n){return new Promise(t=>{mi({read:()=>setTimeout(t)},{injector:n})})}var hM=new j(""),Yp=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new W,this.transitionAbortSubject=new W,this.configLoader=A(Kp),this.environmentInjector=A(Zn),this.urlSerializer=A(Sl),this.rootContexts=A(Rl),this.location=A(Vi),this.inputBindingEnabled=A(Ru,{optional:!0})!==null,this.titleStrategy=A(FE),this.options=A(kl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=A(Qp),this.createViewTransition=A(VE,{optional:!0}),this.navigationErrorHandler=A(hM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let e=r=>this.events.next(new Ap(r)),i=r=>this.events.next(new Rp(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(Ie(L(L({},this.transitions.value),e),{id:i}))}setupNavigations(e,i,r){return this.transitions=new vt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:gl,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(it(s=>s.id!==0),Y(s=>Ie(L({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),He(s=>{let o=!1,a=!1;return K(s).pipe(He(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",xn.SupersededByNewNavigation),ui;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ie(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!d&&f!=="reload"){let m="";return this.events.next(new Ir(c.id,this.urlSerializer.serialize(c.rawUrl),m,yu.IgnoredSameUrlNavigation)),c.resolve(!1),ui}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return K(c).pipe(He(m=>{let g=this.transitions?.getValue();return this.events.next(new vo(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),g!==this.transitions?.getValue()?ui:Promise.resolve(m)}),eM(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Fe(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Ie(L({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let g=new bu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(g)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:m,extractedUrl:g,source:b,restoredState:E,extras:M}=c,N=new vo(m,this.urlSerializer.serialize(g),b,E);this.events.next(N);let ce=TE(this.rootComponentType).snapshot;return this.currentTransition=s=Ie(L({},c),{targetSnapshot:ce,urlAfterRedirects:g,extras:Ie(L({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,K(s)}else{let m="";return this.events.next(new Ir(c.id,this.urlSerializer.serialize(c.extractedUrl),m,yu.IgnoredByUrlHandlingStrategy)),c.resolve(!1),ui}}),Fe(c=>{let d=new Ip(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),Y(c=>(this.currentTransition=s=Ie(L({},c),{guards:bP(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),kP(this.environmentInjector,c=>this.events.next(c)),Fe(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw xu(this.urlSerializer,c.guardsResult);let d=new Tp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),it(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",xn.GuardRejected),!1)),vp(c=>{if(c.guards.canActivateChecks.length)return K(c).pipe(Fe(d=>{let f=new xp(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),He(d=>{let f=!1;return K(d).pipe(tM(this.paramsInheritanceStrategy,this.environmentInjector),Fe({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",xn.NoDataFromResolver)}}))}),Fe(d=>{let f=new Sp(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),vp(c=>{let d=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(Fe(g=>{f.component=g}),Y(()=>{})));for(let g of f.children)m.push(...d(g));return m};return Ks(d(c.targetSnapshot.root)).pipe($m(null),Pt(1))}),vp(()=>this.afterPreactivation()),He(()=>{let{currentSnapshot:c,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return f?yt(f).pipe(Y(()=>s)):K(s)}),Y(c=>{let d=pP(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Ie(L({},c),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),Fe(()=>{this.events.next(new bl)}),yP(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Pt(1),Fe({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new bi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),dt(this.transitionAbortSubject.pipe(Fe(c=>{throw c}))),dr(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",xn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),lr(c=>{if(a=!0,DE(c))this.events.next(new zi(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),vP(c)?this.events.next(new yo(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let d=new yl(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let f=Fn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof El){let{message:m,cancellationCode:g}=xu(this.urlSerializer,f);this.events.next(new zi(s.id,this.urlSerializer.serialize(s.extractedUrl),m,g)),this.events.next(new yo(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let m=e.errorHandler(c);s.resolve(!!m)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return ui}))}))}cancelNavigationTransition(e,i,r){let s=new zi(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function fM(n){return n!==gl}var mM=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>A(pM),providedIn:"root"})}}return n})(),Wp=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},pM=(()=>{class n extends Wp{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=fi(n)))(r||n)}})()}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),BE=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:()=>A(gM),providedIn:"root"})}}return n})(),gM=(()=>{class n extends BE{constructor(){super(...arguments),this.location=A(Vi),this.urlSerializer=A(Sl),this.options=A(kl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=A(Qp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new $i,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=TE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof vo)this.stateMemento=this.createStateMemento();else if(e instanceof Ir)this.rawUrlTree=i.initialUrl;else if(e instanceof bu){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else e instanceof bl?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof zi&&(e.code===xn.GuardRejected||e.code===xn.NoDataFromResolver)?this.restoreHistory(i):e instanceof yl?this.restoreHistory(i,!0):e instanceof bi&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){let r=e instanceof $i?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let s=this.browserPageId,o=L(L({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(r,"",o)}else{let s=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=fi(n)))(r||n)}})()}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ml=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ml||{});function UE(n,t){n.events.pipe(it(e=>e instanceof bi||e instanceof zi||e instanceof yl||e instanceof Ir),Y(e=>e instanceof bi||e instanceof Ir?ml.COMPLETE:(e instanceof zi?e.code===xn.Redirect||e.code===xn.SupersededByNewNavigation:!1)?ml.REDIRECTING:ml.FAILED),it(e=>e!==ml.REDIRECTING),Pt(1)).subscribe(()=>{t()})}function _M(n){throw n}var vM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Lt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=A(Bd),this.stateManager=A(BE),this.options=A(kl,{optional:!0})||{},this.pendingTasks=A(Md),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=A(Yp),this.urlSerializer=A(Sl),this.location=A(Vi),this.urlHandlingStrategy=A(Qp),this._events=new W,this.errorHandler=this.options.errorHandler||_M,this.navigated=!1,this.routeReuseStrategy=A(mM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=A(Tl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!A(Ru,{optional:!0}),this.eventsSubscription=new kt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof zi&&i.code!==xn.Redirect&&i.code!==xn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof bi)this.navigated=!0;else if(i instanceof yo){let o=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=L({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fM(r.source)},o);this.scheduleNavigation(a,gl,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}wM(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),gl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let c=L({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Hp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=i,d=c?this.currentUrlTree.fragment:o,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=L(L({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let g=r?r.snapshot:this.routerState.snapshot.root;m=wE(g)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),m=this.currentUrlTree.root}return EE(m,e,f,d??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=fs(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,gl,null,i)}navigate(e,i={skipLocationChange:!1}){return bM(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=L({},vM):i===!1?r=L({},yM):r=i,fs(e))return tE(this.currentUrlTree,e,r);let s=this.parseUrl(e);return tE(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,s])=>(s!=null&&(i[r]=s),i),{})}scheduleNavigation(e,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,d;o?(a=o.resolve,c=o.reject,d=o.promise):d=new Promise((m,g)=>{a=m,c=g});let f=this.pendingTasks.add();return UE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bM(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Pe(4008,!1)}function wM(n){return!(n instanceof bl)&&!(n instanceof yo)}var ku=(()=>{class n{constructor(e,i,r,s,o,a){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new W,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=e.events.subscribe(d=>{d instanceof bi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(fs(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,i,r,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||i||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let i=this.href===null?null:i0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(e,i){let r=this.renderer,s=this.el.nativeElement;i!==null?r.setAttribute(s,e,i):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:fs(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(i){return new(i||n)(k(Lt),k(Tr),rs("tabindex"),k(Za),k(de),k(ls))}}static{this.\u0275dir=te({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&H("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),i&2&&Oe("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Xe],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Xe],replaceUrl:[2,"replaceUrl","replaceUrl",Xe],routerLink:"routerLink"},standalone:!0,features:[Ot,Et]})}}return n})();var Au=class{};var EM=(()=>{class n{constructor(e,i,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(it(e=>e instanceof bi),cr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){let r=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Qm(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return yt(r).pipe(Bm())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(e,i):r=K(null);let s=r.pipe(wn(o=>o===null?K(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){let o=this.loader.loadComponent(i);return yt([s,o]).pipe(Bm())}else return s})}static{this.\u0275fac=function(i){return new(i||n)(x(Lt),x($d),x(Zn),x(Au),x(Kp))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zE=new j(""),CM=(()=>{class n{constructor(e,i,r,s,o={}){this.urlSerializer=e,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof vo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof bi?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Ir&&e.code===yu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof wu&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wu(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(i){Zs()}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})();function $E(n,...t){return rn([{provide:Tl,multi:!0,useValue:n},[],{provide:Tr,useFactory:WE,deps:[Lt]},{provide:zd,multi:!0,useFactory:qE},t.map(e=>e.\u0275providers)])}function WE(n){return n.routerState.root}function Pl(n,t){return{\u0275kind:n,\u0275providers:t}}function qE(){let n=A(Ae);return t=>{let e=n.get(gr);if(t!==e.components[0])return;let i=n.get(Lt),r=n.get(GE);n.get(Xp)===1&&i.initialNavigation(),n.get(HE,null,Gm.Optional)?.setUpPreloading(),n.get(zE,null,Gm.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var GE=new j("",{factory:()=>new W}),Xp=new j("",{providedIn:"root",factory:()=>1});function IM(){return Pl(2,[{provide:Xp,useValue:0},{provide:Ym,multi:!0,deps:[Ae],useFactory:t=>{let e=t.get(C0,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(Lt),s=t.get(GE);UE(r,()=>{i(!0)}),t.get(Yp).afterPreactivation=()=>(i(!0),s.closed?K(void 0):s),r.initialNavigation()}))}}])}function TM(){return Pl(3,[{provide:Ym,multi:!0,useFactory:()=>{let t=A(Lt);return()=>{t.setUpLocationChangeListener()}}},{provide:Xp,useValue:2}])}var HE=new j("");function xM(n){return Pl(0,[{provide:HE,useExisting:EM},{provide:Au,useExisting:n}])}function SM(){return Pl(8,[sE,{provide:Ru,useExisting:sE}])}function AM(n){let t=[{provide:VE,useValue:dM},{provide:jE,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return Pl(9,t)}var cE=new j("ROUTER_FORROOT_GUARD"),RM=[Vi,{provide:Sl,useClass:_o},Lt,Rl,{provide:Tr,useFactory:WE,deps:[Lt]},Kp,[]],Pu=(()=>{class n{constructor(e){}static forRoot(e,i){return{ngModule:n,providers:[RM,[],{provide:Tl,multi:!0,useValue:e},{provide:cE,useFactory:MM,deps:[[Lt,new rt,new Hm]]},{provide:kl,useValue:i||{}},i?.useHash?kM():PM(),DM(),i?.preloadingStrategy?xM(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?OM(i):[],i?.bindToComponentInputs?SM().\u0275providers:[],i?.enableViewTransitions?AM().\u0275providers:[],NM()]}}static forChild(e){return{ngModule:n,providers:[{provide:Tl,multi:!0,useValue:e}]}}static{this.\u0275fac=function(i){return new(i||n)(x(cE,8))}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({})}}return n})();function DM(){return{provide:zE,useFactory:()=>{let n=A(A0),t=A(G),e=A(kl),i=A(Yp),r=A(Sl);return e.scrollOffset&&n.setOffset(e.scrollOffset),new CM(r,i,n,t,e)}}}function kM(){return{provide:ls,useClass:qd}}function PM(){return{provide:ls,useClass:I0}}function MM(n){return"guarded"}function OM(n){return[n.initialNavigation==="disabled"?TM().\u0275providers:[],n.initialNavigation==="enabledBlocking"?IM().\u0275providers:[]]}var dE=new j("");function NM(){return[{provide:dE,useFactory:qE},{provide:zd,multi:!0,useExisting:dE}]}function ms(n){n||(Gw(ms),n=A(Hw));let t=new nt(e=>n.onDestroy(e.next.bind(e)));return e=>e.pipe(dt(t))}var tC=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(i){return new(i||n)(k(Za),k(de))}}static{this.\u0275dir=te({type:n})}}return n})(),LM=(()=>{class n extends tC{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=fi(n)))(r||n)}})()}static{this.\u0275dir=te({type:n,features:[ot]})}}return n})(),$u=new j("");var VM={provide:$u,useExisting:ur(()=>Bn),multi:!0};function jM(){let n=io()?io().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var BM=new j(""),Bn=(()=>{class n extends tC{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!jM())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(i){return new(i||n)(k(Za),k(de),k(BM,8))}}static{this.\u0275dir=te({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&H("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Qe([VM]),ot]})}}return n})();function Sr(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function nC(n){return n!=null&&typeof n.length=="number"}var Io=new j(""),jl=new j(""),UM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,We=class{static min(t){return zM(t)}static max(t){return $M(t)}static required(t){return iC(t)}static requiredTrue(t){return WM(t)}static email(t){return qM(t)}static minLength(t){return GM(t)}static maxLength(t){return HM(t)}static pattern(t){return KM(t)}static nullValidator(t){return Ou(t)}static compose(t){return cC(t)}static composeAsync(t){return dC(t)}};function zM(n){return t=>{if(Sr(t.value)||Sr(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function $M(n){return t=>{if(Sr(t.value)||Sr(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function iC(n){return Sr(n.value)?{required:!0}:null}function WM(n){return n.value===!0?null:{required:!0}}function qM(n){return Sr(n.value)||UM.test(n.value)?null:{email:!0}}function GM(n){return t=>Sr(t.value)||!nC(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function HM(n){return t=>nC(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function KM(n){if(!n)return Ou;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Sr(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Ou(n){return null}function rC(n){return n!=null}function sC(n){return Ud(n)?yt(n):n}function oC(n){let t={};return n.forEach(e=>{t=e!=null?L(L({},t),e):t}),Object.keys(t).length===0?null:t}function aC(n,t){return t.map(e=>e(n))}function QM(n){return!n.validate}function lC(n){return n.map(t=>QM(t)?t:e=>t.validate(e))}function cC(n){if(!n)return null;let t=n.filter(rC);return t.length==0?null:function(e){return oC(aC(e,t))}}function tg(n){return n!=null?cC(lC(n)):null}function dC(n){if(!n)return null;let t=n.filter(rC);return t.length==0?null:function(e){let i=aC(e,t).map(sC);return Rd(i).pipe(Y(oC))}}function ng(n){return n!=null?dC(lC(n)):null}function QE(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function uC(n){return n._rawValidators}function hC(n){return n._rawAsyncValidators}function Zp(n){return n?Array.isArray(n)?n:[n]:[]}function Nu(n,t){return Array.isArray(n)?n.includes(t):n===t}function YE(n,t){let e=Zp(t);return Zp(n).forEach(r=>{Nu(e,r)||e.push(r)}),e}function XE(n,t){return Zp(t).filter(e=>!Nu(n,e))}var Fu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=tg(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ng(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Wi=class extends Fu{get formDirective(){return null}get path(){return null}},ti=class extends Fu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Lu=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},YM={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qW=Ie(L({},YM),{"[class.ng-submitted]":"isSubmitted"}),Ei=(()=>{class n extends Lu{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(k(ti,2))}}static{this.\u0275dir=te({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Le("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ot]})}}return n})(),Rr=(()=>{class n extends Lu{constructor(e){super(e)}static{this.\u0275fac=function(i){return new(i||n)(k(Wi,10))}}static{this.\u0275dir=te({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Le("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ot]})}}return n})();var Ml="VALID",Mu="INVALID",Eo="PENDING",Ol="DISABLED",Ar=class{},Vu=class extends Ar{constructor(t,e){super(),this.value=t,this.source=e}},Fl=class extends Ar{constructor(t,e){super(),this.pristine=t,this.source=e}},Ll=class extends Ar{constructor(t,e){super(),this.touched=t,this.source=e}},Co=class extends Ar{constructor(t,e){super(),this.status=t,this.source=e}},Jp=class extends Ar{constructor(t){super(),this.source=t}},eg=class extends Ar{constructor(t){super(),this.source=t}};function fC(n){return(Wu(n)?n.validators:n)||null}function XM(n){return Array.isArray(n)?tg(n):n||null}function mC(n,t){return(Wu(t)?t.asyncValidators:n)||null}function ZM(n){return Array.isArray(n)?ng(n):n||null}function Wu(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function JM(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new Pe(1e3,"");if(!i[e])throw new Pe(1001,"")}function eO(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new Pe(1002,"")})}var ju=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=pi(()=>this.statusReactive()),this.statusReactive=st(void 0),this._pristine=pi(()=>this.pristineReactive()),this.pristineReactive=st(!0),this._touched=pi(()=>this.touchedReactive()),this.touchedReactive=st(!1),this._events=new W,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Ln(this.statusReactive)}set status(t){Ln(()=>this.statusReactive.set(t))}get valid(){return this.status===Ml}get invalid(){return this.status===Mu}get pending(){return this.status==Eo}get disabled(){return this.status===Ol}get enabled(){return this.status!==Ol}get pristine(){return Ln(this.pristineReactive)}set pristine(t){Ln(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Ln(this.touchedReactive)}set touched(t){Ln(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(YE(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(YE(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(XE(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(XE(t,this._rawAsyncValidators))}hasValidator(t){return Nu(this._rawValidators,t)}hasAsyncValidator(t){return Nu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Ie(L({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Ll(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Ll(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Ie(L({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Fl(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Fl(!0,i))}markAsPending(t={}){this.status=Eo;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Co(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Ie(L({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ol,this.errors=null,this._forEachChild(r=>{r.disable(Ie(L({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Vu(this.value,i)),this._events.next(new Co(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ie(L({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ml,this._forEachChild(i=>{i.enable(Ie(L({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ie(L({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ml||this.status===Eo)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Vu(this.value,e)),this._events.next(new Co(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Ie(L({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ol:Ml}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Eo,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=sC(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Co(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new re,this.statusChanges=new re}_calculateStatus(){return this._allControlsDisabled()?Ol:this.errors?Mu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Eo)?Eo:this._anyControlsHaveStatus(Mu)?Mu:Ml}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Fl(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Ll(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Wu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=XM(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ZM(this._rawAsyncValidators)}},wi=class extends ju{constructor(t,e,i){super(fC(e),mC(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){eO(this,!0,t),Object.keys(t).forEach(i=>{JM(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var To=new j("CallSetDisabledState",{providedIn:"root",factory:()=>qu}),qu="always";function pC(n,t){return[...t.path,n]}function Vl(n,t,e=qu){ig(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),nO(n,t),rO(n,t),iO(n,t),tO(n,t)}function Bu(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),zu(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Uu(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function tO(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function ig(n,t){let e=uC(n);t.validator!==null?n.setValidators(QE(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=hC(n);t.asyncValidator!==null?n.setAsyncValidators(QE(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Uu(t._rawValidators,r),Uu(t._rawAsyncValidators,r)}function zu(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=uC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(t.asyncValidator!==null){let r=hC(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}let i=()=>{};return Uu(t._rawValidators,i),Uu(t._rawAsyncValidators,i),e}function nO(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&gC(n,t)})}function iO(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&gC(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function gC(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function rO(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function _C(n,t){n==null,ig(n,t)}function sO(n,t){return zu(n,t)}function rg(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function oO(n){return Object.getPrototypeOf(n.constructor)===LM}function vC(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function sg(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===Bn?e=s:oO(s)?i=s:r=s}),r||i||e||null}function aO(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var lO={provide:Wi,useExisting:ur(()=>Bl)},Nl=Promise.resolve(),Bl=(()=>{class n extends Wi{get submitted(){return Ln(this.submittedReactive)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=pi(()=>this.submittedReactive()),this.submittedReactive=st(!1),this._directives=new Set,this.ngSubmit=new re,this.form=new wi({},tg(e),ng(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Nl.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Vl(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Nl.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Nl.then(()=>{let i=this._findContainer(e.path),r=new wi({});_C(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Nl.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Nl.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),vC(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(i){return new(i||n)(k(Io,10),k(jl,10),k(To,8))}}static{this.\u0275dir=te({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&H("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qe([lO]),ot]})}}return n})();function ZE(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function JE(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var ln=class extends ju{constructor(t=null,e,i){super(fC(e),mC(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wu(e)&&(e.nonNullable||e.initialValueIsDefault)&&(JE(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ZE(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ZE(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){JE(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var cO=n=>n instanceof ln;var dO={provide:ti,useExisting:ur(()=>og)},eC=Promise.resolve(),og=(()=>{class n extends ti{constructor(e,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new ln,this._registered=!1,this.name="",this.update=new re,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=sg(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),rg(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Vl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){eC.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Xe(i);eC.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?pC(e,this._parent):[e]}static{this.\u0275fac=function(i){return new(i||n)(k(Wi,9),k(Io,10),k(jl,10),k($u,10),k(Nt,8),k(To,8))}}static{this.\u0275dir=te({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qe([dO]),ot,Et]})}}return n})(),Dr=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=te({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var ag=new j(""),uO={provide:ti,useExisting:ur(()=>Ul)},Ul=(()=>{class n extends ti{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this.update=new re,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(i),this.valueAccessor=sg(this,r)}ngOnChanges(e){if(this._isControlChanged(e)){let i=e.form.previousValue;i&&Bu(i,this,!1),Vl(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}rg(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Bu(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static{this.\u0275fac=function(i){return new(i||n)(k(Io,10),k(jl,10),k($u,10),k(ag,8),k(To,8))}}static{this.\u0275dir=te({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Qe([uO]),ot,Et]})}}return n})(),hO={provide:Wi,useExisting:ur(()=>qi)},qi=(()=>{class n extends Wi{get submitted(){return Ln(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,i,r){super(),this.callSetDisabledState=r,this._submitted=pi(()=>this._submittedReactive()),this._submittedReactive=st(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new re,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return Vl(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Bu(e.control||null,e,!1),aO(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),vC(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Jp(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new eg(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(Bu(i||null,e),cO(r)&&(Vl(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);_C(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&sO(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ig(this.form,this),this._oldForm&&zu(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||n)(k(Io,10),k(jl,10),k(To,8))}}static{this.\u0275dir=te({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&H("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qe([hO]),ot,Et]})}}return n})();var fO={provide:ti,useExisting:ur(()=>ps)},ps=(()=>{class n extends ti{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new re,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=sg(this,s)}ngOnChanges(e){this._added||this._setUpControl(),rg(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return pC(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||n)(k(Wi,13),k(Io,10),k(jl,10),k($u,10),k(ag,8))}}static{this.\u0275dir=te({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Qe([fO]),ot,Et]})}}return n})();var mO=(()=>{class n{constructor(){this._validator=Ou}ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Ou,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=te({type:n,features:[Et]})}}return n})();var pO={provide:Io,useExisting:ur(()=>Gi),multi:!0};var Gi=(()=>{class n extends mO{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Xe,this.createValidator=e=>iC}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=fi(n)))(r||n)}})()}static{this.\u0275dir=te({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Oe("required",r._enabled?"":null)},inputs:{required:"required"},features:[Qe([pO]),ot]})}}return n})();var yC=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({})}}return n})();var Ci=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:To,useValue:e.callSetDisabledState??qu}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[yC]})}}return n})(),kr=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:ag,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:To,useValue:e.callSetDisabledState??qu}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[yC]})}}return n})();var gO=new j("cdk-dir-doc",{providedIn:"root",factory:_O});function _O(){return A(J)}var vO=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function yO(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?vO.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Un=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new re,e){let i=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=yO(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(i){return new(i||n)(x(gO,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Pr=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({})}}return n})();function gs(n){return n!=null&&`${n}`!="false"}function Hi(n,t=0){return bO(n)?Number(n):arguments.length===2?t:0}function bO(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Mr(n){return Array.isArray(n)?n:[n]}function _t(n){return n==null?"":typeof n=="string"?n:`${n}px`}function wt(n){return n instanceof de?n.nativeElement:n}var cg;try{cg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{cg=!1}var ke=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?S0(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||cg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(i){return new(i||n)(x(Mt))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var So,bC=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function dg(){if(So)return So;if(typeof document!="object"||!document)return So=new Set(bC),So;let n=document.createElement("input");return So=new Set(bC.filter(t=>(n.setAttribute("type",t),n.type===t))),So}var zl;function wO(){if(zl==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zl=!0}))}finally{zl=zl||!1}return zl}function Sn(n){return wO()?n:!!n.capture}var ni=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(ni||{}),Hu,_s;function Ku(){if(_s==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return _s=!1,_s;if("scrollBehavior"in document.documentElement.style)_s=!0;else{let n=Element.prototype.scrollTo;n?_s=!/\{\s*\[native code\]\s*\}/.test(n.toString()):_s=!1}}return _s}function Ao(){if(typeof document!="object"||!document)return ni.NORMAL;if(Hu==null){let n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),Hu=ni.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Hu=n.scrollLeft===0?ni.NEGATED:ni.INVERTED),n.remove()}return Hu}var lg;function EO(){if(lg==null){let n=typeof document<"u"?document.head:null;lg=!!(n&&(n.createShadowRoot||n.attachShadow))}return lg}function Ro(n){if(EO()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function $l(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function Vt(n){return n.composedPath?n.composedPath()[0]:n.target}function Wl(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var ug=class{constructor(t){this._box=t,this._destroyed=new W,this._resizeSubject=new W,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new nt(e=>{let i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(it(e=>e.some(i=>i.target===t)),Qs({bufferSize:1,refCount:!0}),dt(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},wC=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=A(G),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,i){let r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new ug(r)),this._observers.get(r).observe(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var CO=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var EC=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({providers:[CO]})}}return n})();function Qu(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var CC=new Set,vs,IO=(()=>{class n{constructor(e,i){this._platform=e,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xO}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&TO(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(i){return new(i||n)(x(ke),x(Ya,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function TO(n,t){if(!CC.has(n))try{vs||(vs=document.createElement("style"),t&&vs.setAttribute("nonce",t),vs.setAttribute("type","text/css"),document.head.appendChild(vs)),vs.sheet&&(vs.sheet.insertRule(`@media ${n} {body{ }}`,0),CC.add(n))}catch(e){console.error(e)}}function xO(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var TC=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new W}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return IC(Mr(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=IC(Mr(e)).map(o=>this._registerQuery(o).observable),s=Ks(r);return s=Ad(s.pipe(Pt(1)),s.pipe(Pd(1),zm(0))),s.pipe(Y(o=>{let a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:d})=>{a.matches=a.matches||c,a.breakpoints[d]=c}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),s={observable:new nt(o=>{let a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Nn(i),Y(({matches:o})=>({query:e,matches:o})),dt(this._destroySubject)),mql:i};return this._queries.set(e,s),s}static{this.\u0275fac=function(i){return new(i||n)(x(IO),x(G))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function IC(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var ql=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return AO(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=SO(FO(e));if(i&&(xC(i)===-1||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=xC(e);return e.hasAttribute("contenteditable")?s!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!OO(e)?!1:r==="audio"?e.hasAttribute("controls")?s!==-1:!1:r==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return NO(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static{this.\u0275fac=function(i){return new(i||n)(x(ke))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function SO(n){try{return n.frameElement}catch{return null}}function AO(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function RO(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function DO(n){return PO(n)&&n.type=="hidden"}function kO(n){return MO(n)&&n.hasAttribute("href")}function PO(n){return n.nodeName.toLowerCase()=="input"}function MO(n){return n.nodeName.toLowerCase()=="a"}function RC(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function xC(n){if(!RC(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function OO(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function NO(n){return DO(n)?!1:RO(n)||kO(n)||n.hasAttribute("contenteditable")||RC(n)}function FO(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var fg=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,r,s=!1,o){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._injector=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?mi(t,{injector:this._injector}):setTimeout(t)}},Zu=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._injector=A(Ae),this._document=r}create(e,i=!1){return new fg(e,this._checker,this._ngZone,this._document,i,this._injector)}static{this.\u0275fac=function(i){return new(i||n)(x(ql),x(G),x(J))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Gl(n){return n.buttons===0||n.detail===0}function Hl(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var LO=new j("cdk-input-modality-detector-options"),VO={ignoreKeys:[18,17,224,91,16]},DC=650,Do=Sn({passive:!0,capture:!0}),jO=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new vt(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Vt(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<DC||(this._modality.next(Gl(o)?"keyboard":"mouse"),this._mostRecentTarget=Vt(o))},this._onTouchstart=o=>{if(Hl(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Vt(o)},this._options=L(L({},VO),s),this.modalityDetected=this._modality.pipe(Pd(1)),this.modalityChanged=this.modalityDetected.pipe(Ha()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Do),r.addEventListener("mousedown",this._onMousedown,Do),r.addEventListener("touchstart",this._onTouchstart,Do)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Do),document.removeEventListener("mousedown",this._onMousedown,Do),document.removeEventListener("touchstart",this._onTouchstart,Do))}static{this.\u0275fac=function(i){return new(i||n)(x(ke),x(G),x(J),x(LO,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Xu=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Xu||{}),BO=new j("cdk-focus-monitor-default-options"),Yu=Sn({passive:!0,capture:!0}),ko=(()=>{class n{constructor(e,i,r,s,o){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new W,this._rootNodeFocusAndBlurListener=a=>{let c=Vt(a);for(let d=c;d;d=d.parentElement)a.type==="focus"?this._onFocus(a,d):this._onBlur(a,d)},this._document=s,this._detectionMode=o?.detectionMode||Xu.IMMEDIATE}monitor(e,i=!1){let r=wt(e);if(!this._platform.isBrowser||r.nodeType!==1)return K();let s=Ro(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;let a={checkChildren:i,subject:new W,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let i=wt(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){let s=wt(e),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===Xu.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===Xu.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?DC:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,i){let r=this._elementInfo.get(i),s=Vt(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Yu),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Yu)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Yu),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Yu),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0}return!1}static{this.\u0275fac=function(i){return new(i||n)(x(G),x(ke),x(jO),x(J,8),x(BO,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ys=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(ys||{}),SC="cdk-high-contrast-black-on-white",AC="cdk-high-contrast-white-on-black",hg="cdk-high-contrast-active",kC=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=A(TC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ys.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ys.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ys.BLACK_ON_WHITE}return ys.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(hg,SC,AC),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===ys.BLACK_ON_WHITE?e.add(hg,SC):i===ys.WHITE_ON_BLACK&&e.add(hg,AC)}}static{this.\u0275fac=function(i){return new(i||n)(x(ke),x(J))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function UO(){return!0}var zO=new j("mat-sanity-checks",{providedIn:"root",factory:UO}),Tt=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return Wl()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(i){return new(i||n)(x(kC),x(zO,8),x(J))}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[Pr,Pr]})}}return n})();var Kl=class{constructor(t,e,i,r,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(r,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var BC=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var zn=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(zn||{}),_g=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=zn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},PC=Sn({passive:!0,capture:!0}),vg=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=Vt(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){let s=this._events.get(e);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,PC)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,PC)))}},MC={enterDuration:225,exitDuration:150},$O=800,OC=Sn({passive:!0,capture:!0}),NC=["mousedown","touchstart"],FC=["mouseup","mouseleave","touchend","touchcancel"],yg=class n{static{this._eventManager=new vg}constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=wt(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=L(L({},MC),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=i.radius||WO(t,e,r),a=t-r.left,c=e-r.top,d=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${a-o}px`,f.style.top=`${c-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f);let m=window.getComputedStyle(f),g=m.transitionProperty,b=m.transitionDuration,E=g==="none"||b==="0s"||b==="0s, 0s"||r.width===0&&r.height===0,M=new _g(this,f,i,E);f.style.transform="scale3d(1, 1, 1)",M.state=zn.FADING_IN,i.persistent||(this._mostRecentTransientRipple=M);let N=null;return!E&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let ce=()=>{N&&(N.fallbackTimer=null),clearTimeout(q),this._finishRippleTransition(M)},le=()=>this._destroyRipple(M),q=setTimeout(le,d+100);f.addEventListener("transitionend",ce),f.addEventListener("transitioncancel",le),N={onTransitionEnd:ce,onTransitionCancel:le,fallbackTimer:q}}),this._activeRipples.set(M,N),(E||!d)&&this._finishRippleTransition(M),M}fadeOutRipple(t){if(t.state===zn.FADING_OUT||t.state===zn.HIDDEN)return;let e=t.element,i=L(L({},MC),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=zn.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=wt(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,NC.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{FC.forEach(e=>{this._triggerElement.addEventListener(e,this,OC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===zn.FADING_IN?this._startFadeOutTransition(t):t.state===zn.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=zn.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=zn.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=Gl(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+$O;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Hl(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===zn.VISIBLE||t.config.terminateOnPointerUp&&t.state===zn.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(NC.forEach(e=>n._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(FC.forEach(e=>t.removeEventListener(e,this,OC)),this._pointerUpEventsRegistered=!1))}};function WO(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var UC=new j("mat-ripple-global-options"),qO=(()=>{class n{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,i,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new yg(this,i,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:L(L(L({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,i,L(L({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,L(L({},this.rippleConfig),e))}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(G),k(ke),k(UC,8),k(sn,8))}}static{this.\u0275dir=te({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&Le("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return n})(),bg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[Tt,Tt]})}}return n})();var GO=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[Tt]})}}return n})();var wg=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[bg,Tt,GO]})}}return n})(),LC={capture:!0},VC=["focus","mousedown","mouseenter","touchstart"],pg="mat-ripple-loader-uninitialized",gg="mat-ripple-loader-class-name",jC="mat-ripple-loader-centered",Ju="mat-ripple-loader-disabled",zC=(()=>{class n{constructor(){this._document=A(J,{optional:!0}),this._animationMode=A(sn,{optional:!0}),this._globalRippleOptions=A(UC,{optional:!0}),this._platform=A(ke),this._ngZone=A(G),this._hosts=new Map,this._onInteraction=e=>{let i=Vt(e);if(i instanceof HTMLElement){let r=i.closest(`[${pg}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}},this._ngZone.runOutsideAngular(()=>{for(let e of VC)this._document?.addEventListener(e,this._onInteraction,LC)})}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);for(let i of VC)this._document?.removeEventListener(i,this._onInteraction,LC)}configureRipple(e,i){e.setAttribute(pg,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(gg))&&e.setAttribute(gg,i.className||""),i.centered&&e.setAttribute(jC,""),i.disabled&&e.setAttribute(Ju,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,i){let r=this._hosts.get(e);if(r){r.disabled=i;return}i?e.setAttribute(Ju,""):e.removeAttribute(Ju)}_createRipple(e){if(!this._document)return;let i=this._hosts.get(e);if(i)return i;e.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(gg)),e.append(r);let s=new qO(new de(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=e,s.centered=e.hasAttribute(jC),s.disabled=e.hasAttribute(Ju),this.attachRipple(e,s),s}attachRipple(e,i){e.removeAttribute(pg),this._hosts.set(e,i)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.ngOnDestroy(),this._hosts.delete(e))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var KO=["notch"],QO=["matFormFieldNotchedOutline",""],YO=["*"],XO=["textField"],ZO=["iconPrefixContainer"],JO=["textPrefixContainer"],eN=["iconSuffixContainer"],tN=["textSuffixContainer"],nN=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],iN=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function rN(n,t){n&1&&he(0,"span",21)}function sN(n,t){if(n&1&&(P(0,"label",20),pt(1,1),Q(2,rN,1,0,"span",21),D()),n&2){let e=B(2);U("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),Oe("for",e._control.disableAutomaticLabeling?null:e._control.id),F(2),$e(!e.hideRequiredMarker&&e._control.required?2:-1)}}function oN(n,t){if(n&1&&Q(0,sN,3,5,"label",20),n&2){let e=B();$e(e._hasFloatingLabel()?0:-1)}}function aN(n,t){n&1&&he(0,"div",7)}function lN(n,t){}function cN(n,t){if(n&1&&Q(0,lN,0,0,"ng-template",13),n&2){B(2);let e=Vd(1);U("ngTemplateOutlet",e)}}function dN(n,t){if(n&1&&(P(0,"div",9),Q(1,cN,1,1,null,13),D()),n&2){let e=B();U("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),F(),$e(e._forceDisplayInfixLabel()?-1:1)}}function uN(n,t){n&1&&(P(0,"div",10,2),pt(2,2),D())}function hN(n,t){n&1&&(P(0,"div",11,3),pt(2,3),D())}function fN(n,t){}function mN(n,t){if(n&1&&Q(0,fN,0,0,"ng-template",13),n&2){B();let e=Vd(1);U("ngTemplateOutlet",e)}}function pN(n,t){n&1&&(P(0,"div",14,4),pt(2,4),D())}function gN(n,t){n&1&&(P(0,"div",15,5),pt(2,5),D())}function _N(n,t){n&1&&he(0,"div",16)}function vN(n,t){if(n&1&&(P(0,"div",18),pt(1,6),D()),n&2){let e=B();U("@transitionMessages",e._subscriptAnimationState)}}function yN(n,t){if(n&1&&(P(0,"mat-hint",22),$(1),D()),n&2){let e=B(2);U("id",e._hintLabelId),F(),Ve(e.hintLabel)}}function bN(n,t){if(n&1&&(P(0,"div",19),Q(1,yN,2,2,"mat-hint",22),pt(2,7),he(3,"div",23),pt(4,8),D()),n&2){let e=B();U("@transitionMessages",e._subscriptAnimationState),F(),$e(e.hintLabel?1:-1)}}var Ii=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=te({type:n,selectors:[["mat-label"]],standalone:!0})}}return n})(),wN=0,XC=new j("MatError"),Po=(()=>{class n{constructor(e,i){this.id=`mat-mdc-error-${wN++}`,e||i.nativeElement.setAttribute("aria-live","polite")}static{this.\u0275fac=function(i){return new(i||n)(rs("aria-live"),k(de))}}static{this.\u0275dir=te({type:n,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(i,r){i&2&&Li("id",r.id)},inputs:{id:"id"},standalone:!0,features:[Qe([{provide:XC,useExisting:n}])]})}}return n})(),EN=0,$C=(()=>{class n{constructor(){this.align="start",this.id=`mat-mdc-hint-${EN++}`}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=te({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){i&2&&(Li("id",r.id),Oe("align",null),Le("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return n})(),CN=new j("MatPrefix");var ZC=new j("MatSuffix"),th=(()=>{class n{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=te({type:n,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[Qe([{provide:ZC,useExisting:n}])]})}}return n})(),JC=new j("FloatingLabelParent"),WC=(()=>{class n{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=A(wC),this._ngZone=A(G),this._parent=A(JC),this._resizeSubscription=new kt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return IN(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(i){return new(i||n)(k(de))}}static{this.\u0275dir=te({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){i&2&&Le("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return n})();function IN(n){let t=n;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let i=e.scrollWidth;return e.remove(),i}var qC="mdc-line-ripple--active",eh="mdc-line-ripple--deactivating",GC=(()=>{class n{constructor(e,i){this._elementRef=e,this._handleTransitionEnd=r=>{let s=this._elementRef.nativeElement.classList,o=s.contains(eh);r.propertyName==="opacity"&&o&&s.remove(qC,eh)},i.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(eh),e.add(qC)}deactivate(){this._elementRef.nativeElement.classList.add(eh)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(G))}}static{this.\u0275dir=te({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return n})(),HC=(()=>{class n{constructor(e,i){this._elementRef=e,this._ngZone=i,this.open=!1}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(G))}}static{this.\u0275cmp=ee({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(i&1&&Ke(KO,5),i&2){let s;Re(s=De())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){i&2&&Le("mdc-notched-outline--notched",r.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[ne],attrs:QO,ngContentSelectors:YO,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,r){i&1&&(Jn(),he(0,"div",1),P(1,"div",2,0),pt(3),D(),he(4,"div",3))},encapsulation:2,changeDetection:0})}}return n})(),TN={transitionMessages:Qd("transitionMessages",[R0("enter",cs({opacity:1,transform:"translateY(0%)"})),tl("void => enter",[cs({opacity:0,transform:"translateY(-5px)"}),el("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},nh=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=te({type:n})}}return n})();var ih=new j("MatFormField"),xN=new j("MAT_FORM_FIELD_DEFAULT_OPTIONS"),KC=0,QC="fill",SN="auto",YC="fixed",AN="translateY(-50%)",Or=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=gs(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||SN}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){let i=this._appearance,r=e||this._defaults?.appearance||QC;this._appearance=r,this._appearance==="outline"&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||YC}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||YC}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,i,r,s,o,a,c,d){this._elementRef=e,this._changeDetectorRef=i,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=c,this._labelChild=s0(Ii),this._hideRequiredMarker=!1,this.color="primary",this._appearance=QC,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${KC++}`,this._hintLabelId=`mat-mdc-hint-${KC++}`,this._subscriptAnimationState="",this._destroyed=new W,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=A(Ae),this.getLabelId=pi(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=pi(()=>!!this._labelChild()),a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let i=this._control,r="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(r+e.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(r+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(dt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),mt(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),Ld(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(dt(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let i=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,r=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,o=this._textSuffixContainer?.nativeElement,a=i?.getBoundingClientRect().width??0,c=r?.getBoundingClientRect().width??0,d=s?.getBoundingClientRect().width??0,f=o?.getBoundingClientRect().width??0,m=this._dir.value==="rtl"?"-1":"1",g=`${a+c}px`,E=`calc(${m} * (${g} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${AN} translateX(${E})
    )`;let M=a+c+d+f;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${M}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(Nt),k(G),k(Un),k(ke),k(xN,8),k(sn,8),k(J))}}static{this.\u0275cmp=ee({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(i&1&&(u0(s,r._labelChild,Ii,5),fr(s,nh,5),fr(s,CN,5),fr(s,ZC,5),fr(s,XC,5),fr(s,$C,5)),i&2){h0();let o;Re(o=De())&&(r._formFieldControl=o.first),Re(o=De())&&(r._prefixChildren=o),Re(o=De())&&(r._suffixChildren=o),Re(o=De())&&(r._errorChildren=o),Re(o=De())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(i&1&&(Ke(XO,5),Ke(ZO,5),Ke(JO,5),Ke(eN,5),Ke(tN,5),Ke(WC,5),Ke(HC,5),Ke(GC,5)),i&2){let s;Re(s=De())&&(r._textField=s.first),Re(s=De())&&(r._iconPrefixContainer=s.first),Re(s=De())&&(r._textPrefixContainer=s.first),Re(s=De())&&(r._iconSuffixContainer=s.first),Re(s=De())&&(r._textSuffixContainer=s.first),Re(s=De())&&(r._floatingLabel=s.first),Re(s=De())&&(r._notchedOutline=s.first),Re(s=De())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){i&2&&Le("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations",r._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[Qe([{provide:ih,useExisting:n},{provide:JC,useExisting:n}]),ne],ngContentSelectors:iN,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(i&1){let s=ge();Jn(nN),Q(0,oN,1,1,"ng-template",null,0,g0),P(2,"div",6,1),H("click",function(a){return X(s),Z(r._control.onContainerClick(a))}),Q(4,aN,1,0,"div",7),P(5,"div",8),Q(6,dN,2,2,"div",9)(7,uN,3,0,"div",10)(8,hN,3,0,"div",11),P(9,"div",12),Q(10,mN,1,1,null,13),pt(11),D(),Q(12,pN,3,0,"div",14)(13,gN,3,0,"div",15),D(),Q(14,_N,1,0,"div",16),D(),P(15,"div",17),Q(16,vN,2,1,"div",18)(17,bN,5,2,"div",19),D()}if(i&2){let s;F(2),Le("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),F(2),$e(!r._hasOutline()&&!r._control.disabled?4:-1),F(2),$e(r._hasOutline()?6:-1),F(),$e(r._hasIconPrefix?7:-1),F(),$e(r._hasTextPrefix?8:-1),F(2),$e(!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),F(2),$e(r._hasTextSuffix?12:-1),F(),$e(r._hasIconSuffix?13:-1),F(),$e(r._hasOutline()?-1:14),F(),Le("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic"),F(),$e((s=r._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[WC,HC,T0,GC,$C],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[TN.transitionMessages]},changeDetection:0})}}return n})(),An=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[Tt,Ne,EC,Tt]})}}return n})();var eI=Sn({passive:!0}),tI=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return ui;let i=wt(e),r=this._monitoredElements.get(i);if(r)return r.subject;let s=new W,o="cdk-text-field-autofilled",a=c=>{c.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(o)?(i.classList.add(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,eI),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,eI)}}),s}stopMonitoring(e){let i=wt(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static{this.\u0275fac=function(i){return new(i||n)(x(ke),x(G))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var nI=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({})}}return n})();var DN=new j("MAT_INPUT_VALUE_ACCESSOR"),kN=["button","checkbox","file","hidden","image","radio","range","reset","submit"],PN=0,Nr=(()=>{class n{get disabled(){return this._disabled}set disabled(e){this._disabled=gs(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(We.required)??!1}set required(e){this._required=gs(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&dg().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=gs(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,i,r,s,o,a,c,d,f,m){this._elementRef=e,this._platform=i,this.ngControl=r,this._autofillMonitor=d,this._ngZone=f,this._formField=m,this._uid=`mat-input-${PN++}`,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new W,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(E=>dg().has(E)),this._iOSKeyupListener=E=>{let M=E.target;!M.value&&M.selectionStart===0&&M.selectionEnd===0&&(M.setSelectionRange(1,1),M.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};let g=this._elementRef.nativeElement,b=g.nodeName.toLowerCase();this._inputValueAccessor=c||g,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&f.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Kl(a,r,o,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=b==="select",this._isTextarea=b==="textarea",this._isInFormField=!!m,this._isNativeSelect&&(this.controlType=g.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){kN.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}else return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(ke),k(ti,10),k(Bl,8),k(qi,8),k(BC),k(DN,10),k(tI),k(G),k(ih,8))}}static{this.\u0275dir=te({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){i&1&&H("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),i&2&&(Li("id",r.id)("disabled",r.disabled)("required",r.required),Oe("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Le("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[Qe([{provide:nh,useExisting:n}]),Et]})}}return n})(),Fr=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[Tt,An,An,nI,Tt]})}}return n})();var MN=["*"],oh;function ON(){if(oh===void 0&&(oh=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(oh=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return oh}function Ql(n){return ON()?.createHTML(n)||n}function iI(n){return Error(`Unable to find icon with the name "${n}"`)}function NN(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function rI(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function sI(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Qi=class{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}},FN=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new Qi(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){let o=this._sanitizer.sanitize(En.HTML,r);if(!o)throw sI(r);let a=Ql(o);return this._addSvgIconConfig(e,i,new Qi("",a,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Qi(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){let s=this._sanitizer.sanitize(En.HTML,i);if(!s)throw sI(i);let o=Ql(s);return this._addSvgIconSetConfig(e,new Qi("",o,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let i=this._sanitizer.sanitize(En.RESOURCE_URL,e);if(!i)throw rI(e);let r=this._cachedIconsByUrl.get(i);return r?K(ah(r)):this._loadSvgIconFromConfig(new Qi(e,null)).pipe(Fe(s=>this._cachedIconsByUrl.set(i,s)),Y(s=>ah(s)))}getNamedSvgIcon(e,i=""){let r=oI(i,e),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(e,o):ns(iI(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?K(ah(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Y(i=>ah(i)))}_getSvgFromIconSetConfigs(e,i){let r=this._extractIconWithNameFromAnySet(e,i);if(r)return K(r);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(lr(a=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(En.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(d)),K(null)})));return Rd(s).pipe(Y(()=>{let o=this._extractIconWithNameFromAnySet(e,i);if(!o)throw iI(e);return o}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){let s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){let o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Fe(i=>e.svgText=i),Y(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?K(null):this._fetchIcon(e).pipe(Fe(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){let s=e.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let a=this._svgElementFromString(Ql("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){let i=this._document.createElement("DIV");i.innerHTML=e;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let i=this._svgElementFromString(Ql("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){let{name:o,value:a}=r[s];o!=="id"&&i.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){let{url:i,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw NN();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(En.RESOURCE_URL,i);if(!o)throw rI(i);let a=this._inProgressUrlFetches.get(o);if(a)return a;let c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Y(d=>Ql(d)),dr(()=>this._inProgressUrlFetches.delete(o)),kd());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(oI(e,i),r),this}_addSvgIconSetConfig(e,i){let r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){let i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](i,e);if(s)return LN(s)?new Qi(s.url,null,s.options):new Qi(s,null)}}static{this.\u0275fac=function(i){return new(i||n)(x(Ui,8),x(mp),x(J,8),x(ss))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ah(n){return n.cloneNode(!0)}function oI(n,t){return n+":"+t}function LN(n){return!!(n.url&&n.options)}var VN=new j("MAT_ICON_DEFAULT_OPTIONS"),jN=new j("mat-icon-location",{providedIn:"root",factory:BN});function BN(){let n=A(J),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var aI=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],UN=aI.map(n=>`[${n}]`).join(", "),zN=/^url\(['"]?#(.*?)['"]?\)$/,lh=(()=>{class n{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(e,i,r,s,o,a){this._elementRef=e,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=kt.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=e.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){let i=e.querySelectorAll(UN),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)aI.forEach(o=>{let a=i[s],c=a.getAttribute(o),d=c?c.match(zN):null;if(d){let f=r.get(a);f||(f=[],r.set(a,f)),f.push({name:o,value:d[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Pt(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(FN),rs("aria-hidden"),k(jN),k(ss),k(VN,8))}}static{this.\u0275cmp=ee({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Oe("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Ja(r.color?"mat-"+r.color:""),Le("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Xe],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Ot,ne],ngContentSelectors:MN,decls:1,vars:0,template:function(i,r){i&1&&(Jn(),pt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return n})(),ch=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[Tt,Tt]})}}return n})();var $N=["mat-button",""],WN=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],qN=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var GN=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var HN=["mat-icon-button",""],KN=["*"];var QN=new j("MAT_BUTTON_CONFIG");var YN=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],cI=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,i,r,s){this._elementRef=e,this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=A(ko),this._rippleLoader=A(zC),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let o=A(QN,{optional:!0}),a=e.nativeElement,c=a.classList;this.disabledInteractive=o?.disabledInteractive??!1,this.color=o?.color??null,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:f}of YN)a.hasAttribute(d)&&c.add(...f)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(i){Zs()}}static{this.\u0275dir=te({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Xe],disabled:[2,"disabled","disabled",Xe],ariaDisabled:[2,"aria-disabled","ariaDisabled",Xe],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Xe]},features:[Ot]})}}return n})();var dI=(()=>{class n extends cI{constructor(e,i,r,s){super(e,i,r,s)}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(ke),k(G),k(sn,8))}}static{this.\u0275cmp=ee({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Oe("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Ja(r.color?"mat-"+r.color:""),Le("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ot,ne],attrs:$N,ngContentSelectors:qN,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Jn(WN),he(0,"span",0),pt(1),P(2,"span",1),pt(3,1),D(),pt(4,2),he(5,"span",2)(6,"span",3)),i&2&&Le("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})();var dh=(()=>{class n extends cI{constructor(e,i,r,s){super(e,i,r,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(ke),k(G),k(sn,8))}}static{this.\u0275cmp=ee({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Oe("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Ja(r.color?"mat-"+r.color:""),Le("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ot,ne],attrs:HN,ngContentSelectors:KN,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Jn(),he(0,"span",0),pt(1),he(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color, var(--mat-app-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',GN],encapsulation:2,changeDetection:0})}}return n})();var Mo=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[Tt,bg,Tt]})}}return n})();var XN=(n,t)=>({error:n,note:t});function ZN(n,t){if(n&1&&(P(0,"div",1),$(1),D()),n&2){let e=B();U("@fade",void 0)("ngClass",pr(3,XN,e.type=="error",e.type=="note")),F(),Cn(" ",e.message," ")}}var jt=class n{message="";duration=2500;visible=!1;type="";setValues(t,e,i=2e3){this.message=t,this.type=e,this.duration=i}ngOnInit(){this.message&&this.show()}show(){this.message&&this.type&&this.duration&&(this.visible=!0,setTimeout(()=>{this.hide()},this.duration))}hide(){this.visible=!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-notification"]],standalone:!0,features:[ne],decls:1,vars:1,consts:[["class","notification",3,"ngClass",4,"ngIf"],[1,"notification",3,"ngClass"]],template:function(e,i){e&1&&Q(0,ZN,2,6,"div",0),e&2&&U("ngIf",i.visible)},dependencies:[Ne,Ft,ut],styles:[".notification[_ngcontent-%COMP%]{position:fixed;top:20px;left:50%;transform:translate(-50%);color:#fff;padding:15px;border-radius:5px;z-index:1000;box-shadow:0 2px 10px #0003}.error[_ngcontent-%COMP%]{background-color:#f44336}.note[_ngcontent-%COMP%]{background-color:#bf5ea5}"],data:{animation:[Qd("fade",[tl(":enter",[cs({opacity:0}),el("300ms",cs({opacity:1}))]),tl(":leave",[el("300ms",cs({opacity:0}))])])]}})};var Ti=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-loader"]],standalone:!0,features:[ne],decls:1,vars:0,consts:[[1,"loader"]],template:function(e,i){e&1&&he(0,"div",0)},styles:['.loader[_ngcontent-%COMP%]{width:50px;aspect-ratio:1;display:grid;-webkit-mask:conic-gradient(from 15deg,rgba(0,0,0,0),#000);animation:_ngcontent-%COMP%_l26 1s infinite steps(12)}.loader[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{background:radial-gradient(closest-side at 50% 12.5%,#f03355 96%,#0000) 50% 0/20% 80% repeat-y,radial-gradient(closest-side at 12.5% 50%,#f03355 96%,#0000) 0 50%/80% 20% repeat-x}.loader[_ngcontent-%COMP%]:before, .loader[_ngcontent-%COMP%]:after{content:"";grid-area:1/1;transform:rotate(30deg)}.loader[_ngcontent-%COMP%]:after{transform:rotate(60deg)}@keyframes _ngcontent-%COMP%_l26{to{transform:rotate(1turn)}}']})};var uh=class{constructor(t,e,i,r,s,o){this.displayName=t;this.email=e;this.localId=i;this._token=r;this._refreshToken=s;this._expiresIn=o}get token(){return!this._expiresIn||this._expiresIn<new Date?null:this._token}};var Kt=class n{url="https://us-central1-taskboard-eb7da.cloudfunctions.net/api";mode=new vt("user");selectedUser;changeRole(t){console.log(t),this.mode.next(t)}constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Je=class n{http=A(Ui);dataService=A(Kt);router=A(Lt);user;getUser(){if(!this.user){let t=localStorage.getItem("user");t&&(this.user=JSON.parse(t),this.dataService.changeRole("user"))}}handleUser(t){let e=new Date().getTime()+ +t.expiresIn*1e3,i=new Date(e),r=new uh(t.displayName,t.email,t.localId,t.idToken,t.refreshToken,i);this.user=r,this.dataService.changeRole("user"),localStorage.setItem("user",JSON.stringify(r)),this.user=r}register(t,e){let i={email:t.trim(),password:e.trim(),login:"Ann",returnSecureToken:!0};return this.http.post(`${this.dataService.url}/user/register`,i).pipe(Y(()=>({success:!0})))}login(t,e){let i={email:t.trim(),password:e.trim(),returnSecureToken:!0};return this.http.post(`${this.dataService.url}/user/login`,i).pipe(Fe(r=>{this.handleUser(r)}))}email(t){return this.http.post(`${this.dataService.url}/user/email`,{email:t})}logout(){localStorage.removeItem("user"),this.user=null,this.router.navigate(["/login"])}constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Oo=class n{errors=[{error:"EMAIL_EXISTS",message:"The email address is already in use by another account."},{error:"OPERATION_NOT_ALLOWED",message:"Password sign-in is disabled for this project."},{error:"TOO_MANY_ATTEMPTS_TRY_LATER",message:"We have blocked all requests from this device due to unusual activity. Try again later."},{error:"EMAIL_NOT_FOUND",message:"There is no user record corresponding to this identifier. The user may have been deleted."},{error:"INVALID_PASSWORD",message:"The password is invalid or the user does not have a password."},{error:"USER_DISABLED",message:"The user account has been disabled by an administrator."},{error:"INVALID_LOGIN_CREDENTIALS",message:"The password or email is invalid"}];constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var JN="firebase",e1="10.14.1";Ze(JN,e1,"app");var dn=new no("ANGULARFIRE2_VERSION");function Fo(n,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===e);if(s.length===1)return s[0]}return e.container.getProvider(n).getImmediate({optional:!0})}var ws=(n,t)=>{let e=t?[t]:su(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Rn=class{constructor(){return ws(t1)}},t1="app-check";function No(){}var hh=class{zone;delegate;constructor(t,e=Lw){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,i)}},Cg=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",No,{},No,No)),e.pipe(Fe({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},$n=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new hh(Zone.current)),this.insideAngular=e.run(()=>new hh(Zone.current,xd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(x(G))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fh(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function n1(n){return fh().ngZone.runOutsideAngular(()=>n())}function bs(n){return fh().ngZone.run(()=>n())}function xi(n){return i1(fh())(n)}function i1(n){return function(e){return e=e.lift(new Cg(n.ngZone)),e.pipe(ts(n.outsideAngular),ar(n.insideAngular))}}var r1=(n,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),bs(()=>n.apply(void 0,i))},Lr=(n,t)=>function(){let e,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(t&&(e||=bs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",No,{},No,No))),i[s]=r1(i[s],e));let r=n1(()=>n.apply(this,i));if(!t)if(r instanceof nt){let s=fh();return r.pipe(ts(s.outsideAngular),ar(s.insideAngular))}else return bs(()=>r);return r instanceof nt?r.pipe(xi):r instanceof Promise?bs(()=>new Promise((s,o)=>r.then(a=>bs(()=>s(a)),a=>bs(()=>o(a))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:bs(()=>r)};var s1="firebase",o1="10.14.1";gn.registerVersion(s1,o1,"app-compat");var a1=["ngOnDestroy"],fI=(n,t,e,i={})=>new Proxy(n,{get:(r,s)=>e.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(a1.indexOf(s)>-1)return()=>{};let o=t.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(d=>e.run(()=>d)):e.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,d)=>o.then(f=>{let m=f?.(...d);return i?.spy?.apply&&i.spy.apply(s,d,m),m})})})});var mh=class{constructor(t){return t}},Lo=new j("angularfire2.app.options"),Vo=new j("angularfire2.app.name");function Yl(n,t,e){let i=typeof e=="string"&&e||"[DEFAULT]",r=typeof e=="object"&&e||{};r.name=r.name||i;let o=gn.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>gn.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;l1("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new mh(o)}var l1=(n,...t)=>{Xm()&&typeof console<"u"&&console[n](...t)},c1={provide:mh,useFactory:Yl,deps:[Lo,G,[new rt,Vo]]},mI=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:Lo,useValue:e},{provide:Vo,useValue:i}]}}constructor(e){gn.registerVersion("angularfire",dn.full,"core"),gn.registerVersion("angularfire",dn.full,"app-compat"),gn.registerVersion("angular",jd.full,e.toString())}static \u0275fac=function(i){return new(i||n)(x(Mt))};static \u0275mod=oe({type:n});static \u0275inj=se({providers:[c1]})}return n})();function ph(n,t,e,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return d1(r,o)||(hI("error",`${t} was already initialized on the ${e} Firebase App with different settings.${u1?" You may need to reload as Firebase is not HMR aware.":""}`),hI("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function d1(n,t){try{return n.toString()===t.toString()}catch{return n===t}}var u1=typeof module<"u"&&!!module.hot,hI=(n,...t)=>{Xm()&&typeof console<"u"&&console[n](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var ii=class{constructor(t){return t}},Yi=class{constructor(){return su()}};function h1(n){return n&&n.length===1?n[0]:new ii(br())}var Ig=new j("angularfire2._apps"),f1={provide:ii,useFactory:h1,deps:[[new rt,Ig]]},m1={provide:Yi,deps:[[new rt,Ig]]};function p1(n){return(t,e)=>{let i=e.get(Mt);Ze("angularfire",dn.full,"core"),Ze("angularfire",dn.full,"app"),Ze("angular",jd.full,i.toString());let r=t.runOutsideAngular(()=>n(e));return new ii(r)}}function pI(n,...t){return rn([f1,m1,{provide:Ig,useFactory:p1(n),multi:!0,deps:[G,Ae,$n,...t]}])}var gI=Lr(P0,!0);var g1=new Map,_1={activated:!1,tokenObservers:[]},v1={initialized:!1,enabled:!1};function ri(n){return g1.get(n)||Object.assign({},_1)}function wI(){return v1}var y1="https://content-firebaseappcheck.googleapis.com/v1";var b1="exchangeDebugToken",_I={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},wH=24*60*60*1e3;var xg=class{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return ft(this,null,function*(){this.stop();try{this.pending=new gt,this.pending.promise.catch(e=>{}),yield w1(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new gt,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function w1(n){return new Promise(t=>{setTimeout(t,n)})}var E1={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vr=new k0("appCheck","AppCheck",E1);function EI(n){if(!ri(n).activated)throw Vr.create("use-before-activation",{appName:n.name})}function CI(i,r){return ft(this,arguments,function*({url:n,body:t},e){let s={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){let b=yield o.getHeartbeatsHeader();b&&(s["X-Firebase-Client"]=b)}let a={method:"POST",body:JSON.stringify(t),headers:s},c;try{c=yield fetch(n,a)}catch(b){throw Vr.create("fetch-network-error",{originalErrorMessage:b?.message})}if(c.status!==200)throw Vr.create("fetch-status-error",{httpStatus:c.status});let d;try{d=yield c.json()}catch(b){throw Vr.create("fetch-parse-error",{originalErrorMessage:b?.message})}let f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw Vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let m=Number(f[1])*1e3,g=Date.now();return{token:d.token,expireTimeMillis:g+m,issuedAtTimeMillis:g}})}function II(n,t){let{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${y1}/projects/${e}/apps/${i}:${b1}?key=${r}`,body:{debug_token:t}}}var C1="firebase-app-check-database",I1=1,Sg="firebase-app-check-store";var gh=null;function T1(){return gh||(gh=new Promise((n,t)=>{try{let e=indexedDB.open(C1,I1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Vr.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},e.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Sg,{keyPath:"compositeKey"})}}}catch(e){t(Vr.create("storage-open",{originalErrorMessage:e?.message}))}}),gh)}function x1(n,t){return S1(A1(n),t)}function S1(n,t){return ft(this,null,function*(){let i=(yield T1()).transaction(Sg,"readwrite"),s=i.objectStore(Sg).put({compositeKey:n,value:t});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var d;a(Vr.create("storage-set",{originalErrorMessage:(d=c.target.error)===null||d===void 0?void 0:d.message}))}})})}function A1(n){return`${n.options.appId}-${n.name}`}var Ag=new vi("@firebase/app-check");function Tg(n,t){return Zm()?x1(n,t).catch(e=>{Ag.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function TI(){return wI().enabled}function xI(){return ft(this,null,function*(){let n=wI();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var R1={error:"UNKNOWN_ERROR"};function D1(n){return so.encodeString(JSON.stringify(n),!1)}function Rg(n,t=!1){return ft(this,null,function*(){let e=n.app;EI(e);let i=ri(e),r=i.token,s;if(r&&!Xl(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(Xl(c)?r=c:yield Tg(e,void 0))}if(!t&&r&&Xl(r))return{token:r.token};let o=!1;if(TI()){i.exchangeTokenPromise||(i.exchangeTokenPromise=CI(II(e,yield xI()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let c=yield i.exchangeTokenPromise;return yield Tg(e,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield ri(e).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Ag.warn(c.message):Ag.error(c),s=c}let a;return r?s?Xl(r)?a={token:r.token,internalError:s}:a=yI(s):(a={token:r.token},i.token=r,yield Tg(e,r)):a=yI(s),o&&O1(e,a),a})}function k1(n){return ft(this,null,function*(){let t=n.app;EI(t);let{provider:e}=ri(t);if(TI()){let i=yield xI(),{token:r}=yield CI(II(t,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield e.getToken();return{token:i}}})}function P1(n,t,e,i){let{app:r}=n,s=ri(r),o={next:e,error:i,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Xl(s.token)){let a=s.token;Promise.resolve().then(()=>{e({token:a.token}),vI(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>vI(n))}function SI(n,t){let e=ri(n),i=e.tokenObservers.filter(r=>r.next!==t);i.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function vI(n){let{app:t}=n,e=ri(t),i=e.tokenRefresher;i||(i=M1(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function M1(n){let{app:t}=n;return new xg(()=>ft(this,null,function*(){let e=ri(t),i;if(e.token?i=yield Rg(n,!0):i=yield Rg(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let e=ri(t);if(e.token){let i=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,r=e.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},_I.RETRIAL_MIN_WAIT,_I.RETRIAL_MAX_WAIT)}function O1(n,t){let e=ri(n).tokenObservers;for(let i of e)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function Xl(n){return n.expireTimeMillis-Date.now()>0}function yI(n){return{token:D1(R1),error:n}}var Dg=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=ri(this.app);for(let e of t)SI(this.app,e.next);return Promise.resolve()}};function N1(n,t){return new Dg(n,t)}function F1(n){return{getToken:t=>Rg(n,t),getLimitedUseToken:()=>k1(n),addTokenListener:t=>P1(n,"INTERNAL",t),removeTokenListener:t=>SI(n.app,t)}}var L1="@firebase/app-check",V1="0.8.8";var j1="app-check",bI="app-check-internal";function B1(){ji(new In(j1,n=>{let t=n.getProvider("app").getImmediate(),e=n.getProvider("heartbeat");return N1(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(bI).initialize()})),ji(new In(bI,n=>{let t=n.getProvider("app-check").getImmediate();return F1(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ze(L1,V1)}B1();var U1=["localhost","0.0.0.0","127.0.0.1"],MH=typeof window<"u"&&U1.includes(window.location.hostname);var kg=new j("angularfire2.auth.use-emulator"),Pg=new j("angularfire2.auth.settings"),Mg=new j("angularfire2.auth.tenant-id"),Og=new j("angularfire2.auth.langugage-code"),Ng=new j("angularfire2.auth.use-device-language"),Fg=new j("angularfire.auth.persistence"),Lg=(n,t,e,i,r,s,o,a)=>ph(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=t.runOutsideAngular(()=>n.auth());if(e&&c.useEmulator(...e),i&&(c.tenantId=i),c.languageCode=r,s&&c.useDeviceLanguage(),o)for(let[d,f]of Object.entries(o))c.settings[d]=f;return a&&c.setPersistence(a),c},[e,i,r,s,o,a]),RI=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,s,o,a,c,d,f,m,g,b){let E=new W,M=K(void 0).pipe(ar(o.outsideAngular),He(()=>s.runOutsideAngular(()=>import("./chunk-G5YIBF5W.js"))),Y(()=>Yl(e,s,i)),Y(N=>Lg(N,s,a,d,f,m,c,g)),Qs({bufferSize:1,refCount:!1}));if(ro(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=K(null);else{M.pipe(hi()).subscribe();let N=M.pipe(He(q=>q.getRedirectResult().then(Se=>Se,()=>null)),xi,Qs({bufferSize:1,refCount:!1})),ce=M.pipe(He(q=>new nt(Se=>({unsubscribe:s.runOutsideAngular(()=>q.onAuthStateChanged(tt=>Se.next(tt),tt=>Se.error(tt),()=>Se.complete()))})))),le=M.pipe(He(q=>new nt(Se=>({unsubscribe:s.runOutsideAngular(()=>q.onIdTokenChanged(tt=>Se.next(tt),tt=>Se.error(tt),()=>Se.complete()))}))));this.authState=N.pipe(qm(ce),ts(o.outsideAngular),ar(o.insideAngular)),this.user=N.pipe(qm(le),ts(o.outsideAngular),ar(o.insideAngular)),this.idToken=this.user.pipe(He(q=>q?yt(q.getIdToken()):K(null))),this.idTokenResult=this.user.pipe(He(q=>q?yt(q.getIdTokenResult()):K(null))),this.credential=mt(N,E,this.authState.pipe(it(q=>!q))).pipe(Y(q=>q?.user?q:null),ts(o.outsideAngular),ar(o.insideAngular))}return fI(this,M,s,{spy:{apply:(N,ce,le)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&le.then(q=>E.next(q))}}})}static \u0275fac=function(i){return new(i||n)(x(Lo),x(Vo,8),x(Mt),x(G),x($n),x(kg,8),x(Pg,8),x(Mg,8),x(Og,8),x(Ng,8),x(Fg,8),x(Rn,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var DI="@firebase/database",kI="1.0.8";var Q_="";function Y_(n){Q_=n}var qg=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),_e(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:vr(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var Gg=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return ht(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var lT=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new qg(t)}}catch{}return new Gg},Cs=lT("localStorage"),Hg=lT("sessionStorage");var zo=new vi("@firebase/database"),cT=function(){let n=1;return function(){return n++}}(),dT=function(n){let t=iu(n),e=new nu;e.update(t);let i=e.digest();return so.encodeByteArray(i)},wc=function(...n){let t="";for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=wc.apply(null,i):typeof i=="object"?t+=_e(i):t+=i,t+=" "}return t},Is=null,PI=!0,uT=function(n,t){S(!t||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(zo.logLevel=yr.VERBOSE,Is=zo.log.bind(zo),t&&Hg.set("logging_enabled",!0)):typeof n=="function"?Is=n:(Is=null,Hg.remove("logging_enabled"))},St=function(...n){if(PI===!0&&(PI=!1,Is===null&&Hg.get("logging_enabled")===!0&&uT(!0)),Is){let t=wc.apply(null,n);Is(t)}},Ec=function(n){return function(...t){St(n,...t)}},Kg=function(...n){let t="FIREBASE INTERNAL ERROR: "+wc(...n);zo.error(t)},Ri=function(...n){let t=`FIREBASE FATAL ERROR: ${wc(...n)}`;throw zo.error(t),new Error(t)},Qt=function(...n){let t="FIREBASE WARNING: "+wc(...n);zo.warn(t)},$1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Wh=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},W1=function(n){if(bt()||document.readyState==="complete")n();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},zr="[MIN_NAME]",Xi="[MAX_NAME]",xs=function(n,t){if(n===t)return 0;if(n===zr||t===Xi)return-1;if(t===zr||n===Xi)return 1;{let e=MI(n),i=MI(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},q1=function(n,t){return n===t?0:n<t?-1:1},Zl=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+_e(t))},X_=function(n){if(typeof n!="object"||n===null)return _e(n);let t=[];for(let i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=_e(t[i]),e+=":",e+=X_(n[t[i]]);return e+="}",e},hT=function(n,t){let e=n.length;if(e<=t)return[n];let i=[];for(let r=0;r<e;r+=t)r+t>e?i.push(n.substring(r,e)):i.push(n.substring(r,r+t));return i};function At(n,t){for(let e in n)n.hasOwnProperty(e)&&t(e,n[e])}var fT=function(n){S(!Wh(n),"Invalid JSON number");let t=11,e=52,i=(1<<t-1)-1,r,s,o,a,c;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,e-a)-Math.pow(2,e))):(s=0,o=Math.round(n/Math.pow(2,1-i-e))));let d=[];for(c=e;c;c-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();let f=d.join(""),m="";for(c=0;c<64;c+=8){let g=parseInt(f.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),m=m+g}return m.toLowerCase()},G1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},H1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function K1(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");let i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}var Q1=new RegExp("^-?(0*)\\d{1,10}$"),Y1=-2147483648,X1=2147483647,MI=function(n){if(Q1.test(n)){let t=Number(n);if(t>=Y1&&t<=X1)return t}return null},Xo=function(n){try{n()}catch(t){setTimeout(()=>{let e=t.stack||"";throw Qt("Exception was thrown by user callback.",e),t},Math.floor(0))}},Z1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},nc=function(n,t){let e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var Qg=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Qt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Yg=class{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(St("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qt(t)}},ic=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),vh="5",mT="v",pT="s",gT="r",_T="f",vT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yT="ls",bT="p",Xg="ac",wT="websocket",ET="long_polling";var yh=class{constructor(t,e,i,r,s=!1,o="",a=!1,c=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cs.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Cs.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function J1(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function CT(n,t,e){S(typeof t=="string","typeof type must == string"),S(typeof e=="object","typeof params must == object");let i;if(t===wT)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===ET)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);J1(n)&&(e.ns=n.namespace);let r=[];return At(e,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var Zg=class{constructor(){this.counters_={}}incrementCounter(t,e=1){ht(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return Xd(this.counters_)}};var Vg={},jg={};function Z_(n){let t=n.toString();return Vg[t]||(Vg[t]=new Zg),Vg[t]}function eF(n,t){let e=n.toString();return jg[e]||(jg[e]=t()),jg[e]}var Jg=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Xo(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var OI="start",tF="close",nF="pLPCommand",iF="pRTLPCB",IT="id",TT="pw",xT="ser",rF="cb",sF="seg",oF="ts",aF="d",lF="dframe",ST=1870,AT=30,cF=ST-AT,dF=25e3,uF=3e4,ac=class n{constructor(t,e,i,r,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ec(t),this.stats_=Z_(e),this.urlFn=c=>(this.appCheckToken&&(c[Xg]=this.appCheckToken),CT(e,ET,c))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Jg(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uF)),W1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new e_((...s)=>{let[o,a,c,d,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===OI)this.id=a,this.password=c;else if(o===tF)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[OI]="t",i[xT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[rF]=this.scriptTagHolder.uniqueCallbackIdentifier),i[mT]=vh,this.transportSessionId&&(i[pT]=this.transportSessionId),this.lastSessionId&&(i[yT]=this.lastSessionId),this.applicationId&&(i[bT]=this.applicationId),this.appCheckToken&&(i[Xg]=this.appCheckToken),typeof location<"u"&&location.hostname&&vT.test(location.hostname)&&(i[gT]=_T);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return bt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!G1()&&!H1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=_e(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let i=Yd(e),r=hT(i,cF);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(bt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[lF]="t",i[IT]=t,i[TT]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=_e(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},e_=class n{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,bt())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=cT(),window[nF+this.uniqueCallbackIdentifier]=t,window[iF+this.uniqueCallbackIdentifier]=e,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){St("frame writing exception"),a.stack&&St(a.stack),St(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||St("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[IT]=this.myID,t[TT]=this.myPW,t[xT]=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+AT+i.length<=ST;){let o=this.pendingSegs.shift();i=i+"&"+sF+r+"="+o.seg+"&"+oF+r+"="+o.ts+"&"+aF+r+"="+o.d,r++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(dF)),s=()=>{clearTimeout(r),i()};this.addTag(t,s)}addTag(t,e){bt()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{St("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var hF=16384,fF=45e3,bh=null;typeof MozWebSocket<"u"?bh=MozWebSocket:typeof WebSocket<"u"&&(bh=WebSocket);var Bo=(()=>{class n{constructor(e,i,r,s,o,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ec(this.connId),this.stats_=Z_(i),this.connURL=n.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,o){let a={};return a[mT]=vh,!bt()&&typeof location<"u"&&location.hostname&&vT.test(location.hostname)&&(a[gT]=_T),i&&(a[pT]=i),r&&(a[yT]=r),s&&(a[Xg]=s),o&&(a[bT]=o),CT(e,wT,a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cs.set("previous_websocket_failure",!0);try{let r;if(bt()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${vh}/${Q_}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new bh(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&bh!==null&&!n.forceDisallow_}static previouslyFailed(){return Cs.isInMemoryStorage||Cs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Cs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=vr(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){let i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();let i=_e(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=hT(i,hF);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(fF))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),RT=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ac,Bo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let i=Bo&&Bo.isAvailable(),r=i&&!Bo.previouslyFailed();if(e.webSocketOnly&&(i||Qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Bo];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),mF=6e4,pF=5e3,gF=10*1024,_F=100*1024,Bg="t",NI="d",vF="s",FI="r",yF="e",LI="o",VI="a",jI="n",BI="p",bF="h",t_=class{constructor(t,e,i,r,s,o,a,c,d,f){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ec("c:"+this.id+":"),this.transportManager_=new RT(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=nc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_F?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Bg in t){let e=t[Bg];e===VI?this.upgradeIfSecondaryHealthy_():e===FI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===LI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=Zl("t",t),i=Zl("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:BI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:VI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:jI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=Zl("t",t),i=Zl("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=Zl(Bg,t);if(NI in t){let i=t[NI];if(e===bF){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(e===jI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===vF?this.onConnectionShutdown_(i):e===FI?this.onReset_(i):e===yF?Kg("Server Error: "+i):e===LI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Kg("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),vh!==i&&Qt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),nc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(mF))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pF))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:BI,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var wh=class{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}};var Eh=class{constructor(t){this.allowedEvents_=t,this.listeners_={},S(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});let r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(t){S(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var Ch=class n extends Eh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ao()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(t){return S(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var UI=32,zI=768,xe=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function Te(){return new xe("")}function me(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $r(n){return n.pieces_.length-n.pieceNum_}function Ue(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new xe(n.pieces_,t)}function J_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function wF(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function lc(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function DT(n){if(n.pieceNum_>=n.pieces_.length)return null;let t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new xe(t,0)}function et(n,t){let e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof xe)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new xe(e,0)}function pe(n){return n.pieceNum_>=n.pieces_.length}function un(n,t){let e=me(n),i=me(t);if(e===null)return t;if(e===i)return un(Ue(n),Ue(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function EF(n,t){let e=lc(n,0),i=lc(t,0);for(let r=0;r<e.length&&r<i.length;r++){let s=xs(e[r],i[r]);if(s!==0)return s}return e.length===i.length?0:e.length<i.length?-1:1}function ev(n,t){if($r(n)!==$r(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function Wn(n,t){let e=n.pieceNum_,i=t.pieceNum_;if($r(n)>$r(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}var n_=class{constructor(t,e){this.errorPrefix_=e,this.parts_=lc(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=_i(this.parts_[i]);kT(this)}};function CF(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=_i(t),kT(n)}function IF(n){let t=n.parts_.pop();n.byteLength_-=_i(t),n.parts_.length>0&&(n.byteLength_-=1)}function kT(n){if(n.byteLength_>zI)throw new Error(n.errorPrefix_+"has a key path longer than "+zI+" bytes ("+n.byteLength_+").");if(n.parts_.length>UI)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+UI+") or object contains a cycle "+Es(n))}function Es(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var i_=class n extends Eh{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(t){return S(t==="visible","Unknown event type: "+t),[this.visible_]}};var Jl=1e3,TF=60*5*1e3,$I=30*1e3,xF=1.3,SF=3e4,AF="server_kill",WI=3,tv=(()=>{class n extends wh{constructor(e,i,r,s,o,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=n.nextPersistentConnectionId_++,this.log_=Ec("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jl,this.maxReconnectDelay_=TF,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!bt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");i_.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ch.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){let s=++this.requestNumber_,o={r:s,a:e,b:i};this.log_(_e(o)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();let i=new gt,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(e,i,r,s){this.initConnection_();let o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){let i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){let i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,c=>{let d=c.d,f=c.s;n.warnOnListenWarnings_(d,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(f,d))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&ht(e,"w")){let r=on(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Qt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||eu(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$I)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,i=Jd(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let i=e.s,r=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){let r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);let o={p:e},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(e){let i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){let i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+_e(e));let i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):Kg("Unrecognized action received from server: "+_e(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>SF&&(this.reconnectDelay_=Jl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*xF)}this.onConnectStatus_(!1)}establishConnection_(){return ft(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,d=function(){c?c.close():(a=!0,r())},f=function(g){S(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:d,sendRequest:f};let m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,b]=yield Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?St("getToken() completed but was canceled"):(St("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=b&&b.token,c=new t_(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,r,E=>{Qt(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(AF)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Qt(g),d())}}})}interrupt(e){St("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){St("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ds(this.interruptReasons_)&&(this.reconnectDelay_=Jl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;i?r=i.map(o=>X_(o)).join("$"):r="default";let s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){let r=new xe(e).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){St("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=WI&&(this.reconnectDelay_=$I,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){St("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=WI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},i="js";bt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),e["sdk."+i+"."+Q_.replace(/\./g,"-")]=1,ao()?e["framework.cordova"]=1:Zd()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=Ch.getInstance().currentlyOnline();return ds(this.interruptReasons_)&&e}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),ve=class n{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new n(t,e)}};var $o=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let i=new ve(zr,t),r=new ve(zr,e);return this.compare(i,r)!==0}minPost(){return ve.MIN}};var _h,Ih=class extends $o{static get __EMPTY_NODE(){return _h}static set __EMPTY_NODE(t){_h=t}compare(t,e){return xs(t.name,e.name)}isDefinedOn(t){throw Vn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return ve.MIN}maxPost(){return new ve(Xi,_h)}makePost(t,e){return S(typeof t=="string","KeyIndex indexValue must always be a string."),new ve(t,_h)}toString(){return".key"}},Ai=new Ih;var Uo=class{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?i(t.key,e):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},si=(()=>{class n{constructor(e,i,r,s,o){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??qn.EMPTY_NODE,this.right=o??qn.EMPTY_NODE}copy(e,i,r,s,o){return new n(e??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this,o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return qn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(e,r.key)===0){if(r.right.isEmpty())return qn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),r_=class{copy(t,e,i,r,s){return this}insert(t,e,i){return new si(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},qn=class n{constructor(t,e=n.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,si.BLACK,null,null))}remove(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,si.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Uo(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Uo(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Uo(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Uo(this.root_,null,this.comparator_,!0,t)}};qn.EMPTY_NODE=new r_;function RF(n,t){return xs(n.name,t.name)}function nv(n,t){return xs(n,t)}var s_;function DF(n){s_=n}var PT=function(n){return typeof n=="number"?"number:"+fT(n):"string:"+n},MT=function(n){if(n.isLeafNode()){let t=n.val();S(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ht(t,".sv"),"Priority must be a string or number.")}else S(n===s_||n.isEmpty(),"priority of unexpected type.");S(n===s_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var qI,Wo=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),MT(this.priorityNode_)}static set __childrenNodeConstructor(e){qI=e}static get __childrenNodeConstructor(){return qI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pe(e)?this:me(e)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){let r=me(e);return r===null?i:i.isEmpty()&&r!==".priority"?this:(S(r!==".priority"||$r(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ue(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+PT(this.priorityNode_.val())+":");let i=typeof this.value_;e+=i+":",i==="number"?e+=fT(this.value_):e+=this.value_,this.lazyHash_=dT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return S(s>=0,"Unknown leaf type: "+i),S(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),OT,NT;function kF(n){OT=n}function PF(n){NT=n}var o_=class extends $o{compare(t,e){let i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return s===0?xs(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return ve.MIN}maxPost(){return new ve(Xi,new Wo("[PRIORITY-POST]",NT))}makePost(t,e){let i=OT(t);return new ve(e,new Wo("[PRIORITY-POST]",i))}toString(){return".priority"}},qe=new o_;var MF=Math.log(2),a_=class{constructor(t){let e=s=>parseInt(Math.log(s)/MF,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Th=function(n,t,e,i){n.sort(t);let r=function(c,d){let f=d-c,m,g;if(f===0)return null;if(f===1)return m=n[c],g=e?e(m):m,new si(g,m.node,si.BLACK,null,null);{let b=parseInt(f/2,10)+c,E=r(c,b),M=r(b+1,d);return m=n[b],g=e?e(m):m,new si(g,m.node,si.BLACK,E,M)}},s=function(c){let d=null,f=null,m=n.length,g=function(E,M){let N=m-E,ce=m;m-=E;let le=r(N+1,ce),q=n[N],Se=e?e(q):q;b(new si(Se,q.node,M,null,le))},b=function(E){d?(d.left=E,d=E):(f=E,d=E)};for(let E=0;E<c.count;++E){let M=c.nextBitIsOne(),N=Math.pow(2,c.count-(E+1));M?g(N,si.BLACK):(g(N,si.BLACK),g(N,si.RED))}return f},o=new a_(n.length),a=s(o);return new qn(i||t,a)};var Ug,jo={},qo=class n{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return S(jo&&qe,"ChildrenNode.ts has not been loaded"),Ug=Ug||new n({".priority":jo},{".priority":qe}),Ug}get(t){let e=on(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof qn?e:null}hasIndex(t){return ht(this.indexSet_,t.toString())}addIndex(t,e){S(t!==Ai,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=e.getIterator(ve.Wrap),o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Th(i,t.getCompare()):a=jo;let c=t.toString(),d=Object.assign({},this.indexSet_);d[c]=t;let f=Object.assign({},this.indexes_);return f[c]=a,new n(f,d)}addToIndexes(t,e){let i=gi(this.indexes_,(r,s)=>{let o=on(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),r===jo)if(o.isDefinedOn(t.node)){let a=[],c=e.getIterator(ve.Wrap),d=c.getNext();for(;d;)d.name!==t.name&&a.push(d),d=c.getNext();return a.push(t),Th(a,o.getCompare())}else return jo;else{let a=e.get(t.name),c=r;return a&&(c=c.remove(new ve(t.name,a))),c.insert(t,t.node)}});return new n(i,this.indexSet_)}removeFromIndexes(t,e){let i=gi(this.indexes_,r=>{if(r===jo)return r;{let s=e.get(t.name);return s?r.remove(new ve(t.name,s)):r}});return new n(i,this.indexSet_)}};var ec,ue=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&MT(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ec||(ec=new n(new qn(nv),null,qo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ec}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let i=this.children_.get(e);return i===null?ec:i}}getChild(e){let i=me(e);return i===null?this:this.getImmediateChild(i).getChild(Ue(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(S(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{let r=new ve(e,i),s,o;i.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?ec:this.priorityNode_;return new n(s,a,o)}}updateChild(e,i){let r=me(e);if(r===null)return i;{S(me(e)!==".priority"||$r(e)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(Ue(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(qe,(a,c)=>{i[a]=c.val(e),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+PT(this.getPriority().val())+":"),this.forEachChild(qe,(i,r)=>{let s=r.hash();s!==""&&(e+=":"+i+":"+s)}),this.lazyHash_=e===""?"":dT(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new ve(e,i));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){let i=this.getFirstChildName(e);return i?new ve(i,this.children_.get(i)):null}getLastChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){let i=this.getLastChildName(e);return i?new ve(i,this.children_.get(i)):null}forEachChild(e,i){let r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{let s=this.children_.getIteratorFrom(e.name,ve.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{let s=this.children_.getReverseIteratorFrom(e.name,ve.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Cc?-1:0}withIndex(e){if(e===Ai||this.indexMap_.hasIndex(e))return this;{let i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Ai||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(qe),s=i.getIterator(qe),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Ai?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),l_=class extends ue{constructor(){super(new qn(nv),ue.EMPTY_NODE,qo.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ue.EMPTY_NODE}isEmpty(){return!1}},Cc=new l_;Object.defineProperties(ve,{MIN:{value:new ve(zr,ue.EMPTY_NODE)},MAX:{value:new ve(Xi,Cc)}});Ih.__EMPTY_NODE=ue.EMPTY_NODE;Wo.__childrenNodeConstructor=ue;DF(Cc);PF(Cc);var OF=!0;function at(n,t=null){if(n===null)return ue.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),S(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let e=n;return new Wo(e,at(t))}if(!(n instanceof Array)&&OF){let e=[],i=!1;if(At(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=at(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),e.push(new ve(o,c)))}}),e.length===0)return ue.EMPTY_NODE;let s=Th(e,RF,o=>o.name,nv);if(i){let o=Th(e,qe.getCompare());return new ue(s,at(t),new qo({".priority":o},{".priority":qe}))}else return new ue(s,at(t),qo.Default)}else{let e=ue.EMPTY_NODE;return At(n,(i,r)=>{if(ht(n,i)&&i.substring(0,1)!=="."){let s=at(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(at(t))}}kF(at);var cc=class extends $o{constructor(t){super(),this.indexPath_=t,S(!pe(t)&&me(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return s===0?xs(t.name,e.name):s}makePost(t,e){let i=at(t),r=ue.EMPTY_NODE.updateChild(this.indexPath_,i);return new ve(e,r)}maxPost(){let t=ue.EMPTY_NODE.updateChild(this.indexPath_,Cc);return new ve(Xi,t)}toString(){return lc(this.indexPath_,0).join("/")}};var c_=class extends $o{compare(t,e){let i=t.node.compareTo(e.node);return i===0?xs(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return ve.MIN}maxPost(){return ve.MAX}makePost(t,e){let i=at(t);return new ve(e,i)}toString(){return".value"}},iv=new c_;function FT(n){return{type:"value",snapshotNode:n}}function Go(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function dc(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function uc(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function NF(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}var hc=class{constructor(t){this.index_=t}updateChild(t,e,i,r,s,o){S(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(e);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?t.hasChild(e)?o.trackChildChange(dc(e,a)):S(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Go(e,i)):o.trackChildChange(uc(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(qe,(r,s)=>{e.hasChild(r)||i.trackChildChange(dc(r,s))}),e.isLeafNode()||e.forEachChild(qe,(r,s)=>{if(t.hasChild(r)){let o=t.getImmediateChild(r);o.equals(s)||i.trackChildChange(uc(r,s,o))}else i.trackChildChange(Go(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?ue.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var xh=class n{constructor(t){this.indexedFilter_=new hc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=n.getStartPost_(t),this.endPost_=n.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,r,s,o){return this.matches(new ve(e,i))||(i=ue.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,o)}updateFullNode(t,e,i){e.isLeafNode()&&(e=ue.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(ue.EMPTY_NODE);let s=this;return e.forEachChild(qe,(o,a)=>{s.matches(new ve(o,a))||(r=r.updateImmediateChild(o,ue.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}};var d_=class{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{let i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new xh(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,r,s,o){return this.rangedFilter_.matches(new ve(e,i))||(i=ue.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,o):this.fullLimitUpdateChild_(t,e,i,s,o)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=ue.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){r=ue.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=e.withIndex(this.index_),r=r.updatePriority(ue.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,ue.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let o;if(this.reverse_){let m=this.index_.getCompare();o=(g,b)=>m(b,g)}else o=this.index_.getCompare();let a=t;S(a.numChildren()===this.limit_,"");let c=new ve(e,i),d=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(c);if(a.hasChild(e)){let m=a.getImmediateChild(e),g=r.getChildAfterChild(this.index_,d,this.reverse_);for(;g!=null&&(g.name===e||a.hasChild(g.name));)g=r.getChildAfterChild(this.index_,g,this.reverse_);let b=g==null?1:o(g,c);if(f&&!i.isEmpty()&&b>=0)return s?.trackChildChange(uc(e,i,m)),a.updateImmediateChild(e,i);{s?.trackChildChange(dc(e,m));let M=a.updateImmediateChild(e,ue.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(s?.trackChildChange(Go(g.name,g.node)),M.updateImmediateChild(g.name,g.node)):M}}else return i.isEmpty()?t:f&&o(d,c)>=0?(s!=null&&(s.trackChildChange(dc(d.name,d.node)),s.trackChildChange(Go(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(d.name,ue.EMPTY_NODE)):t}};var fc=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zr}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qe}copy(){let t=new n;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function FF(n){return n.loadsAllData()?new hc(n.getIndex()):n.hasLimit()?new d_(n):new xh(n)}function LF(n,t){let e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}function VF(n,t){let e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}function u_(n,t,e){let i=n.copy();return i.startSet_=!0,t===void 0&&(t=null),i.indexStartValue_=t,e!=null?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function jF(n,t,e){let i;return n.index_===Ai||e?i=u_(n,t,e):i=u_(n,t,Xi),i.startAfterSet_=!0,i}function h_(n,t,e){let i=n.copy();return i.endSet_=!0,t===void 0&&(t=null),i.indexEndValue_=t,e!==void 0?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function BF(n,t,e){let i;return n.index_===Ai||e?i=h_(n,t,e):i=h_(n,t,zr),i.endBeforeSet_=!0,i}function qh(n,t){let e=n.copy();return e.index_=t,e}function GI(n){let t={};if(n.isDefault())return t;let e;if(n.index_===qe?e="$priority":n.index_===iv?e="$value":n.index_===Ai?e="$key":(S(n.index_ instanceof cc,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=_e(e),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";t[i]=_e(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+_e(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";t[i]=_e(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+_e(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function HI(n){let t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==qe&&(t.i=n.index_.toString()),t}var f_=class n extends wh{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Ec("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(S(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=n.getListenId_(t,i),a={};this.listens_[o]=a;let c=GI(t._queryParams);this.restRequest_(s+".json",c,(d,f)=>{let m=f;if(d===404&&(m=null,d=null),d===null&&this.onDataUpdate_(s,m,!1,i),on(this.listens_,o)===a){let g;d?d===401?g="permission_denied":g="rest_error:"+d:g="ok",r(g,null)}})}unlisten(t,e){let i=n.getListenId_(t,e);delete this.listens_[i]}get(t){let e=GI(t._queryParams),i=t._path.toString(),r=new gt;return this.restRequest_(i+".json",e,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+tu(e);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=vr(a.responseText)}catch{Qt("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&Qt("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var m_=class{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function Sh(){return{value:null,children:new Map}}function Zo(n,t,e){if(pe(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{let i=me(t);n.children.has(i)||n.children.set(i,Sh());let r=n.children.get(i);t=Ue(t),Zo(r,t,e)}}function p_(n,t){if(pe(t))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{let e=n.value;return n.value=null,e.forEachChild(qe,(i,r)=>{Zo(n,new xe(i),r)}),p_(n,t)}}else if(n.children.size>0){let e=me(t);return t=Ue(t),n.children.has(e)&&p_(n.children.get(e),t)&&n.children.delete(e),n.children.size===0}else return!0}function g_(n,t,e){n.value!==null?e(t,n.value):UF(n,(i,r)=>{let s=new xe(t.toString()+"/"+i);g_(r,s,e)})}function UF(n,t){n.children.forEach((e,i)=>{t(i,e)})}var __=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&At(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}};var KI=10*1e3,zF=30*1e3,$F=5*60*1e3,v_=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new __(t);let i=KI+(zF-KI)*Math.random();nc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),e={},i=!1;At(t,(r,s)=>{s>0&&ht(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),nc(this.reportStats_.bind(this),Math.floor(Math.random()*2*$F))}};var Si=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Si||{});function rv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ov(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var y_=class n{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Si.ACK_USER_WRITE,this.source=rv()}operationForChild(t){if(pe(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new xe(t));return new n(Te(),e,this.revert)}}else return S(me(this.path)===t,"operationForChild called for unrelated child."),new n(Ue(this.path),this.affectedTree,this.revert)}};var Ah=class n{constructor(t,e){this.source=t,this.path=e,this.type=Si.LISTEN_COMPLETE}operationForChild(t){return pe(this.path)?new n(this.source,Te()):new n(this.source,Ue(this.path))}};var Ho=class n{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Si.OVERWRITE}operationForChild(t){return pe(this.path)?new n(this.source,Te(),this.snap.getImmediateChild(t)):new n(this.source,Ue(this.path),this.snap)}};var mc=class n{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Si.MERGE}operationForChild(t){if(pe(this.path)){let e=this.children.subtree(new xe(t));return e.isEmpty()?null:e.value?new Ho(this.source,Te(),e.value):new n(this.source,Te(),e)}else return S(me(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Di=class{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(pe(t))return this.isFullyInitialized()&&!this.filtered_;let e=me(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var b_=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function WF(n,t,e,i){let r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(NF(o.childName,o.snapshotNode))}),tc(n,r,"child_removed",t,i,e),tc(n,r,"child_added",t,i,e),tc(n,r,"child_moved",s,i,e),tc(n,r,"child_changed",t,i,e),tc(n,r,"value",t,i,e),r}function tc(n,t,e,i,r,s){let o=i.filter(a=>a.type===e);o.sort((a,c)=>GF(n,a,c)),o.forEach(a=>{let c=qF(n,a,s);r.forEach(d=>{d.respondsTo(a.type)&&t.push(d.createEvent(c,n.query_))})})}function qF(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function GF(n,t,e){if(t.childName==null||e.childName==null)throw Vn("Should only compare child_ events.");let i=new ve(t.childName,t.snapshotNode),r=new ve(e.childName,e.snapshotNode);return n.index_.compare(i,r)}function Gh(n,t){return{eventCache:n,serverCache:t}}function rc(n,t,e,i){return Gh(new Di(t,e,i),n.serverCache)}function LT(n,t,e,i){return Gh(n.eventCache,new Di(t,e,i))}function Rh(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ts(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var zg,HF=()=>(zg||(zg=new qn(q1)),zg),hn=class n{constructor(t,e=HF()){this.value=t,this.children=e}static fromObject(t){let e=new n(null);return At(t,(i,r)=>{e=e.set(new xe(i),r)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Te(),value:this.value};if(pe(t))return null;{let i=me(t),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(Ue(t),e);return s!=null?{path:et(new xe(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(pe(t))return this;{let e=me(t),i=this.children.get(e);return i!==null?i.subtree(Ue(t)):new n(null)}}set(t,e){if(pe(t))return new n(e,this.children);{let i=me(t),s=(this.children.get(i)||new n(null)).set(Ue(t),e),o=this.children.insert(i,s);return new n(this.value,o)}}remove(t){if(pe(t))return this.children.isEmpty()?new n(null):new n(null,this.children);{let e=me(t),i=this.children.get(e);if(i){let r=i.remove(Ue(t)),s;return r.isEmpty()?s=this.children.remove(e):s=this.children.insert(e,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(t){if(pe(t))return this.value;{let e=me(t),i=this.children.get(e);return i?i.get(Ue(t)):null}}setTree(t,e){if(pe(t))return e;{let i=me(t),s=(this.children.get(i)||new n(null)).setTree(Ue(t),e),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(t){return this.fold_(Te(),t)}fold_(t,e){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(et(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Te(),e)}findOnPath_(t,e,i){let r=this.value?i(e,this.value):!1;if(r)return r;if(pe(t))return null;{let s=me(t),o=this.children.get(s);return o?o.findOnPath_(Ue(t),et(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Te(),e)}foreachOnPath_(t,e,i){if(pe(t))return this;{this.value&&i(e,this.value);let r=me(t),s=this.children.get(r);return s?s.foreachOnPath_(Ue(t),et(e,r),i):new n(null)}}foreach(t){this.foreach_(Te(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(et(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}};var oi=class n{constructor(t){this.writeTree_=t}static empty(){return new n(new hn(null))}};function sc(n,t,e){if(pe(t))return new oi(new hn(e));{let i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,s=i.value,o=un(r,t);return s=s.updateChild(o,e),new oi(n.writeTree_.set(r,s))}else{let r=new hn(e),s=n.writeTree_.setTree(t,r);return new oi(s)}}}function w_(n,t,e){let i=n;return At(e,(r,s)=>{i=sc(i,et(t,r),s)}),i}function QI(n,t){if(pe(t))return oi.empty();{let e=n.writeTree_.setTree(t,new hn(null));return new oi(e)}}function E_(n,t){return Ss(n,t)!=null}function Ss(n,t){let e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(un(e.path,t)):null}function YI(n){let t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(qe,(i,r)=>{t.push(new ve(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new ve(i,r.value))}),t}function Br(n,t){if(pe(t))return n;{let e=Ss(n,t);return e!=null?new oi(new hn(e)):new oi(n.writeTree_.subtree(t))}}function C_(n){return n.writeTree_.isEmpty()}function Ko(n,t){return VT(Te(),n.writeTree_,t)}function VT(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):e=VT(et(n,r),s,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(et(n,".priority"),i)),e}}function Hh(n,t){return zT(t,n)}function KF(n,t,e,i,r){S(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=sc(n.visibleWrites,t,e)),n.lastWriteId=i}function QF(n,t,e,i){S(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=w_(n.visibleWrites,t,e),n.lastWriteId=i}function YF(n,t){for(let e=0;e<n.allWrites.length;e++){let i=n.allWrites[e];if(i.writeId===t)return i}return null}function XF(n,t){let e=n.allWrites.findIndex(a=>a.writeId===t);S(e>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=e&&ZF(a,i.path)?r=!1:Wn(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return JF(n),!0;if(i.snap)n.visibleWrites=QI(n.visibleWrites,i.path);else{let a=i.children;At(a,c=>{n.visibleWrites=QI(n.visibleWrites,et(i.path,c))})}return!0}else return!1}function ZF(n,t){if(n.snap)return Wn(n.path,t);for(let e in n.children)if(n.children.hasOwnProperty(e)&&Wn(et(n.path,e),t))return!0;return!1}function JF(n){n.visibleWrites=jT(n.allWrites,eL,Te()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function eL(n){return n.visible}function jT(n,t,e){let i=oi.empty();for(let r=0;r<n.length;++r){let s=n[r];if(t(s)){let o=s.path,a;if(s.snap)Wn(e,o)?(a=un(e,o),i=sc(i,a,s.snap)):Wn(o,e)&&(a=un(o,e),i=sc(i,Te(),s.snap.getChild(a)));else if(s.children){if(Wn(e,o))a=un(e,o),i=w_(i,a,s.children);else if(Wn(o,e))if(a=un(o,e),pe(a))i=w_(i,Te(),s.children);else{let c=on(s.children,me(a));if(c){let d=c.getChild(Ue(a));i=sc(i,Te(),d)}}}else throw Vn("WriteRecord should have .snap or .children")}}return i}function BT(n,t,e,i,r){if(!i&&!r){let s=Ss(n.visibleWrites,t);if(s!=null)return s;{let o=Br(n.visibleWrites,t);if(C_(o))return e;if(e==null&&!E_(o,Te()))return null;{let a=e||ue.EMPTY_NODE;return Ko(o,a)}}}else{let s=Br(n.visibleWrites,t);if(!r&&C_(s))return e;if(!r&&e==null&&!E_(s,Te()))return null;{let o=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(Wn(d.path,t)||Wn(t,d.path))},a=jT(n.allWrites,o,t),c=e||ue.EMPTY_NODE;return Ko(a,c)}}}function tL(n,t,e){let i=ue.EMPTY_NODE,r=Ss(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(qe,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(e){let s=Br(n.visibleWrites,t);return e.forEachChild(qe,(o,a)=>{let c=Ko(Br(s,new xe(o)),a);i=i.updateImmediateChild(o,c)}),YI(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=Br(n.visibleWrites,t);return YI(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function nL(n,t,e,i,r){S(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=et(t,e);if(E_(n.visibleWrites,s))return null;{let o=Br(n.visibleWrites,s);return C_(o)?r.getChild(e):Ko(o,r.getChild(e))}}function iL(n,t,e,i){let r=et(t,e),s=Ss(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(e)){let o=Br(n.visibleWrites,r);return Ko(o,i.getNode().getImmediateChild(e))}else return null}function rL(n,t){return Ss(n.visibleWrites,t)}function sL(n,t,e,i,r,s,o){let a,c=Br(n.visibleWrites,t),d=Ss(c,Te());if(d!=null)a=d;else if(e!=null)a=Ko(c,e);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let f=[],m=o.getCompare(),g=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),b=g.getNext();for(;b&&f.length<r;)m(b,i)!==0&&f.push(b),b=g.getNext();return f}else return[]}function oL(){return{visibleWrites:oi.empty(),allWrites:[],lastWriteId:-1}}function Dh(n,t,e,i){return BT(n.writeTree,n.treePath,t,e,i)}function av(n,t){return tL(n.writeTree,n.treePath,t)}function XI(n,t,e,i){return nL(n.writeTree,n.treePath,t,e,i)}function kh(n,t){return rL(n.writeTree,et(n.treePath,t))}function aL(n,t,e,i,r,s){return sL(n.writeTree,n.treePath,t,e,i,r,s)}function lv(n,t,e){return iL(n.writeTree,n.treePath,t,e)}function UT(n,t){return zT(et(n.treePath,t),n.writeTree)}function zT(n,t){return{treePath:n,writeTree:t}}var I_=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,i=t.childName;S(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),S(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(e==="child_added"&&s==="child_removed")this.changeMap.set(i,uc(i,t.snapshotNode,r.snapshotNode));else if(e==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&s==="child_changed")this.changeMap.set(i,dc(i,r.oldSnap));else if(e==="child_changed"&&s==="child_added")this.changeMap.set(i,Go(i,t.snapshotNode));else if(e==="child_changed"&&s==="child_changed")this.changeMap.set(i,uc(i,t.snapshotNode,r.oldSnap));else throw Vn("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var T_=class{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}},$T=new T_,pc=class{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new Di(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lv(this.writes_,t,i)}}getChildAfterChild(t,e,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ts(this.viewCache_),s=aL(this.writes_,r,e,1,i,t);return s.length===0?null:s[0]}};function lL(n){return{filter:n}}function cL(n,t){S(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),S(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function dL(n,t,e,i,r){let s=new I_,o,a;if(e.type===Si.OVERWRITE){let d=e;d.source.fromUser?o=x_(n,t,d.path,d.snap,i,r,s):(S(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered()&&!pe(d.path),o=Ph(n,t,d.path,d.snap,i,r,a,s))}else if(e.type===Si.MERGE){let d=e;d.source.fromUser?o=hL(n,t,d.path,d.children,i,r,s):(S(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered(),o=S_(n,t,d.path,d.children,i,r,a,s))}else if(e.type===Si.ACK_USER_WRITE){let d=e;d.revert?o=pL(n,t,d.path,i,r,s):o=fL(n,t,d.path,d.affectedTree,i,r,s)}else if(e.type===Si.LISTEN_COMPLETE)o=mL(n,t,e.path,i,s);else throw Vn("Unknown operation type: "+e.type);let c=s.getChanges();return uL(t,o,c),{viewCache:o,changes:c}}function uL(n,t,e){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Rh(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(FT(Rh(t)))}}function WT(n,t,e,i,r,s){let o=t.eventCache;if(kh(i,e)!=null)return t;{let a,c;if(pe(e))if(S(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let d=Ts(t),f=d instanceof ue?d:ue.EMPTY_NODE,m=av(i,f);a=n.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{let d=Dh(i,Ts(t));a=n.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{let d=me(e);if(d===".priority"){S($r(e)===1,"Can't have a priority with additional path components");let f=o.getNode();c=t.serverCache.getNode();let m=XI(i,e,f,c);m!=null?a=n.filter.updatePriority(f,m):a=o.getNode()}else{let f=Ue(e),m;if(o.isCompleteForChild(d)){c=t.serverCache.getNode();let g=XI(i,e,o.getNode(),c);g!=null?m=o.getNode().getImmediateChild(d).updateChild(f,g):m=o.getNode().getImmediateChild(d)}else m=lv(i,d,t.serverCache);m!=null?a=n.filter.updateChild(o.getNode(),d,m,f,r,s):a=o.getNode()}}return rc(t,a,o.isFullyInitialized()||pe(e),n.filter.filtersNodes())}}function Ph(n,t,e,i,r,s,o,a){let c=t.serverCache,d,f=o?n.filter:n.filter.getIndexedFilter();if(pe(e))d=f.updateFullNode(c.getNode(),i,null);else if(f.filtersNodes()&&!c.isFiltered()){let b=c.getNode().updateChild(e,i);d=f.updateFullNode(c.getNode(),b,null)}else{let b=me(e);if(!c.isCompleteForPath(e)&&$r(e)>1)return t;let E=Ue(e),N=c.getNode().getImmediateChild(b).updateChild(E,i);b===".priority"?d=f.updatePriority(c.getNode(),N):d=f.updateChild(c.getNode(),b,N,E,$T,null)}let m=LT(t,d,c.isFullyInitialized()||pe(e),f.filtersNodes()),g=new pc(r,m,s);return WT(n,m,e,r,g,a)}function x_(n,t,e,i,r,s,o){let a=t.eventCache,c,d,f=new pc(r,t,s);if(pe(e))d=n.filter.updateFullNode(t.eventCache.getNode(),i,o),c=rc(t,d,!0,n.filter.filtersNodes());else{let m=me(e);if(m===".priority")d=n.filter.updatePriority(t.eventCache.getNode(),i),c=rc(t,d,a.isFullyInitialized(),a.isFiltered());else{let g=Ue(e),b=a.getNode().getImmediateChild(m),E;if(pe(g))E=i;else{let M=f.getCompleteChild(m);M!=null?J_(g)===".priority"&&M.getChild(DT(g)).isEmpty()?E=M:E=M.updateChild(g,i):E=ue.EMPTY_NODE}if(b.equals(E))c=t;else{let M=n.filter.updateChild(a.getNode(),m,E,g,f,o);c=rc(t,M,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function ZI(n,t){return n.eventCache.isCompleteForChild(t)}function hL(n,t,e,i,r,s,o){let a=t;return i.foreach((c,d)=>{let f=et(e,c);ZI(t,me(f))&&(a=x_(n,a,f,d,r,s,o))}),i.foreach((c,d)=>{let f=et(e,c);ZI(t,me(f))||(a=x_(n,a,f,d,r,s,o))}),a}function JI(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function S_(n,t,e,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,d;pe(e)?d=i:d=new hn(null).setTree(e,i);let f=t.serverCache.getNode();return d.children.inorderTraversal((m,g)=>{if(f.hasChild(m)){let b=t.serverCache.getNode().getImmediateChild(m),E=JI(n,b,g);c=Ph(n,c,new xe(m),E,r,s,o,a)}}),d.children.inorderTraversal((m,g)=>{let b=!t.serverCache.isCompleteForChild(m)&&g.value===null;if(!f.hasChild(m)&&!b){let E=t.serverCache.getNode().getImmediateChild(m),M=JI(n,E,g);c=Ph(n,c,new xe(m),M,r,s,o,a)}}),c}function fL(n,t,e,i,r,s,o){if(kh(r,e)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(i.value!=null){if(pe(e)&&c.isFullyInitialized()||c.isCompleteForPath(e))return Ph(n,t,e,c.getNode().getChild(e),r,s,a,o);if(pe(e)){let d=new hn(null);return c.getNode().forEachChild(Ai,(f,m)=>{d=d.set(new xe(f),m)}),S_(n,t,e,d,r,s,a,o)}else return t}else{let d=new hn(null);return i.foreach((f,m)=>{let g=et(e,f);c.isCompleteForPath(g)&&(d=d.set(f,c.getNode().getChild(g)))}),S_(n,t,e,d,r,s,a,o)}}function mL(n,t,e,i,r){let s=t.serverCache,o=LT(t,s.getNode(),s.isFullyInitialized()||pe(e),s.isFiltered());return WT(n,o,e,i,$T,r)}function pL(n,t,e,i,r,s){let o;if(kh(i,e)!=null)return t;{let a=new pc(i,t,r),c=t.eventCache.getNode(),d;if(pe(e)||me(e)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=Dh(i,Ts(t));else{let m=t.serverCache.getNode();S(m instanceof ue,"serverChildren would be complete if leaf node"),f=av(i,m)}f=f,d=n.filter.updateFullNode(c,f,s)}else{let f=me(e),m=lv(i,f,t.serverCache);m==null&&t.serverCache.isCompleteForChild(f)&&(m=c.getImmediateChild(f)),m!=null?d=n.filter.updateChild(c,f,m,Ue(e),a,s):t.eventCache.getNode().hasChild(f)?d=n.filter.updateChild(c,f,ue.EMPTY_NODE,Ue(e),a,s):d=c,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Dh(i,Ts(t)),o.isLeafNode()&&(d=n.filter.updateFullNode(d,o,s)))}return o=t.serverCache.isFullyInitialized()||kh(i,Te())!=null,rc(t,d,o,n.filter.filtersNodes())}}var A_=class{constructor(t,e){this.query_=t,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new hc(i.getIndex()),s=FF(i);this.processor_=lL(s);let o=e.serverCache,a=e.eventCache,c=r.updateFullNode(ue.EMPTY_NODE,o.getNode(),null),d=s.updateFullNode(ue.EMPTY_NODE,a.getNode(),null),f=new Di(c,o.isFullyInitialized(),r.filtersNodes()),m=new Di(d,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Gh(m,f),this.eventGenerator_=new b_(this.query_)}get query(){return this.query_}};function gL(n){return n.viewCache_.serverCache.getNode()}function _L(n){return Rh(n.viewCache_)}function vL(n,t){let e=Ts(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!pe(t)&&!e.getImmediateChild(me(t)).isEmpty())?e.getChild(t):null}function eT(n){return n.eventRegistrations_.length===0}function yL(n,t){n.eventRegistrations_.push(t)}function tT(n,t,e){let i=[];if(e){S(t==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(e,r);o&&i.push(o)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(t))r.push(o);else if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function nT(n,t,e,i){t.type===Si.MERGE&&t.source.queryId!==null&&(S(Ts(n.viewCache_),"We should always have a full cache before handling merges"),S(Rh(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=dL(n.processor_,r,t,e,i);return cL(n.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,qT(n,s.changes,s.viewCache.eventCache.getNode(),null)}function bL(n,t){let e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(qe,(s,o)=>{i.push(Go(s,o))}),e.isFullyInitialized()&&i.push(FT(e.getNode())),qT(n,i,e.getNode(),t)}function qT(n,t,e,i){let r=i?[i]:n.eventRegistrations_;return WF(n.eventGenerator_,t,e,r)}var Mh,Oh=class{constructor(){this.views=new Map}};function wL(n){S(!Mh,"__referenceConstructor has already been defined"),Mh=n}function EL(){return S(Mh,"Reference.ts has not been loaded"),Mh}function CL(n){return n.views.size===0}function cv(n,t,e,i){let r=t.source.queryId;if(r!==null){let s=n.views.get(r);return S(s!=null,"SyncTree gave us an op for an invalid query."),nT(s,t,e,i)}else{let s=[];for(let o of n.views.values())s=s.concat(nT(o,t,e,i));return s}}function GT(n,t,e,i,r){let s=t._queryIdentifier,o=n.views.get(s);if(!o){let a=Dh(e,r?i:null),c=!1;a?c=!0:i instanceof ue?(a=av(e,i),c=!1):(a=ue.EMPTY_NODE,c=!1);let d=Gh(new Di(a,c,!1),new Di(i,r,!1));return new A_(t,d)}return o}function IL(n,t,e,i,r,s){let o=GT(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,o),yL(o,e),bL(o,e)}function TL(n,t,e,i){let r=t._queryIdentifier,s=[],o=[],a=Wr(n);if(r==="default")for(let[c,d]of n.views.entries())o=o.concat(tT(d,e,i)),eT(d)&&(n.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{let c=n.views.get(r);c&&(o=o.concat(tT(c,e,i)),eT(c)&&(n.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Wr(n)&&s.push(new(EL())(t._repo,t._path)),{removed:s,events:o}}function HT(n){let t=[];for(let e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Ur(n,t){let e=null;for(let i of n.views.values())e=e||vL(i,t);return e}function KT(n,t){if(t._queryParams.loadsAllData())return Kh(n);{let i=t._queryIdentifier;return n.views.get(i)}}function QT(n,t){return KT(n,t)!=null}function Wr(n){return Kh(n)!=null}function Kh(n){for(let t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Nh;function xL(n){S(!Nh,"__referenceConstructor has already been defined"),Nh=n}function SL(){return S(Nh,"Reference.ts has not been loaded"),Nh}var AL=1,Fh=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new hn(null),this.pendingWriteTree_=oL(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function dv(n,t,e,i,r){return KF(n.pendingWriteTree_,t,e,i,r),r?Jo(n,new Ho(rv(),t,e)):[]}function RL(n,t,e,i){QF(n.pendingWriteTree_,t,e,i);let r=hn.fromObject(e);return Jo(n,new mc(rv(),t,r))}function jr(n,t,e=!1){let i=YF(n.pendingWriteTree_,t);if(XF(n.pendingWriteTree_,t)){let s=new hn(null);return i.snap!=null?s=s.set(Te(),!0):At(i.children,o=>{s=s.set(new xe(o),!0)}),Jo(n,new y_(i.path,s,e))}else return[]}function Ic(n,t,e){return Jo(n,new Ho(sv(),t,e))}function DL(n,t,e){let i=hn.fromObject(e);return Jo(n,new mc(sv(),t,i))}function kL(n,t){return Jo(n,new Ah(sv(),t))}function PL(n,t,e){let i=uv(n,e);if(i){let r=hv(i),s=r.path,o=r.queryId,a=un(s,t),c=new Ah(ov(o),a);return fv(n,s,c)}else return[]}function Lh(n,t,e,i,r=!1){let s=t._path,o=n.syncPointTree_.get(s),a=[];if(o&&(t._queryIdentifier==="default"||QT(o,t))){let c=TL(o,t,e,i);CL(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let d=c.removed;if(a=c.events,!r){let f=d.findIndex(g=>g._queryParams.loadsAllData())!==-1,m=n.syncPointTree_.findOnPath(s,(g,b)=>Wr(b));if(f&&!m){let g=n.syncPointTree_.subtree(s);if(!g.isEmpty()){let b=NL(g);for(let E=0;E<b.length;++E){let M=b[E],N=M.query,ce=JT(n,M);n.listenProvider_.startListening(oc(N),gc(n,N),ce.hashFn,ce.onComplete)}}}!m&&d.length>0&&!i&&(f?n.listenProvider_.stopListening(oc(t),null):d.forEach(g=>{let b=n.queryToTagMap.get(Yh(g));n.listenProvider_.stopListening(oc(g),b)}))}FL(n,d)}return a}function YT(n,t,e,i){let r=uv(n,i);if(r!=null){let s=hv(r),o=s.path,a=s.queryId,c=un(o,t),d=new Ho(ov(a),c,e);return fv(n,o,d)}else return[]}function ML(n,t,e,i){let r=uv(n,i);if(r){let s=hv(r),o=s.path,a=s.queryId,c=un(o,t),d=hn.fromObject(e),f=new mc(ov(a),c,d);return fv(n,o,f)}else return[]}function R_(n,t,e,i=!1){let r=t._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(g,b)=>{let E=un(g,r);s=s||Ur(b,E),o=o||Wr(b)});let a=n.syncPointTree_.get(r);a?(o=o||Wr(a),s=s||Ur(a,Te())):(a=new Oh,n.syncPointTree_=n.syncPointTree_.set(r,a));let c;s!=null?c=!0:(c=!1,s=ue.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((b,E)=>{let M=Ur(E,Te());M&&(s=s.updateImmediateChild(b,M))}));let d=QT(a,t);if(!d&&!t._queryParams.loadsAllData()){let g=Yh(t);S(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");let b=LL();n.queryToTagMap.set(g,b),n.tagToQueryMap.set(b,g)}let f=Hh(n.pendingWriteTree_,r),m=IL(a,t,e,f,s,c);if(!d&&!o&&!i){let g=KT(a,t);m=m.concat(VL(n,t,g))}return m}function Qh(n,t,e){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(o,a)=>{let c=un(o,t),d=Ur(a,c);if(d)return d});return BT(r,t,s,e,!0)}function OL(n,t){let e=t._path,i=null;n.syncPointTree_.foreachOnPath(e,(d,f)=>{let m=un(d,e);i=i||Ur(f,m)});let r=n.syncPointTree_.get(e);r?i=i||Ur(r,Te()):(r=new Oh,n.syncPointTree_=n.syncPointTree_.set(e,r));let s=i!=null,o=s?new Di(i,!0,!1):null,a=Hh(n.pendingWriteTree_,t._path),c=GT(r,t,a,s?o.getNode():ue.EMPTY_NODE,s);return _L(c)}function Jo(n,t){return XT(t,n.syncPointTree_,null,Hh(n.pendingWriteTree_,Te()))}function XT(n,t,e,i){if(pe(n.path))return ZT(n,t,e,i);{let r=t.get(Te());e==null&&r!=null&&(e=Ur(r,Te()));let s=[],o=me(n.path),a=n.operationForChild(o),c=t.children.get(o);if(c&&a){let d=e?e.getImmediateChild(o):null,f=UT(i,o);s=s.concat(XT(a,c,d,f))}return r&&(s=s.concat(cv(r,n,i,e))),s}}function ZT(n,t,e,i){let r=t.get(Te());e==null&&r!=null&&(e=Ur(r,Te()));let s=[];return t.children.inorderTraversal((o,a)=>{let c=e?e.getImmediateChild(o):null,d=UT(i,o),f=n.operationForChild(o);f&&(s=s.concat(ZT(f,a,c,d)))}),r&&(s=s.concat(cv(r,n,i,e))),s}function JT(n,t){let e=t.query,i=gc(n,e);return{hashFn:()=>(gL(t)||ue.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?PL(n,e._path,i):kL(n,e._path);{let s=K1(r,e);return Lh(n,e,null,s)}}}}function gc(n,t){let e=Yh(t);return n.queryToTagMap.get(e)}function Yh(n){return n._path.toString()+"$"+n._queryIdentifier}function uv(n,t){return n.tagToQueryMap.get(t)}function hv(n){let t=n.indexOf("$");return S(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new xe(n.substr(0,t))}}function fv(n,t,e){let i=n.syncPointTree_.get(t);S(i,"Missing sync point for query tag that we're tracking");let r=Hh(n.pendingWriteTree_,t);return cv(i,e,r,null)}function NL(n){return n.fold((t,e,i)=>{if(e&&Wr(e))return[Kh(e)];{let r=[];return e&&(r=HT(e)),At(i,(s,o)=>{r=r.concat(o)}),r}})}function oc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(SL())(n._repo,n._path):n}function FL(n,t){for(let e=0;e<t.length;++e){let i=t[e];if(!i._queryParams.loadsAllData()){let r=Yh(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function LL(){return AL++}function VL(n,t,e){let i=t._path,r=gc(n,t),s=JT(n,e),o=n.listenProvider_.startListening(oc(t),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)S(!Wr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((d,f,m)=>{if(!pe(d)&&f&&Wr(f))return[Kh(f).query];{let g=[];return f&&(g=g.concat(HT(f).map(b=>b.query))),At(m,(b,E)=>{g=g.concat(E)}),g}});for(let d=0;d<c.length;++d){let f=c[d];n.listenProvider_.stopListening(oc(f),gc(n,f))}}return o}var D_=class n{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new n(e)}node(){return this.node_}},k_=class n{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=et(this.path_,t);return new n(this.syncTree_,e)}node(){return Qh(this.syncTree_,this.path_)}},jL=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},iT=function(n,t,e){if(!n||typeof n!="object")return n;if(S(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return BL(n[".sv"],t,e);if(typeof n[".sv"]=="object")return UL(n[".sv"],t);S(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},BL=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:S(!1,"Unexpected server value: "+n)}},UL=function(n,t,e){n.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&S(!1,"Unexpected increment value: "+i);let r=t.node();if(S(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},ex=function(n,t,e,i){return pv(t,new k_(e,n),i)},mv=function(n,t,e){return pv(n,new D_(t),e)};function pv(n,t,e){let i=n.getPriority().val(),r=iT(i,t.getImmediateChild(".priority"),e),s;if(n.isLeafNode()){let o=n,a=iT(o.getValue(),t,e);return a!==o.getValue()||r!==o.getPriority().val()?new Wo(a,at(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Wo(r))),o.forEachChild(qe,(a,c)=>{let d=pv(c,t.getImmediateChild(a),e);d!==c&&(s=s.updateImmediateChild(a,d))}),s}}var _c=class{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}};function Xh(n,t){let e=t instanceof xe?t:new xe(t),i=n,r=me(e);for(;r!==null;){let s=on(i.node.children,r)||{children:{},childCount:0};i=new _c(r,i,s),e=Ue(e),r=me(e)}return i}function As(n){return n.node.value}function gv(n,t){n.node.value=t,P_(n)}function tx(n){return n.node.childCount>0}function zL(n){return As(n)===void 0&&!tx(n)}function Zh(n,t){At(n.node.children,(e,i)=>{t(new _c(e,n,i))})}function nx(n,t,e,i){e&&!i&&t(n),Zh(n,r=>{nx(r,t,!0,i)}),e&&i&&t(n)}function $L(n,t,e){let i=e?n:n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function Tc(n){return new xe(n.parent===null?n.name:Tc(n.parent)+"/"+n.name)}function P_(n){n.parent!==null&&WL(n.parent,n.name,n)}function WL(n,t,e){let i=zL(e),r=ht(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,P_(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,P_(n))}var qL=/[\[\].#$\/\u0000-\u001F\u007F]/,GL=/[\[\].#$\u0000-\u001F\u007F]/,$g=10*1024*1024,Jh=function(n){return typeof n=="string"&&n.length!==0&&!qL.test(n)},ix=function(n){return typeof n=="string"&&n.length!==0&&!GL.test(n)},HL=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ix(n)},vc=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Wh(n)||n&&typeof n=="object"&&ht(n,".sv")},ki=function(n,t,e,i){i&&t===void 0||xc(Ht(n,"value"),t,e)},xc=function(n,t,e){let i=e instanceof xe?new n_(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+Es(i));if(typeof t=="function")throw new Error(n+"contains a function "+Es(i)+" with contents = "+t.toString());if(Wh(t))throw new Error(n+"contains "+t.toString()+" "+Es(i));if(typeof t=="string"&&t.length>$g/3&&_i(t)>$g)throw new Error(n+"contains a string greater than "+$g+" utf8 bytes "+Es(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(At(t,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Jh(o)))throw new Error(n+" contains an invalid key ("+o+") "+Es(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);CF(i,o),xc(n,a,i),IF(i)}),r&&s)throw new Error(n+' contains ".value" child '+Es(i)+" in addition to actual children.")}},KL=function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];let s=lc(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Jh(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(EF);let r=null;for(e=0;e<t.length;e++){if(i=t[e],r!==null&&Wn(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},rx=function(n,t,e,i){if(i&&t===void 0)return;let r=Ht(n,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");let s=[];At(t,(o,a)=>{let c=new xe(o);if(xc(r,a,et(e,c)),J_(c)===".priority"&&!vc(a))throw new Error(r+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),KL(r,s)},_v=function(n,t,e){if(!(e&&t===void 0)){if(Wh(t))throw new Error(Ht(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!vc(t))throw new Error(Ht(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Sc=function(n,t,e,i){if(!(i&&e===void 0)&&!Jh(e))throw new Error(Ht(n,t)+'was an invalid key = "'+e+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ea=function(n,t,e,i){if(!(i&&e===void 0)&&!ix(e))throw new Error(Ht(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},QL=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ea(n,t,e,i)},Dn=function(n,t){if(me(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},sx=function(n,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Jh(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!HL(e))throw new Error(Ht(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var M_=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function ef(n,t){let e=null;for(let i=0;i<t.length;i++){let r=t[i],s=r.getPath();e!==null&&!ev(s,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function ox(n,t,e){ef(n,e),ax(n,i=>ev(i,t))}function kn(n,t,e){ef(n,e),ax(n,i=>Wn(i,t)||Wn(t,i))}function ax(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;t(s)?(YL(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function YL(n){for(let t=0;t<n.events.length;t++){let e=n.events[t];if(e!==null){n.events[t]=null;let i=e.getEventRunner();Is&&St("event: "+e.toString()),Xo(i)}}}var lx="repo_interrupt",XL=25,O_=class{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new M_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Sh(),this.transactionQueueTree_=new _c,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function ZL(n,t,e){if(n.stats_=Z_(n.repoInfo_),n.forceRestClient_||Z1())n.server_=new f_(n.repoInfo_,(i,r,s,o)=>{rT(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>sT(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_e(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new tv(n.repoInfo_,t,(i,r,s,o)=>{rT(n,i,r,s,o)},i=>{sT(n,i)},i=>{JL(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=eF(n.repoInfo_,()=>new v_(n.stats_,n.server_)),n.infoData_=new m_,n.infoSyncTree_=new Fh({startListening:(i,r,s,o)=>{let a=[],c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=Ic(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),vv(n,"connected",!1),n.serverSyncTree_=new Fh({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{let d=o(a,c);kn(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function cx(n){let e=n.infoData_.getNode(new xe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function Ac(n){return jL({timestamp:cx(n)})}function rT(n,t,e,i,r){n.dataUpdateCount++;let s=new xe(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let o=[];if(r)if(i){let c=gi(e,d=>at(d));o=ML(n.serverSyncTree_,s,c,r)}else{let c=at(e);o=YT(n.serverSyncTree_,s,c,r)}else if(i){let c=gi(e,d=>at(d));o=DL(n.serverSyncTree_,s,c)}else{let c=at(e);o=Ic(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Qo(n,s)),kn(n.eventQueue_,a,o)}function sT(n,t){vv(n,"connected",t),t===!1&&nV(n)}function JL(n,t){At(t,(e,i)=>{vv(n,e,i)})}function vv(n,t,e){let i=new xe("/.info/"+t),r=at(e);n.infoData_.updateSnapshot(i,r);let s=Ic(n.infoSyncTree_,i,r);kn(n.eventQueue_,i,s)}function tf(n){return n.nextWriteId_++}function eV(n,t,e){let i=OL(n.serverSyncTree_,t);return i!=null?Promise.resolve(i):n.server_.get(t).then(r=>{let s=at(r).withIndex(t._queryParams.getIndex());R_(n.serverSyncTree_,t,e,!0);let o;if(t._queryParams.loadsAllData())o=Ic(n.serverSyncTree_,t._path,s);else{let a=gc(n.serverSyncTree_,t);o=YT(n.serverSyncTree_,t._path,s,a)}return kn(n.eventQueue_,t._path,o),Lh(n.serverSyncTree_,t,e,null,!0),s},r=>(ta(n,"get for query "+_e(t)+" failed: "+r),Promise.reject(new Error(r))))}function yv(n,t,e,i,r){ta(n,"set",{path:t.toString(),value:e,priority:i});let s=Ac(n),o=at(e,i),a=Qh(n.serverSyncTree_,t),c=mv(o,a,s),d=tf(n),f=dv(n.serverSyncTree_,t,c,d,!0);ef(n.eventQueue_,f),n.server_.put(t.toString(),o.val(!0),(g,b)=>{let E=g==="ok";E||Qt("set at "+t+" failed: "+g);let M=jr(n.serverSyncTree_,d,!E);kn(n.eventQueue_,t,M),qr(n,r,g,b)});let m=wv(n,t);Qo(n,m),kn(n.eventQueue_,m,[])}function tV(n,t,e,i){ta(n,"update",{path:t.toString(),value:e});let r=!0,s=Ac(n),o={};if(At(e,(a,c)=>{r=!1,o[a]=ex(et(t,a),at(c),n.serverSyncTree_,s)}),r)St("update() called with empty data.  Don't do anything."),qr(n,i,"ok",void 0);else{let a=tf(n),c=RL(n.serverSyncTree_,t,o,a);ef(n.eventQueue_,c),n.server_.merge(t.toString(),e,(d,f)=>{let m=d==="ok";m||Qt("update at "+t+" failed: "+d);let g=jr(n.serverSyncTree_,a,!m),b=g.length>0?Qo(n,t):t;kn(n.eventQueue_,b,g),qr(n,i,d,f)}),At(e,d=>{let f=wv(n,et(t,d));Qo(n,f)}),kn(n.eventQueue_,t,[])}}function nV(n){ta(n,"onDisconnectEvents");let t=Ac(n),e=Sh();g_(n.onDisconnect_,Te(),(r,s)=>{let o=ex(r,s,n.serverSyncTree_,t);Zo(e,r,o)});let i=[];g_(e,Te(),(r,s)=>{i=i.concat(Ic(n.serverSyncTree_,r,s));let o=wv(n,r);Qo(n,o)}),n.onDisconnect_=Sh(),kn(n.eventQueue_,Te(),i)}function iV(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{i==="ok"&&p_(n.onDisconnect_,t),qr(n,e,i,r)})}function oT(n,t,e,i){let r=at(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,o)=>{s==="ok"&&Zo(n.onDisconnect_,t,r),qr(n,i,s,o)})}function rV(n,t,e,i,r){let s=at(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(o,a)=>{o==="ok"&&Zo(n.onDisconnect_,t,s),qr(n,r,o,a)})}function sV(n,t,e,i){if(ds(e)){St("onDisconnect().update() called with empty data.  Don't do anything."),qr(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{r==="ok"&&At(e,(o,a)=>{let c=at(a);Zo(n.onDisconnect_,et(t,o),c)}),qr(n,i,r,s)})}function oV(n,t,e){let i;me(t._path)===".info"?i=R_(n.infoSyncTree_,t,e):i=R_(n.serverSyncTree_,t,e),ox(n.eventQueue_,t._path,i)}function N_(n,t,e){let i;me(t._path)===".info"?i=Lh(n.infoSyncTree_,t,e):i=Lh(n.serverSyncTree_,t,e),ox(n.eventQueue_,t._path,i)}function dx(n){n.persistentConnection_&&n.persistentConnection_.interrupt(lx)}function aV(n){n.persistentConnection_&&n.persistentConnection_.resume(lx)}function ta(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),St(e,...t)}function qr(n,t,e,i){t&&Xo(()=>{if(e==="ok")t(null);else{let r=(e||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,t(o)}})}function lV(n,t,e,i,r,s){ta(n,"transaction on "+t);let o={path:t,update:e,onComplete:i,status:null,order:cT(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=bv(n,t,void 0);o.currentInputSnapshot=a;let c=o.update(a.val());if(c===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{xc("transaction failed: Data returned ",c,o.path),o.status=0;let d=Xh(n.transactionQueueTree_,t),f=As(d)||[];f.push(o),gv(d,f);let m;typeof c=="object"&&c!==null&&ht(c,".priority")?(m=on(c,".priority"),S(vc(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=(Qh(n.serverSyncTree_,t)||ue.EMPTY_NODE).getPriority().val();let g=Ac(n),b=at(c,m),E=mv(b,a,g);o.currentOutputSnapshotRaw=b,o.currentOutputSnapshotResolved=E,o.currentWriteId=tf(n);let M=dv(n.serverSyncTree_,t,E,o.currentWriteId,o.applyLocally);kn(n.eventQueue_,t,M),nf(n,n.transactionQueueTree_)}}function bv(n,t,e){return Qh(n.serverSyncTree_,t,e)||ue.EMPTY_NODE}function nf(n,t=n.transactionQueueTree_){if(t||rf(n,t),As(t)){let e=hx(n,t);S(e.length>0,"Sending zero length transaction queue"),e.every(r=>r.status===0)&&cV(n,Tc(t),e)}else tx(t)&&Zh(t,e=>{nf(n,e)})}function cV(n,t,e){let i=e.map(d=>d.currentWriteId),r=bv(n,t,i),s=r,o=r.hash();for(let d=0;d<e.length;d++){let f=e[d];S(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let m=un(t,f.path);s=s.updateChild(m,f.currentOutputSnapshotRaw)}let a=s.val(!0),c=t;n.server_.put(c.toString(),a,d=>{ta(n,"transaction put response",{path:c.toString(),status:d});let f=[];if(d==="ok"){let m=[];for(let g=0;g<e.length;g++)e[g].status=2,f=f.concat(jr(n.serverSyncTree_,e[g].currentWriteId)),e[g].onComplete&&m.push(()=>e[g].onComplete(null,!0,e[g].currentOutputSnapshotResolved)),e[g].unwatcher();rf(n,Xh(n.transactionQueueTree_,t)),nf(n,n.transactionQueueTree_),kn(n.eventQueue_,t,f);for(let g=0;g<m.length;g++)Xo(m[g])}else{if(d==="datastale")for(let m=0;m<e.length;m++)e[m].status===3?e[m].status=4:e[m].status=0;else{Qt("transaction at "+c.toString()+" failed: "+d);for(let m=0;m<e.length;m++)e[m].status=4,e[m].abortReason=d}Qo(n,t)}},o)}function Qo(n,t){let e=ux(n,t),i=Tc(e),r=hx(n,e);return dV(n,r,i),i}function dV(n,t,e){if(t.length===0)return;let i=[],r=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],d=un(e,c.path),f=!1,m;if(S(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,m=c.abortReason,r=r.concat(jr(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=XL)f=!0,m="maxretry",r=r.concat(jr(n.serverSyncTree_,c.currentWriteId,!0));else{let g=bv(n,c.path,o);c.currentInputSnapshot=g;let b=t[a].update(g.val());if(b!==void 0){xc("transaction failed: Data returned ",b,c.path);let E=at(b);typeof b=="object"&&b!=null&&ht(b,".priority")||(E=E.updatePriority(g.getPriority()));let N=c.currentWriteId,ce=Ac(n),le=mv(E,g,ce);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=le,c.currentWriteId=tf(n),o.splice(o.indexOf(N),1),r=r.concat(dv(n.serverSyncTree_,c.path,le,c.currentWriteId,c.applyLocally)),r=r.concat(jr(n.serverSyncTree_,N,!0))}else f=!0,m="nodata",r=r.concat(jr(n.serverSyncTree_,c.currentWriteId,!0))}kn(n.eventQueue_,e,r),r=[],f&&(t[a].status=2,function(g){setTimeout(g,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(m==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(m),!1,null))))}rf(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)Xo(i[a]);nf(n,n.transactionQueueTree_)}function ux(n,t){let e,i=n.transactionQueueTree_;for(e=me(t);e!==null&&As(i)===void 0;)i=Xh(i,e),t=Ue(t),e=me(t);return i}function hx(n,t){let e=[];return fx(n,t,e),e.sort((i,r)=>i.order-r.order),e}function fx(n,t,e){let i=As(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);Zh(t,r=>{fx(n,r,e)})}function rf(n,t){let e=As(t);if(e){let i=0;for(let r=0;r<e.length;r++)e[r].status!==2&&(e[i]=e[r],i++);e.length=i,gv(t,e.length>0?e:void 0)}Zh(t,i=>{rf(n,i)})}function wv(n,t){let e=Tc(ux(n,t)),i=Xh(n.transactionQueueTree_,t);return $L(i,r=>{Wg(n,r)}),Wg(n,i),nx(i,r=>{Wg(n,r)}),e}function Wg(n,t){let e=As(t);if(e){let i=[],r=[],s=-1;for(let o=0;o<e.length;o++)e[o].status===3||(e[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(S(e[o].status===0,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(jr(n.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&i.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?gv(t,void 0):e.length=s+1,kn(n.eventQueue_,Tc(t),r);for(let o=0;o<i.length;o++)Xo(i[o])}}function uV(n){let t="",e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function hV(n){let t={};n.charAt(0)==="?"&&(n=n.substring(1));for(let e of n.split("&")){if(e.length===0)continue;let i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Qt(`Invalid query segment '${e}' in query '${n}'`)}return t}var F_=function(n,t){let e=fV(n),i=e.namespace;e.domain==="firebase.com"&&Ri(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&Ri("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||$1();let r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new yh(e.host,e.secure,i,r,t,"",i!==e.subdomain),path:new xe(e.pathString)}},fV=function(n){let t="",e="",i="",r="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(a=n.substring(0,d-1),n=n.substring(d+2));let f=n.indexOf("/");f===-1&&(f=n.length);let m=n.indexOf("?");m===-1&&(m=n.length),t=n.substring(0,Math.min(f,m)),f<m&&(r=uV(n.substring(f,m)));let g=hV(n.substring(Math.min(n.length,m)));d=t.indexOf(":"),d>=0?(o=a==="https"||a==="wss",c=parseInt(t.substring(d+1),10)):d=t.length;let b=t.slice(0,d);if(b.toLowerCase()==="localhost")e="localhost";else if(b.split(".").length<=2)e=b;else{let E=t.indexOf(".");i=t.substring(0,E).toLowerCase(),e=t.substring(E+1),s=i}"ns"in g&&(s=g.ns)}return{host:t,port:c,domain:e,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var aT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mV=function(){let n=0,t=[];return function(e){let i=e===n;n=e;let r,s=new Array(8);for(r=7;r>=0;r--)s[r]=aT.charAt(e%64),e=Math.floor(e/64);S(e===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&t[r]===63;r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=aT.charAt(t[r]);return S(o.length===20,"nextPushId: Length should be 20."),o}}();var Vh=class{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+_e(this.snapshot.exportVal())}},jh=class{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var yc=class{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Bh=class{constructor(t,e){this._repo=t,this._path=e}cancel(){let t=new gt;return iV(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Dn("OnDisconnect.remove",this._path);let t=new gt;return oT(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Dn("OnDisconnect.set",this._path),ki("OnDisconnect.set",t,this._path,!1);let e=new gt;return oT(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Dn("OnDisconnect.setWithPriority",this._path),ki("OnDisconnect.setWithPriority",t,this._path,!1),_v("OnDisconnect.setWithPriority",e,!1);let i=new gt;return rV(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Dn("OnDisconnect.update",this._path),rx("OnDisconnect.update",t,this._path,!1);let e=new gt;return sV(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}};var fn=class n{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return pe(this._path)?null:J_(this._path)}get ref(){return new Pn(this._repo,this._path)}get _queryIdentifier(){let t=HI(this._queryParams),e=X_(t);return e==="{}"?"default":e}get _queryObject(){return HI(this._queryParams)}isEqual(t){if(t=It(t),!(t instanceof n))return!1;let e=this._repo===t._repo,i=ev(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+wF(this._path)}};function sf(n,t){if(n._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function Hr(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Ai){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==zr)throw new Error(i);if(typeof t!="string")throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Xi)throw new Error(i);if(typeof e!="string")throw new Error(r)}}else if(n.getIndex()===qe){if(t!=null&&!vc(t)||e!=null&&!vc(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(S(n.getIndex()instanceof cc||n.getIndex()===iv,"unknown index type."),t!=null&&typeof t=="object"||e!=null&&typeof e=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function of(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Pn=class n extends fn{constructor(t,e){super(t,e,new fc,!1)}get parent(){let t=DT(this._path);return t===null?null:new n(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},Yo=class n{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let e=new xe(t),i=Gr(this.ref,t);return new n(this._node.getChild(e),i,qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>t(new n(r,Gr(this.ref,i),qe)))}hasChild(t){let e=new xe(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Ev(n,t){return n=It(n),n._checkNotDeleted("ref"),t!==void 0?Gr(n._root,t):n._root}function Cv(n,t){n=It(n),n._checkNotDeleted("refFromURL");let e=F_(t,n._repo.repoInfo_.nodeAdmin);sx("refFromURL",e);let i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Ri("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),Ev(n,e.path.toString())}function Gr(n,t){return n=It(n),me(n._path)===null?QL("child","path",t,!1):ea("child","path",t,!1),new Pn(n._repo,et(n._path,t))}function mx(n,t){n=It(n),Dn("push",n._path),ki("push",t,n._path,!0);let e=cx(n._repo),i=mV(e),r=Gr(n,i),s=Gr(n,i),o;return t!=null?o=af(s,t).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function px(n){return Dn("remove",n._path),af(n,null)}function af(n,t){n=It(n),Dn("set",n._path),ki("set",t,n._path,!1);let e=new gt;return yv(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function gx(n,t){n=It(n),Dn("setPriority",n._path),_v("setPriority",t,!1);let e=new gt;return yv(n._repo,et(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}function _x(n,t,e){if(Dn("setWithPriority",n._path),ki("setWithPriority",t,n._path,!1),_v("setWithPriority",e,!1),n.key===".length"||n.key===".keys")throw"setWithPriority failed: "+n.key+" is a read-only object.";let i=new gt;return yv(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}function vx(n,t){rx("update",t,n._path,!1);let e=new gt;return tV(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function yx(n){n=It(n);let t=new yc(()=>{}),e=new bc(t);return eV(n._repo,n,e).then(i=>new Yo(i,new Pn(n._repo,n._path),n._queryParams.getIndex()))}var bc=class n{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){let i=e._queryParams.getIndex();return new Vh("value",this,new Yo(t.snapshotNode,new Pn(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new jh(this,t,e):null}matches(t){return t instanceof n?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Uh=class n{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e=t==="children_added"?"child_added":t;return e=e==="children_removed"?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new jh(this,t,e):null}createEvent(t,e){S(t.childName!=null,"Child events should have a childName.");let i=Gr(new Pn(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Vh(t.type,this,new Yo(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof n?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function Rc(n,t,e,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let c=e,d=(f,m)=>{N_(n._repo,n,a),c(f,m)};d.userCallback=e.userCallback,d.context=e.context,e=d}let o=new yc(e,s||void 0),a=t==="value"?new bc(o):new Uh(t,o);return oV(n._repo,n,a),()=>N_(n._repo,n,a)}function lf(n,t,e,i){return Rc(n,"value",t,e,i)}function Iv(n,t,e,i){return Rc(n,"child_added",t,e,i)}function Tv(n,t,e,i){return Rc(n,"child_changed",t,e,i)}function xv(n,t,e,i){return Rc(n,"child_moved",t,e,i)}function Sv(n,t,e,i){return Rc(n,"child_removed",t,e,i)}function Av(n,t,e){let i=null,r=e?new yc(e):null;t==="value"?i=new bc(r):t&&(i=new Uh(t,r)),N_(n._repo,n,i)}var Mn=class{},zh=class extends Mn{constructor(t,e){super(),this._value=t,this._key=e,this.type="endAt"}_apply(t){ki("endAt",this._value,t._path,!0);let e=h_(t._queryParams,this._value,this._key);if(of(e),Hr(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fn(t._repo,t._path,e,t._orderByCalled)}};function bx(n,t){return Sc("endAt","key",t,!0),new zh(n,t)}var L_=class extends Mn{constructor(t,e){super(),this._value=t,this._key=e,this.type="endBefore"}_apply(t){ki("endBefore",this._value,t._path,!1);let e=BF(t._queryParams,this._value,this._key);if(of(e),Hr(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fn(t._repo,t._path,e,t._orderByCalled)}};function wx(n,t){return Sc("endBefore","key",t,!0),new L_(n,t)}var $h=class extends Mn{constructor(t,e){super(),this._value=t,this._key=e,this.type="startAt"}_apply(t){ki("startAt",this._value,t._path,!0);let e=u_(t._queryParams,this._value,this._key);if(of(e),Hr(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fn(t._repo,t._path,e,t._orderByCalled)}};function Ex(n=null,t){return Sc("startAt","key",t,!0),new $h(n,t)}var V_=class extends Mn{constructor(t,e){super(),this._value=t,this._key=e,this.type="startAfter"}_apply(t){ki("startAfter",this._value,t._path,!1);let e=jF(t._queryParams,this._value,this._key);if(of(e),Hr(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fn(t._repo,t._path,e,t._orderByCalled)}};function Cx(n,t){return Sc("startAfter","key",t,!0),new V_(n,t)}var j_=class extends Mn{constructor(t){super(),this._limit=t,this.type="limitToFirst"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fn(t._repo,t._path,LF(t._queryParams,this._limit),t._orderByCalled)}};function Ix(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new j_(n)}var B_=class extends Mn{constructor(t){super(),this._limit=t,this.type="limitToLast"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fn(t._repo,t._path,VF(t._queryParams,this._limit),t._orderByCalled)}};function Tx(n){if(typeof n!="number"||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new B_(n)}var U_=class extends Mn{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){sf(t,"orderByChild");let e=new xe(this._path);if(pe(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let i=new cc(e),r=qh(t._queryParams,i);return Hr(r),new fn(t._repo,t._path,r,!0)}};function xx(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ea("orderByChild","path",n,!1),new U_(n)}var z_=class extends Mn{constructor(){super(...arguments),this.type="orderByKey"}_apply(t){sf(t,"orderByKey");let e=qh(t._queryParams,Ai);return Hr(e),new fn(t._repo,t._path,e,!0)}};function Sx(){return new z_}var $_=class extends Mn{constructor(){super(...arguments),this.type="orderByPriority"}_apply(t){sf(t,"orderByPriority");let e=qh(t._queryParams,qe);return Hr(e),new fn(t._repo,t._path,e,!0)}};function Ax(){return new $_}var W_=class extends Mn{constructor(){super(...arguments),this.type="orderByValue"}_apply(t){sf(t,"orderByValue");let e=qh(t._queryParams,iv);return Hr(e),new fn(t._repo,t._path,e,!0)}};function Rx(){return new W_}var q_=class extends Mn{constructor(t,e){super(),this._value=t,this._key=e,this.type="equalTo"}_apply(t){if(ki("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new zh(this._value,this._key)._apply(new $h(this._value,this._key)._apply(t))}};function Dx(n,t){return Sc("equalTo","key",t,!0),new q_(n,t)}function Gn(n,...t){let e=It(n);for(let i of t)e=i._apply(e);return e}wL(Pn);xL(Pn);var pV="FIREBASE_DATABASE_EMULATOR_HOST",G_={},gV=!1;function _V(n,t,e,i){n.repoInfo_=new yh(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function Rv(n,t,e,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||Ri("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),St("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=F_(s,r),a=o.repoInfo,c,d;typeof process<"u"&&process.env&&(d=process.env[pV]),d?(c=!0,s=`http://${d}?ns=${a.namespace}`,o=F_(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let f=r&&c?new ic(ic.OWNER):new Yg(n.name,n.options,t);sx("Invalid Firebase Database URL",o),pe(o.path)||Ri("Database URL must point to the root of a Firebase Database (not including a child path).");let m=yV(a,n,f,new Qg(n.name,e));return new H_(m,n)}function vV(n,t){let e=G_[t];(!e||e[n.key]!==n)&&Ri(`Database ${t}(${n.repoInfo_}) has already been deleted.`),dx(n),delete e[n.key]}function yV(n,t,e,i){let r=G_[t.name];r||(r={},G_[t.name]=r);let s=r[n.toURLString()];return s&&Ri("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new O_(n,gV,e,i),r[n.toURLString()]=s,s}var H_=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(ZL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pn(this._repo,Te())),this._rootInternal}_delete(){return this._rootInternal!==null&&(vV(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Ri("Cannot call "+t+" on a deleted database.")}};function kx(){RT.IS_TRANSPORT_INITIALIZED&&Qt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Px(){kx(),ac.forceDisallow()}function Mx(){kx(),Bo.forceDisallow(),ac.forceAllow()}function Ox(n,t,e,i={}){n=It(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Ri("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Ri('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new ic(ic.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:oo(i.mockUserToken,n.app.options.projectId);s=new ic(o)}_V(r,t,e,s)}function Nx(n){n=It(n),n._checkNotDeleted("goOffline"),dx(n._repo)}function Fx(n){n=It(n),n._checkNotDeleted("goOnline"),aV(n._repo)}function Lx(n,t){uT(n,t)}function bV(n){Y_(co),ji(new In("database",(t,{instanceIdentifier:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return Rv(i,r,s,e)},"PUBLIC").setMultipleInstances(!0)),Ze(DI,kI,n),Ze(DI,kI,"esm2017")}var wV={".sv":"timestamp"};function Vx(){return wV}function jx(n){return{".sv":{increment:n}}}var K_=class{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Bx(n,t,e){var i;if(n=It(n),Dn("Reference.transaction",n._path),n.key===".length"||n.key===".keys")throw"Reference.transaction failed: "+n.key+" is a read-only object.";let r=(i=e?.applyLocally)!==null&&i!==void 0?i:!0,s=new gt,o=(c,d,f)=>{let m=null;c?s.reject(c):(m=new Yo(f,new Pn(n._repo,n._path),qe),s.resolve(new K_(d,m)))},a=lf(n,()=>{});return lV(n._repo,n._path,t,o,a,r),s.promise}tv.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};tv.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};bV();var EV="@firebase/database-compat",CV="1.0.8";var IV=new vi("@firebase/database-compat"),Ux=function(n){let t="FIREBASE WARNING: "+n;IV.warn(t)};var TV=function(n,t,e,i){if(!(i&&e===void 0)&&typeof e!="boolean")throw new Error(Ht(n,t)+"must be a boolean.")},xV=function(n,t,e){if(!(e&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ht(n,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var Dv=class{constructor(t){this._delegate=t}cancel(t){ie("OnDisconnect.cancel",0,1,arguments.length),Ct("OnDisconnect.cancel","onComplete",t,!0);let e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){ie("OnDisconnect.remove",0,1,arguments.length),Ct("OnDisconnect.remove","onComplete",t,!0);let e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){ie("OnDisconnect.set",1,2,arguments.length),Ct("OnDisconnect.set","onComplete",e,!0);let i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){ie("OnDisconnect.setWithPriority",2,3,arguments.length),Ct("OnDisconnect.setWithPriority","onComplete",i,!0);let r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if(ie("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Ux("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ct("OnDisconnect.update","onComplete",e,!0);let i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}};var kv=class{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return ie("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Rs=class n{constructor(t,e){this._database=t,this._delegate=e}val(){return ie("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return ie("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return ie("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return ie("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return ie("DataSnapshot.child",0,1,arguments.length),t=String(t),ea("DataSnapshot.child","path",t,!1),new n(this._database,this._delegate.child(t))}hasChild(t){return ie("DataSnapshot.hasChild",1,1,arguments.length),ea("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return ie("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return ie("DataSnapshot.forEach",1,1,arguments.length),Ct("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new n(this._database,e)))}hasChildren(){return ie("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return ie("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return ie("DataSnapshot.ref",0,0,arguments.length),new Zi(this._database,this._delegate.ref)}get ref(){return this.getRef()}},cf=class n{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;ie("Query.on",2,4,arguments.length),Ct("Query.on","callback",e,!1);let o=n.getCancelAndContextArgs_("Query.on",i,r),a=(d,f)=>{e.call(o.context,new Rs(this.database,d),f)};a.userCallback=e,a.context=o.context;let c=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(t){case"value":return lf(this._delegate,a,c),e;case"child_added":return Iv(this._delegate,a,c),e;case"child_removed":return Sv(this._delegate,a,c),e;case"child_changed":return Tv(this._delegate,a,c),e;case"child_moved":return xv(this._delegate,a,c),e;default:throw new Error(Ht("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if(ie("Query.off",0,3,arguments.length),xV("Query.off",t,!0),Ct("Query.off","callback",e,!0),Jm("Query.off","context",i,!0),e){let r=()=>{};r.userCallback=e,r.context=i,Av(this._delegate,t,r)}else Av(this._delegate,t)}get(){return yx(this._delegate).then(t=>new Rs(this.database,t))}once(t,e,i,r){ie("Query.once",1,4,arguments.length),Ct("Query.once","callback",e,!0);let s=n.getCancelAndContextArgs_("Query.once",i,r),o=new gt,a=(d,f)=>{let m=new Rs(this.database,d);e&&e.call(s.context,m,f),o.resolve(m)};a.userCallback=e,a.context=s.context;let c=d=>{s.cancel&&s.cancel.call(s.context,d),o.reject(d)};switch(t){case"value":lf(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":Iv(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":Sv(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":Tv(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":xv(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(Ht("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(t){return ie("Query.limitToFirst",1,1,arguments.length),new n(this.database,Gn(this._delegate,Ix(t)))}limitToLast(t){return ie("Query.limitToLast",1,1,arguments.length),new n(this.database,Gn(this._delegate,Tx(t)))}orderByChild(t){return ie("Query.orderByChild",1,1,arguments.length),new n(this.database,Gn(this._delegate,xx(t)))}orderByKey(){return ie("Query.orderByKey",0,0,arguments.length),new n(this.database,Gn(this._delegate,Sx()))}orderByPriority(){return ie("Query.orderByPriority",0,0,arguments.length),new n(this.database,Gn(this._delegate,Ax()))}orderByValue(){return ie("Query.orderByValue",0,0,arguments.length),new n(this.database,Gn(this._delegate,Rx()))}startAt(t=null,e){return ie("Query.startAt",0,2,arguments.length),new n(this.database,Gn(this._delegate,Ex(t,e)))}startAfter(t=null,e){return ie("Query.startAfter",0,2,arguments.length),new n(this.database,Gn(this._delegate,Cx(t,e)))}endAt(t=null,e){return ie("Query.endAt",0,2,arguments.length),new n(this.database,Gn(this._delegate,bx(t,e)))}endBefore(t=null,e){return ie("Query.endBefore",0,2,arguments.length),new n(this.database,Gn(this._delegate,wx(t,e)))}equalTo(t,e){return ie("Query.equalTo",1,2,arguments.length),new n(this.database,Gn(this._delegate,Dx(t,e)))}toString(){return ie("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return ie("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if(ie("Query.isEqual",1,1,arguments.length),!(t instanceof n)){let e="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(e)}return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){let r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,Ct(t,"cancel",r.cancel,!0),r.context=i,Jm(t,"context",r.context,!0);else if(e)if(typeof e=="object"&&e!==null)r.context=e;else if(typeof e=="function")r.cancel=e;else throw new Error(Ht(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new Zi(this.database,new Pn(this._delegate._repo,this._delegate._path))}},Zi=class n extends cf{constructor(t,e){super(t,new fn(e._repo,e._path,new fc,!1)),this.database=t,this._delegate=e}getKey(){return ie("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return ie("Reference.child",1,1,arguments.length),typeof t=="number"&&(t=String(t)),new n(this.database,Gr(this._delegate,t))}getParent(){ie("Reference.parent",0,0,arguments.length);let t=this._delegate.parent;return t?new n(this.database,t):null}getRoot(){return ie("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}set(t,e){ie("Reference.set",1,2,arguments.length),Ct("Reference.set","onComplete",e,!0);let i=af(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if(ie("Reference.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Ux("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Dn("Reference.update",this._delegate._path),Ct("Reference.update","onComplete",e,!0);let i=vx(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){ie("Reference.setWithPriority",2,3,arguments.length),Ct("Reference.setWithPriority","onComplete",i,!0);let r=_x(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){ie("Reference.remove",0,1,arguments.length),Ct("Reference.remove","onComplete",t,!0);let e=px(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){ie("Reference.transaction",1,3,arguments.length),Ct("Reference.transaction","transactionUpdate",t,!1),Ct("Reference.transaction","onComplete",e,!0),TV("Reference.transaction","applyLocally",i,!0);let r=Bx(this._delegate,t,{applyLocally:i}).then(s=>new kv(s.committed,new Rs(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){ie("Reference.setPriority",1,2,arguments.length),Ct("Reference.setPriority","onComplete",e,!0);let i=gx(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){ie("Reference.push",0,2,arguments.length),Ct("Reference.push","onComplete",e,!0);let i=mx(this._delegate,t),r=i.then(o=>new n(this.database,o));e&&r.then(()=>e(null),o=>e(o));let s=new n(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Dn("Reference.onDisconnect",this._delegate._path),new Dv(new Bh(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Ds=class{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Px,forceLongPolling:Mx}}useEmulator(t,e,i={}){Ox(this._delegate,t,e,i)}ref(t){if(ie("database.ref",0,1,arguments.length),t instanceof Zi){let e=Cv(this._delegate,t.toString());return new Zi(this,e)}else{let e=Ev(this._delegate,t);return new Zi(this,e)}}refFromURL(t){ie("database.refFromURL",1,1,arguments.length);let i=Cv(this._delegate,t);return new Zi(this,i)}goOffline(){return ie("database.goOffline",0,0,arguments.length),Nx(this._delegate)}goOnline(){return ie("database.goOnline",0,0,arguments.length),Fx(this._delegate)}};Ds.ServerValue={TIMESTAMP:Vx(),increment:n=>jx(n)};function SV({app:n,url:t,version:e,customAuthImpl:i,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){Y_(e);let a=new ru("database-standalone"),c=new il("auth-internal",a);c.setComponent(new In("auth-internal",()=>i,"PRIVATE"));let d;return r&&(d=new il("app-check-internal",a),d.setComponent(new In("app-check-internal",()=>r,"PRIVATE"))),{instance:new Ds(Rv(n,c,d,t,o),n),namespace:s}}var AV=Object.freeze({__proto__:null,initStandalone:SV});var RV=Ds.ServerValue;function DV(n){n.INTERNAL.registerComponent(new In("database-compat",(t,{instanceIdentifier:e})=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new Ds(r,i)},"PUBLIC").setServiceProps({Reference:Zi,Query:cf,Database:Ds,DataSnapshot:Rs,enableLogging:Lx,INTERNAL:AV,ServerValue:RV}).setMultipleInstances(!0)),n.registerVersion(EV,CV)}DV(gn);function Dc(n,t,e="on",i=xd){return new nt(r=>{let s=null;return s=n[e](t,(o,a)=>{i.schedule(()=>{r.next({snapshot:o,prevKey:a})}),e==="once"&&i.schedule(()=>r.complete())},o=>{i.schedule(()=>r.error(o))}),e==="on"?{unsubscribe(){s!=null&&n.off(t,s)}}:{unsubscribe(){}}}).pipe(Y(r=>{let{snapshot:s,prevKey:o}=r,a=null;return s.exists()&&(a=s.key),{type:t,payload:s,prevKey:o,key:a}}),kd())}function kV(n){return typeof n=="string"}function PV(n){return typeof n.exportVal=="function"}function Gx(n){return n==null}function Hx(n){return typeof n.set=="function"}function zx(n,t){return Hx(t)?t:n.ref(t)}function Kx(n,t){if(kV(n))return t.stringCase();if(Hx(n))return t.firebaseCase();if(PV(n))return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof n}`)}function Qx(n){return(Gx(n)||n.length===0)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Yx(n,t,e){t=Qx(t);let i=t.map(r=>Dc(n,r,"on",e));return mt(...i)}function MV(n,t,e){let i=Yx(n,t).pipe(Ka((r,s)=>[...r,s],[]));return NV(n,i,e)}function OV(n,t){return Dc(n,"value","on",t).pipe(Y(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}function NV(n,t,e){return OV(n,e).pipe($w(t),Y(([r,s])=>{let o=r.lastKeyToLoad,a=s.map(c=>c.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),zw(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),Y(r=>r.actions))}function $x(n,t){return function(i,r){return Kx(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function FV(n){return function(e){return e?Kx(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function LV(n,t,e){return Dc(n,"value","once",e).pipe(He(i=>{let r=[K(i)];return t.forEach(s=>r.push(Dc(n,s,"on",e))),mt(...r).pipe(Ka(jV,[]))}),Ha())}function Xx(n,t){let e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function VV(n,t){if(Gx(t))return 0;{let e=Xx(n,t);return e===-1?n.length:e+1}}function jV(n,t){let{payload:e,prevKey:i,key:r}=t,s=Xx(n,r),o=VV(n,i);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(c=>{let d={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,n=[...n,d],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==i&&(n=n.filter(c=>c.payload.key!==e.key),n.splice(o,0,t));else{if(i==null)return[t,...n];n=n.slice(),n.splice(o,0,t)}return n;case"child_removed":return n.filter(a=>a.payload.key!==e.key);case"child_changed":return n.map(a=>a.payload.key===r?t:a);case"child_moved":if(s>-1){let a=n.splice(s,1)[0];return n=n.slice(),n.splice(o,0,a),n}return n;default:return n}}function Wx(n,t,e){return t=Qx(t),LV(n,t,e)}function BV(n,t){let e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:$x(i,"update"),set:$x(i,"set"),push:r=>i.push(r),remove:FV(i),snapshotChanges(r){return Wx(n,r,e).pipe(xi)},stateChanges(r){return Yx(n,r,e).pipe(xi)},auditTrail(r){return MV(n,r,e).pipe(xi)},valueChanges(r,s){return Wx(n,r,e).pipe(Y(a=>a.map(c=>s&&s.idField?Ie(L({},c.payload.val()),{[s.idField]:c.key}):c.payload.val())),xi)}}}function qx(n,t){return function(){return Dc(n,"value","on",t)}}function UV(n,t){return{query:n,snapshotChanges(){return qx(n,t.schedulers.outsideAngular)().pipe(xi)},update(e){return n.ref.update(e)},set(e){return n.ref.set(e)},remove(){return n.ref.remove()},valueChanges(){return qx(n,t.schedulers.outsideAngular)().pipe(xi,Y(i=>i.payload.exists()?i.payload.val():null))}}}var zV=new j("angularfire2.realtimeDatabaseURL"),$V=new j("angularfire2.database.use-emulator"),WV=(()=>{class n{schedulers;database;constructor(e,i,r,s,o,a,c,d,f,m,g,b,E,M,N){this.schedulers=a;let ce=c,le=Yl(e,o,i);d&&Lg(le,o,f,g,b,E,m,M),this.database=ph(`${le.name}.database.${r}`,"AngularFireDatabase",le.name,()=>{let q=o.runOutsideAngular(()=>le.database(r||void 0));return ce&&q.useEmulator(...ce),q},[ce])}list(e,i){let r=this.schedulers.ngZone.runOutsideAngular(()=>zx(this.database,e)),s=r;return i&&(s=i(r)),BV(s,this)}object(e){let i=this.schedulers.ngZone.runOutsideAngular(()=>zx(this.database,e));return UV(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||n)(x(Lo),x(Vo,8),x(zV,8),x(Mt),x(G),x($n),x($V,8),x(RI,8),x(kg,8),x(Pg,8),x(Mg,8),x(Og,8),x(Ng,8),x(Fg,8),x(Rn,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Zx=(()=>{class n{constructor(){gn.registerVersion("angularfire",dn.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=oe({type:n});static \u0275inj=se({providers:[WV]})}return n})();var qV=(n,t)=>({active:n,disabled:t});function GV(n,t){n&1&&he(0,"app-loader")}function HV(n,t){if(n&1&&(P(0,"mat-error"),$(1),D()),n&2){let e=B(2);F(),Ve(e.errorEmailMessage())}}function KV(n,t){if(n&1&&(P(0,"mat-error"),$(1),D()),n&2){let e=B(2);F(),Ve(e.errorPasswordMessage())}}function QV(n,t){if(n&1){let e=ge();P(0,"form",3),H("ngSubmit",function(){X(e);let r=B();return Z(r.onSubmit(r.form.valid))}),P(1,"mat-form-field")(2,"mat-label"),$(3,"Enter your email"),D(),P(4,"input",4),H("blur",function(){X(e);let r=B();return Z(r.updateEmailErrorMessage())}),D(),Q(5,HV,2,1,"mat-error"),D(),P(6,"mat-form-field")(7,"mat-label"),$(8,"Enter your password"),D(),P(9,"input",5),H("blur",function(){X(e);let r=B();return Z(r.updatePasswordErrorMessage())}),D(),P(10,"button",6),H("click",function(r){X(e);let s=B();return Z(s.clickEvent(r))}),P(11,"mat-icon"),$(12),D()(),Q(13,KV,2,1,"mat-error"),D(),P(14,"button",7),$(15,"Submit"),D(),P(16,"div",8)(17,"p"),$(18,"Don't have an account? "),P(19,"a",9),$(20,"Create one!"),D()()()()}if(n&2){let e=B();U("formGroup",e.form),F(5),$e(e.form.controls.email.invalid?5:-1),F(4),U("type",e.hide()?"password":"text"),F(),Oe("aria-label","Hide password")("aria-pressed",e.hide()),F(2),Ve(e.hide()?"visibility_off":"visibility"),F(),$e(e.form.controls.password.invalid?13:-1),F(),U("ngClass",pr(9,qV,e.form.valid,e.form.invalid)),F(5),U("routerLink","/register")}}var df=class n{form=new wi({email:new ln("q@gmail.com",[We.required,We.email]),password:new ln("11111111",[We.required,We.minLength(8)])});hide=st(!0);errorEmailMessage=st("");errorPasswordMessage=st("");authService=A(Je);errorsService=A(Oo);isLoading=!1;notificationMessage="";notification;router=A(Lt);subscription;constructor(){mt(this.form.controls.email.statusChanges,this.form.controls.email.valueChanges).pipe(ms()).subscribe(()=>this.updateEmailErrorMessage()),mt(this.form.controls.password.statusChanges,this.form.controls.password.valueChanges).pipe(ms()).subscribe(()=>this.updatePasswordErrorMessage())}ngOnInit(){this.authService.getUser(),this.authService.user&&this.router.navigate(["/main"])}ngOnDestroy(){this.subscription?.unsubscribe()}updateEmailErrorMessage(){this.form.controls.email.hasError("required")?this.errorEmailMessage.set("You must enter a value"):this.form.controls.email.hasError("email")?this.errorEmailMessage.set("Not a valid email"):this.errorEmailMessage.set("")}updatePasswordErrorMessage(){this.form.controls.password.hasError("required")?this.errorPasswordMessage.set("You must enter a value"):this.form.controls.password.hasError("minlength")?this.errorPasswordMessage.set("Value should not be less then 8 characters long"):this.errorPasswordMessage.set("")}clickEvent(t){this.hide.set(!this.hide()),t.stopPropagation()}showNotification(t,e){console.log("message: ",t),t||(t="An unknown error has occured. Please, try again later"),this.notificationMessage=t,this.isLoading=!1,this.notification&&(this.notification.setValues(this.notificationMessage,e),this.notification.show())}onSubmit(t){t&&this.form.value.email&&this.form.value.password?(this.isLoading=!0,this.subscription=this.authService.login(this.form.value.email,this.form.value.password).subscribe({next:e=>{this.isLoading=!1,this.router.navigate(["/main"])},error:e=>{this.notificationMessage="",this.isLoading=!1,console.log(e),this.showNotification(e.error.error,"error")}})):(this.updateEmailErrorMessage(),this.updatePasswordErrorMessage())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-log-in-page"]],viewQuery:function(e,i){if(e&1&&Ke(jt,5),e&2){let r;Re(r=De())&&(i.notification=r.first)}},standalone:!0,features:[ne],decls:4,vars:2,consts:[[1,"wrapper"],[4,"ngIf"],["class","example-container",3,"formGroup","ngSubmit",4,"ngIf"],[1,"example-container",3,"ngSubmit","formGroup"],["matInput","","placeholder","pat@example.com","formControlName","email","required","",3,"blur"],["matInput","","formControlName","password",3,"blur","type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["type","submit",1,"sbt-btn",3,"ngClass"],[1,"text"],[3,"routerLink"]],template:function(e,i){e&1&&(P(0,"div",0),he(1,"app-notification"),Q(2,GV,1,0,"app-loader",1)(3,QV,21,12,"form",2),D()),e&2&&(F(2),U("ngIf",i.isLoading),F(),U("ngIf",!i.isLoading))},dependencies:[An,Or,Ii,Po,th,Fr,Nr,Ci,Dr,Bn,Ei,Rr,Gi,kr,qi,ps,Mo,dh,ch,lh,Ne,Ft,ut,Pu,ku,jt,Ti,mI,Zx],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:80vh;font-size:1.2em;box-sizing:border-box}.example-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;box-sizing:border-box;width:400px;border-radius:10px;border:1px solid #9a8fbf;box-shadow:0 0 43px #9a8fbf}.example-right-align[_ngcontent-%COMP%]{text-align:right}input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:200px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.sbt-btn.disabled[_ngcontent-%COMP%]{opacity:.6}.text[_ngcontent-%COMP%]{margin:20px}a[_ngcontent-%COMP%]{color:gray;cursor:pointer}p[_ngcontent-%COMP%]{margin:5px}@media (width <= 290px){.example-container[_ngcontent-%COMP%]{padding:5px}}"]})};var YV=(n,t)=>({active:n,disabled:t});function XV(n,t){n&1&&he(0,"app-loader")}function ZV(n,t){if(n&1&&(P(0,"mat-error"),$(1),D()),n&2){let e=B(2);F(),Ve(e.errorEmailMessage())}}function JV(n,t){if(n&1&&(P(0,"mat-error"),$(1),D()),n&2){let e=B(2);F(),Ve(e.errorPasswordMessage())}}function e2(n,t){n&1&&(P(0,"mat-error"),$(1,"Passwords are not the same!"),D())}function t2(n,t){if(n&1){let e=ge();P(0,"form",3),H("ngSubmit",function(){X(e);let r=B();return Z(r.onSubmit(r.form.valid))}),P(1,"mat-form-field")(2,"mat-label"),$(3,"Enter your email"),D(),P(4,"input",4),H("blur",function(){X(e);let r=B();return Z(r.updateEmailErrorMessage())}),D(),Q(5,ZV,2,1,"mat-error"),D(),P(6,"mat-form-field")(7,"mat-label"),$(8,"Enter your password"),D(),P(9,"input",5),H("blur",function(){X(e);let r=B();return Z(r.updatePasswordErrorMessage())}),D(),P(10,"button",6),H("click",function(r){X(e);let s=B();return Z(s.clickEvent(r))}),P(11,"mat-icon"),$(12),D()(),Q(13,JV,2,1,"mat-error"),D(),P(14,"mat-form-field")(15,"mat-label"),$(16,"Enter your password"),D(),P(17,"input",7),H("blur",function(){X(e);let r=B();return Z(r.updatePasswordErrorMessage())}),D(),P(18,"button",6),H("click",function(r){X(e);let s=B();return Z(s.clickEvent(r,1))}),P(19,"mat-icon"),$(20),D()(),Q(21,e2,2,0,"mat-error"),D(),P(22,"button",8),$(23,"Submit"),D(),P(24,"div",9)(25,"p"),$(26,"Already have an account? "),P(27,"a",10),$(28,"Log in!"),D()()()()}if(n&2){let e=B();U("formGroup",e.form),F(5),$e(e.form.controls.email.invalid?5:-1),F(4),U("type",e.hide()?"password":"text"),F(),Oe("aria-label","Hide password")("aria-pressed",e.hide()),F(2),Ve(e.hide()?"visibility_off":"visibility"),F(),$e(e.form.controls.password.invalid?13:-1),F(4),U("type",e.hide1()?"password":"text"),F(),Oe("aria-label","Hide password")("aria-pressed",e.hide1()),F(2),Ve(e.hide1()?"visibility_off":"visibility"),F(),$e(e.form.controls.password!=e.form.controls.password1?21:-1),F(),U("ngClass",pr(14,YV,e.form.valid,e.form.invalid)),F(5),U("routerLink","/login")}}var uf=class n{form=new wi({email:new ln("",[We.required,We.email]),password:new ln("",[We.required,We.minLength(8)]),password1:new ln("",[We.required,We.minLength(8)])});hide=st(!0);hide1=st(!0);errorEmailMessage=st("");errorPasswordMessage=st("");errorPassword1Message=st("");authService=A(Je);errorsService=A(Oo);isLoading=!1;notificationMessage="";notification;router=A(Lt);subscription;constructor(){mt(this.form.controls.email.statusChanges,this.form.controls.email.valueChanges).pipe(ms()).subscribe(()=>this.updateEmailErrorMessage()),mt(this.form.controls.password.statusChanges,this.form.controls.password.valueChanges).pipe(ms()).subscribe(()=>this.updatePasswordErrorMessage())}ngOnDestroy(){this.subscription?.unsubscribe()}ngOnInit(){this.authService.getUser(),this.authService.user&&this.router.navigate(["/main"])}updateEmailErrorMessage(){this.form.controls.email.hasError("required")?this.errorEmailMessage.set("You must enter a value"):this.form.controls.email.hasError("email")?this.errorEmailMessage.set("Not a valid email"):this.errorEmailMessage.set("")}updatePasswordErrorMessage(){this.form.controls.password.hasError("required")?this.errorPasswordMessage.set("You must enter a value"):this.form.controls.password.hasError("minlength")?this.errorPasswordMessage.set("Value should not be less then 8 characters long"):this.errorPasswordMessage.set("")}clickEvent(t,e=0){e?this.hide1.set(!this.hide1()):this.hide.set(!this.hide()),t.stopPropagation()}showNotification(t,e){t||(t="An unknown error has occured. Please, try again later"),this.notificationMessage=t,this.isLoading=!1,this.notification&&(this.notification.setValues(this.notificationMessage,e),this.notification.show())}onSubmit(t){t&&this.form.value.email&&this.form.value.password?(this.isLoading=!0,console.log("router1"),this.subscription=this.authService.register(this.form.value.email,this.form.value.password).subscribe({next:e=>{console.log("router2"),this.isLoading=!1,this.router.navigate(["/login"])},error:e=>{this.notificationMessage="",console.log(e),this.isLoading=!1,this.showNotification(e.error.error,"error")}})):(this.updateEmailErrorMessage(),this.updatePasswordErrorMessage())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-register-page"]],viewQuery:function(e,i){if(e&1&&Ke(jt,5),e&2){let r;Re(r=De())&&(i.notification=r.first)}},standalone:!0,features:[ne],decls:4,vars:2,consts:[[1,"wrapper"],[4,"ngIf"],["class","example-container",3,"formGroup","ngSubmit",4,"ngIf"],[1,"example-container",3,"ngSubmit","formGroup"],["matInput","","placeholder","pat@example.com","formControlName","email","required","",3,"blur"],["matInput","","formControlName","password",3,"blur","type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","password1",3,"blur","type"],["type","submit",1,"sbt-btn",3,"ngClass"],[1,"text"],[3,"routerLink"]],template:function(e,i){e&1&&(P(0,"div",0),he(1,"app-notification"),Q(2,XV,1,0,"app-loader",1)(3,t2,29,17,"form",2),D()),e&2&&(F(2),U("ngIf",i.isLoading),F(),U("ngIf",!i.isLoading))},dependencies:[An,Or,Ii,Po,th,Fr,Nr,Ci,Dr,Bn,Ei,Rr,Gi,kr,qi,ps,Mo,dh,ch,lh,Ne,Ft,ut,Ti,jt,Pu,ku],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:80vh;font-size:1.2em;box-sizing:border-box}.example-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;box-sizing:border-box;width:400px;border-radius:10px;border:1px solid #9a8fbf;box-shadow:0 0 43px #9a8fbf}.example-right-align[_ngcontent-%COMP%]{text-align:right}input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:200px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.sbt-btn.disabled[_ngcontent-%COMP%]{opacity:.6}.text[_ngcontent-%COMP%]{margin:20px}a[_ngcontent-%COMP%]{color:gray;cursor:pointer}p[_ngcontent-%COMP%]{margin:5px}@media (width <= 290px){.example-container[_ngcontent-%COMP%]{padding:5px}}"]})};var n2=20,kc=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new W,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=n2){return this._platform.isBrowser?new nt(i=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(Um(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):K()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(it(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=wt(i),s=e.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return Dd(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||n)(x(G),x(ke),x(J,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Jx=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new W,this._elementScrolled=new nt(o=>this.ngZone.runOutsideAngular(()=>Dd(this.elementRef.nativeElement,"scroll").pipe(dt(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=r?e.end:e.start),e.right==null&&(e.right=r?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&Ao()!=ni.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),Ao()==ni.INVERTED?e.left=e.right:Ao()==ni.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;Ku()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",r="right",s=this.elementRef.nativeElement;if(e=="top")return s.scrollTop;if(e=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let o=this.dir&&this.dir.value=="rtl";return e=="start"?e=o?r:i:e=="end"&&(e=o?i:r),o&&Ao()==ni.INVERTED?e==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Ao()==ni.NEGATED?e==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(kc),k(G),k(Un,8))}}static{this.\u0275dir=te({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return n})(),i2=20,Pc=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new W,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect(),o=-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,a=-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:o,left:a}}change(e=i2){return e>0?this._change.pipe(Um(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||n)(x(ke),x(G),x(J,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var na=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({})}}return n})(),Pv=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({imports:[Pr,na,Pr,na]})}}return n})();function pS(n){let t=n.cloneNode(!0),e=t.querySelectorAll("[id]"),i=n.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return i==="canvas"?nS(n,t):(i==="input"||i==="select"||i==="textarea")&&tS(n,t),eS("canvas",n,t,nS),eS("input, textarea, select",n,t,tS),t}function eS(n,t,e,i){let r=t.querySelectorAll(n);if(r.length){let s=e.querySelectorAll(n);for(let o=0;o<r.length;o++)i(r[o],s[o])}}var r2=0;function tS(n,t){t.type!=="file"&&(t.value=n.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${r2++}`)}function nS(n,t){let e=t.getContext("2d");if(e)try{e.drawImage(n,0,0)}catch{}}function Uv(n){let t=n.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function Nv(n,t,e){let{top:i,bottom:r,left:s,right:o}=n;return e>=i&&e<=r&&t>=s&&t<=o}function Oc(n,t,e){n.top+=t,n.bottom=n.top+n.height,n.left+=e,n.right=n.left+n.width}function iS(n,t,e,i){let{top:r,right:s,bottom:o,left:a,width:c,height:d}=n,f=c*t,m=d*t;return i>r-m&&i<o+m&&e>a-f&&e<s+f}var pf=class{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Uv(e)})})}handleScroll(t){let e=Vt(t),i=this.positions.get(e);if(!i)return null;let r=i.scrollPosition,s,o;if(e===this._document){let d=this.getViewportScrollPosition();s=d.top,o=d.left}else s=e.scrollTop,o=e.scrollLeft;let a=r.top-s,c=r.left-o;return this.positions.forEach((d,f)=>{d.clientRect&&e!==f&&e.contains(f)&&Oc(d.clientRect,a,c)}),r.top=s,r.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function gS(n,t){let e=n.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(r=>i.appendChild(r)),i}function zv(n,t,e){for(let i in t)if(t.hasOwnProperty(i)){let r=t[i];r?n.setProperty(i,r,e?.has(i)?"important":""):n.removeProperty(i)}return n}function ia(n,t){let e=t?"":"none";zv(n.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function rS(n,t,e){zv(n.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function gf(n,t){return t&&t!="none"?n+" "+t:n}function sS(n,t){n.style.width=`${t.width}px`,n.style.height=`${t.height}px`,n.style.transform=_f(t.left,t.top)}function _f(n,t){return`translate3d(${Math.round(n)}px, ${Math.round(t)}px, 0)`}function oS(n){let t=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*t}function s2(n){let t=getComputedStyle(n),e=Ov(t,"transition-property"),i=e.find(a=>a==="transform"||a==="all");if(!i)return 0;let r=e.indexOf(i),s=Ov(t,"transition-duration"),o=Ov(t,"transition-delay");return oS(s[r])+oS(o[r])}function Ov(n,t){return n.getPropertyValue(t).split(",").map(i=>i.trim())}var o2=new Set(["position"]),Fv=class{get element(){return this._preview}constructor(t,e,i,r,s,o,a,c,d){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=r,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=a,this._initialTransform=c,this._zIndex=d}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),aS(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return s2(this._preview)}addEventListener(t,e){this._preview.addEventListener(t,e)}removeEventListener(t,e){this._preview.removeEventListener(t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,r;if(i&&t){let s=t.matchSize?this._initialDomRect:null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),r=gS(o,this._document),this._previewEmbeddedView=o,t.matchSize?sS(r,s):r.style.transform=_f(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=pS(this._rootElement),sS(r,this._initialDomRect),this._initialTransform&&(r.style.transform=this._initialTransform);return zv(r.style,{"pointer-events":"none",margin:aS(r)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},o2),ia(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("popover","manual"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}};function aS(n){return"showPopover"in n}var lS=Sn({passive:!0}),hf=Sn({passive:!1}),cS=Sn({passive:!1,capture:!0}),a2=800,dS=new Set(["position"]),Lv=class{get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>ia(e,t)))}constructor(t,e,i,r,s,o){this._config=e,this._document=i,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=st(!1),this._moveEvents=new W,this._pointerMoveSubscription=kt.EMPTY,this._pointerUpSubscription=kt.EMPTY,this._scrollSubscription=kt.EMPTY,this._resizeSubscription=kt.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this.scale=1,this._disabled=!1,this.beforeStarted=new W,this.started=new W,this.released=new W,this.ended=new W,this.entered=new W,this.exited=new W,this.dropped=new W,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{let c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging()){let f=Math.abs(c.x-this._pickupPositionOnPage.x),m=Math.abs(c.y-this._pickupPositionOnPage.y);if(f+m>=this._config.dragStartThreshold){let b=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),E=this._dropContainer;if(!b){this._endDragSequence(a);return}(!E||!E.isDragging()&&!E.isReceiving())&&(a.cancelable&&a.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(a)))}return}a.cancelable&&a.preventDefault();let d=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,c);else{let f=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,m=this._activeTransform;m.x=d.x-f.x+this._passiveTransform.x,m.y=d.y-f.y+this._passiveTransform.y,this._applyRootElementTransform(m.x,m.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:a,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){let c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new pf(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>wt(i)),this._handles.forEach(i=>ia(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=wt(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,hf),e.addEventListener("touchstart",this._pointerDown,lS),e.addEventListener("dragstart",this._nativeDragStart,hf)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?wt(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),ia(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),ia(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",hS,cS)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Mc(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{e.addEventListener("selectstart",hS,cS)}),i){let r=this._rootElement,s=r.parentNode,o=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(a,r),this._initialTransform=r.style.transform||"",this._preview=new Fv(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3),this._preview.attach(this._getPreviewInsertionPoint(s,e)),rS(r,!1,dS),this._document.body.appendChild(s.replaceChild(o,r)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),r=Mc(e),s=!r&&e.button!==0,o=this._rootElement,a=Vt(e),c=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+a2>Date.now(),d=r?Hl(e):Gl(e);if(a&&a.draggable&&e.type==="mousedown"&&e.preventDefault(),i||s||c||d)return;if(this._handles.length){let g=o.style;this._rootElementTapHighlight=g.webkitTapHighlightColor||"",g.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(g=>this._updateOnScroll(g)),this._boundaryElement&&(this._boundaryRect=Uv(this._boundaryElement));let f=this._previewTemplate;this._pickupPositionInElement=f&&f.template&&!f.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let m=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:m.x,y:m.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){rS(this._rootElement,!0,dS),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),s=this._getDragDistance(r),o=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,o,s,r,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let r=o=>{(!o||this._preview&&Vt(o)===this._preview.element&&o.propertyName==="transform")&&(this._preview?.removeEventListener("transitionend",r),i(),clearTimeout(s))},s=setTimeout(r,e*1.5);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=gS(this._placeholderRef,this._document)):i=pS(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){let r=e===this._rootElement?null:e,s=r?r.getBoundingClientRect():t,o=Mc(i)?i.targetTouches[0]:i,a=this._getViewportScrollPosition(),c=o.pageX-s.left-a.left,d=o.pageY-s.top-a.top;return{x:s.left-t.left+c,y:s.top-t.top+d}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=Mc(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=s,a.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:r}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:d}=this._getPreviewRect(),f=a.top+o,m=a.bottom-(d-o),g=a.left+s,b=a.right-(c-s);i=uS(i,g,b),r=uS(r,f,m)}return{x:i,y:r}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),a=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),a>this._config.pointerDirectionChangeThreshold&&(r.y=i>s.y?1:-1,s.y=i),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,ia(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,hf),t.removeEventListener("touchstart",this._pointerDown,lS),t.removeEventListener("dragstart",this._nativeDragStart,hf)}_applyRootElementTransform(t,e){let i=1/this.scale,r=_f(t*i,e*i),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=gf(r,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,r=_f(t,e);this._preview.setTransform(gf(r,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(r.width===0&&r.height===0||i.width===0&&i.height===0)return;let s=r.left-i.left,o=i.right-r.right,a=r.top-i.top,c=i.bottom-r.bottom;r.width>i.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,r.height>i.height?(a>0&&(e+=a),c>0&&(e-=c)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:Mc(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=Vt(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Oc(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Ro(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return wt(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function uS(n,t,e){return Math.max(t,Math.min(e,n))}function Mc(n){return n.type[0]==="t"}function hS(n){n.preventDefault()}function bf(n,t,e){let i=vf(t,n.length-1),r=vf(e,n.length-1);if(i===r)return;let s=n[i],o=r<i?-1:1;for(let a=i;a!==r;a+=o)n[a]=n[a+o];n[r]=s}function _S(n,t,e,i){let r=vf(e,n.length-1),s=vf(i,t.length);n.length&&t.splice(s,0,n.splice(r,1)[0])}function vf(n,t){return Math.max(0,Math.min(t,n))}var yf=class{constructor(t){this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(t){this.withItems(t)}sort(t,e,i,r){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,r);if(o===-1&&s.length>0)return null;let a=this.orientation==="horizontal",c=s.findIndex(N=>N.drag===t),d=s[o],f=s[c].clientRect,m=d.clientRect,g=c>o?1:-1,b=this._getItemOffsetPx(f,m,g),E=this._getSiblingOffsetPx(c,s,g),M=s.slice();return bf(s,c,o),s.forEach((N,ce)=>{if(M[ce]===N)return;let le=N.drag===t,q=le?b:E,Se=le?t.getPlaceholderElement():N.drag.getRootElement();N.offset+=q;let tt=Math.round(N.offset*(1/N.drag.scale));a?(Se.style.transform=gf(`translate3d(${tt}px, 0, 0)`,N.initialTransform),Oc(N.clientRect,0,q)):(Se.style.transform=gf(`translate3d(0, ${tt}px, 0)`,N.initialTransform),Oc(N.clientRect,q,0))}),this._previousSwap.overlaps=Nv(m,e,i),this._previousSwap.drag=d.drag,this._previousSwap.delta=a?r.x:r.y,{previousIndex:c,currentIndex:o}}enter(t,e,i,r){let s=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,i):r,o=this._activeDraggables,a=o.indexOf(t),c=t.getPlaceholderElement(),d=o[s];if(d===t&&(d=o[s+1]),!d&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(d=o[0]),a>-1&&o.splice(a,1),d&&!this._dragDropRegistry.isDragging(d)){let f=d.getRootElement();f.parentElement.insertBefore(c,f),o.splice(s,0,t)}else this._element.appendChild(c),o.push(t);c.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(r=>r.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{Oc(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:Uv(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){let r=this.orientation==="horizontal",s=r?e.left-t.left:e.top-t.top;return i===-1&&(s+=r?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){let r=this.orientation==="horizontal",s=e[t].clientRect,o=e[t+i*-1],a=s[r?"width":"height"]*i;if(o){let c=r?"left":"top",d=r?"right":"bottom";i===-1?a-=o.clientRect[c]-s[d]:a+=s[c]-o.clientRect[d]}return a}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,r=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let o=i[i.length-1].clientRect;return r?t>=o.right:e>=o.bottom}else{let o=i[0].clientRect;return r?t<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(t,e,i,r){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>{if(a===t)return!1;if(r){let d=s?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&d===this._previousSwap.delta)return!1}return s?e>=Math.floor(c.left)&&e<Math.floor(c.right):i>=Math.floor(c.top)&&i<Math.floor(c.bottom)});return o===-1||!this._sortPredicate(o,t)?-1:o}},Vv=class{constructor(t,e){this._document=t,this._dragDropRegistry=e,this._previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1},this._relatedNodes=[]}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let r=e[i];this._relatedNodes.push([r,r.nextSibling])}this.withItems(t)}sort(t,e,i,r){let s=this._getItemIndexFromPointerPosition(t,e,i),o=this._previousSwap;if(s===-1||this._activeItems[s]===t)return null;let a=this._activeItems[s];if(o.drag===a&&o.overlaps&&o.deltaX===r.x&&o.deltaY===r.y)return null;let c=this.getItemIndex(t),d=t.getPlaceholderElement(),f=a.getRootElement();s>c?f.after(d):f.before(d),bf(this._activeItems,c,s);let m=this._getRootNode().elementFromPoint(e,i);return o.deltaX=r.x,o.deltaY=r.y,o.drag=a,o.overlaps=f===m||f.contains(m),{previousIndex:c,currentIndex:s}}enter(t,e,i,r){let s=r==null||r<0?this._getItemIndexFromPointerPosition(t,e,i):r;s===-1&&(s=this._getClosestItemIndexToPointer(t,e,i));let o=this._activeItems[s],a=this._activeItems.indexOf(t);a>-1&&this._activeItems.splice(a,1),o&&!this._dragDropRegistry.isDragging(o)?(this._activeItems.splice(s,0,t),o.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[r,s]=this._relatedNodes[i];r.parentNode===t&&r.nextSibling!==s&&(s===null?t.appendChild(r):s.parentNode===t&&t.insertBefore(r,s))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let r=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),s=r?this._activeItems.findIndex(o=>{let a=o.getRootElement();return r===a||a.contains(r)}):-1;return s===-1||!this._sortPredicate(s,t)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=Ro(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let r=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let a=this._activeItems[o];if(a!==t){let{x:c,y:d}=a.getRootElement().getBoundingClientRect(),f=Math.hypot(e-c,i-d);f<r&&(r=f,s=o)}}return s}},fS=.05,vS=.05,Hn=function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n}(Hn||{}),mn=function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n}(mn||{}),jv=class{constructor(t,e,i,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new W,this.entered=new W,this.exited=new W,this.dropped=new W,this.sorted=new W,this.receivingStarted=new W,this.receivingStopped=new W,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=kt.EMPTY,this._verticalScrollDirection=Hn.NONE,this._horizontalScrollDirection=mn.NONE,this._stopScrollTimers=new W,this._cachedShadowRoot=null,this._scrollableElements=[],this._direction="ltr",this._startScrollInterval=()=>{this._stopScrolling(),jw(0,jm).pipe(dt(this._stopScrollTimers)).subscribe(()=>{let a=this._scrollNode,c=this.autoScrollStep;this._verticalScrollDirection===Hn.UP?a.scrollBy(0,-c):this._verticalScrollDirection===Hn.DOWN&&a.scrollBy(0,c),this._horizontalScrollDirection===mn.LEFT?a.scrollBy(-c,0):this._horizontalScrollDirection===mn.RIGHT&&a.scrollBy(c,0)})};let o=this.element=wt(t);this._document=i,this.withOrientation("vertical").withElementContainer(o),e.registerDropContainer(this),this._parentPositions=new pf(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,r){this._draggingStarted(),r==null&&this.sortingDisabled&&(r=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,r,s,o,a,c={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>t.indexOf(r)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof yf&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new Vv(this._document,this._dragDropRegistry);else{let e=new yf(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=wt(this.element),i=this._scrollableElements.indexOf(this._container),r=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),r>-1&&this._scrollableElements.splice(r,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,r){if(this.sortingDisabled||!this._domRect||!iS(this._domRect,fS,e,i))return;let s=this._sortStrategy.sort(t,e,i,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,r=Hn.NONE,s=mn.NONE;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||i||iS(o.clientRect,fS,t,e)&&([r,s]=l2(a,o.clientRect,this._direction,t,e),(r||s)&&(i=a))}),!r&&!s){let{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};r=yS(c,e),s=bS(c,t),i=window}i&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=i,(r||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(t,e){return this._domRect!=null&&Nv(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(r=>r._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!Nv(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let r=this._getShadowRoot().elementFromPoint(e,i);return r?r===this._container||this._container.contains(r):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=Ro(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function yS(n,t){let{top:e,bottom:i,height:r}=n,s=r*vS;return t>=e-s&&t<=e+s?Hn.UP:t>=i-s&&t<=i+s?Hn.DOWN:Hn.NONE}function bS(n,t){let{left:e,right:i,width:r}=n,s=r*vS;return t>=e-s&&t<=e+s?mn.LEFT:t>=i-s&&t<=i+s?mn.RIGHT:mn.NONE}function l2(n,t,e,i,r){let s=yS(t,r),o=bS(t,i),a=Hn.NONE,c=mn.NONE;if(s){let d=n.scrollTop;s===Hn.UP?d>0&&(a=Hn.UP):n.scrollHeight-d>n.clientHeight&&(a=Hn.DOWN)}if(o){let d=n.scrollLeft;e==="rtl"?o===mn.RIGHT?d<0&&(c=mn.RIGHT):n.scrollWidth+d>n.clientWidth&&(c=mn.LEFT):o===mn.LEFT?d>0&&(c=mn.LEFT):n.scrollWidth-d>n.clientWidth&&(c=mn.RIGHT)}return[a,c]}var ff=Sn({passive:!1,capture:!0}),mf=new Set,c2=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ee({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],standalone:!0,features:[ne],decls:0,vars:0,template:function(i,r){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}}return n})(),d2=(()=>{class n{constructor(e,i){this._ngZone=e,this._appRef=A(gr),this._environmentInjector=A(Zn),this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=st([]),this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new W,this.pointerUp=new W,this.scroll=new W,this._preventDefaultWhileDragging=r=>{this._activeDragInstances().length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=i}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,ff)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ff)}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._loadResets(),this._activeDragInstances.update(r=>[...r,e]),this._activeDragInstances().length===1)){let r=i.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ff}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:ff}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(e){this._activeDragInstances.update(i=>{let r=i.indexOf(e);return r>-1?(i.splice(r,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this.scroll];return e&&e!==this._document&&i.push(new nt(r=>this._ngZone.runOutsideAngular(()=>{let o=a=>{this._activeDragInstances().length&&r.next(a)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),mt(...i)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}_loadResets(){if(!mf.has(this._appRef)){mf.add(this._appRef);let e=y0(c2,{environmentInjector:this._environmentInjector});this._appRef.onDestroy(()=>{mf.delete(this._appRef),mf.size===0&&e.destroy()})}}static{this.\u0275fac=function(i){return new(i||n)(x(G),x(J))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),u2={dragStartThreshold:5,pointerDirectionChangeThreshold:5},$v=(()=>{class n{constructor(e,i,r,s){this._document=e,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(e,i=u2){return new Lv(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new jv(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(i){return new(i||n)(x(J),x(G),x(Pc),x(d2))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mS=new j("CDK_DRAG_PARENT");var h2=new j("CdkDragHandle");var wS=new j("CDK_DRAG_CONFIG"),f2="cdk-drag",ES=new j("CdkDropList"),CS=(()=>{class n{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}constructor(e,i,r,s,o,a,c,d,f,m,g){this.element=e,this.dropContainer=i,this._ngZone=s,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=f,this._selfHandle=m,this._parentDrag=g,this._destroyed=new W,this._handles=new vt([]),this.scale=1,this.started=new re,this.released=new re,this.ended=new re,this.entered=new re,this.exited=new re,this.dropped=new re,this.moved=new nt(b=>{let E=this._dragRef.moved.pipe(Y(M=>({source:this,pointerPosition:M.pointerPosition,event:M.event,delta:M.delta,distance:M.distance}))).subscribe(b);return()=>{E.unsubscribe()}}),this._injector=A(Ae),this._dragRef=d.createDrag(e,{dragStartThreshold:a&&a.dragStartThreshold!=null?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&a.pointerDirectionChangeThreshold!=null?a.pointerDirectionChangeThreshold:5,zIndex:a?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),a&&this._assignDefaults(a),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this),i._dropListRef.beforeStarted.pipe(dt(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){mi(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,r=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);let e=n._dragInstances.indexOf(this);e>-1&&n._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),r=i.indexOf(e);r>-1&&(i.splice(r,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):wt(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,r=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof r=="object"&&r?r:Hi(r),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(Pt(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains(f2)){e.withParent(n._dragInstances.find(r=>r.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:r,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:d,previewContainer:f}=e;this.disabled=c??!1,this.dragStartDelay=r||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),d&&(this.rootElementSelector=d),f&&(this.previewContainer=f)}_setupHandlesListener(){this._handles.pipe(Fe(e=>{let i=e.map(r=>r.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),He(e=>mt(...e.map(i=>i._stateChanges.pipe(Nn(i))))),dt(this._destroyed)).subscribe(e=>{let i=this._dragRef,r=e.element.nativeElement;e.disabled?i.disableHandle(r):i.enableHandle(r)})}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(ES,12),k(J),k(G),k(hr),k(wS,8),k(Un,8),k($v),k(Nt),k(h2,10),k(mS,12))}}static{this.\u0275dir=te({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,r){i&2&&Le("cdk-drag-disabled",r.disabled)("cdk-drag-dragging",r._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Xe],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Wd]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[Qe([{provide:mS,useExisting:n}]),Ot,Et]})}}return n})(),Bv=new j("CdkDropListGroup"),IS=(()=>{class n{constructor(){this._items=new Set,this.disabled=!1}ngOnDestroy(){this._items.clear()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=te({type:n,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:[2,"cdkDropListGroupDisabled","disabled",Xe]},exportAs:["cdkDropListGroup"],standalone:!0,features:[Qe([{provide:Bv,useExisting:n}]),Ot]})}}return n})(),m2=0,TS=(()=>{class n{static{this._dropLists=[]}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}constructor(e,i,r,s,o,a,c){this.element=e,this._changeDetectorRef=r,this._scrollDispatcher=s,this._dir=o,this._group=a,this._destroyed=new W,this.connectedTo=[],this.id=`cdk-drop-list-${m2++}`,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new re,this.entered=new re,this.exited=new re,this.sorted=new re,this._unsortedItems=new Set,this._dropListRef=i.createDropList(e),this._dropListRef.data=this,c&&this._assignDefaults(c),this._dropListRef.enterPredicate=(d,f)=>this.enterPredicate(d.data,f.data),this._dropListRef.sortPredicate=(d,f,m)=>this.sortPredicate(d,f.data,m.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),n._dropLists.push(this),a&&a._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=n._dropLists.indexOf(this);e>-1&&n._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(Nn(this._dir.value),dt(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=Mr(this.connectedTo).map(r=>{if(typeof r=="string"){let s=n._dropLists.find(o=>o.id===r);return s}return r});if(this._group&&this._group._items.forEach(r=>{i.indexOf(r)===-1&&i.push(r)}),!this._scrollableParentsResolved){let r=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(r),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let r=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(r)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=Hi(this.autoScrollStep,2),e.connectedTo(i.filter(r=>r&&r!==this).map(r=>r._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),mt(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:r,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:a}=e;this.disabled=r??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=a||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static{this.\u0275fac=function(i){return new(i||n)(k(de),k($v),k(Nt),k(kc),k(Un,8),k(Bv,12),k(wS,8))}}static{this.\u0275dir=te({type:n,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,r){i&2&&(Oe("id",r.id),Le("cdk-drop-list-disabled",r.disabled)("cdk-drop-list-dragging",r._dropListRef.isDragging())("cdk-drop-list-receiving",r._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Xe],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Xe],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Xe],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[Qe([{provide:Bv,useValue:void 0},{provide:ES,useExisting:n}]),Ot]})}}return n})();var ra=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({providers:[$v],imports:[na]})}}return n})();var Yt=class n{dataService=A(Kt);http=A(Ui);tasks=new W;mates=[];createTask(t){return this.http.post(`${this.dataService.url}/tasks`,t)}setMateTasks(t){this.tasks.next(t)}getUserTasks(t){this.http.get(`${this.dataService.url}/tasks/user/${t}`).subscribe(e=>{this.tasks.next(e)})}getTeamMatesTask(t){this.http.post(`${this.dataService.url}/user/id`,{userId:t}).subscribe(e=>{console.log("TeamMatesTask: ",e),this.mates.push(...e)})}clearMates(){this.mates=[]}updateTask(t,e){return this.http.patch(`${this.dataService.url}/tasks/${t}`,e)}deleteTask(t){return this.http.delete(`${this.dataService.url}/tasks/${t}`)}constructor(){}static \u0275fac=function(e){return new(e||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var p2=n=>({"error-border":n});function g2(n,t){if(n&1){let e=ge();P(0,"div",6)(1,"img",7),H("click",function(){X(e);let r=B(2);return Z(r.edit())}),D(),P(2,"img",8),H("click",function(){X(e);let r=B(2);return Z(r.delete())}),D()()}}function _2(n,t){if(n&1&&(P(0,"div",3)(1,"div",4),$(2),D(),Q(3,g2,3,0,"div",5),os(4,"async"),D()),n&2){let e=B();F(2),Ve(e.task==null?null:e.task.task),F(),U("ngIf",as(4,2,e.mode$)==="user")}}function v2(n,t){if(n&1){let e=ge();P(0,"div",9)(1,"textarea",10),p0("ngModelChange",function(r){X(e);let s=B();return m0(s.message,r)||(s.message=r),Z(r)}),$(2),D(),P(3,"button",11),H("click",function(){X(e);let r=B();return Z(r.edit())}),$(4,"Save"),D()()}if(n&2){let e=B();F(),f0("ngModel",e.message),U("ngClass",mr(3,p2,e.hasError)),F(),Ve(e.task==null?null:e.task.task)}}var wf=class n{message="";editError="Task should be at least 3 characters long!";task;dragDisabled=new re;taskDeleted=new re;notification;onEditMode=!1;taskService=A(Yt);authService=A(Je);dataService=A(Kt);mode$=this.dataService.mode;ngOnInit(){this.task?.task?this.message=this.task?.task:(this.onEditMode=!0,this.dragDisabled.emit(this.onEditMode))}showNotification(t,e){return t?(this.notification&&(this.notification.setValues(t,e),this.notification.show()),!0):!1}hasError=!1;triggerError(){this.hasError=!0,setTimeout(()=>{this.hasError=!1},2e3)}checkIfCanEdit(){return!(this.message.length<4&&this.onEditMode)}edit(){this.checkIfCanEdit()?(this.onEditMode=!this.onEditMode,this.dragDisabled.emit(this.onEditMode),!this.onEditMode&&this.task&&this.authService.user?.localId&&(this.task.id?this.taskService.updateTask(this.task.id,{task:this.message}).subscribe(t=>{this.task&&(this.task.task=this.message)}):(this.dataService.selectedUser?this.task.setValues(this.authService.user?.localId,this.dataService.selectedUser.id,this.message):this.task.setValues(this.authService.user?.localId,this.authService.user?.localId,this.message),this.taskService.createTask(this.task).subscribe(t=>{setTimeout(()=>{this.task&&this.task.setId(t.id)})})))):(this.triggerError(),this.showNotification(this.editError,"error"))}delete(){this.task?.id&&this.taskService.deleteTask(this.task.id).subscribe(t=>{console.log(t),this.task?.id&&this.taskDeleted.emit(this.task.id)}),console.log("bin")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-task"]],viewQuery:function(e,i){if(e&1&&Ke(jt,5),e&2){let r;Re(r=De())&&(i.notification=r.first)}},inputs:{task:"task"},outputs:{dragDisabled:"dragDisabled",taskDeleted:"taskDeleted"},standalone:!0,features:[ne],decls:4,vars:2,consts:[[1,"wrapper"],["class","normal",4,"ngIf"],["class","edited",4,"ngIf"],[1,"normal"],[1,"task"],["class","icon-container",4,"ngIf"],[1,"icon-container"],["src","edit.png","alt","edit",1,"img",3,"click"],["src","bin.png","alt","delete",1,"img",3,"click"],[1,"edited"],["name","message","id","message",1,"text-edit",3,"ngModelChange","ngModel","ngClass"],[1,"sbt-btn","active",3,"click"]],template:function(e,i){e&1&&(he(0,"app-notification"),P(1,"div",0),Q(2,_2,5,4,"div",1)(3,v2,5,5,"div",2),D()),e&2&&(F(2),U("ngIf",!i.onEditMode),F(),U("ngIf",i.onEditMode))},dependencies:[Ne,Ft,ut,Hd,ra,Ci,Bn,Ei,og,jt],styles:[".wrapper[_ngcontent-%COMP%]{width:100%}.edited[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.normal[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:10px}.error-border[_ngcontent-%COMP%]{border-color:red}.icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px;width:20%}.task[_ngcontent-%COMP%]{width:80%}.img[_ngcontent-%COMP%]{width:25px;transition:all .4s ease-in-out}.img[_ngcontent-%COMP%]:hover{transform:scale(1.2);cursor:pointer}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:200px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.sbt-btn.disabled[_ngcontent-%COMP%]{opacity:.6}.text-edit[_ngcontent-%COMP%]{width:80%;height:80px}@media screen and (max-width: 325px){.img[_ngcontent-%COMP%]{width:18px}.icon-container[_ngcontent-%COMP%]{width:25%}.task[_ngcontent-%COMP%]{width:75%}.sbt-btn[_ngcontent-%COMP%]{width:100px}}"]})};var Ef=class{creatorId;userId;task;status;id=null;num;teamId;constructor(t,e,i){this.status=t,this.num=e,this.teamId=i}setValues(t,e,i){this.creatorId=t,this.userId=e,this.task=i}setId(t){this.id=t}};var Xt=class n{http=A(Ui);dataService=A(Kt);taskService=A(Yt);teams=new W;errorAdding=new W;selectedTeam=new vt("0");setTeam(t){t&&this.selectedTeam.next(t)}addTeam(t){this.http.post(`${this.dataService.url}/teams`,t).subscribe({next:()=>{this.getTeams(t.adminId)},error:e=>{this.errorAdding.next(!0)}})}getTeams(t){this.http.get(`${this.dataService.url}/teams/user/${t}`).subscribe({next:e=>{this.teams.next(e),e[0].id&&(this.setTeam(e[0].id),this.taskService.clearMates())},error:e=>{this.errorAdding.next(!0)}})}removeTeam(t,e){t&&this.http.delete(`${this.dataService.url}/teams/${t}`).subscribe(()=>{this.getTeams(e)})}updateTeam(t){return this.http.patch(`${this.dataService.url}/teams/${t.id}`,t)}getTeam(t){return this.http.get(`${this.dataService.url}/teams/${t}`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var y2=(n,t)=>({"user-title":n,"mate-title":t});function b2(n,t){if(n&1){let e=ge();P(0,"app-task",7),os(1,"async"),H("dragDisabled",function(r){X(e);let s=B(2);return Z(s.dragDisabled(r))})("taskDeleted",function(r){X(e);let s=B(2);return Z(s.onTaskDeleted(r))}),D()}if(n&2){let e=B().$implicit,i=B();U("cdkDragDisabled",as(1,2,i.mode$)!="user")("task",e)}}function w2(n,t){if(n&1&&Q(0,b2,2,4,"app-task",6),n&2){let e=t.$implicit,i=B();U("ngIf",e.teamId==i.selectedTeam)}}function E2(n,t){if(n&1){let e=ge();P(0,"button",8),H("click",function(){X(e);let r=B();return Z(r.createTask())}),$(1,"+"),D()}if(n&2){let e=B();U("disabled",e.disableDrag)}}var Cf=class n{teams=[];title="";tasks=[];type;connectedTo=[];id;arrayChanged=new re;cdr=A(Nt);teamService=A(Xt);dataService=A(Kt);disableDrag=!1;selectedTeam="";mode$=this.dataService.mode;mode="user";ngOnInit(){this.teamService.teams.subscribe(t=>{this.teams=t}),this.teamService.selectedTeam.subscribe(t=>{this.selectedTeam=t})}drop(t){t.previousContainer===t.container?bf(t.container.data,t.previousIndex,t.currentIndex):_S(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),this.arrayChanged.emit(!0)}createTask(){this.selectedTeam&&this.tasks.push(new Ef(this.type,this.tasks.length,this.selectedTeam))}onTaskDeleted(t){this.tasks=this.tasks.filter(e=>e.id!=t)}dragDisabled(t){setTimeout(()=>{this.disableDrag=t,this.cdr.detectChanges()})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-board"]],inputs:{title:"title",tasks:"tasks",type:"type",connectedTo:"connectedTo",id:"id"},outputs:{arrayChanged:"arrayChanged"},standalone:!0,features:[ne],decls:12,vars:14,consts:[[1,"wrapper",3,"id"],[1,"title",3,"ngClass"],[1,"drag-area"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped","cdkDropListData"],["cdkDrag","",1,"example-box",3,"cdkDragDisabled","task"],["class","sbt-btn active",3,"disabled","click",4,"ngIf"],["class","example-box","cdkDrag","",3,"cdkDragDisabled","task","dragDisabled","taskDeleted",4,"ngIf"],["cdkDrag","",1,"example-box",3,"dragDisabled","taskDeleted","cdkDragDisabled","task"],[1,"sbt-btn","active",3,"click","disabled"]],template:function(e,i){e&1&&(P(0,"div",0)(1,"div",1),os(2,"async"),os(3,"async"),P(4,"div"),$(5),D()(),P(6,"div",2)(7,"div",3),H("cdkDropListDropped",function(s){return i.drop(s)}),c0(8,w2,1,1,"app-task",4,l0),D()(),Q(10,E2,2,1,"button",5),os(11,"async"),D()),e&2&&(U("id",i.id),F(),U("ngClass",pr(11,y2,as(2,5,i.mode$)==="user",as(3,7,i.mode$)!=="user")),F(4),Ve(i.title),F(2),U("cdkDropListData",i.tasks),F(),d0(i.tasks),F(2),U("ngIf",as(11,9,i.mode$)!=="mate"))},dependencies:[Ne,Ft,ut,Hd,ra,TS,CS,wf],styles:[".wrapper[_ngcontent-%COMP%]{width:300px;min-height:120px;border:1px solid lightgrey;border-radius:10px;overflow:hidden}.title[_ngcontent-%COMP%]{color:#fff;font-size:1.2em;text-align:center;padding:5px}.user-title[_ngcontent-%COMP%]{background-color:#6b4a8c}.mate-title[_ngcontent-%COMP%]{background-color:#d3d3d3}.example-container[_ngcontent-%COMP%]{width:400px;max-width:100%;margin:0 25px 25px 0;display:inline-block;vertical-align:top}.example-list[_ngcontent-%COMP%]{border:solid 1px #ccc;min-height:60px;background:#fff;border-radius:4px;overflow:hidden;display:block}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:#fff;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:100%;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}@media screen and (max-width: 325px){.wrapper[_ngcontent-%COMP%]{width:200px}}"]})};var Nc=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},sa=class extends Nc{constructor(t,e,i,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},oa=class extends Nc{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},Wv=class extends Nc{constructor(t){super(),this.element=t instanceof de?t.nativeElement:t}},aa=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof sa)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof oa)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof Wv)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var If=class extends aa{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(t){let i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||Ae.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var Fc=(()=>{class n extends aa{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new re,this.attachDomPortal=s=>{this._document;let o=s.element;o.parentNode;let a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=i.createComponent(s,i.length,e.injector||i.injector,e.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static{this.\u0275fac=function(i){return new(i||n)(k(Nd),k(hr),k(J))}}static{this.\u0275dir=te({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[ot]})}}return n})();var Tf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({})}}return n})();var SS=Ku(),qv=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=_t(-this._previousScrollPosition.left),t.style.top=_t(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),SS&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),SS&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var Gv=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(it(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},xf=class{enable(){}disable(){}attach(){}};function Hv(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,s=n.right<e.left,o=n.left>e.right;return i||r||s||o})}function AS(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,s=n.left<e.left,o=n.right>e.right;return i||r||s||o})}var Kv=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Hv(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},C2=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new xf,this.close=o=>new Gv(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new qv(this._viewportRuler,this._document),this.reposition=o=>new Kv(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(i){return new(i||n)(x(kc),x(Pc),x(G),x(J))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lc=class{constructor(t){if(this.scrollStrategy=new xf,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var Qv=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var OS=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(i){return new(i||n)(x(J))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),I2=(()=>{class n extends OS{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||n)(x(J),x(G,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),T2=(()=>{class n extends OS{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Vt(s)},this._clickListener=s=>{let o=Vt(s),a=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let d=c.length-1;d>-1;d--){let f=c[d];if(f._outsidePointerEvents.observers.length<1||!f.hasAttached())continue;if(RS(f.overlayElement,o)||RS(f.overlayElement,a))break;let m=f._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s)}}}add(e){if(super.add(e),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||n)(x(J),x(ke),x(G,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RS(n,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===n)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var la=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Wl()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let i=this._document.createElement("div");i.classList.add(e),Wl()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||n)(x(J),x(ke))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ji=class{constructor(t,e,i,r,s,o,a,c,d,f=!1,m){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=d,this._animationsDisabled=f,this._injector=m,this._backdropElement=null,this._backdropClick=new W,this._attachments=new W,this._detachments=new W,this._locationChanges=kt.EMPTY,this._backdropClickHandler=g=>this._backdropClick.next(g),this._backdropTransitionendHandler=g=>{this._disposeBackdrop(g.target)},this._keydownEvents=new W,this._outsidePointerEvents=new W,this._renders=new W,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Ln(()=>Ld(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=mi(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=L(L({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Ie(L({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=_t(this._config.width),t.height=_t(this._config.height),t.minWidth=_t(this._config.minWidth),t.minHeight=_t(this._config.minHeight),t.maxWidth=_t(this._config.maxWidth),t.maxHeight=_t(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){let r=Mr(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(dt(mt(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},DS="cdk-overlay-connected-position-bounding-box",x2=/([A-Za-z%]+)$/,Yv=class{get positions(){return this._preferredPositions}constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new W,this._resizeSubscription=kt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(DS),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,r,a),d=this._getOverlayPoint(c,e,a),f=this._getOverlayFit(d,e,i,a);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(f,d,i)){s.push({position:a,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!o||o.overlayFit.visibleArea<f.visibleArea)&&(o={overlayFit:f,overlayPoint:d,originPoint:c,position:a,overlayRect:e})}if(s.length){let a=null,c=-1;for(let d of s){let f=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);f>c&&(c=f,a=d)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ks(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(DS),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=i.originX=="start"?o:a}e.left<0&&(r-=e.left);let s;return i.originY=="center"?s=t.top+t.height/2:s=i.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return i.overlayY=="center"?s=-e.height/2:s=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){let s=PS(e),{x:o,y:a}=t,c=this._getOffset(r,"x"),d=this._getOffset(r,"y");c&&(o+=c),d&&(a+=d);let f=0-o,m=o+s.width-i.width,g=0-a,b=a+s.height-i.height,E=this._subtractOverflows(s.width,f,m),M=this._subtractOverflows(s.height,g,b),N=E*M;return{visibleArea:N,isCompletelyWithinViewport:s.width*s.height===N,fitsInViewportVertically:M===s.height,fitsInViewportHorizontally:E==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,s=i.right-e.x,o=kS(this._overlayRef.getConfig().minHeight),a=kS(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||o!=null&&o<=r,d=t.fitsInViewportHorizontally||a!=null&&a<=s;return c&&d}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=PS(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),c=Math.max(s.top-i.top-t.y,0),d=Math.max(s.left-i.left-t.x,0),f=0,m=0;return r.width<=s.width?f=d||-o:f=t.x<this._viewportMargin?s.left-i.left-t.x:0,r.height<=s.height?m=c||-a:m=t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:f,y:m},{x:t.x+f,y:t.y+m}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!S2(this._lastScrollVisibility,i)){let r=new Qv(t,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(e.overlayY==="top")o=t.y,s=i.height-o+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let b=Math.min(i.bottom-t.y+i.top,t.y),E=this._lastBoundingBoxSize.height;s=b*2,o=t.y-b,s>E&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-E/2)}let c=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,d=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,f,m,g;if(d)g=i.width-t.x+this._viewportMargin*2,f=t.x-this._viewportMargin;else if(c)m=t.x,f=i.right-t.x;else{let b=Math.min(i.right-t.x+i.left,t.x),E=this._lastBoundingBoxSize.width;f=b*2,m=t.x-b,f>E&&!this._isInitialRender&&!this._growAfterOpen&&(m=t.x-E/2)}return{top:o,left:m,bottom:a,right:g,width:f,height:s}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=_t(i.height),r.top=_t(i.top),r.bottom=_t(i.bottom),r.width=_t(i.width),r.left=_t(i.left),r.right=_t(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=_t(s)),o&&(r.maxWidth=_t(o))}this._lastBoundingBoxSize=i,ks(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ks(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ks(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let f=this._viewportRuler.getViewportScrollPosition();ks(i,this._getExactOverlayY(e,t,f)),ks(i,this._getExactOverlayX(e,t,f))}else i.position="static";let a="",c=this._getOffset(e,"x"),d=this._getOffset(e,"y");c&&(a+=`translateX(${c}px) `),d&&(a+=`translateY(${d}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=_t(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=_t(o.maxWidth):s&&(i.maxWidth="")),ks(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=_t(s.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=_t(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:AS(t,i),isOriginOutsideView:Hv(t,i),isOverlayClipped:AS(e,i),isOverlayOutsideView:Hv(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Mr(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof de)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function ks(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function kS(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(x2);return!e||e==="px"?parseFloat(t):null}return n||null}function PS(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function S2(n,t){return n===t?!0:n.isOriginClipped===t.isOriginClipped&&n.isOriginOutsideView===t.isOriginOutsideView&&n.isOverlayClipped===t.isOverlayClipped&&n.isOverlayOutsideView===t.isOverlayOutsideView}var MS="cdk-global-overlay-wrapper",Xv=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(MS),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),d=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),f=this._xPosition,m=this._xOffset,g=this._overlayRef.getConfig().direction==="rtl",b="",E="",M="";c?M="flex-start":f==="center"?(M="center",g?E=m:b=m):g?f==="left"||f==="end"?(M="flex-end",b=m):(f==="right"||f==="start")&&(M="flex-start",E=m):f==="left"||f==="start"?(M="flex-start",b=m):(f==="right"||f==="end")&&(M="flex-end",E=m),t.position=this._cssPosition,t.marginLeft=c?"0":b,t.marginTop=d?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":E,e.justifyContent=M,e.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(MS),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},A2=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Xv}flexibleConnectedTo(e){return new Yv(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||n)(x(Pc),x(J),x(ke),x(la))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),R2=0,_n=(()=>{class n{constructor(e,i,r,s,o,a,c,d,f,m,g,b){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=d,this._directionality=f,this._location=m,this._outsideClickDispatcher=g,this._animationsModuleType=b}create(e){let i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new Lc(e);return o.direction=o.direction||this._directionality.value,new Ji(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Zn))}position(){return this._positionBuilder}_createPaneElement(e){let i=this._document.createElement("div");return i.id=`cdk-overlay-${R2++}`,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(gr)),new If(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||n)(x(C2),x(la),x(Nd),x(A2),x(I2),x(Ae),x(G),x(J),x(Un),x(Vi),x(T2),x(sn,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var D2=new j("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=A(_n);return()=>n.scrollStrategies.reposition()}});function k2(n){return()=>n.scrollStrategies.reposition()}var P2={provide:D2,deps:[_n],useFactory:k2},Sf=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({providers:[_n,P2],imports:[Pr,Tf,Pv,Pv]})}}return n})();var M2=new j("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=A(_n);return()=>n.scrollStrategies.reposition()}});function O2(n){return()=>n.scrollStrategies.reposition()}var N2={provide:M2,deps:[_n],useFactory:O2};var Af=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=oe({type:n})}static{this.\u0275inj=se({providers:[N2],imports:[Ne,Sf,wg,Tt,na,An,wg,Tt]})}}return n})();function F2(n,t){}var Ps=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var ey=(()=>{class n extends aa{constructor(e,i,r,s,o,a,c,d){super(),this._elementRef=e,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=d,this._platform=A(ke),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=A(Nt),this._injector=A(Ae),this._isDestroyed=!1,this.attachDomPortal=f=>{this._portalOutlet.hasAttached();let m=this._portalOutlet.attachDomPortal(f);return this._contentAttached(),m},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){this._isDestroyed||mi(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=$l(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,i=$l();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=$l()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(Zu),k(J,8),k(Ps),k(ql),k(G),k(Ji),k(ko))}}static{this.\u0275cmp=ee({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&Ke(Fc,7),i&2){let s;Re(s=De())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&Oe("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[ot,ne],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&Q(0,F2,0,0,"ng-template",0)},dependencies:[Fc],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return n})(),Vc=class{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new W,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Qu(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},L2=new j("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=A(_n);return()=>n.scrollStrategies.block()}}),V2=new j("DialogData"),j2=new j("DefaultDialogConfig");var B2=0,FS=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,i,r,s,o,a){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new W,this._afterOpenedAtThisLevel=new W,this._ariaHiddenElements=new Map,this.afterAllClosed=is(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Nn(void 0))),this._scrollStrategy=a}open(e,i){let r=this._defaultOptions||new Ps;i=L(L({},r),i),i.id=i.id||`cdk-dialog-${B2++}`,i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new Vc(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(e,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){Zv(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){Zv(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),Zv(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new Lc({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){let s=r.injector||r.viewContainerRef?.injector,o=[{provide:Ps,useValue:r},{provide:Vc,useValue:i},{provide:Ji,useValue:e}],a;r.container?typeof r.container=="function"?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=ey;let c=new sa(a,r.viewContainerRef,Ae.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return e.attach(c).instance}_attachDialogContent(e,i,r,s){if(e instanceof Js){let o=this._createInjector(s,i,r,void 0),a={$implicit:s.data,dialogRef:i};s.templateContext&&(a=L(L({},a),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),r.attachTemplatePortal(new oa(e,null,a,o))}else{let o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new sa(e,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,r,s){let o=e.injector||e.viewContainerRef?.injector,a=[{provide:V2,useValue:e.data},{provide:Vc,useValue:i}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(i,e,r)):a.push(...e.providers)),e.direction&&(!o||!o.get(Un,null,{optional:!0}))&&a.push({provide:Un,useValue:{value:e.direction,change:K()}}),Ae.create({parent:o||s,providers:a})}_removeOpenDialog(e,i){let r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==e&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(i){return new(i||n)(x(_n),x(Ae),x(j2,8),x(n,12),x(la),x(L2))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zv(n,t){let e=n.length;for(;e--;)t(n[e])}function U2(n,t){}var jc=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},ty="mdc-dialog--open",LS="mdc-dialog--opening",VS="mdc-dialog--closing",z2=150,$2=75,W2=(()=>{class n extends ey{constructor(e,i,r,s,o,a,c,d,f){super(e,i,r,s,o,a,c,f),this._animationMode=d,this._animationStateChanged=new re,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?BS(this._config.enterAnimationDuration)??z2:0,this._exitAnimationDuration=this._animationsEnabled?BS(this._config.exitAnimationDuration)??$2:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(jS,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(LS,ty)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(ty),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(ty),this._animationsEnabled?(this._hostElement.style.setProperty(jS,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(VS)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(LS,VS)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static{this.\u0275fac=function(i){return new(i||n)(k(de),k(Zu),k(J,8),k(jc),k(ql),k(G),k(Ji),k(sn,8),k(ko))}}static{this.\u0275cmp=ee({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(Li("id",r._config.id),Oe("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Le("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[ot,ne],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(P(0,"div",0)(1,"div",1),Q(2,U2,0,0,"ng-template",2),D()())},dependencies:[Fc],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}}return n})(),jS="--mat-dialog-transition-duration";function BS(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?Hi(n.substring(0,n.length-2)):n.endsWith("s")?Hi(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var Rf=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(Rf||{}),Bc=class{constructor(t,e,i){this._ref=t,this._containerInstance=i,this._afterOpened=new W,this._beforeClosed=new W,this._state=Rf.OPEN,this.disableClose=e.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(it(r=>r.state==="opened"),Pt(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(it(r=>r.state==="closed"),Pt(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),mt(this.backdropClick(),this.keydownEvents().pipe(it(r=>r.keyCode===27&&!this.disableClose&&!Qu(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),US(this,r.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(it(e=>e.state==="closing"),Pt(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=Rf.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=Rf.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function US(n,t,e){return n._closeInteractionType=t,n.close(e)}var q2=new j("MatMdcDialogData"),G2=new j("mat-mdc-dialog-default-options"),H2=new j("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=A(_n);return()=>n.scrollStrategies.block()}});var K2=0,ca=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,i,r,s,o,a,c,d){this._overlay=e,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new W,this._afterOpenedAtThisLevel=new W,this.dialogConfigClass=jc,this.afterAllClosed=is(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Nn(void 0))),this._dialog=i.get(FS),this._dialogRefConstructor=Bc,this._dialogContainerType=W2,this._dialogDataToken=q2}open(e,i){let r;i=L(L({},this._defaultOptions||new jc),i),i.id=i.id||`mat-mdc-dialog-${K2++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(e,Ie(L({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Ps,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static{this.\u0275fac=function(i){return new(i||n)(x(_n),x(Ae),x(Vi,8),x(G2,8),x(H2),x(n,12),x(la),x(sn,8))}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Q2=0,zS=(()=>{class n{constructor(e,i,r){this.dialogRef=e,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=HS(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){let i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){US(this.dialogRef,e.screenX===0&&e.screenY===0?"keyboard":"mouse",this.dialogResult)}static{this.\u0275fac=function(i){return new(i||n)(k(Bc,8),k(de),k(ca))}}static{this.\u0275dir=te({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,r){i&1&&H("click",function(o){return r._onButtonClick(o)}),i&2&&Oe("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],standalone:!0,features:[Et]})}}return n})(),$S=(()=>{class n{constructor(e,i,r){this._dialogRef=e,this._elementRef=i,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=HS(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static{this.\u0275fac=function(i){return new(i||n)(k(Bc,8),k(de),k(ca))}}static{this.\u0275dir=te({type:n,standalone:!0})}}return n})(),WS=(()=>{class n extends $S{constructor(){super(...arguments),this.id=`mat-mdc-dialog-title-${Q2++}`}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=fi(n)))(r||n)}})()}static{this.\u0275dir=te({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){i&2&&Li("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[ot]})}}return n})(),qS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=te({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[o0([Jx])]})}}return n})(),GS=(()=>{class n extends $S{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=fi(n)))(r||n)}})()}static{this.\u0275dir=te({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,r){i&2&&Le("mat-mdc-dialog-actions-align-start",r.align==="start")("mat-mdc-dialog-actions-align-center",r.align==="center")("mat-mdc-dialog-actions-align-end",r.align==="end")},inputs:{align:"align"},standalone:!0,features:[ot]})}}return n})();function HS(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}var Df=class n{message="";title="";answer=new re;emitAnswer(t){this.answer.emit(t)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-dialog"]],inputs:{message:"message",title:"title"},outputs:{answer:"answer"},standalone:!0,features:[ne],decls:10,vars:2,consts:[["classs","wrapper"],["mat-dialog-title",""],["mat-button","","mat-dialog-close","",3,"click"],["mat-button","","mat-dialog-close","","cdkFocusInitial","",3,"click"]],template:function(e,i){e&1&&(P(0,"div",0)(1,"h2",1),$(2),D(),P(3,"mat-dialog-content"),$(4),D(),P(5,"mat-dialog-actions")(6,"button",2),H("click",function(){return i.emitAnswer(!1)}),$(7,"No"),D(),P(8,"button",3),H("click",function(){return i.emitAnswer(!0)}),$(9,"Ok"),D()()()),e&2&&(F(2),Ve(i.title),F(2),Cn(" ",i.message," "))},dependencies:[Mo,dI,GS,zS,WS,qS],styles:[".wrapper[_ngcontent-%COMP%]{z-index:4}"]})};function Y2(n,t){n&1&&(P(0,"div",8),he(1,"app-loader"),D())}function X2(n,t){if(n&1&&(P(0,"mat-error"),$(1),D()),n&2){let e=B(3);F(),Ve(e.errorNameMessage())}}function Z2(n,t){if(n&1&&(P(0,"mat-error"),$(1),D()),n&2){let e=B(3);F(),Ve(e.errorDescriptionMessage())}}function J2(n,t){if(n&1){let e=ge();P(0,"img",23),H("click",function(){X(e);let r=B().index,s=B(3);return Z(s.delete(r))}),D()}}function ej(n,t){if(n&1&&(P(0,"div",19)(1,"div",20),$(2),D(),P(3,"div",21),Q(4,J2,1,0,"img",22),D()()),n&2){let e=t.$implicit,i=t.index;F(2),Ve(e.email),F(2),U("ngIf",i!==0)}}function tj(n,t){n&1&&(P(0,"div",24),$(1,"No additional members"),D())}function nj(n,t){if(n&1){let e=ge();P(0,"form",9),H("ngSubmit",function(){X(e);let r=B(2);return Z(r.submitTeam())}),P(1,"mat-form-field")(2,"mat-label"),$(3,"Team name"),D(),P(4,"input",10),H("blur",function(){X(e);let r=B(2);return Z(r.updateNameErrorMessage())}),D(),Q(5,X2,2,1,"mat-error"),D(),P(6,"mat-form-field")(7,"mat-label"),$(8,"Project description"),D(),P(9,"textarea",11),H("blur",function(){X(e);let r=B(2);return Z(r.updateDescriptionErrorMessage())}),D(),Q(10,Z2,2,1,"mat-error"),D(),P(11,"div",12)(12,"mat-form-field")(13,"mat-label"),$(14,"New member"),D(),he(15,"input",13),D(),P(16,"button",14),H("click",function(){X(e);let r=B(2);return Z(r.addMember())}),$(17,"+"),D()(),P(18,"div",15),Q(19,ej,5,2,"div",16)(20,tj,2,0,"div",17),D(),P(21,"button",18),$(22,"Create"),D()()}if(n&2){let e=B(2);U("formGroup",e.form),F(5),$e(e.form.controls.name.invalid?5:-1),F(5),$e(e.form.controls.description.invalid?10:-1),F(5),U("formControl",e.member),F(4),U("ngForOf",e.members),F(),U("ngIf",e.members.length===0)}}function ij(n,t){if(n&1){let e=ge();P(0,"div",1),he(1,"app-notification"),P(2,"div",2)(3,"div",3)(4,"div"),$(5," Create a new Team"),D(),P(6,"div",4),H("click",function(){X(e);let r=B();return Z(r.closeWindow())}),$(7,"X"),D()(),Q(8,Y2,2,0,"div",5)(9,nj,23,6,"form",6),D(),P(10,"div",7),H("click",function(){X(e);let r=B();return Z(r.closeWindow())}),D()()}if(n&2){let e=B();F(8),U("ngIf",e.isLoading),F(),U("ngIf",!e.isLoading)}}var kf=class n{members=[];ngOnInit(){this.teamService.teams.subscribe(t=>{this.isLoading=!1,this.resetAllForms(),this.closeWindow()}),this.teamService.errorAdding.subscribe(t=>{t&&this.notification&&(this.isLoading=!1,this.notification.setValues("An unknown error has occured","error"),this.notification.show())}),this.authService.user?(this.members.push({email:this.authService.user.email,id:this.authService.user.localId}),console.log(this.members)):console.log("!!!!!!!!")}visible=!1;visibility=new re;notification;isLoading=!1;notificationMessage="";authService=A(Je);closeWindow(){this.visibility.emit(!1),this.resetAllForms()}dialogMessage="Are you sure you don't want to add any members tot he team?";dialogTitle="Team members";teamService=A(Xt);form=new wi({name:new ln("",[We.required,We.minLength(3)]),description:new ln("",[We.required,We.minLength(10)])});member=new ln("",[We.required,We.email]);resetAllForms(){this.form.reset(),this.member.reset(),this.form.controls.name.setErrors(null),this.form.controls.description.setErrors(null),this.member.setErrors(null),this.members.splice(1)}addTeam(){if(this.form.value.description&&this.form.value.name&&this.authService.user){console.log(this.authService.user);let t=this.members.map(i=>i.id),e={adminId:this.authService.user.localId,members:t,description:this.form.value.description,name:this.form.value.name,default:!1};this.isLoading=!0,this.teamService.addTeam(e)}}submitTeam(){this.form.valid?this.members.length===1?this.openDialog("500ms","500ms"):this.addTeam():(this.updateDescriptionErrorMessage(),this.updateNameErrorMessage())}addMember(){this.member.errors===null&&this.member.value!==null?this.authService.email(this.member.value).subscribe(t=>{t.exist&&t.email&&t.id?this.members.filter(i=>i.email===t.email).length>0?this.openNotification("This user is already on the list","note"):(this.members.push({email:t.email,id:t.id}),this.member.reset(),this.member.setErrors(null)):this.openNotification("Sorry, this user is not registered yet.","error")}):this.openNotification("Please, enter the valid email address.","error")}errorNameMessage=st("");updateNameErrorMessage(){this.form.controls.name.hasError("required")?this.errorNameMessage.set("You must enter a value"):this.form.controls.name.hasError("minlength")?this.errorNameMessage.set("Name should be at least 3 characters long"):this.errorNameMessage.set("")}errorDescriptionMessage=st("");updateDescriptionErrorMessage(){this.form.controls.description.hasError("required")?this.errorDescriptionMessage.set("You must enter a value"):this.form.controls.description.hasError("minlength")?this.errorDescriptionMessage.set("Description should be at least 10 characters long"):this.errorDescriptionMessage.set("")}dialog=A(ca);openNotification(t,e){this.notification&&(this.notification.setValues(t,e),this.notification.show())}openDialog(t,e){let i=this.dialog.open(Df,{width:"250px",enterAnimationDuration:t,exitAnimationDuration:e});i.componentInstance.message=this.dialogMessage,i.componentInstance.title=this.dialogTitle,i.componentInstance.answer.subscribe(r=>{r?this.addTeam():(this.updateDescriptionErrorMessage(),this.updateNameErrorMessage())})}delete(t){this.members.splice(t,1),console.log(this.members)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-create-team"]],viewQuery:function(e,i){if(e&1&&Ke(jt,5),e&2){let r;Re(r=De())&&(i.notification=r.first)}},inputs:{visible:"visible"},outputs:{visibility:"visibility"},standalone:!0,features:[ne],decls:1,vars:1,consts:[["class","wrapper",4,"ngIf"],[1,"wrapper"],[1,"window"],[1,"title"],[1,"cross",3,"click"],["class","loader-container",4,"ngIf"],["class","forms",3,"formGroup","ngSubmit",4,"ngIf"],[1,"background",3,"click"],[1,"loader-container"],[1,"forms",3,"ngSubmit","formGroup"],["matInput","","formControlName","name",3,"blur"],["matInput","","formControlName","description",3,"blur"],[1,"add-m"],["matInput","","placeholder","pat@example.com","required","",3,"formControl"],["type","button",1,"sbt-btn","active","add",3,"click"],[1,"email-list"],["class","member",4,"ngFor","ngForOf"],["class","note",4,"ngIf"],["type","submit",1,"sbt-btn","active","submit"],[1,"member"],[1,"member-item"],[1,"member-img"],["class","img","src","bin.png","alt","delete",3,"click",4,"ngIf"],["src","bin.png","alt","delete",1,"img",3,"click"],[1,"note"]],template:function(e,i){e&1&&Q(0,ij,11,2,"div",0),e&2&&U("ngIf",i.visible)},dependencies:[An,Or,Ii,Po,Fr,Nr,Af,Ci,Dr,Bn,Ei,Rr,Gi,kr,Ul,qi,ps,Ne,_r,ut,Ti,jt],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.background[_ngcontent-%COMP%]{background-color:#000;opacity:.4;position:fixed;top:0;left:0;width:100%;height:100vh;z-index:2}.window[_ngcontent-%COMP%]{width:500px;min-height:200px;background-color:#fff;opacity:1;position:fixed;z-index:3;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:10px;max-height:100vh;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.title[_ngcontent-%COMP%]{background-color:#6b4a8c;color:#fff;font-size:1.2em;text-align:center;padding:10px;position:relative}.forms[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.add[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50px;margin:5px 0 0}.submit[_ngcontent-%COMP%]{width:100px}.add-m[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px;flex-wrap:wrap}.email-list[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.note[_ngcontent-%COMP%]{color:gray;font-style:italic}app-dialog[_ngcontent-%COMP%]{z-index:4}.cross[_ngcontent-%COMP%]{position:absolute;right:10px;top:5px;padding:5px;transition:all .5s ease-in-out}.cross[_ngcontent-%COMP%]:hover{background-color:#bf5ea5;border-radius:5px;cursor:pointer}.loader-container[_ngcontent-%COMP%]{padding:20px;display:flex;justify-content:center;align-items:center}@media (width <= 530px){.window[_ngcontent-%COMP%]{width:400px}}@media (width <= 420px){.window[_ngcontent-%COMP%]{width:300px}.add-m[_ngcontent-%COMP%]{gap:5px}.add-m[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin:auto auto 20px}}.member[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:10px;border:1px solid lightgrey;border-radius:10px;gap:10px;flex-wrap:nowrap;align-items:flex-end;width:200px}.member-item[_ngcontent-%COMP%]{word-break:break-all;flex:1}.member-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-left:auto;transition:all .5s ease}.member-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.2)}@media (width <= 320px){.window[_ngcontent-%COMP%]{width:250px}}"]})};var rj=n=>({bold:n});function sj(n,t){if(n&1){let e=ge();P(0,"img",6),H("click",function(){X(e);let r=B();return Z(r.delete())}),D()}}function oj(n,t){if(n&1){let e=ge();P(0,"button",7),H("click",function(){X(e);let r=B();return Z(r.exit())}),$(1," Exit "),D()}}var Pf=class n{team;closeSideBar=new re;teamService=A(Xt);taskService=A(Yt);authService=A(Je);selectedTeam="";subscription;ngOnInit(){this.subscription=this.teamService.selectedTeam.subscribe(t=>{this.selectedTeam=t})}ngOnDestroy(){this.subscription?.unsubscribe()}delete(){this.team&&this.authService.user&&(this.teamService.removeTeam(this.team.id,this.authService.user.localId),this.team=void 0)}exit(){this.team&&this.authService.user&&(this.team.members=this.team.members.filter(t=>t!=this.authService.user?.localId),this.teamService.updateTeam(this.team).subscribe(),this.teamService.getTeams(this.authService.user.localId),this.team=void 0)}setTeam(){if(this.team){this.teamService.setTeam(this.team.id),this.taskService.clearMates();let t=this.authService.user?.localId;this.team.members.forEach(e=>{e!==t&&this.taskService.getTeamMatesTask(e)}),this.closeSideBar.emit(!0)}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-team"]],inputs:{team:"team"},outputs:{closeSideBar:"closeSideBar"},standalone:!0,features:[ne],decls:8,vars:7,consts:[[1,"wrapper",3,"click"],[1,"team-name",3,"ngClass"],[1,"team-desc"],[1,"team-img"],["class","img","src","bin.png","alt","delete",3,"click",4,"ngIf"],["class","sbt-btn active",3,"click",4,"ngIf"],["src","bin.png","alt","delete",1,"img",3,"click"],[1,"sbt-btn","active",3,"click"]],template:function(e,i){e&1&&(P(0,"div",0),H("click",function(){return i.setTeam()}),P(1,"div",1),$(2),D(),P(3,"div",2),$(4),D(),P(5,"div",3),Q(6,sj,1,0,"img",4)(7,oj,2,0,"button",5),D()()),e&2&&(F(),U("ngClass",mr(5,rj,(i.team==null?null:i.team.id)==i.selectedTeam)),F(),Cn(" ",i.team==null?null:i.team.name," "),F(2),Cn(" ",i.team==null?null:i.team.description," "),F(2),U("ngIf",(i.team==null?null:i.team.name)!=="Saved"&&(i.team==null?null:i.team.adminId)===(i.authService.user==null?null:i.authService.user.localId)),F(),U("ngIf",(i.team==null?null:i.team.adminId)!==(i.authService.user==null?null:i.authService.user.localId)))},dependencies:[Ne,Ft,ut],styles:[".wrapper[_ngcontent-%COMP%]{padding:10px;border:1px solid lightgrey;margin:5px;border-radius:10px;transition:all .5s ease-in-out}.wrapper[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;cursor:pointer}.team-name[_ngcontent-%COMP%]{font-size:1.2em}.team-name[_ngcontent-%COMP%]:hover{cursor:pointer}.team-desc[_ngcontent-%COMP%]{font-style:italic;color:gray}.team-img[_ngcontent-%COMP%]{display:flex;justify-content:end}.team-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-left:auto;transition:all .5s ease}.team-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.2)}.bold[_ngcontent-%COMP%]{font-weight:bolder}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;border:0px;border-radius:10px;padding:5px}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.sbt-btn.disabled[_ngcontent-%COMP%]{opacity:.6}"]})};var aj=n=>({open:n});function lj(n,t){n&1&&(P(0,"span"),$(1,"Teams"),D())}function cj(n,t){if(n&1){let e=ge();P(0,"button",5),H("click",function(){X(e);let r=B();return Z(r.open())}),$(1,">"),D()}}function dj(n,t){if(n&1){let e=ge();P(0,"button",5),H("click",function(){X(e);let r=B();return Z(r.open())}),$(1),D()}n&2&&(F(),Ve("<"))}function uj(n,t){if(n&1){let e=ge();P(0,"button",9),H("click",function(){X(e);let r=B(2);return Z(r.changeVisibility(!0))}),$(1,"+ New Team"),D()}}function hj(n,t){if(n&1){let e=ge();P(0,"app-team",10),H("closeSideBar",function(){X(e);let r=B(2);return Z(r.open())}),D()}if(n&2){let e=t.$implicit;U("team",e)}}function fj(n,t){if(n&1&&(eo(0),Q(1,uj,2,0,"button",6),P(2,"div",7),Q(3,hj,1,1,"app-team",8),D(),to()),n&2){let e=B();F(),U("ngIf",e.toOpen),F(2),U("ngForOf",e.teams)}}var Mf=class n{teamService=A(Xt);authService=A(Je);teams=[];toOpen=!1;createTeamVisible=!1;ngOnInit(){this.teamService.teams.subscribe(t=>{this.teams=t}),this.authService.user&&this.teamService.getTeams(this.authService.user.localId)}isOpen=!1;changeVisibility(t){this.createTeamVisible=t}open(){this.isOpen=!this.isOpen,this.isOpen?setTimeout(()=>{this.toOpen=!0},350):this.toOpen=!1}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-side-bar"]],standalone:!0,features:[ne],decls:7,vars:8,consts:[[1,"wrapper",3,"ngClass"],[1,"title"],[4,"ngIf"],["class","btn",3,"click",4,"ngIf"],[3,"visibility","visible"],[1,"btn",3,"click"],["class","sbt-btn active",3,"click",4,"ngIf"],[1,"teams"],["class","team",3,"team","closeSideBar",4,"ngFor","ngForOf"],[1,"sbt-btn","active",3,"click"],[1,"team",3,"closeSideBar","team"]],template:function(e,i){e&1&&(P(0,"section",0)(1,"div",1),Q(2,lj,2,0,"span",2),D(),Q(3,cj,2,0,"button",3)(4,dj,2,1,"button",3)(5,fj,4,2,"ng-container",2),D(),P(6,"app-create-team",4),H("visibility",function(s){return i.changeVisibility(s)}),D()),e&2&&(U("ngClass",mr(6,aj,i.isOpen)),F(2),U("ngIf",i.toOpen),F(),U("ngIf",!i.isOpen),F(),U("ngIf",i.isOpen),F(),U("ngIf",i.toOpen),F(),U("visible",i.createTeamVisible))},dependencies:[Ne,Ft,_r,ut,kf,Pf],styles:[".wrapper[_ngcontent-%COMP%]{height:60vh;width:20px;float:left;position:fixed;background-color:#fff;border:1px solid lightgrey;top:50%;transform:translateY(-50%);transition:width .5s ease;z-index:1;border-radius:10px;overflow:hidden;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.wrapper.open[_ngcontent-%COMP%]{width:300px}.btn[_ngcontent-%COMP%]{background-color:#3b2559;border:0px;color:#fff;position:absolute;top:0;right:0;padding:5px;font-size:1.2em;border-radius:10px;cursor:pointer;transition:all .5s ease}.btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.title[_ngcontent-%COMP%]{background-color:#3b2559;color:#fff;text-align:center;padding:7px;border-radius:10px;min-height:20px}.bold[_ngcontent-%COMP%]{font-weight:700}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:100px;border-radius:10px;display:block;margin:10px auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}"]})};var mj=n=>({open:n});function pj(n,t){n&1&&(P(0,"span"),$(1,"Team mates"),D())}function gj(n,t){if(n&1){let e=ge();P(0,"button",6),H("click",function(){X(e);let r=B();return Z(r.open())}),$(1),D()}n&2&&(F(),Ve("<"))}function _j(n,t){if(n&1){let e=ge();P(0,"button",6),H("click",function(){X(e);let r=B();return Z(r.open())}),$(1),D()}n&2&&(F(),Ve(">"))}function vj(n,t){if(n&1){let e=ge();P(0,"div",8),H("click",function(){X(e);let r=B().$implicit,s=B();return Z(s.setBoards(r))}),$(1),D()}if(n&2){let e=B().$implicit;F(),Cn(" ",e.email,"")}}function yj(n,t){if(n&1&&(eo(0),Q(1,vj,2,1,"div",7),to()),n&2){let e=B();F(),U("ngIf",e.toOpen)}}function bj(n,t){if(n&1){let e=ge();P(0,"button",9),H("click",function(){X(e);let r=B();return Z(r.visibility.emit(!0))}),$(1,"+ Member "),D()}}function wj(n,t){n&1&&(P(0,"p"),$(1,"You are the only team member... Add some friends!"),D())}var Of=class n{teamService=A(Xt);taskService=A(Yt);dataService=A(Kt);authService=A(Je);visibility=new re;teams=[];selectedTeam="";toOpen=!1;createTeamVisible=!1;ngOnInit(){this.teamService.teams.subscribe(t=>{this.teams=t}),this.teamService.selectedTeam.subscribe(t=>{this.selectedTeam=t}),this.authService.user&&this.teamService.getTeams(this.authService.user.localId)}isOpen=!1;changeVisibility(t){this.createTeamVisible=t}open(){this.isOpen=!this.isOpen,this.isOpen?setTimeout(()=>{this.toOpen=!0},350):this.toOpen=!1}setBoards(t){if(this.taskService.setMateTasks(t.tasks),this.dataService.selectedUser=t,this.authService.user&&this.selectedTeam){let e=this.teams.find(i=>i.id===this.selectedTeam);e&&e.adminId===this.authService.user.localId?this.dataService.changeRole("admin"):this.dataService.changeRole("mate")}this.open()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-side-bar-r"]],outputs:{visibility:"visibility"},standalone:!0,features:[ne],decls:8,vars:9,consts:[[1,"wrapper",3,"ngClass"],[1,"title"],[4,"ngIf"],["class","btn",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["class","sbt-btn active",3,"click",4,"ngIf"],[1,"btn",3,"click"],["class","item",3,"click",4,"ngIf"],[1,"item",3,"click"],[1,"sbt-btn","active",3,"click"]],template:function(e,i){e&1&&(P(0,"section",0)(1,"div",1),Q(2,pj,2,0,"span",2),D(),Q(3,gj,2,1,"button",3)(4,_j,2,1,"button",3)(5,yj,2,1,"ng-container",4)(6,bj,2,0,"button",5)(7,wj,2,0,"p",2),D()),e&2&&(U("ngClass",mr(7,mj,i.isOpen)),F(2),U("ngIf",i.toOpen),F(),U("ngIf",!i.isOpen),F(),U("ngIf",i.isOpen),F(),U("ngForOf",i.taskService.mates),F(),U("ngIf",i.toOpen&&i.taskService.mates.length!==0),F(),U("ngIf",i.toOpen&&i.taskService.mates.length===0))},dependencies:[Ne,Ft,_r,ut],styles:[".wrapper[_ngcontent-%COMP%]{height:60vh;width:20px;right:0;position:fixed;background-color:#fff;border:1px solid lightgrey;top:50%;transform:translateY(-50%);transition:width .5s ease;z-index:1;border-radius:10px;overflow:hidden;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.wrapper.open[_ngcontent-%COMP%]{width:300px}.title[_ngcontent-%COMP%]{background-color:#3b2559;color:#fff;text-align:center;padding:7px;border-radius:10px;min-height:20px}.bold[_ngcontent-%COMP%]{font-weight:700}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;width:100px;border-radius:10px;display:block;margin:10px auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.item[_ngcontent-%COMP%]{padding:10px;border:1px solid lightgrey;margin:5px;border-radius:10px;transition:all .5s ease-in-out}.item[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;cursor:pointer}p[_ngcontent-%COMP%]{padding:10px;font-style:italic}.btn[_ngcontent-%COMP%]{background-color:#3b2559;border:0px;color:#fff;position:absolute;top:0;right:0;padding:5px;font-size:1.2em;border-radius:10px;cursor:pointer;transition:all .5s ease}.btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}"]})};function Ej(n,t){n&1&&(P(0,"div",8),he(1,"app-loader"),D())}function Cj(n,t){if(n&1){let e=ge();P(0,"form",9)(1,"mat-form-field")(2,"mat-label"),$(3,"New member"),D(),he(4,"input",10),D(),P(5,"button",11),H("click",function(){X(e);let r=B(2);return Z(r.addMember())}),$(6,"+"),D()()}if(n&2){let e=B(2);F(4),U("formControl",e.member)}}function Ij(n,t){if(n&1){let e=ge();P(0,"div",1),he(1,"app-notification"),P(2,"div",2)(3,"div",3)(4,"div"),$(5,"Add a new team member"),D(),P(6,"div",4),H("click",function(){X(e);let r=B();return Z(r.closeWindow())}),$(7,"X"),D()(),Q(8,Ej,2,0,"div",5)(9,Cj,7,1,"form",6),D(),P(10,"div",7),H("click",function(){X(e);let r=B();return Z(r.closeWindow())}),D()()}if(n&2){let e=B();F(8),U("ngIf",e.isLoading),F(),U("ngIf",!e.isLoading)}}var Nf=class n{members=[];team="";ngOnInit(){this.teamService.selectedTeam.subscribe(t=>{this.team=t})}visible=!1;visibility=new re;notification;isLoading=!1;notificationMessage="";authService=A(Je);closeWindow(){this.visibility.emit(!1),this.resetAllForms()}teamService=A(Xt);taskService=A(Yt);member=new ln("",[We.required,We.email]);resetAllForms(){this.member.reset(),this.member.setErrors(null),this.members.splice(1)}addMember(){this.member.errors===null&&this.member.value!==null?this.authService.email(this.member.value).subscribe(t=>{t.exist&&t.email&&t.id&&this.team?this.taskService.mates.filter(i=>i.email===t.email).length===0?this.teamService.getTeam(this.team).subscribe(i=>{console.log("team: ",i),i&&t.id&&(i.members.push(t.id),this.teamService.updateTeam(i).subscribe(r=>{this.authService.user&&(this.visible=!1,this.teamService.getTeams(this.authService.user.localId),this.taskService.getTeamMatesTask(r.id),this.visibility.emit(!1))}))}):this.openNotification("This user is already part of the team","error"):this.openNotification("Sorry, this user is not registered yet.","error")}):this.openNotification("Please, enter the valid email address.","error")}dialog=A(ca);openNotification(t,e){this.notification&&(this.notification.setValues(t,e),this.notification.show())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-add-member"]],viewQuery:function(e,i){if(e&1&&Ke(jt,5),e&2){let r;Re(r=De())&&(i.notification=r.first)}},inputs:{visible:"visible"},outputs:{visibility:"visibility"},standalone:!0,features:[ne],decls:1,vars:1,consts:[["class","wrapper",4,"ngIf"],[1,"wrapper"],[1,"window"],[1,"title"],[1,"cross",3,"click"],["class","loader-container",4,"ngIf"],["class","forms",4,"ngIf"],[1,"background",3,"click"],[1,"loader-container"],[1,"forms"],["matInput","","placeholder","pat@example.com","required","",3,"formControl"],["type","button",1,"sbt-btn","active","add",3,"click"]],template:function(e,i){e&1&&Q(0,Ij,11,2,"div",0),e&2&&U("ngIf",i.visible)},dependencies:[An,Or,Ii,Fr,Nr,Af,Ci,Dr,Bn,Ei,Rr,Gi,Bl,kr,Ul,Ne,ut,Ti,jt],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.background[_ngcontent-%COMP%]{background-color:#000;opacity:.4;position:fixed;top:0;left:0;width:100%;height:100vh;z-index:2}.window[_ngcontent-%COMP%]{width:500px;min-height:200px;background-color:#fff;opacity:1;position:fixed;z-index:3;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:10px;max-height:100vh;overflow-y:auto;overflow-x:hidden;box-sizing:border-box}.title[_ngcontent-%COMP%]{background-color:#6b4a8c;color:#fff;font-size:1.2em;text-align:center;padding:10px;position:relative}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;margin:20px}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;padding:5px;border:0px;border-radius:10px;display:block;margin:auto}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.add[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50px}app-dialog[_ngcontent-%COMP%]{z-index:4}.cross[_ngcontent-%COMP%]{position:absolute;right:10px;top:5px;padding:5px;transition:all .5s ease-in-out}.cross[_ngcontent-%COMP%]:hover{background-color:#bf5ea5;border-radius:5px;cursor:pointer}.loader-container[_ngcontent-%COMP%]{padding:20px;display:flex;justify-content:center;align-items:center}"]})};function Tj(n,t){if(n&1){let e=ge();eo(0),P(1,"app-board",5),H("arrayChanged",function(){X(e);let r=B();return Z(r.arrayChanged())}),D(),to()}if(n&2){let e=t.$implicit;F(),U("id",e.id)("title",e.title)("tasks",e.tasks)("connectedTo",e.connectedTo)("type",e.ref)}}var Ff=class n{teamService=A(Xt);taskService=A(Yt);authService=A(Je);visible=!1;boards=[];ngOnInit(){this.authService.getUser(),this.taskService.tasks.subscribe(t=>{this.setBoards(t)}),this.authService.user&&this.taskService.getUserTasks(this.authService.user.localId)}openAddMember(t){this.visible=t}setBoards(t){let e=[],i=[],r=[];t.forEach(s=>{switch(s.status){case"do":e.push(s);break;case"progress":i.push(s);break;case"done":r.push(s);break}}),e=e.sort((s,o)=>s.num-o.num),i=i.sort((s,o)=>s.num-o.num),r=r.sort((s,o)=>s.num-o.num),this.boards=[],this.boards.push({title:"To do",ref:"do",id:"list-1",tasks:e,connectedTo:["list-2, list-3"]},{title:"In process",ref:"progress",id:"list-2",tasks:i,connectedTo:["list-1, list-3"]},{title:"Done",ref:"done",id:"list-3",tasks:r,connectedTo:["list-2, list-1"]})}arrayChanged(){this.boards.forEach(t=>{t.tasks.forEach((e,i)=>{e.status!==t.ref&&e.id?this.taskService.updateTask(e.id,{status:t.ref,num:i}).subscribe():e.num!==i&&e.id&&this.taskService.updateTask(e.id,{num:i}).subscribe()})})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-main-page"]],standalone:!0,features:[ne],decls:6,vars:2,consts:[[1,"wrapper"],[3,"visibility"],[3,"visibility","visible"],["cdkDropListGroup","",1,"board-container"],[4,"ngFor","ngForOf"],[3,"arrayChanged","id","title","tasks","connectedTo","type"]],template:function(e,i){e&1&&(P(0,"div",0),he(1,"app-side-bar"),P(2,"app-side-bar-r",1),H("visibility",function(s){return i.openAddMember(s)}),D(),P(3,"app-add-member",2),H("visibility",function(s){return i.openAddMember(s)}),D(),P(4,"div",3),Q(5,Tj,2,5,"ng-container",4),D()()),e&2&&(F(3),U("visible",i.visible),F(2),U("ngForOf",i.boards))},dependencies:[Cf,Ne,_r,ra,IS,Mf,Of,Nf],styles:[".wrapper[_ngcontent-%COMP%]{min-height:80vh}.board-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:row;gap:20px;justify-content:center;flex-wrap:wrap}app-dialog[_ngcontent-%COMP%]{z-index:3}"]})};var KS=()=>{let n=A(Je),t=A(Lt);return n.user?!0:(t.navigate(["/login"]),!1)};var QS=[{path:"login",component:df},{path:"register",component:uf},{path:"main",component:Ff,canActivate:[KS]},{path:"**",redirectTo:"login",pathMatch:"full"}];var xj="@",Sj=(()=>{class n{constructor(e,i,r,s,o){this.doc=e,this.delegate=i,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=A(r0,{optional:!0}),this.loadingSchedulerFn=A(Aj,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-CVPIG5NZ.js").then(r=>r),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(r=>{throw new Pe(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(e,i){let r=this.delegate.createRenderer(e,i);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new ny(r);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let a=o.createRenderer(e,i);s.use(a),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(i){Zs()}}static{this.\u0275prov=V({token:n,factory:n.\u0275fac})}}return n})(),ny=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,r){this.delegate.insertBefore(t,e,i,r)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i)),this.delegate.listen(t,e,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(xj)}},Aj=new j("");function YS(n="animations"){return Km("NgAsyncAnimations"),rn([{provide:Fd,useFactory:(t,e,i)=>new Sj(t,e,i,n),deps:[J,du,G]},{provide:sn,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var XS="auth",Uc=class{constructor(t){return t}},Ms=class{constructor(){return ws(XS)}};var iy=new j("angularfire2.auth-instances");function AB(n,t){let e=Fo(XS,n,t);return e&&new Uc(e)}function RB(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Uc(i)}}var DB={provide:Ms,deps:[[new rt,iy]]},kB={provide:Uc,useFactory:AB,deps:[[new rt,iy],ii]};function ZS(n,...t){return Ze("angularfire",dn.full,"auth"),rn([kB,DB,{provide:iy,useFactory:RB(n),multi:!0,deps:[G,Ae,$n,Yi,[new rt,Rn],...t]}])}var JS=Lr(ep,!0);var eA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tA={};var ry,nA;(function(){var n;function t(T,_){function y(){}y.prototype=_.prototype,T.D=_.prototype,T.prototype=new y,T.prototype.constructor=T,T.C=function(w,C,R){for(var v=Array(arguments.length-2),Oi=2;Oi<arguments.length;Oi++)v[Oi-2]=arguments[Oi];return _.prototype[C].apply(w,v)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,_,y){y||(y=0);var w=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)w[C]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(C=0;16>C;++C)w[C]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=T.g[0],y=T.g[1],C=T.g[2];var R=T.g[3],v=_+(R^y&(C^R))+w[0]+3614090360&4294967295;_=y+(v<<7&4294967295|v>>>25),v=R+(C^_&(y^C))+w[1]+3905402710&4294967295,R=_+(v<<12&4294967295|v>>>20),v=C+(y^R&(_^y))+w[2]+606105819&4294967295,C=R+(v<<17&4294967295|v>>>15),v=y+(_^C&(R^_))+w[3]+3250441966&4294967295,y=C+(v<<22&4294967295|v>>>10),v=_+(R^y&(C^R))+w[4]+4118548399&4294967295,_=y+(v<<7&4294967295|v>>>25),v=R+(C^_&(y^C))+w[5]+1200080426&4294967295,R=_+(v<<12&4294967295|v>>>20),v=C+(y^R&(_^y))+w[6]+2821735955&4294967295,C=R+(v<<17&4294967295|v>>>15),v=y+(_^C&(R^_))+w[7]+4249261313&4294967295,y=C+(v<<22&4294967295|v>>>10),v=_+(R^y&(C^R))+w[8]+1770035416&4294967295,_=y+(v<<7&4294967295|v>>>25),v=R+(C^_&(y^C))+w[9]+2336552879&4294967295,R=_+(v<<12&4294967295|v>>>20),v=C+(y^R&(_^y))+w[10]+4294925233&4294967295,C=R+(v<<17&4294967295|v>>>15),v=y+(_^C&(R^_))+w[11]+2304563134&4294967295,y=C+(v<<22&4294967295|v>>>10),v=_+(R^y&(C^R))+w[12]+1804603682&4294967295,_=y+(v<<7&4294967295|v>>>25),v=R+(C^_&(y^C))+w[13]+4254626195&4294967295,R=_+(v<<12&4294967295|v>>>20),v=C+(y^R&(_^y))+w[14]+2792965006&4294967295,C=R+(v<<17&4294967295|v>>>15),v=y+(_^C&(R^_))+w[15]+1236535329&4294967295,y=C+(v<<22&4294967295|v>>>10),v=_+(C^R&(y^C))+w[1]+4129170786&4294967295,_=y+(v<<5&4294967295|v>>>27),v=R+(y^C&(_^y))+w[6]+3225465664&4294967295,R=_+(v<<9&4294967295|v>>>23),v=C+(_^y&(R^_))+w[11]+643717713&4294967295,C=R+(v<<14&4294967295|v>>>18),v=y+(R^_&(C^R))+w[0]+3921069994&4294967295,y=C+(v<<20&4294967295|v>>>12),v=_+(C^R&(y^C))+w[5]+3593408605&4294967295,_=y+(v<<5&4294967295|v>>>27),v=R+(y^C&(_^y))+w[10]+38016083&4294967295,R=_+(v<<9&4294967295|v>>>23),v=C+(_^y&(R^_))+w[15]+3634488961&4294967295,C=R+(v<<14&4294967295|v>>>18),v=y+(R^_&(C^R))+w[4]+3889429448&4294967295,y=C+(v<<20&4294967295|v>>>12),v=_+(C^R&(y^C))+w[9]+568446438&4294967295,_=y+(v<<5&4294967295|v>>>27),v=R+(y^C&(_^y))+w[14]+3275163606&4294967295,R=_+(v<<9&4294967295|v>>>23),v=C+(_^y&(R^_))+w[3]+4107603335&4294967295,C=R+(v<<14&4294967295|v>>>18),v=y+(R^_&(C^R))+w[8]+1163531501&4294967295,y=C+(v<<20&4294967295|v>>>12),v=_+(C^R&(y^C))+w[13]+2850285829&4294967295,_=y+(v<<5&4294967295|v>>>27),v=R+(y^C&(_^y))+w[2]+4243563512&4294967295,R=_+(v<<9&4294967295|v>>>23),v=C+(_^y&(R^_))+w[7]+1735328473&4294967295,C=R+(v<<14&4294967295|v>>>18),v=y+(R^_&(C^R))+w[12]+2368359562&4294967295,y=C+(v<<20&4294967295|v>>>12),v=_+(y^C^R)+w[5]+4294588738&4294967295,_=y+(v<<4&4294967295|v>>>28),v=R+(_^y^C)+w[8]+2272392833&4294967295,R=_+(v<<11&4294967295|v>>>21),v=C+(R^_^y)+w[11]+1839030562&4294967295,C=R+(v<<16&4294967295|v>>>16),v=y+(C^R^_)+w[14]+4259657740&4294967295,y=C+(v<<23&4294967295|v>>>9),v=_+(y^C^R)+w[1]+2763975236&4294967295,_=y+(v<<4&4294967295|v>>>28),v=R+(_^y^C)+w[4]+1272893353&4294967295,R=_+(v<<11&4294967295|v>>>21),v=C+(R^_^y)+w[7]+4139469664&4294967295,C=R+(v<<16&4294967295|v>>>16),v=y+(C^R^_)+w[10]+3200236656&4294967295,y=C+(v<<23&4294967295|v>>>9),v=_+(y^C^R)+w[13]+681279174&4294967295,_=y+(v<<4&4294967295|v>>>28),v=R+(_^y^C)+w[0]+3936430074&4294967295,R=_+(v<<11&4294967295|v>>>21),v=C+(R^_^y)+w[3]+3572445317&4294967295,C=R+(v<<16&4294967295|v>>>16),v=y+(C^R^_)+w[6]+76029189&4294967295,y=C+(v<<23&4294967295|v>>>9),v=_+(y^C^R)+w[9]+3654602809&4294967295,_=y+(v<<4&4294967295|v>>>28),v=R+(_^y^C)+w[12]+3873151461&4294967295,R=_+(v<<11&4294967295|v>>>21),v=C+(R^_^y)+w[15]+530742520&4294967295,C=R+(v<<16&4294967295|v>>>16),v=y+(C^R^_)+w[2]+3299628645&4294967295,y=C+(v<<23&4294967295|v>>>9),v=_+(C^(y|~R))+w[0]+4096336452&4294967295,_=y+(v<<6&4294967295|v>>>26),v=R+(y^(_|~C))+w[7]+1126891415&4294967295,R=_+(v<<10&4294967295|v>>>22),v=C+(_^(R|~y))+w[14]+2878612391&4294967295,C=R+(v<<15&4294967295|v>>>17),v=y+(R^(C|~_))+w[5]+4237533241&4294967295,y=C+(v<<21&4294967295|v>>>11),v=_+(C^(y|~R))+w[12]+1700485571&4294967295,_=y+(v<<6&4294967295|v>>>26),v=R+(y^(_|~C))+w[3]+2399980690&4294967295,R=_+(v<<10&4294967295|v>>>22),v=C+(_^(R|~y))+w[10]+4293915773&4294967295,C=R+(v<<15&4294967295|v>>>17),v=y+(R^(C|~_))+w[1]+2240044497&4294967295,y=C+(v<<21&4294967295|v>>>11),v=_+(C^(y|~R))+w[8]+1873313359&4294967295,_=y+(v<<6&4294967295|v>>>26),v=R+(y^(_|~C))+w[15]+4264355552&4294967295,R=_+(v<<10&4294967295|v>>>22),v=C+(_^(R|~y))+w[6]+2734768916&4294967295,C=R+(v<<15&4294967295|v>>>17),v=y+(R^(C|~_))+w[13]+1309151649&4294967295,y=C+(v<<21&4294967295|v>>>11),v=_+(C^(y|~R))+w[4]+4149444226&4294967295,_=y+(v<<6&4294967295|v>>>26),v=R+(y^(_|~C))+w[11]+3174756917&4294967295,R=_+(v<<10&4294967295|v>>>22),v=C+(_^(R|~y))+w[2]+718787259&4294967295,C=R+(v<<15&4294967295|v>>>17),v=y+(R^(C|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(C+(v<<21&4294967295|v>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+R&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var y=_-this.blockSize,w=this.B,C=this.h,R=0;R<_;){if(C==0)for(;R<=y;)r(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<_;)if(w[C++]=T.charCodeAt(R++),C==this.blockSize){r(this,w),C=0;break}}else for(;R<_;)if(w[C++]=T[R++],C==this.blockSize){r(this,w),C=0;break}}this.h=C,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var y=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=y&255,y/=256;for(this.u(T),T=Array(16),_=y=0;4>_;++_)for(var w=0;32>w;w+=8)T[y++]=this.g[_]>>>w&255;return T};function s(T,_){var y=a;return Object.prototype.hasOwnProperty.call(y,T)?y[T]:y[T]=_(T)}function o(T,_){this.h=_;for(var y=[],w=!0,C=T.length-1;0<=C;C--){var R=T[C]|0;w&&R==_||(y[C]=R,w=!1)}this.g=y}var a={};function c(T){return-128<=T&&128>T?s(T,function(_){return new o([_|0],0>_?-1:0)}):new o([T|0],0>T?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return N(d(-T));for(var _=[],y=1,w=0;T>=y;w++)_[w]=T/y|0,y*=4294967296;return new o(_,0)}function f(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return N(f(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(_,8)),w=m,C=0;C<T.length;C+=8){var R=Math.min(8,T.length-C),v=parseInt(T.substring(C,C+R),_);8>R?(R=d(Math.pow(_,R)),w=w.j(R).add(d(v))):(w=w.j(y),w=w.add(d(v)))}return w}var m=c(0),g=c(1),b=c(16777216);n=o.prototype,n.m=function(){if(M(this))return-N(this).m();for(var T=0,_=1,y=0;y<this.g.length;y++){var w=this.i(y);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(M(this))return"-"+N(this).toString(T);for(var _=d(Math.pow(T,6)),y=this,w="";;){var C=Se(y,_).g;y=ce(y,C.j(_));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(T);if(y=C,E(y))return R+w;for(;6>R.length;)R="0"+R;w=R+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function M(T){return T.h==-1}n.l=function(T){return T=ce(this,T),M(T)?-1:E(T)?0:1};function N(T){for(var _=T.g.length,y=[],w=0;w<_;w++)y[w]=~T.g[w];return new o(y,~T.h).add(g)}n.abs=function(){return M(this)?N(this):this},n.add=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],w=0,C=0;C<=_;C++){var R=w+(this.i(C)&65535)+(T.i(C)&65535),v=(R>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);w=v>>>16,R&=65535,v&=65535,y[C]=v<<16|R}return new o(y,y[y.length-1]&-2147483648?-1:0)};function ce(T,_){return T.add(N(_))}n.j=function(T){if(E(this)||E(T))return m;if(M(this))return M(T)?N(this).j(N(T)):N(N(this).j(T));if(M(T))return N(this.j(N(T)));if(0>this.l(b)&&0>T.l(b))return d(this.m()*T.m());for(var _=this.g.length+T.g.length,y=[],w=0;w<2*_;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var C=0;C<T.g.length;C++){var R=this.i(w)>>>16,v=this.i(w)&65535,Oi=T.i(C)>>>16,Aa=T.i(C)&65535;y[2*w+2*C]+=v*Aa,le(y,2*w+2*C),y[2*w+2*C+1]+=R*Aa,le(y,2*w+2*C+1),y[2*w+2*C+1]+=v*Oi,le(y,2*w+2*C+1),y[2*w+2*C+2]+=R*Oi,le(y,2*w+2*C+2)}for(w=0;w<_;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=_;w<2*_;w++)y[w]=0;return new o(y,0)};function le(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function q(T,_){this.g=T,this.h=_}function Se(T,_){if(E(_))throw Error("division by zero");if(E(T))return new q(m,m);if(M(T))return _=Se(N(T),_),new q(N(_.g),N(_.h));if(M(_))return _=Se(T,N(_)),new q(N(_.g),_.h);if(30<T.g.length){if(M(T)||M(_))throw Error("slowDivide_ only works with positive integers.");for(var y=g,w=_;0>=w.l(T);)y=tt(y),w=tt(w);var C=zt(y,1),R=zt(w,1);for(w=zt(w,2),y=zt(y,2);!E(w);){var v=R.add(w);0>=v.l(T)&&(C=C.add(y),R=v),w=zt(w,1),y=zt(y,1)}return _=ce(T,C.j(_)),new q(C,_)}for(C=m;0<=T.l(_);){for(y=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),R=d(y),v=R.j(_);M(v)||0<v.l(T);)y-=w,R=d(y),v=R.j(_);E(R)&&(R=g),C=C.add(R),T=ce(T,v)}return new q(C,T)}n.A=function(T){return Se(this,T).h},n.and=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)&T.i(w);return new o(y,this.h&T.h)},n.or=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)|T.i(w);return new o(y,this.h|T.h)},n.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)^T.i(w);return new o(y,this.h^T.h)};function tt(T){for(var _=T.g.length+1,y=[],w=0;w<_;w++)y[w]=T.i(w)<<1|T.i(w-1)>>>31;return new o(y,T.h)}function zt(T,_){var y=_>>5;_%=32;for(var w=T.g.length-y,C=[],R=0;R<w;R++)C[R]=0<_?T.i(R+y)>>>_|T.i(R+y+1)<<32-_:T.i(R+y);return new o(C,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,nA=tA.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ry=tA.Integer=o}).apply(typeof eA<"u"?eA:typeof self<"u"?self:typeof window<"u"?window:{});var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},er={};var iA,PB,rA,sA,oA,aA,lA,cA,dA;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,u,h){return l==Array.prototype||l==Object.prototype||(l[u]=h.value),l};function e(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lf=="object"&&Lf];for(var u=0;u<l.length;++u){var h=l[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=e(this);function r(l,u){if(u)e:{var h=i;l=l.split(".");for(var p=0;p<l.length-1;p++){var I=l[p];if(!(I in h))break e;h=h[I]}l=l[l.length-1],p=h[l],u=u(p),u!=p&&u!=null&&t(h,l,{configurable:!0,writable:!0,value:u})}}function s(l,u){l instanceof String&&(l+="");var h=0,p=!1,I={next:function(){if(!p&&h<l.length){var O=h++;return{value:u(O,l[O]),done:!1}}return p=!0,{done:!0,value:void 0}}};return I[Symbol.iterator]=function(){return I},I}r("Array.prototype.values",function(l){return l||function(){return s(this,function(u,h){return h})}});var o=o||{},a=this||self;function c(l){var u=typeof l;return u=u!="object"?u:l?Array.isArray(l)?"array":u:"null",u=="array"||u=="object"&&typeof l.length=="number"}function d(l){var u=typeof l;return u=="object"&&l!=null||u=="function"}function f(l,u,h){return l.call.apply(l.bind,arguments)}function m(l,u,h){if(!l)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var I=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(I,p),l.apply(u,I)}}return function(){return l.apply(u,arguments)}}function g(l,u,h){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function b(l,u){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),l.apply(this,p)}}function E(l,u){function h(){}h.prototype=u.prototype,l.aa=u.prototype,l.prototype=new h,l.prototype.constructor=l,l.Qb=function(p,I,O){for(var z=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)z[Be-2]=arguments[Be];return u.prototype[I].apply(p,z)}}function M(l){let u=l.length;if(0<u){let h=Array(u);for(let p=0;p<u;p++)h[p]=l[p];return h}return[]}function N(l,u){for(let h=1;h<arguments.length;h++){let p=arguments[h];if(c(p)){let I=l.length||0,O=p.length||0;l.length=I+O;for(let z=0;z<O;z++)l[I+z]=p[z]}else l.push(p)}}class ce{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function le(l){return/^[\s\xa0]*$/.test(l)}function q(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function Se(l){return Se[" "](l),l}Se[" "]=function(){};var tt=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function zt(l,u,h){for(let p in l)u.call(h,l[p],p,l)}function T(l,u){for(let h in l)u.call(void 0,l[h],h,l)}function _(l){let u={};for(let h in l)u[h]=l[h];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,u){let h,p;for(let I=1;I<arguments.length;I++){p=arguments[I];for(h in p)l[h]=p[h];for(let O=0;O<y.length;O++)h=y[O],Object.prototype.hasOwnProperty.call(p,h)&&(l[h]=p[h])}}function C(l){var u=1;l=l.split(":");let h=[];for(;0<u&&l.length;)h.push(l.shift()),u--;return l.length&&h.push(l.join(":")),h}function R(l){a.setTimeout(()=>{throw l},0)}function v(){var l=hm;let u=null;return l.g&&(u=l.g,l.g=l.g.next,l.g||(l.h=null),u.next=null),u}class Oi{constructor(){this.h=this.g=null}add(u,h){let p=Aa.get();p.set(u,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Aa=new ce(()=>new pD,l=>l.reset());class pD{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ra,Da=!1,hm=new Oi,Nb=()=>{let l=a.Promise.resolve(void 0);Ra=()=>{l.then(gD)}};var gD=()=>{for(var l;l=v();){try{l.h.call(l.g)}catch(h){R(h)}var u=Aa;u.j(l),100>u.h&&(u.h++,l.next=u.g,u.g=l)}Da=!1};function ir(){this.s=this.s,this.C=this.C}ir.prototype.s=!1,ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $t(l,u){this.type=l,this.g=this.target=u,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};var _D=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,u=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let h=()=>{};a.addEventListener("test",h,u),a.removeEventListener("test",h,u)}catch{}return l}();function ka(l,u){if($t.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var h=this.type=l.type,p=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=u,u=l.relatedTarget){if(tt){e:{try{Se(u.nodeName);var I=!0;break e}catch{}I=!1}I||(u=null)}}else h=="mouseover"?u=l.fromElement:h=="mouseout"&&(u=l.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:vD[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ka.aa.h.call(this)}}E(ka,$t);var vD={2:"touch",3:"pen",4:"mouse"};ka.prototype.h=function(){ka.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Pa="closure_listenable_"+(1e6*Math.random()|0),yD=0;function bD(l,u,h,p,I){this.listener=l,this.proxy=null,this.src=u,this.type=h,this.capture=!!p,this.ha=I,this.key=++yD,this.da=this.fa=!1}function cd(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function dd(l){this.src=l,this.g={},this.h=0}dd.prototype.add=function(l,u,h,p,I){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var z=mm(l,u,p,I);return-1<z?(u=l[z],h||(u.fa=!1)):(u=new bD(u,this.src,O,!!p,I),u.fa=h,l.push(u)),u};function fm(l,u){var h=u.type;if(h in l.g){var p=l.g[h],I=Array.prototype.indexOf.call(p,u,void 0),O;(O=0<=I)&&Array.prototype.splice.call(p,I,1),O&&(cd(u),l.g[h].length==0&&(delete l.g[h],l.h--))}}function mm(l,u,h,p){for(var I=0;I<l.length;++I){var O=l[I];if(!O.da&&O.listener==u&&O.capture==!!h&&O.ha==p)return I}return-1}var pm="closure_lm_"+(1e6*Math.random()|0),gm={};function Fb(l,u,h,p,I){if(p&&p.once)return Vb(l,u,h,p,I);if(Array.isArray(u)){for(var O=0;O<u.length;O++)Fb(l,u[O],h,p,I);return null}return h=bm(h),l&&l[Pa]?l.K(u,h,d(p)?!!p.capture:!!p,I):Lb(l,u,h,!1,p,I)}function Lb(l,u,h,p,I,O){if(!u)throw Error("Invalid event type");var z=d(I)?!!I.capture:!!I,Be=vm(l);if(Be||(l[pm]=Be=new dd(l)),h=Be.add(u,h,p,z,O),h.proxy)return h;if(p=wD(),h.proxy=p,p.src=l,p.listener=h,l.addEventListener)_D||(I=z),I===void 0&&(I=!1),l.addEventListener(u.toString(),p,I);else if(l.attachEvent)l.attachEvent(Bb(u.toString()),p);else if(l.addListener&&l.removeListener)l.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function wD(){function l(h){return u.call(l.src,l.listener,h)}let u=ED;return l}function Vb(l,u,h,p,I){if(Array.isArray(u)){for(var O=0;O<u.length;O++)Vb(l,u[O],h,p,I);return null}return h=bm(h),l&&l[Pa]?l.L(u,h,d(p)?!!p.capture:!!p,I):Lb(l,u,h,!0,p,I)}function jb(l,u,h,p,I){if(Array.isArray(u))for(var O=0;O<u.length;O++)jb(l,u[O],h,p,I);else p=d(p)?!!p.capture:!!p,h=bm(h),l&&l[Pa]?(l=l.i,u=String(u).toString(),u in l.g&&(O=l.g[u],h=mm(O,h,p,I),-1<h&&(cd(O[h]),Array.prototype.splice.call(O,h,1),O.length==0&&(delete l.g[u],l.h--)))):l&&(l=vm(l))&&(u=l.g[u.toString()],l=-1,u&&(l=mm(u,h,p,I)),(h=-1<l?u[l]:null)&&_m(h))}function _m(l){if(typeof l!="number"&&l&&!l.da){var u=l.src;if(u&&u[Pa])fm(u.i,l);else{var h=l.type,p=l.proxy;u.removeEventListener?u.removeEventListener(h,p,l.capture):u.detachEvent?u.detachEvent(Bb(h),p):u.addListener&&u.removeListener&&u.removeListener(p),(h=vm(u))?(fm(h,l),h.h==0&&(h.src=null,u[pm]=null)):cd(l)}}}function Bb(l){return l in gm?gm[l]:gm[l]="on"+l}function ED(l,u){if(l.da)l=!0;else{u=new ka(u,this);var h=l.listener,p=l.ha||l.src;l.fa&&_m(l),l=h.call(p,u)}return l}function vm(l){return l=l[pm],l instanceof dd?l:null}var ym="__closure_events_fn_"+(1e9*Math.random()>>>0);function bm(l){return typeof l=="function"?l:(l[ym]||(l[ym]=function(u){return l.handleEvent(u)}),l[ym])}function Wt(){ir.call(this),this.i=new dd(this),this.M=this,this.F=null}E(Wt,ir),Wt.prototype[Pa]=!0,Wt.prototype.removeEventListener=function(l,u,h,p){jb(this,l,u,h,p)};function tn(l,u){var h,p=l.F;if(p)for(h=[];p;p=p.F)h.push(p);if(l=l.M,p=u.type||u,typeof u=="string")u=new $t(u,l);else if(u instanceof $t)u.target=u.target||l;else{var I=u;u=new $t(p,l),w(u,I)}if(I=!0,h)for(var O=h.length-1;0<=O;O--){var z=u.g=h[O];I=ud(z,p,!0,u)&&I}if(z=u.g=l,I=ud(z,p,!0,u)&&I,I=ud(z,p,!1,u)&&I,h)for(O=0;O<h.length;O++)z=u.g=h[O],I=ud(z,p,!1,u)&&I}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var l=this.i,u;for(u in l.g){for(var h=l.g[u],p=0;p<h.length;p++)cd(h[p]);delete l.g[u],l.h--}}this.F=null},Wt.prototype.K=function(l,u,h,p){return this.i.add(String(l),u,!1,h,p)},Wt.prototype.L=function(l,u,h,p){return this.i.add(String(l),u,!0,h,p)};function ud(l,u,h,p){if(u=l.i.g[String(u)],!u)return!0;u=u.concat();for(var I=!0,O=0;O<u.length;++O){var z=u[O];if(z&&!z.da&&z.capture==h){var Be=z.listener,Dt=z.ha||z.src;z.fa&&fm(l.i,z),I=Be.call(Dt,p)!==!1&&I}}return I&&!p.defaultPrevented}function Ub(l,u,h){if(typeof l=="function")h&&(l=g(l,h));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:a.setTimeout(l,u||0)}function zb(l){l.g=Ub(()=>{l.g=null,l.i&&(l.i=!1,zb(l))},l.l);let u=l.h;l.h=null,l.m.apply(null,u)}class CD extends ir{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:zb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(l){ir.call(this),this.h=l,this.g={}}E(Ma,ir);var $b=[];function Wb(l){zt(l.g,function(u,h){this.g.hasOwnProperty(h)&&_m(u)},l),l.g={}}Ma.prototype.N=function(){Ma.aa.N.call(this),Wb(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wm=a.JSON.stringify,ID=a.JSON.parse,TD=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Em(){}Em.prototype.h=null;function qb(l){return l.h||(l.h=l.i())}function Gb(){}var Oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cm(){$t.call(this,"d")}E(Cm,$t);function Im(){$t.call(this,"c")}E(Im,$t);var Xr={},Hb=null;function hd(){return Hb=Hb||new Wt}Xr.La="serverreachability";function Kb(l){$t.call(this,Xr.La,l)}E(Kb,$t);function Na(l){let u=hd();tn(u,new Kb(u))}Xr.STAT_EVENT="statevent";function Qb(l,u){$t.call(this,Xr.STAT_EVENT,l),this.stat=u}E(Qb,$t);function nn(l){let u=hd();tn(u,new Qb(u,l))}Xr.Ma="timingevent";function Yb(l,u){$t.call(this,Xr.Ma,l),this.size=u}E(Yb,$t);function Fa(l,u){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},u)}function La(){this.g=!0}La.prototype.xa=function(){this.g=!1};function xD(l,u,h,p,I,O){l.info(function(){if(l.g)if(O)for(var z="",Be=O.split("&"),Dt=0;Dt<Be.length;Dt++){var Ce=Be[Dt].split("=");if(1<Ce.length){var qt=Ce[0];Ce=Ce[1];var Gt=qt.split("_");z=2<=Gt.length&&Gt[1]=="type"?z+(qt+"="+Ce+"&"):z+(qt+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+p+") [attempt "+I+"]: "+u+`
`+h+`
`+z})}function SD(l,u,h,p,I,O,z){l.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+I+"]: "+u+`
`+h+`
`+O+" "+z})}function Ws(l,u,h,p){l.info(function(){return"XMLHTTP TEXT ("+u+"): "+RD(l,h)+(p?" "+p:"")})}function AD(l,u){l.info(function(){return"TIMEOUT: "+u})}La.prototype.info=function(){};function RD(l,u){if(!l.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(l=0;l<h.length;l++)if(Array.isArray(h[l])){var p=h[l];if(!(2>p.length)){var I=p[1];if(Array.isArray(I)&&!(1>I.length)){var O=I[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<I.length;z++)I[z]=""}}}}return wm(h)}catch{return u}}var fd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tm;function md(){}E(md,Em),md.prototype.g=function(){return new XMLHttpRequest},md.prototype.i=function(){return{}},Tm=new md;function rr(l,u,h,p){this.j=l,this.i=u,this.l=h,this.R=p||1,this.U=new Ma(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zb}function Zb(){this.i=null,this.g="",this.h=!1}var Jb={},xm={};function Sm(l,u,h){l.L=1,l.v=vd(Ni(u)),l.m=h,l.P=!0,ew(l,null)}function ew(l,u){l.F=Date.now(),pd(l),l.A=Ni(l.v);var h=l.A,p=l.R;Array.isArray(p)||(p=[String(p)]),mw(h.i,"t",p),l.C=0,h=l.j.J,l.h=new Zb,l.g=Pw(l.j,h?u:null,!l.m),0<l.O&&(l.M=new CD(g(l.Y,l,l.g),l.O)),u=l.U,h=l.g,p=l.ca;var I="readystatechange";Array.isArray(I)||(I&&($b[0]=I.toString()),I=$b);for(var O=0;O<I.length;O++){var z=Fb(h,I[O],p||u.handleEvent,!1,u.h||u);if(!z)break;u.g[z.key]=z}u=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,u)):(l.u="GET",l.g.ea(l.A,l.u,null,u)),Na(),xD(l.i,l.u,l.A,l.l,l.R,l.m)}rr.prototype.ca=function(l){l=l.target;let u=this.M;u&&Fi(l)==3?u.j():this.Y(l)},rr.prototype.Y=function(l){try{if(l==this.g)e:{let Gt=Fi(this.g);var u=this.g.Ba();let Hs=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||ww(this.g)))){this.J||Gt!=4||u==7||(u==8||0>=Hs?Na(3):Na(2)),Am(this);var h=this.g.Z();this.X=h;t:if(tw(this)){var p=ww(this.g);l="";var I=p.length,O=Fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),Va(this);var z="";break t}this.h.i=new a.TextDecoder}for(u=0;u<I;u++)this.h.h=!0,l+=this.h.i.decode(p[u],{stream:!(O&&u==I-1)});p.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=h==200,SD(this.i,this.u,this.A,this.l,this.R,Gt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,Dt=this.g;if((Be=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!le(Be)){var Ce=Be;break t}}Ce=null}if(h=Ce)Ws(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rm(this,h);else{this.o=!1,this.s=3,nn(12),Zr(this),Va(this);break e}}if(this.P){h=!0;let Xn;for(;!this.J&&this.C<z.length;)if(Xn=DD(this,z),Xn==xm){Gt==4&&(this.s=4,nn(14),h=!1),Ws(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==Jb){this.s=4,nn(15),Ws(this.i,this.l,z,"[Invalid Chunk]"),h=!1;break}else Ws(this.i,this.l,Xn,null),Rm(this,Xn);if(tw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||z.length!=0||this.h.h||(this.s=1,nn(16),h=!1),this.o=this.o&&h,!h)Ws(this.i,this.l,z,"[Invalid Chunked Response]"),Zr(this),Va(this);else if(0<z.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Nm(qt),qt.M=!0,nn(11))}}else Ws(this.i,this.l,z,null),Rm(this,z);Gt==4&&Zr(this),this.o&&!this.J&&(Gt==4?Aw(this.j,this):(this.o=!1,pd(this)))}else HD(this.g),h==400&&0<z.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),Zr(this),Va(this)}}}catch{}finally{}};function tw(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function DD(l,u){var h=l.C,p=u.indexOf(`
`,h);return p==-1?xm:(h=Number(u.substring(h,p)),isNaN(h)?Jb:(p+=1,p+h>u.length?xm:(u=u.slice(p,p+h),l.C=p+h,u)))}rr.prototype.cancel=function(){this.J=!0,Zr(this)};function pd(l){l.S=Date.now()+l.I,nw(l,l.I)}function nw(l,u){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Fa(g(l.ba,l),u)}function Am(l){l.B&&(a.clearTimeout(l.B),l.B=null)}rr.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(AD(this.i,this.A),this.L!=2&&(Na(),nn(17)),Zr(this),this.s=2,Va(this)):nw(this,this.S-l)};function Va(l){l.j.G==0||l.J||Aw(l.j,l)}function Zr(l){Am(l);var u=l.M;u&&typeof u.ma=="function"&&u.ma(),l.M=null,Wb(l.U),l.g&&(u=l.g,l.g=null,u.abort(),u.ma())}function Rm(l,u){try{var h=l.j;if(h.G!=0&&(h.g==l||Dm(h.h,l))){if(!l.K&&Dm(h.h,l)&&h.G==3){try{var p=h.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var I=p;if(I[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<l.F)Cd(h),wd(h);else break e;Om(h),nn(18)}}else h.za=I[1],0<h.za-h.T&&37500>I[2]&&h.F&&h.v==0&&!h.C&&(h.C=Fa(g(h.Za,h),6e3));if(1>=sw(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else es(h,11)}else if((l.K||h.g==l)&&Cd(h),!le(u))for(I=h.Da.g.parse(u),u=0;u<I.length;u++){let Ce=I[u];if(h.T=Ce[0],Ce=Ce[1],h.G==2)if(Ce[0]=="c"){h.K=Ce[1],h.ia=Ce[2];let qt=Ce[3];qt!=null&&(h.la=qt,h.j.info("VER="+h.la));let Gt=Ce[4];Gt!=null&&(h.Aa=Gt,h.j.info("SVER="+h.Aa));let Hs=Ce[5];Hs!=null&&typeof Hs=="number"&&0<Hs&&(p=1.5*Hs,h.L=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;let Xn=l.g;if(Xn){let Td=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Td){var O=p.h;O.g||Td.indexOf("spdy")==-1&&Td.indexOf("quic")==-1&&Td.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(km(O,O.h),O.h=null))}if(p.D){let Fm=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Fm&&(p.ya=Fm,Ge(p.I,p.D,Fm))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-l.F,h.j.info("Handshake RTT: "+h.R+"ms")),p=h;var z=l;if(p.qa=kw(p,p.J?p.ia:null,p.W),z.K){ow(p.h,z);var Be=z,Dt=p.L;Dt&&(Be.I=Dt),Be.B&&(Am(Be),pd(Be)),p.g=z}else xw(p);0<h.i.length&&Ed(h)}else Ce[0]!="stop"&&Ce[0]!="close"||es(h,7);else h.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?es(h,7):Mm(h):Ce[0]!="noop"&&h.l&&h.l.ta(Ce),h.v=0)}}Na(4)}catch{}}var kD=class{constructor(l,u){this.g=l,this.map=u}};function iw(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rw(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function sw(l){return l.h?1:l.g?l.g.size:0}function Dm(l,u){return l.h?l.h==u:l.g?l.g.has(u):!1}function km(l,u){l.g?l.g.add(u):l.h=u}function ow(l,u){l.h&&l.h==u?l.h=null:l.g&&l.g.has(u)&&l.g.delete(u)}iw.prototype.cancel=function(){if(this.i=aw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function aw(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let u=l.i;for(let h of l.g.values())u=u.concat(h.D);return u}return M(l.i)}function PD(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var u=[],h=l.length,p=0;p<h;p++)u.push(l[p]);return u}u=[],h=0;for(p in l)u[h++]=l[p];return u}function MD(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var u=[];l=l.length;for(var h=0;h<l;h++)u.push(h);return u}u=[],h=0;for(let p in l)u[h++]=p;return u}}}function lw(l,u){if(l.forEach&&typeof l.forEach=="function")l.forEach(u,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,u,void 0);else for(var h=MD(l),p=PD(l),I=p.length,O=0;O<I;O++)u.call(void 0,p[O],h&&h[O],l)}var cw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OD(l,u){if(l){l=l.split("&");for(var h=0;h<l.length;h++){var p=l[h].indexOf("="),I=null;if(0<=p){var O=l[h].substring(0,p);I=l[h].substring(p+1)}else O=l[h];u(O,I?decodeURIComponent(I.replace(/\+/g," ")):"")}}}function Jr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Jr){this.h=l.h,gd(this,l.j),this.o=l.o,this.g=l.g,_d(this,l.s),this.l=l.l;var u=l.i,h=new Ua;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),dw(this,h),this.m=l.m}else l&&(u=String(l).match(cw))?(this.h=!1,gd(this,u[1]||"",!0),this.o=ja(u[2]||""),this.g=ja(u[3]||"",!0),_d(this,u[4]),this.l=ja(u[5]||"",!0),dw(this,u[6]||"",!0),this.m=ja(u[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}Jr.prototype.toString=function(){var l=[],u=this.j;u&&l.push(Ba(u,uw,!0),":");var h=this.g;return(h||u=="file")&&(l.push("//"),(u=this.o)&&l.push(Ba(u,uw,!0),"@"),l.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&l.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&l.push("/"),l.push(Ba(h,h.charAt(0)=="/"?LD:FD,!0))),(h=this.i.toString())&&l.push("?",h),(h=this.m)&&l.push("#",Ba(h,jD)),l.join("")};function Ni(l){return new Jr(l)}function gd(l,u,h){l.j=h?ja(u,!0):u,l.j&&(l.j=l.j.replace(/:$/,""))}function _d(l,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);l.s=u}else l.s=null}function dw(l,u,h){u instanceof Ua?(l.i=u,BD(l.i,l.h)):(h||(u=Ba(u,VD)),l.i=new Ua(u,l.h))}function Ge(l,u,h){l.i.set(u,h)}function vd(l){return Ge(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ja(l,u){return l?u?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ba(l,u,h){return typeof l=="string"?(l=encodeURI(l).replace(u,ND),h&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ND(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var uw=/[#\/\?@]/g,FD=/[#\?:]/g,LD=/[#\?]/g,VD=/[#\?@]/g,jD=/#/g;function Ua(l,u){this.h=this.g=null,this.i=l||null,this.j=!!u}function sr(l){l.g||(l.g=new Map,l.h=0,l.i&&OD(l.i,function(u,h){l.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=Ua.prototype,n.add=function(l,u){sr(this),this.i=null,l=qs(this,l);var h=this.g.get(l);return h||this.g.set(l,h=[]),h.push(u),this.h+=1,this};function hw(l,u){sr(l),u=qs(l,u),l.g.has(u)&&(l.i=null,l.h-=l.g.get(u).length,l.g.delete(u))}function fw(l,u){return sr(l),u=qs(l,u),l.g.has(u)}n.forEach=function(l,u){sr(this),this.g.forEach(function(h,p){h.forEach(function(I){l.call(u,I,p,this)},this)},this)},n.na=function(){sr(this);let l=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let p=0;p<u.length;p++){let I=l[p];for(let O=0;O<I.length;O++)h.push(u[p])}return h},n.V=function(l){sr(this);let u=[];if(typeof l=="string")fw(this,l)&&(u=u.concat(this.g.get(qs(this,l))));else{l=Array.from(this.g.values());for(let h=0;h<l.length;h++)u=u.concat(l[h])}return u},n.set=function(l,u){return sr(this),this.i=null,l=qs(this,l),fw(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[u]),this.h+=1,this},n.get=function(l,u){return l?(l=this.V(l),0<l.length?String(l[0]):u):u};function mw(l,u,h){hw(l,u),0<h.length&&(l.i=null,l.g.set(qs(l,u),M(h)),l.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var p=u[h];let O=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var I=O;z[p]!==""&&(I+="="+encodeURIComponent(String(z[p]))),l.push(I)}}return this.i=l.join("&")};function qs(l,u){return u=String(u),l.j&&(u=u.toLowerCase()),u}function BD(l,u){u&&!l.j&&(sr(l),l.i=null,l.g.forEach(function(h,p){var I=p.toLowerCase();p!=I&&(hw(this,p),mw(this,I,h))},l)),l.j=u}function UD(l,u){let h=new La;if(a.Image){let p=new Image;p.onload=b(or,h,"TestLoadImage: loaded",!0,u,p),p.onerror=b(or,h,"TestLoadImage: error",!1,u,p),p.onabort=b(or,h,"TestLoadImage: abort",!1,u,p),p.ontimeout=b(or,h,"TestLoadImage: timeout",!1,u,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=l}else u(!1)}function zD(l,u){let h=new La,p=new AbortController,I=setTimeout(()=>{p.abort(),or(h,"TestPingServer: timeout",!1,u)},1e4);fetch(l,{signal:p.signal}).then(O=>{clearTimeout(I),O.ok?or(h,"TestPingServer: ok",!0,u):or(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(I),or(h,"TestPingServer: error",!1,u)})}function or(l,u,h,p,I){try{I&&(I.onload=null,I.onerror=null,I.onabort=null,I.ontimeout=null),p(h)}catch{}}function $D(){this.g=new TD}function WD(l,u,h){let p=h||"";try{lw(l,function(I,O){let z=I;d(I)&&(z=wm(I)),u.push(p+O+"="+encodeURIComponent(z))})}catch(I){throw u.push(p+"type="+encodeURIComponent("_badmap")),I}}function za(l){this.l=l.Ub||null,this.j=l.eb||!1}E(za,Em),za.prototype.g=function(){return new yd(this.l,this.j)},za.prototype.i=function(l){return function(){return l}}({});function yd(l,u){Wt.call(this),this.D=l,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(yd,Wt),n=yd.prototype,n.open=function(l,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=u,this.readyState=1,Wa(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(u.body=l),(this.D||a).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Wa(this)),this.g&&(this.readyState=3,Wa(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pw(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function pw(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var u=l.value?l.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!l.done}))&&(this.response=this.responseText+=u)}l.done?$a(this):Wa(this),this.readyState==3&&pw(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,$a(this))},n.Qa=function(l){this.g&&(this.response=l,$a(this))},n.ga=function(){this.g&&$a(this)};function $a(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Wa(l)}n.setRequestHeader=function(l,u){this.u.append(l,u)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,l.push(h[0]+": "+h[1]),h=u.next();return l.join(`\r
`)};function Wa(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(yd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function gw(l){let u="";return zt(l,function(h,p){u+=p,u+=":",u+=h,u+=`\r
`}),u}function Pm(l,u,h){e:{for(p in h){var p=!1;break e}p=!0}p||(h=gw(h),typeof l=="string"?h!=null&&encodeURIComponent(String(h)):Ge(l,u,h))}function ct(l){Wt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ct,Wt);var qD=/^https?$/i,GD=["POST","PUT"];n=ct.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,u,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);u=u?u.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tm.g(),this.v=this.o?qb(this.o):qb(Tm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(u,String(l),!0),this.B=!1}catch(O){_w(this,O);return}if(l=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var I in p)h.set(I,p[I]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(let O of p.keys())h.set(O,p.get(O));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(O=>O.toLowerCase()=="content-type"),I=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(GD,u,void 0))||p||I||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,z]of h)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bw(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){_w(this,O)}};function _w(l,u){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=u,l.m=5,vw(l),bd(l)}function vw(l){l.A||(l.A=!0,tn(l,"complete"),tn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,tn(this,"complete"),tn(this,"abort"),bd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bd(this,!0)),ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yw(this):this.bb())},n.bb=function(){yw(this)};function yw(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Fi(l)!=4||l.Z()!=2)){if(l.u&&Fi(l)==4)Ub(l.Ea,0,l);else if(tn(l,"readystatechange"),Fi(l)==4){l.h=!1;try{let z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var p;if(p=z===0){var I=String(l.D).match(cw)[1]||null;!I&&a.self&&a.self.location&&(I=a.self.location.protocol.slice(0,-1)),p=!qD.test(I?I.toLowerCase():"")}h=p}if(h)tn(l,"complete"),tn(l,"success");else{l.m=6;try{var O=2<Fi(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",vw(l)}}finally{bd(l)}}}}function bd(l,u){if(l.g){bw(l);let h=l.g,p=l.v[0]?()=>{}:null;l.g=null,l.v=null,u||tn(l,"ready");try{h.onreadystatechange=p}catch{}}}function bw(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Fi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Fi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var u=this.g.responseText;return l&&u.indexOf(l)==0&&(u=u.substring(l.length)),ID(u)}};function ww(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function HD(l){let u={};l=(l.g&&2<=Fi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<l.length;p++){if(le(l[p]))continue;var h=C(l[p]);let I=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let O=u[I]||[];u[I]=O,O.push(h)}T(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qa(l,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[l]||u}function Ew(l){this.Aa=0,this.i=[],this.j=new La,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qa("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qa("baseRetryDelayMs",5e3,l),this.cb=qa("retryDelaySeedMs",1e4,l),this.Wa=qa("forwardChannelMaxRetries",2,l),this.wa=qa("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new iw(l&&l.concurrentRequestLimit),this.Da=new $D,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ew.prototype,n.la=8,n.G=1,n.connect=function(l,u,h,p){nn(0),this.W=l,this.H=u||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.I=kw(this,null,this.W),Ed(this)};function Mm(l){if(Cw(l),l.G==3){var u=l.U++,h=Ni(l.I);if(Ge(h,"SID",l.K),Ge(h,"RID",u),Ge(h,"TYPE","terminate"),Ga(l,h),u=new rr(l,l.j,u),u.L=2,u.v=vd(Ni(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=u.v,h=!0),h||(u.g=Pw(u.j,null),u.g.ea(u.v)),u.F=Date.now(),pd(u)}Dw(l)}function wd(l){l.g&&(Nm(l),l.g.cancel(),l.g=null)}function Cw(l){wd(l),l.u&&(a.clearTimeout(l.u),l.u=null),Cd(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Ed(l){if(!rw(l.h)&&!l.s){l.s=!0;var u=l.Ga;Ra||Nb(),Da||(Ra(),Da=!0),hm.add(u,l),l.B=0}}function KD(l,u){return sw(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=u.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Fa(g(l.Ga,l,u),Rw(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let I=new rr(this,this.j,l),O=this.o;if(this.S&&(O?(O=_(O),w(O,this.S)):O=this.S),this.m!==null||this.O||(I.H=O,O=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=Tw(this,I,u),h=Ni(this.I),Ge(h,"RID",l),Ge(h,"CVER",22),this.D&&Ge(h,"X-HTTP-Session-Id",this.D),Ga(this,h),O&&(this.O?u="headers="+encodeURIComponent(String(gw(O)))+"&"+u:this.m&&Pm(h,this.m,O)),km(this.h,I),this.Ua&&Ge(h,"TYPE","init"),this.P?(Ge(h,"$req",u),Ge(h,"SID","null"),I.T=!0,Sm(I,h,null)):Sm(I,h,u),this.G=2}}else this.G==3&&(l?Iw(this,l):this.i.length==0||rw(this.h)||Iw(this))};function Iw(l,u){var h;u?h=u.l:h=l.U++;let p=Ni(l.I);Ge(p,"SID",l.K),Ge(p,"RID",h),Ge(p,"AID",l.T),Ga(l,p),l.m&&l.o&&Pm(p,l.m,l.o),h=new rr(l,l.j,h,l.B+1),l.m===null&&(h.H=l.o),u&&(l.i=u.D.concat(l.i)),u=Tw(l,h,1e3),h.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),km(l.h,h),Sm(h,p,u)}function Ga(l,u){l.H&&zt(l.H,function(h,p){Ge(u,p,h)}),l.l&&lw({},function(h,p){Ge(u,p,h)})}function Tw(l,u,h){h=Math.min(l.i.length,h);var p=l.l?g(l.l.Na,l.l,l):null;e:{var I=l.i;let O=-1;for(;;){let z=["count="+h];O==-1?0<h?(O=I[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let Be=!0;for(let Dt=0;Dt<h;Dt++){let Ce=I[Dt].g,qt=I[Dt].map;if(Ce-=O,0>Ce)O=Math.max(0,I[Dt].g-100),Be=!1;else try{WD(qt,z,"req"+Ce+"_")}catch{p&&p(qt)}}if(Be){p=z.join("&");break e}}}return l=l.i.splice(0,h),u.D=l,p}function xw(l){if(!l.g&&!l.u){l.Y=1;var u=l.Fa;Ra||Nb(),Da||(Ra(),Da=!0),hm.add(u,l),l.v=0}}function Om(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Fa(g(l.Fa,l),Rw(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Sw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Fa(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),wd(this),Sw(this))};function Nm(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Sw(l){l.g=new rr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var u=Ni(l.qa);Ge(u,"RID","rpc"),Ge(u,"SID",l.K),Ge(u,"AID",l.T),Ge(u,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ge(u,"TO",l.ja),Ge(u,"TYPE","xmlhttp"),Ga(l,u),l.m&&l.o&&Pm(u,l.m,l.o),l.L&&(l.g.I=l.L);var h=l.g;l=l.ia,h.L=1,h.v=vd(Ni(u)),h.m=null,h.P=!0,ew(h,l)}n.Za=function(){this.C!=null&&(this.C=null,wd(this),Om(this),nn(19))};function Cd(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Aw(l,u){var h=null;if(l.g==u){Cd(l),Nm(l),l.g=null;var p=2}else if(Dm(l.h,u))h=u.D,ow(l.h,u),p=1;else return;if(l.G!=0){if(u.o)if(p==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var I=l.B;p=hd(),tn(p,new Yb(p,h)),Ed(l)}else xw(l);else if(I=u.s,I==3||I==0&&0<u.X||!(p==1&&KD(l,u)||p==2&&Om(l)))switch(h&&0<h.length&&(u=l.h,u.i=u.i.concat(h)),I){case 1:es(l,5);break;case 4:es(l,10);break;case 3:es(l,6);break;default:es(l,2)}}}function Rw(l,u){let h=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(h*=2),h*u}function es(l,u){if(l.j.info("Error code "+u),u==2){var h=g(l.fb,l),p=l.Xa;let I=!p;p=new Jr(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||gd(p,"https"),vd(p),I?UD(p.toString(),h):zD(p.toString(),h)}else nn(2);l.G=0,l.l&&l.l.sa(u),Dw(l),Cw(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function Dw(l){if(l.G=0,l.ka=[],l.l){let u=aw(l.h);(u.length!=0||l.i.length!=0)&&(N(l.ka,u),N(l.ka,l.i),l.h.i.length=0,M(l.i),l.i.length=0),l.l.ra()}}function kw(l,u,h){var p=h instanceof Jr?Ni(h):new Jr(h);if(p.g!="")u&&(p.g=u+"."+p.g),_d(p,p.s);else{var I=a.location;p=I.protocol,u=u?u+"."+I.hostname:I.hostname,I=+I.port;var O=new Jr(null);p&&gd(O,p),u&&(O.g=u),I&&_d(O,I),h&&(O.l=h),p=O}return h=l.D,u=l.ya,h&&u&&Ge(p,h,u),Ge(p,"VER",l.la),Ga(l,p),p}function Pw(l,u,h){if(u&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=l.Ca&&!l.pa?new ct(new za({eb:h})):new ct(l.pa),u.Ha(l.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mw(){}n=Mw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Id(){}Id.prototype.g=function(l,u){return new bn(l,u)};function bn(l,u){Wt.call(this),this.g=new Ew(u),this.l=l,this.h=u&&u.messageUrlParams||null,l=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(l?l["X-WebChannel-Content-Type"]=u.messageContentType:l={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(l?l["X-WebChannel-Client-Profile"]=u.va:l={"X-WebChannel-Client-Profile":u.va}),this.g.S=l,(l=u&&u.Sb)&&!le(l)&&(this.g.m=l),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!le(u)&&(this.g.D=u,l=this.h,l!==null&&u in l&&(l=this.h,u in l&&delete l[u])),this.j=new Gs(this)}E(bn,Wt),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Mm(this.g)},bn.prototype.o=function(l){var u=this.g;if(typeof l=="string"){var h={};h.__data__=l,l=h}else this.u&&(h={},h.__data__=wm(l),l=h);u.i.push(new kD(u.Ya++,l)),u.G==3&&Ed(u)},bn.prototype.N=function(){this.g.l=null,delete this.j,Mm(this.g),delete this.g,bn.aa.N.call(this)};function Ow(l){Cm.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var u=l.__sm__;if(u){e:{for(let h in u){l=h;break e}l=void 0}(this.i=l)&&(l=this.i,u=u!==null&&l in u?u[l]:void 0),this.data=u}else this.data=l}E(Ow,Cm);function Nw(){Im.call(this),this.status=1}E(Nw,Im);function Gs(l){this.g=l}E(Gs,Mw),Gs.prototype.ua=function(){tn(this.g,"a")},Gs.prototype.ta=function(l){tn(this.g,new Ow(l))},Gs.prototype.sa=function(l){tn(this.g,new Nw)},Gs.prototype.ra=function(){tn(this.g,"b")},Id.prototype.createWebChannel=Id.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,dA=er.createWebChannelTransport=function(){return new Id},cA=er.getStatEventTarget=function(){return hd()},lA=er.Event=Xr,aA=er.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fd.NO_ERROR=0,fd.TIMEOUT=8,fd.HTTP_ERROR=6,oA=er.ErrorCode=fd,Xb.COMPLETE="complete",sA=er.EventType=Xb,Gb.EventType=Oa,Oa.OPEN="a",Oa.CLOSE="b",Oa.ERROR="c",Oa.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,rA=er.WebChannel=Gb,PB=er.FetchXmlHttpFactory=za,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,iA=er.XhrIo=ct}).apply(typeof Lf<"u"?Lf:typeof self<"u"?self:typeof window<"u"?window:{});var uA="@firebase/firestore";var Bt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");var $c="10.14.0";var ua=new vi("@firebase/firestore");function ai(n,...t){if(ua.logLevel<=yr.DEBUG){let e=t.map(by);ua.debug(`Firestore (${$c}): ${n}`,...e)}}function gA(n,...t){if(ua.logLevel<=yr.ERROR){let e=t.map(by);ua.error(`Firestore (${$c}): ${n}`,...e)}}function MB(n,...t){if(ua.logLevel<=yr.WARN){let e=t.map(by);ua.warn(`Firestore (${$c}): ${n}`,...e)}}function by(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function vn(n="Unexpected state"){let t=`FIRESTORE (${$c}) INTERNAL ASSERTION FAILED: `+n;throw gA(t),new Error(t)}function Os(n,t){n||vn()}var pn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ut=class extends D0{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ns=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Vf=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},oy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Bt.UNAUTHENTICATED))}shutdown(){}},ay=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},ly=class{constructor(t){this.t=t,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Os(this.o===void 0);let i=this.i,r=c=>this.i!==i?(i=this.i,e(c)):Promise.resolve(),s=new Ns;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ns,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;t.enqueueRetryable(()=>ft(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{ai("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ai("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ns)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ai("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Os(typeof i.accessToken=="string"),new Vf(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return Os(t===null||typeof t=="string"),new Bt(t)}},cy=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},dy=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new cy(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uy=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hy=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){Os(this.o===void 0);let i=s=>{s.error!=null&&ai("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,ai("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{ai("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):ai("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Os(typeof e.token=="string"),this.R=e.token,new uy(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function _A(n,t){return n<t?-1:n>t?1:0}var fy=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&vn(),i===void 0?i=t.length-e:i>t.length-e&&vn(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},Kr=class n extends fy{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new Ut(pn.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}};var Fs=class n{constructor(t){this.path=t}static fromPath(t){return new n(Kr.fromString(t))}static fromName(t){return new n(Kr.fromString(t).popFirst(5))}static empty(){return new n(Kr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Kr.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Kr.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new Kr(t.slice()))}};var my=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};my.UNKNOWN_ID=-1;function OB(n){return n.name==="IndexedDbTransactionError"}function NB(n){return n===0&&1/n==-1/0}var FB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DY=[...FB,"documentOverlays"],LB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],VB=LB,jB=[...VB,"indexConfiguration","indexState","indexEntries"];var kY=[...jB,"globals"];var ha=class n{constructor(t,e){this.comparator=t,this.root=e||Mi.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Mi.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Mi.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new da(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new da(this.root,t,this.comparator,!1)}getReverseIterator(){return new da(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new da(this.root,t,this.comparator,!0)}},da=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Mi=class n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new n(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vn();let t=this.left.check();if(t!==this.right.check())throw vn();return t+(this.isRed()?0:1)}};Mi.EMPTY=null,Mi.RED=!0,Mi.BLACK=!1;Mi.EMPTY=new class{constructor(){this.size=0}get key(){throw vn()}get value(){throw vn()}get color(){throw vn()}get left(){throw vn()}get right(){throw vn()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Mi(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var jf=class n{constructor(t){this.comparator=t,this.data=new ha(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Bf(this.data.getIterator())}getIteratorFrom(t){return new Bf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},Bf=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var py=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var fa=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new py("Invalid base64 string: "+s):s}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return _A(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};fa.EMPTY_BYTE_STRING=new fa("");var BB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function UB(n){if(Os(!!n),typeof n=="string"){let t=0,e=BB.exec(n);if(Os(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:zc(n.seconds),nanos:zc(n.nanos)}}function zc(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zB(n){return typeof n=="string"?fa.fromBase64String(n):fa.fromUint8Array(n)}var gy=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};function $B(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function WB(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var MY=new ha(Fs.comparator);var OY=new ha(Fs.comparator);var NY=new ha(Fs.comparator),FY=new jf(Fs.comparator);var LY=new jf(_A);var hA,be;(be=hA||(hA={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";var VY=new ry([4294967295,4294967295],0);var Uf=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(zc(t.integerValue));else if("doubleValue"in t){let i=zc(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),NB(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),typeof i=="string"&&(i=UB(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(zB(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?WB(t)?this.dt(e,Number.MAX_SAFE_INTEGER):$B(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):vn()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let i=t.fields||{};this.dt(e,55);for(let r of Object.keys(i))this.Vt(r,e),this.Tt(i[r],e)}wt(t,e){var i,r;let s=t.fields||{};this.dt(e,53);let o="value",a=((r=(i=s[o].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(e,15),e.At(zc(a)),this.Vt(o,e),this.Tt(s[o],e)}bt(t,e){let i=t.values||[];this.dt(e,50);for(let r of i)this.Tt(r,e)}yt(t,e){this.dt(e,37),Fs.fromName(t).path.forEach(i=>{this.dt(e,60),this.Dt(i,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};Uf.vt=new Uf;var jY=new Uint8Array(0);var Pi=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi(41943040,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);function sy(){return typeof document<"u"?document:null}var _y=class{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ui=t,this.timerId=e,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-i);r>0&&ai("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var vy=class n{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){let o=Date.now()+i,a=new n(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ut(pn.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var fA,mA;(mA=fA||(fA={})).ea="default",mA.Cache="cache";function qB(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var pA=new Map;function GB(n,t,e,i){if(t===!0&&i===!0)throw new Ut(pn.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function HB(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":vn()}function KB(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ut(pn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=HB(n);throw new Ut(pn.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var zf=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new Ut(pn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ut(pn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}GB("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qB((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ut(pn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ut(pn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ut(pn.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},$f=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ut(pn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ut(pn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zf(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new oy;switch(i.type){case"firstParty":return new dy(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ut(pn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return ft(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=pA.get(e);i&&(ai("ComponentProvider","Removing Datastore"),pA.delete(e),i.terminate())}(this),Promise.resolve()}};function vA(n,t,e,i={}){var r;let s=(n=KB(n,$f))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&MB("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=Bt.MOCK_USER;else{a=oo(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new Ut(pn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Bt(d)}n._authCredentials=new ay(new Vf(a,c))}}var Wf=class{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new _y(this,"async_queue_retry"),this.Vu=()=>{let i=sy();i&&ai("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;let e=sy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;let e=sy();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});let e=new Ns;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}pu(){return ft(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!OB(t))throw t;ai("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(t){let e=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw gA("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=e,e}enqueueAfterDelay(t,e,i){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);let r=vy.createAndSchedule(this,t,e,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&vn()}verifyOperationInProgress(){}wu(){return ft(this,null,function*(){let t;do t=this.mu,yield t;while(t!==this.mu)})}Su(t){for(let e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){let e=this.Tu.indexOf(t);this.Tu.splice(e,1)}};var yy=class extends $f{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=new Wf,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return ft(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new Wf(t),this._firestoreClient=void 0,yield t}})}};function yA(n,t){let e=typeof n=="object"?n:br(),i=typeof n=="string"?n:t||"(default)",r=lo(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=nl("firestore");s&&vA(r,...s)}return r}var BY=new RegExp("[~\\*/\\[\\]]");(function(t,e=!0){(function(r){$c=r})(co),ji(new In("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new yy(new ly(i.getProvider("auth-internal")),new hy(i.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ut(pn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gy(d.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ze(uA,"4.7.3",t),Ze(uA,"4.7.3","esm2017")})();var Wc=class{constructor(t){return t}},bA="firestore",wy=class{constructor(){return ws(bA)}};var Ey=new j("angularfire2.firestore-instances");function QB(n,t){let e=Fo(bA,n,t);return e&&new Wc(e)}function YB(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new Wc(i)}}var XB={provide:wy,deps:[[new rt,Ey]]},ZB={provide:Wc,useFactory:QB,deps:[[new rt,Ey],ii]};function wA(n,...t){return Ze("angularfire",dn.full,"fst"),rn([ZB,XB,{provide:Ey,useFactory:YB(n),multi:!0,deps:[G,Ae,$n,Yi,[new rt,Ms],[new rt,Rn],...t]}])}var EA=Lr(yA,!0);var CA="@firebase/database",IA="1.0.8";var bb="";function JB(n){bb=n}var Dy=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),_e(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:vr(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var ky=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return ht(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var nR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Dy(t)}}catch{}return new ky},Vs=nR("localStorage"),Py=nR("sessionStorage");var _a=new vi("@firebase/database"),eU=function(){let n=1;return function(){return n++}}(),iR=function(n){let t=iu(n),e=new nu;e.update(t);let i=e.digest();return so.encodeByteArray(i)},id=function(...n){let t="";for(let e=0;e<n.length;e++){let i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=id.apply(null,i):typeof i=="object"?t+=_e(i):t+=i,t+=" "}return t},js=null,TA=!0,tU=function(n,t){S(!t||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(_a.logLevel=yr.VERBOSE,js=_a.log.bind(_a),t&&Py.set("logging_enabled",!0)):typeof n=="function"?js=n:(js=null,Py.remove("logging_enabled"))},Zt=function(...n){if(TA===!0&&(TA=!1,js===null&&Py.get("logging_enabled")===!0&&tU(!0)),js){let t=id.apply(null,n);js(t)}},rd=function(n){return function(...t){Zt(n,...t)}},My=function(...n){let t="FIREBASE INTERNAL ERROR: "+id(...n);_a.error(t)},nr=function(...n){let t=`FIREBASE FATAL ERROR: ${id(...n)}`;throw _a.error(t),new Error(t)},On=function(...n){let t="FIREBASE WARNING: "+id(...n);_a.warn(t)},nU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&On("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},rR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},iU=function(n){if(bt()||document.readyState==="complete")n();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},ya="[MIN_NAME]",Bs="[MAX_NAME]",xa=function(n,t){if(n===t)return 0;if(n===ya||t===Bs)return-1;if(t===ya||n===Bs)return 1;{let e=xA(n),i=xA(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},rU=function(n,t){return n===t?0:n<t?-1:1},qc=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+_e(t))},wb=function(n){if(typeof n!="object"||n===null)return _e(n);let t=[];for(let i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=_e(t[i]),e+=":",e+=wb(n[t[i]]);return e+="}",e},sR=function(n,t){let e=n.length;if(e<=t)return[n];let i=[];for(let r=0;r<e;r+=t)r+t>e?i.push(n.substring(r,e)):i.push(n.substring(r,r+t));return i};function Yn(n,t){for(let e in n)n.hasOwnProperty(e)&&t(e,n[e])}var oR=function(n){S(!rR(n),"Invalid JSON number");let t=11,e=52,i=(1<<t-1)-1,r,s,o,a,c;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,e-a)-Math.pow(2,e))):(s=0,o=Math.round(n/Math.pow(2,1-i-e))));let d=[];for(c=e;c;c-=1)d.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();let f=d.join(""),m="";for(c=0;c<64;c+=8){let g=parseInt(f.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),m=m+g}return m.toLowerCase()},sU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var aU=new RegExp("^-?(0*)\\d{1,10}$"),lU=-2147483648,cU=2147483647,xA=function(n){if(aU.test(n)){let t=Number(n);if(t>=lU&&t<=cU)return t}return null},sd=function(n){try{n()}catch(t){setTimeout(()=>{let e=t.stack||"";throw On("Exception was thrown by user callback.",e),t},Math.floor(0))}},dU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yc=function(n,t){let e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var Oy=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){On(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Ny=class{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(Zt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',On(t)}},Xc=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Gf="5",aR="v",lR="s",cR="r",dR="f",uR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hR="ls",fR="p",Fy="ac",mR="websocket",pR="long_polling";var Hf=class{constructor(t,e,i,r,s=!1,o="",a=!1,c=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vs.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Vs.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function uU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function gR(n,t,e){S(typeof t=="string","typeof type must == string"),S(typeof e=="object","typeof params must == object");let i;if(t===mR)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===pR)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);uU(n)&&(e.ns=n.namespace);let r=[];return Yn(e,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var Ly=class{constructor(){this.counters_={}}incrementCounter(t,e=1){ht(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return Xd(this.counters_)}};var Cy={},Iy={};function Eb(n){let t=n.toString();return Cy[t]||(Cy[t]=new Ly),Cy[t]}function hU(n,t){let e=n.toString();return Iy[e]||(Iy[e]=t()),Iy[e]}var Vy=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&sd(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var SA="start",fU="close",mU="pLPCommand",pU="pRTLPCB",_R="id",vR="pw",yR="ser",gU="cb",_U="seg",vU="ts",yU="d",bU="dframe",bR=1870,wR=30,wU=bR-wR,EU=25e3,CU=3e4,jy=class n{constructor(t,e,i,r,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rd(t),this.stats_=Eb(e),this.urlFn=c=>(this.appCheckToken&&(c[Fy]=this.appCheckToken),gR(e,pR,c))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Vy(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(CU)),iU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new By((...s)=>{let[o,a,c,d,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===SA)this.id=a,this.password=c;else if(o===fU)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[SA]="t",i[yR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[gU]=this.scriptTagHolder.uniqueCallbackIdentifier),i[aR]=Gf,this.transportSessionId&&(i[lR]=this.transportSessionId),this.lastSessionId&&(i[hR]=this.lastSessionId),this.applicationId&&(i[fR]=this.applicationId),this.appCheckToken&&(i[Fy]=this.appCheckToken),typeof location<"u"&&location.hostname&&uR.test(location.hostname)&&(i[cR]=dR);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return bt()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!sU()&&!oU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=_e(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let i=Yd(e),r=sR(i,wU);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(bt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[bU]="t",i[_R]=t,i[vR]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=_e(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},By=class n{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,bt())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=eU(),window[mU+this.uniqueCallbackIdentifier]=t,window[pU+this.uniqueCallbackIdentifier]=e,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Zt("frame writing exception"),a.stack&&Zt(a.stack),Zt(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Zt("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[_R]=this.myID,t[vR]=this.myPW,t[yR]=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+wR+i.length<=bR;){let o=this.pendingSegs.shift();i=i+"&"+_U+r+"="+o.seg+"&"+vU+r+"="+o.ts+"&"+yU+r+"="+o.d,r++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(EU)),s=()=>{clearTimeout(r),i()};this.addTag(t,s)}addTag(t,e){bt()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Zt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var IU=16384,TU=45e3,Kf=null;typeof MozWebSocket<"u"?Kf=MozWebSocket:typeof WebSocket<"u"&&(Kf=WebSocket);var Gc=(()=>{class n{constructor(e,i,r,s,o,a,c){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rd(this.connId),this.stats_=Eb(i),this.connURL=n.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,o){let a={};return a[aR]=Gf,!bt()&&typeof location<"u"&&location.hostname&&uR.test(location.hostname)&&(a[cR]=dR),i&&(a[lR]=i),r&&(a[hR]=r),s&&(a[Fy]=s),o&&(a[fR]=o),gR(e,mR,a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vs.set("previous_websocket_failure",!0);try{let r;if(bt()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Gf}/${bb}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Kf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Kf!==null&&!n.forceDisallow_}static previouslyFailed(){return Vs.isInMemoryStorage||Vs.get("previous_websocket_failure")===!0}markConnectionHealthy(){Vs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=vr(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(S(this.frames===null,"We already have a frame buffer"),e.length<=6){let i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();let i=_e(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=sR(i,IU);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(TU))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),xU=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[jy,Gc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let i=Gc&&Gc.isAvailable(),r=i&&!Gc.previouslyFailed();if(e.webSocketOnly&&(i||On("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Gc];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),SU=6e4,AU=5e3,RU=10*1024,DU=100*1024,Ty="t",AA="d",kU="s",RA="r",PU="e",DA="o",kA="a",PA="n",MA="p",MU="h",Uy=class{constructor(t,e,i,r,s,o,a,c,d,f){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rd("c:"+this.id+":"),this.transportManager_=new xU(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Yc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>DU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>RU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Ty in t){let e=t[Ty];e===kA?this.upgradeIfSecondaryHealthy_():e===RA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===DA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=qc("t",t),i=qc("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:MA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:PA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=qc("t",t),i=qc("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=qc(Ty,t);if(AA in t){let i=t[AA];if(e===MU){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(e===PA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===kU?this.onConnectionShutdown_(i):e===RA?this.onReset_(i):e===PU?My("Server Error: "+i):e===DA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):My("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Gf!==i&&On("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Yc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(SU))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(AU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:MA,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Qf=class{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}};var Yf=class{constructor(t){this.allowedEvents_=t,this.listeners_={},S(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});let r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(t){S(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var Xf=class n extends Yf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ao()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(t){return S(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var OA=32,NA=768,ze=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function je(){return new ze("")}function we(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Yr(n){return n.pieces_.length-n.pieceNum_}function Ye(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new ze(n.pieces_,t)}function ER(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function OU(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function CR(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function IR(n){if(n.pieceNum_>=n.pieces_.length)return null;let t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new ze(t,0)}function Rt(n,t){let e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof ze)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new ze(e,0)}function ye(n){return n.pieceNum_>=n.pieces_.length}function Kn(n,t){let e=we(n),i=we(t);if(e===null)return t;if(e===i)return Kn(Ye(n),Ye(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function TR(n,t){if(Yr(n)!==Yr(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function ci(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Yr(n)>Yr(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}var zy=class{constructor(t,e){this.errorPrefix_=e,this.parts_=CR(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=_i(this.parts_[i]);xR(this)}};function NU(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=_i(t),xR(n)}function FU(n){let t=n.parts_.pop();n.byteLength_-=_i(t),n.parts_.length>0&&(n.byteLength_-=1)}function xR(n){if(n.byteLength_>NA)throw new Error(n.errorPrefix_+"has a key path longer than "+NA+" bytes ("+n.byteLength_+").");if(n.parts_.length>OA)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+OA+") or object contains a cycle "+Ls(n))}function Ls(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var $y=class n extends Yf{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(t){return S(t==="visible","Unknown event type: "+t),[this.visible_]}};var Hc=1e3,LU=60*5*1e3,FA=30*1e3,VU=1.3,jU=3e4,BU="server_kill",LA=3,Cb=(()=>{class n extends Qf{constructor(e,i,r,s,o,a,c,d){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=d,this.id=n.nextPersistentConnectionId_++,this.log_=rd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hc,this.maxReconnectDelay_=LU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,d&&!bt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$y.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Xf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){let s=++this.requestNumber_,o={r:s,a:e,b:i};this.log_(_e(o)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();let i=new gt,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(e,i,r,s){this.initConnection_();let o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){let i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){let i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,c=>{let d=c.d,f=c.s;n.warnOnListenWarnings_(d,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",c),f!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(f,d))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&ht(e,"w")){let r=on(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();On(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||eu(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=FA)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,i=Jd(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let i=e.s,r=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){let r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),S(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);let o={p:e},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(e){let i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){let i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+_e(e));let i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):My("Unrecognized action received from server: "+_e(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hc,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>jU&&(this.reconnectDelay_=Hc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*VU)}this.onConnectStatus_(!1)}establishConnection_(){return ft(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,d=function(){c?c.close():(a=!0,r())},f=function(g){S(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:d,sendRequest:f};let m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,b]=yield Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?Zt("getToken() completed but was canceled"):(Zt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=b&&b.token,c=new Uy(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,r,E=>{On(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(BU)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&On(g),d())}}})}interrupt(e){Zt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Zt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ds(this.interruptReasons_)&&(this.reconnectDelay_=Hc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;i?r=i.map(o=>wb(o)).join("$"):r="default";let s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){let r=new ze(e).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){Zt("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=LA&&(this.reconnectDelay_=FA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Zt("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=LA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},i="js";bt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),e["sdk."+i+"."+bb.replace(/\./g,"-")]=1,ao()?e["framework.cordova"]=1:Zd()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=Xf.getInstance().currentlyOnline();return ds(this.interruptReasons_)&&e}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Ee=class n{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new n(t,e)}};var ba=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let i=new Ee(ya,t),r=new Ee(ya,e);return this.compare(i,r)!==0}minPost(){return Ee.MIN}};var qf,Zf=class extends ba{static get __EMPTY_NODE(){return qf}static set __EMPTY_NODE(t){qf=t}compare(t,e){return xa(t.name,e.name)}isDefinedOn(t){throw Vn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ee.MIN}maxPost(){return new Ee(Bs,qf)}makePost(t,e){return S(typeof t=="string","KeyIndex indexValue must always be a string."),new Ee(t,qf)}toString(){return".key"}},va=new Zf;var pa=class{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?i(t.key,e):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},li=(()=>{class n{constructor(e,i,r,s,o){this.key=e,this.value=i,this.color=r??n.RED,this.left=s??Qn.EMPTY_NODE,this.right=o??Qn.EMPTY_NODE}copy(e,i,r,s,o){return new n(e??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this,o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(e,r.key)===0){if(r.right.isEmpty())return Qn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Wy=class{copy(t,e,i,r,s){return this}insert(t,e,i){return new li(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Qn=class n{constructor(t,e=n.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,li.BLACK,null,null))}remove(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,li.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new pa(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new pa(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new pa(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new pa(this.root_,null,this.comparator_,!0,t)}};Qn.EMPTY_NODE=new Wy;function UU(n,t){return xa(n.name,t.name)}function Ib(n,t){return xa(n,t)}var qy;function zU(n){qy=n}var SR=function(n){return typeof n=="number"?"number:"+oR(n):"string:"+n},AR=function(n){if(n.isLeafNode()){let t=n.val();S(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ht(t,".sv"),"Priority must be a string or number.")}else S(n===qy||n.isEmpty(),"priority of unexpected type.");S(n===qy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var VA,wa=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),AR(this.priorityNode_)}static set __childrenNodeConstructor(e){VA=e}static get __childrenNodeConstructor(){return VA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ye(e)?this:we(e)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){let r=we(e);return r===null?i:i.isEmpty()&&r!==".priority"?this:(S(r!==".priority"||Yr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ye(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+SR(this.priorityNode_.val())+":");let i=typeof this.value_;e+=i+":",i==="number"?e+=oR(this.value_):e+=this.value_,this.lazyHash_=iR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return S(s>=0,"Unknown leaf type: "+i),S(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),RR,DR;function $U(n){RR=n}function WU(n){DR=n}var Gy=class extends ba{compare(t,e){let i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return s===0?xa(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ee.MIN}maxPost(){return new Ee(Bs,new wa("[PRIORITY-POST]",DR))}makePost(t,e){let i=RR(t);return new Ee(e,new wa("[PRIORITY-POST]",i))}toString(){return".priority"}},en=new Gy;var qU=Math.log(2),Hy=class{constructor(t){let e=s=>parseInt(Math.log(s)/qU,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Jf=function(n,t,e,i){n.sort(t);let r=function(c,d){let f=d-c,m,g;if(f===0)return null;if(f===1)return m=n[c],g=e?e(m):m,new li(g,m.node,li.BLACK,null,null);{let b=parseInt(f/2,10)+c,E=r(c,b),M=r(b+1,d);return m=n[b],g=e?e(m):m,new li(g,m.node,li.BLACK,E,M)}},s=function(c){let d=null,f=null,m=n.length,g=function(E,M){let N=m-E,ce=m;m-=E;let le=r(N+1,ce),q=n[N],Se=e?e(q):q;b(new li(Se,q.node,M,null,le))},b=function(E){d?(d.left=E,d=E):(f=E,d=E)};for(let E=0;E<c.count;++E){let M=c.nextBitIsOne(),N=Math.pow(2,c.count-(E+1));M?g(N,li.BLACK):(g(N,li.BLACK),g(N,li.RED))}return f},o=new Hy(n.length),a=s(o);return new Qn(i||t,a)};var xy,ma={},Ea=class n{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return S(ma&&en,"ChildrenNode.ts has not been loaded"),xy=xy||new n({".priority":ma},{".priority":en}),xy}get(t){let e=on(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Qn?e:null}hasIndex(t){return ht(this.indexSet_,t.toString())}addIndex(t,e){S(t!==va,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=e.getIterator(Ee.Wrap),o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=Jf(i,t.getCompare()):a=ma;let c=t.toString(),d=Object.assign({},this.indexSet_);d[c]=t;let f=Object.assign({},this.indexes_);return f[c]=a,new n(f,d)}addToIndexes(t,e){let i=gi(this.indexes_,(r,s)=>{let o=on(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),r===ma)if(o.isDefinedOn(t.node)){let a=[],c=e.getIterator(Ee.Wrap),d=c.getNext();for(;d;)d.name!==t.name&&a.push(d),d=c.getNext();return a.push(t),Jf(a,o.getCompare())}else return ma;else{let a=e.get(t.name),c=r;return a&&(c=c.remove(new Ee(t.name,a))),c.insert(t,t.node)}});return new n(i,this.indexSet_)}removeFromIndexes(t,e){let i=gi(this.indexes_,r=>{if(r===ma)return r;{let s=e.get(t.name);return s?r.remove(new Ee(t.name,s)):r}});return new n(i,this.indexSet_)}};var Kc,lt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&AR(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Kc||(Kc=new n(new Qn(Ib),null,Ea.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kc}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let i=this.children_.get(e);return i===null?Kc:i}}getChild(e){let i=we(e);return i===null?this:this.getImmediateChild(i).getChild(Ye(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(S(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{let r=new Ee(e,i),s,o;i.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?Kc:this.priorityNode_;return new n(s,a,o)}}updateChild(e,i){let r=we(e);if(r===null)return i;{S(we(e)!==".priority"||Yr(e)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(Ye(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(en,(a,c)=>{i[a]=c.val(e),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+SR(this.getPriority().val())+":"),this.forEachChild(en,(i,r)=>{let s=r.hash();s!==""&&(e+=":"+i+":"+s)}),this.lazyHash_=e===""?"":iR(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new Ee(e,i));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){let i=this.getFirstChildName(e);return i?new Ee(i,this.children_.get(i)):null}getLastChildName(e){let i=this.resolveIndex_(e);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){let i=this.getLastChildName(e);return i?new Ee(i,this.children_.get(i)):null}forEachChild(e,i){let r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{let s=this.children_.getIteratorFrom(e.name,Ee.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{let s=this.children_.getReverseIteratorFrom(e.name,Ee.Wrap),o=s.peek();for(;o!=null&&i.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===od?-1:0}withIndex(e){if(e===va||this.indexMap_.hasIndex(e))return this;{let i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===va||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(en),s=i.getIterator(en),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===va?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Ky=class extends lt{constructor(){super(new Qn(Ib),lt.EMPTY_NODE,Ea.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return lt.EMPTY_NODE}isEmpty(){return!1}},od=new Ky;Object.defineProperties(Ee,{MIN:{value:new Ee(ya,lt.EMPTY_NODE)},MAX:{value:new Ee(Bs,od)}});Zf.__EMPTY_NODE=lt.EMPTY_NODE;wa.__childrenNodeConstructor=lt;zU(od);WU(od);var GU=!0;function Jt(n,t=null){if(n===null)return lt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),S(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let e=n;return new wa(e,Jt(t))}if(!(n instanceof Array)&&GU){let e=[],i=!1;if(Yn(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=Jt(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),e.push(new Ee(o,c)))}}),e.length===0)return lt.EMPTY_NODE;let s=Jf(e,UU,o=>o.name,Ib);if(i){let o=Jf(e,en.getCompare());return new lt(s,Jt(t),new Ea({".priority":o},{".priority":en}))}else return new lt(s,Jt(t),Ea.Default)}else{let e=lt.EMPTY_NODE;return Yn(n,(i,r)=>{if(ht(n,i)&&i.substring(0,1)!=="."){let s=Jt(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Jt(t))}}$U(Jt);var Qy=class extends ba{constructor(t){super(),this.indexPath_=t,S(!ye(t)&&we(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return s===0?xa(t.name,e.name):s}makePost(t,e){let i=Jt(t),r=lt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ee(e,r)}maxPost(){let t=lt.EMPTY_NODE.updateChild(this.indexPath_,od);return new Ee(Bs,t)}toString(){return CR(this.indexPath_,0).join("/")}};var Yy=class extends ba{compare(t,e){let i=t.node.compareTo(e.node);return i===0?xa(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ee.MIN}maxPost(){return Ee.MAX}makePost(t,e){let i=Jt(t);return new Ee(e,i)}toString(){return".value"}},HU=new Yy;function KU(n){return{type:"value",snapshotNode:n}}function QU(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function YU(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function jA(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function XU(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}var Xy=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=en}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ya}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===en}copy(){let t=new n;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function BA(n){let t={};if(n.isDefault())return t;let e;if(n.index_===en?e="$priority":n.index_===HU?e="$value":n.index_===va?e="$key":(S(n.index_ instanceof Qy,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=_e(e),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";t[i]=_e(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+_e(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";t[i]=_e(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+_e(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function UA(n){let t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==en&&(t.i=n.index_.toString()),t}var Zy=class n extends Qf{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=rd("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(S(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=n.getListenId_(t,i),a={};this.listens_[o]=a;let c=BA(t._queryParams);this.restRequest_(s+".json",c,(d,f)=>{let m=f;if(d===404&&(m=null,d=null),d===null&&this.onDataUpdate_(s,m,!1,i),on(this.listens_,o)===a){let g;d?d===401?g="permission_denied":g="rest_error:"+d:g="ok",r(g,null)}})}unlisten(t,e){let i=n.getListenId_(t,e);delete this.listens_[i]}get(t){let e=BA(t._queryParams),i=t._path.toString(),r=new gt;return this.restRequest_(i+".json",e,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+tu(e);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=vr(a.responseText)}catch{On("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&On("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var Jy=class{constructor(){this.rootNode_=lt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function em(){return{value:null,children:new Map}}function kR(n,t,e){if(ye(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{let i=we(t);n.children.has(i)||n.children.set(i,em());let r=n.children.get(i);t=Ye(t),kR(r,t,e)}}function eb(n,t,e){n.value!==null?e(t,n.value):ZU(n,(i,r)=>{let s=new ze(t.toString()+"/"+i);eb(r,s,e)})}function ZU(n,t){n.children.forEach((e,i)=>{t(i,e)})}var tb=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Yn(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}};var zA=10*1e3,JU=30*1e3,ez=5*60*1e3,nb=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new tb(t);let i=zA+(JU-zA)*Math.random();Yc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),e={},i=!1;Yn(t,(r,s)=>{s>0&&ht(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),Yc(this.reportStats_.bind(this),Math.floor(Math.random()*2*ez))}};var tr=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(tr||{});function PR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function MR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function OR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var ib=class n{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=tr.ACK_USER_WRITE,this.source=PR()}operationForChild(t){if(ye(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new ze(t));return new n(je(),e,this.revert)}}else return S(we(this.path)===t,"operationForChild called for unrelated child."),new n(Ye(this.path),this.affectedTree,this.revert)}};var Ca=class n{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=tr.OVERWRITE}operationForChild(t){return ye(this.path)?new n(this.source,je(),this.snap.getImmediateChild(t)):new n(this.source,Ye(this.path),this.snap)}};var tm=class n{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=tr.MERGE}operationForChild(t){if(ye(this.path)){let e=this.children.subtree(new ze(t));return e.isEmpty()?null:e.value?new Ca(this.source,je(),e.value):new n(this.source,je(),e)}else return S(we(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var ed=class{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ye(t))return this.isFullyInitialized()&&!this.filtered_;let e=we(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function tz(n,t,e,i){let r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(XU(o.childName,o.snapshotNode))}),Qc(n,r,"child_removed",t,i,e),Qc(n,r,"child_added",t,i,e),Qc(n,r,"child_moved",s,i,e),Qc(n,r,"child_changed",t,i,e),Qc(n,r,"value",t,i,e),r}function Qc(n,t,e,i,r,s){let o=i.filter(a=>a.type===e);o.sort((a,c)=>iz(n,a,c)),o.forEach(a=>{let c=nz(n,a,s);r.forEach(d=>{d.respondsTo(a.type)&&t.push(d.createEvent(c,n.query_))})})}function nz(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function iz(n,t,e){if(t.childName==null||e.childName==null)throw Vn("Should only compare child_ events.");let i=new Ee(t.childName,t.snapshotNode),r=new Ee(e.childName,e.snapshotNode);return n.index_.compare(i,r)}function NR(n,t){return{eventCache:n,serverCache:t}}function Zc(n,t,e,i){return NR(new ed(t,e,i),n.serverCache)}function FR(n,t,e,i){return NR(n.eventCache,new ed(t,e,i))}function rb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Us(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var Sy,rz=()=>(Sy||(Sy=new Qn(rU)),Sy),yn=class n{constructor(t,e=rz()){this.value=t,this.children=e}static fromObject(t){let e=new n(null);return Yn(t,(i,r)=>{e=e.set(new ze(i),r)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:je(),value:this.value};if(ye(t))return null;{let i=we(t),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(Ye(t),e);return s!=null?{path:Rt(new ze(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ye(t))return this;{let e=we(t),i=this.children.get(e);return i!==null?i.subtree(Ye(t)):new n(null)}}set(t,e){if(ye(t))return new n(e,this.children);{let i=we(t),s=(this.children.get(i)||new n(null)).set(Ye(t),e),o=this.children.insert(i,s);return new n(this.value,o)}}remove(t){if(ye(t))return this.children.isEmpty()?new n(null):new n(null,this.children);{let e=we(t),i=this.children.get(e);if(i){let r=i.remove(Ye(t)),s;return r.isEmpty()?s=this.children.remove(e):s=this.children.insert(e,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(t){if(ye(t))return this.value;{let e=we(t),i=this.children.get(e);return i?i.get(Ye(t)):null}}setTree(t,e){if(ye(t))return e;{let i=we(t),s=(this.children.get(i)||new n(null)).setTree(Ye(t),e),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(t){return this.fold_(je(),t)}fold_(t,e){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Rt(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,je(),e)}findOnPath_(t,e,i){let r=this.value?i(e,this.value):!1;if(r)return r;if(ye(t))return null;{let s=we(t),o=this.children.get(s);return o?o.findOnPath_(Ye(t),Rt(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,je(),e)}foreachOnPath_(t,e,i){if(ye(t))return this;{this.value&&i(e,this.value);let r=we(t),s=this.children.get(r);return s?s.foreachOnPath_(Ye(t),Rt(e,r),i):new n(null)}}foreach(t){this.foreach_(je(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Rt(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}};var di=class n{constructor(t){this.writeTree_=t}static empty(){return new n(new yn(null))}};function Jc(n,t,e){if(ye(t))return new di(new yn(e));{let i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,s=i.value,o=Kn(r,t);return s=s.updateChild(o,e),new di(n.writeTree_.set(r,s))}else{let r=new yn(e),s=n.writeTree_.setTree(t,r);return new di(s)}}}function $A(n,t,e){let i=n;return Yn(e,(r,s)=>{i=Jc(i,Rt(t,r),s)}),i}function WA(n,t){if(ye(t))return di.empty();{let e=n.writeTree_.setTree(t,new yn(null));return new di(e)}}function sb(n,t){return zs(n,t)!=null}function zs(n,t){let e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(Kn(e.path,t)):null}function qA(n){let t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(en,(i,r)=>{t.push(new Ee(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new Ee(i,r.value))}),t}function Qr(n,t){if(ye(t))return n;{let e=zs(n,t);return e!=null?new di(new yn(e)):new di(n.writeTree_.subtree(t))}}function ob(n){return n.writeTree_.isEmpty()}function Ia(n,t){return LR(je(),n.writeTree_,t)}function LR(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):e=LR(Rt(n,r),s,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(Rt(n,".priority"),i)),e}}function VR(n,t){return $R(t,n)}function sz(n,t,e,i,r){S(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=Jc(n.visibleWrites,t,e)),n.lastWriteId=i}function oz(n,t){for(let e=0;e<n.allWrites.length;e++){let i=n.allWrites[e];if(i.writeId===t)return i}return null}function az(n,t){let e=n.allWrites.findIndex(a=>a.writeId===t);S(e>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=e&&lz(a,i.path)?r=!1:ci(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return cz(n),!0;if(i.snap)n.visibleWrites=WA(n.visibleWrites,i.path);else{let a=i.children;Yn(a,c=>{n.visibleWrites=WA(n.visibleWrites,Rt(i.path,c))})}return!0}else return!1}function lz(n,t){if(n.snap)return ci(n.path,t);for(let e in n.children)if(n.children.hasOwnProperty(e)&&ci(Rt(n.path,e),t))return!0;return!1}function cz(n){n.visibleWrites=jR(n.allWrites,dz,je()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function dz(n){return n.visible}function jR(n,t,e){let i=di.empty();for(let r=0;r<n.length;++r){let s=n[r];if(t(s)){let o=s.path,a;if(s.snap)ci(e,o)?(a=Kn(e,o),i=Jc(i,a,s.snap)):ci(o,e)&&(a=Kn(o,e),i=Jc(i,je(),s.snap.getChild(a)));else if(s.children){if(ci(e,o))a=Kn(e,o),i=$A(i,a,s.children);else if(ci(o,e))if(a=Kn(o,e),ye(a))i=$A(i,je(),s.children);else{let c=on(s.children,we(a));if(c){let d=c.getChild(Ye(a));i=Jc(i,je(),d)}}}else throw Vn("WriteRecord should have .snap or .children")}}return i}function BR(n,t,e,i,r){if(!i&&!r){let s=zs(n.visibleWrites,t);if(s!=null)return s;{let o=Qr(n.visibleWrites,t);if(ob(o))return e;if(e==null&&!sb(o,je()))return null;{let a=e||lt.EMPTY_NODE;return Ia(o,a)}}}else{let s=Qr(n.visibleWrites,t);if(!r&&ob(s))return e;if(!r&&e==null&&!sb(s,je()))return null;{let o=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(ci(d.path,t)||ci(t,d.path))},a=jR(n.allWrites,o,t),c=e||lt.EMPTY_NODE;return Ia(a,c)}}}function uz(n,t,e){let i=lt.EMPTY_NODE,r=zs(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(en,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(e){let s=Qr(n.visibleWrites,t);return e.forEachChild(en,(o,a)=>{let c=Ia(Qr(s,new ze(o)),a);i=i.updateImmediateChild(o,c)}),qA(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=Qr(n.visibleWrites,t);return qA(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function hz(n,t,e,i,r){S(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=Rt(t,e);if(sb(n.visibleWrites,s))return null;{let o=Qr(n.visibleWrites,s);return ob(o)?r.getChild(e):Ia(o,r.getChild(e))}}function fz(n,t,e,i){let r=Rt(t,e),s=zs(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(e)){let o=Qr(n.visibleWrites,r);return Ia(o,i.getNode().getImmediateChild(e))}else return null}function mz(n,t){return zs(n.visibleWrites,t)}function pz(n,t,e,i,r,s,o){let a,c=Qr(n.visibleWrites,t),d=zs(c,je());if(d!=null)a=d;else if(e!=null)a=Ia(c,e);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let f=[],m=o.getCompare(),g=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),b=g.getNext();for(;b&&f.length<r;)m(b,i)!==0&&f.push(b),b=g.getNext();return f}else return[]}function gz(){return{visibleWrites:di.empty(),allWrites:[],lastWriteId:-1}}function ab(n,t,e,i){return BR(n.writeTree,n.treePath,t,e,i)}function UR(n,t){return uz(n.writeTree,n.treePath,t)}function GA(n,t,e,i){return hz(n.writeTree,n.treePath,t,e,i)}function nm(n,t){return mz(n.writeTree,Rt(n.treePath,t))}function _z(n,t,e,i,r,s){return pz(n.writeTree,n.treePath,t,e,i,r,s)}function Tb(n,t,e){return fz(n.writeTree,n.treePath,t,e)}function zR(n,t){return $R(Rt(n.treePath,t),n.writeTree)}function $R(n,t){return{treePath:n,writeTree:t}}var lb=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,i=t.childName;S(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),S(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(e==="child_added"&&s==="child_removed")this.changeMap.set(i,jA(i,t.snapshotNode,r.snapshotNode));else if(e==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&s==="child_changed")this.changeMap.set(i,YU(i,r.oldSnap));else if(e==="child_changed"&&s==="child_added")this.changeMap.set(i,QU(i,t.snapshotNode));else if(e==="child_changed"&&s==="child_changed")this.changeMap.set(i,jA(i,t.snapshotNode,r.oldSnap));else throw Vn("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var cb=class{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}},WR=new cb,td=class{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new ed(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tb(this.writes_,t,i)}}getChildAfterChild(t,e,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Us(this.viewCache_),s=_z(this.writes_,r,e,1,i,t);return s.length===0?null:s[0]}};function vz(n,t){S(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),S(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function yz(n,t,e,i,r){let s=new lb,o,a;if(e.type===tr.OVERWRITE){let d=e;d.source.fromUser?o=db(n,t,d.path,d.snap,i,r,s):(S(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered()&&!ye(d.path),o=im(n,t,d.path,d.snap,i,r,a,s))}else if(e.type===tr.MERGE){let d=e;d.source.fromUser?o=wz(n,t,d.path,d.children,i,r,s):(S(d.source.fromServer,"Unknown source."),a=d.source.tagged||t.serverCache.isFiltered(),o=ub(n,t,d.path,d.children,i,r,a,s))}else if(e.type===tr.ACK_USER_WRITE){let d=e;d.revert?o=Iz(n,t,d.path,i,r,s):o=Ez(n,t,d.path,d.affectedTree,i,r,s)}else if(e.type===tr.LISTEN_COMPLETE)o=Cz(n,t,e.path,i,s);else throw Vn("Unknown operation type: "+e.type);let c=s.getChanges();return bz(t,o,c),{viewCache:o,changes:c}}function bz(n,t,e){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=rb(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(KU(rb(t)))}}function qR(n,t,e,i,r,s){let o=t.eventCache;if(nm(i,e)!=null)return t;{let a,c;if(ye(e))if(S(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let d=Us(t),f=d instanceof lt?d:lt.EMPTY_NODE,m=UR(i,f);a=n.filter.updateFullNode(t.eventCache.getNode(),m,s)}else{let d=ab(i,Us(t));a=n.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{let d=we(e);if(d===".priority"){S(Yr(e)===1,"Can't have a priority with additional path components");let f=o.getNode();c=t.serverCache.getNode();let m=GA(i,e,f,c);m!=null?a=n.filter.updatePriority(f,m):a=o.getNode()}else{let f=Ye(e),m;if(o.isCompleteForChild(d)){c=t.serverCache.getNode();let g=GA(i,e,o.getNode(),c);g!=null?m=o.getNode().getImmediateChild(d).updateChild(f,g):m=o.getNode().getImmediateChild(d)}else m=Tb(i,d,t.serverCache);m!=null?a=n.filter.updateChild(o.getNode(),d,m,f,r,s):a=o.getNode()}}return Zc(t,a,o.isFullyInitialized()||ye(e),n.filter.filtersNodes())}}function im(n,t,e,i,r,s,o,a){let c=t.serverCache,d,f=o?n.filter:n.filter.getIndexedFilter();if(ye(e))d=f.updateFullNode(c.getNode(),i,null);else if(f.filtersNodes()&&!c.isFiltered()){let b=c.getNode().updateChild(e,i);d=f.updateFullNode(c.getNode(),b,null)}else{let b=we(e);if(!c.isCompleteForPath(e)&&Yr(e)>1)return t;let E=Ye(e),N=c.getNode().getImmediateChild(b).updateChild(E,i);b===".priority"?d=f.updatePriority(c.getNode(),N):d=f.updateChild(c.getNode(),b,N,E,WR,null)}let m=FR(t,d,c.isFullyInitialized()||ye(e),f.filtersNodes()),g=new td(r,m,s);return qR(n,m,e,r,g,a)}function db(n,t,e,i,r,s,o){let a=t.eventCache,c,d,f=new td(r,t,s);if(ye(e))d=n.filter.updateFullNode(t.eventCache.getNode(),i,o),c=Zc(t,d,!0,n.filter.filtersNodes());else{let m=we(e);if(m===".priority")d=n.filter.updatePriority(t.eventCache.getNode(),i),c=Zc(t,d,a.isFullyInitialized(),a.isFiltered());else{let g=Ye(e),b=a.getNode().getImmediateChild(m),E;if(ye(g))E=i;else{let M=f.getCompleteChild(m);M!=null?ER(g)===".priority"&&M.getChild(IR(g)).isEmpty()?E=M:E=M.updateChild(g,i):E=lt.EMPTY_NODE}if(b.equals(E))c=t;else{let M=n.filter.updateChild(a.getNode(),m,E,g,f,o);c=Zc(t,M,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function HA(n,t){return n.eventCache.isCompleteForChild(t)}function wz(n,t,e,i,r,s,o){let a=t;return i.foreach((c,d)=>{let f=Rt(e,c);HA(t,we(f))&&(a=db(n,a,f,d,r,s,o))}),i.foreach((c,d)=>{let f=Rt(e,c);HA(t,we(f))||(a=db(n,a,f,d,r,s,o))}),a}function KA(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function ub(n,t,e,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,d;ye(e)?d=i:d=new yn(null).setTree(e,i);let f=t.serverCache.getNode();return d.children.inorderTraversal((m,g)=>{if(f.hasChild(m)){let b=t.serverCache.getNode().getImmediateChild(m),E=KA(n,b,g);c=im(n,c,new ze(m),E,r,s,o,a)}}),d.children.inorderTraversal((m,g)=>{let b=!t.serverCache.isCompleteForChild(m)&&g.value===null;if(!f.hasChild(m)&&!b){let E=t.serverCache.getNode().getImmediateChild(m),M=KA(n,E,g);c=im(n,c,new ze(m),M,r,s,o,a)}}),c}function Ez(n,t,e,i,r,s,o){if(nm(r,e)!=null)return t;let a=t.serverCache.isFiltered(),c=t.serverCache;if(i.value!=null){if(ye(e)&&c.isFullyInitialized()||c.isCompleteForPath(e))return im(n,t,e,c.getNode().getChild(e),r,s,a,o);if(ye(e)){let d=new yn(null);return c.getNode().forEachChild(va,(f,m)=>{d=d.set(new ze(f),m)}),ub(n,t,e,d,r,s,a,o)}else return t}else{let d=new yn(null);return i.foreach((f,m)=>{let g=Rt(e,f);c.isCompleteForPath(g)&&(d=d.set(f,c.getNode().getChild(g)))}),ub(n,t,e,d,r,s,a,o)}}function Cz(n,t,e,i,r){let s=t.serverCache,o=FR(t,s.getNode(),s.isFullyInitialized()||ye(e),s.isFiltered());return qR(n,o,e,i,WR,r)}function Iz(n,t,e,i,r,s){let o;if(nm(i,e)!=null)return t;{let a=new td(i,t,r),c=t.eventCache.getNode(),d;if(ye(e)||we(e)===".priority"){let f;if(t.serverCache.isFullyInitialized())f=ab(i,Us(t));else{let m=t.serverCache.getNode();S(m instanceof lt,"serverChildren would be complete if leaf node"),f=UR(i,m)}f=f,d=n.filter.updateFullNode(c,f,s)}else{let f=we(e),m=Tb(i,f,t.serverCache);m==null&&t.serverCache.isCompleteForChild(f)&&(m=c.getImmediateChild(f)),m!=null?d=n.filter.updateChild(c,f,m,Ye(e),a,s):t.eventCache.getNode().hasChild(f)?d=n.filter.updateChild(c,f,lt.EMPTY_NODE,Ye(e),a,s):d=c,d.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=ab(i,Us(t)),o.isLeafNode()&&(d=n.filter.updateFullNode(d,o,s)))}return o=t.serverCache.isFullyInitialized()||nm(i,je())!=null,Zc(t,d,o,n.filter.filtersNodes())}}function Tz(n,t){let e=Us(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!ye(t)&&!e.getImmediateChild(we(t)).isEmpty())?e.getChild(t):null}function QA(n,t,e,i){t.type===tr.MERGE&&t.source.queryId!==null&&(S(Us(n.viewCache_),"We should always have a full cache before handling merges"),S(rb(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=yz(n.processor_,r,t,e,i);return vz(n.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,xz(n,s.changes,s.viewCache.eventCache.getNode(),null)}function xz(n,t,e,i){let r=i?[i]:n.eventRegistrations_;return tz(n.eventGenerator_,t,e,r)}var YA;function Sz(n){S(!YA,"__referenceConstructor has already been defined"),YA=n}function xb(n,t,e,i){let r=t.source.queryId;if(r!==null){let s=n.views.get(r);return S(s!=null,"SyncTree gave us an op for an invalid query."),QA(s,t,e,i)}else{let s=[];for(let o of n.views.values())s=s.concat(QA(o,t,e,i));return s}}function Sb(n,t){let e=null;for(let i of n.views.values())e=e||Tz(i,t);return e}var XA;function Az(n){S(!XA,"__referenceConstructor has already been defined"),XA=n}var rm=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new yn(null),this.pendingWriteTree_=gz(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Rz(n,t,e,i,r){return sz(n.pendingWriteTree_,t,e,i,r),r?om(n,new Ca(PR(),t,e)):[]}function ga(n,t,e=!1){let i=oz(n.pendingWriteTree_,t);if(az(n.pendingWriteTree_,t)){let s=new yn(null);return i.snap!=null?s=s.set(je(),!0):Yn(i.children,o=>{s=s.set(new ze(o),!0)}),om(n,new ib(i.path,s,e))}else return[]}function sm(n,t,e){return om(n,new Ca(MR(),t,e))}function Dz(n,t,e){let i=yn.fromObject(e);return om(n,new tm(MR(),t,i))}function kz(n,t,e,i){let r=QR(n,i);if(r!=null){let s=YR(r),o=s.path,a=s.queryId,c=Kn(o,t),d=new Ca(OR(a),c,e);return XR(n,o,d)}else return[]}function Pz(n,t,e,i){let r=QR(n,i);if(r){let s=YR(r),o=s.path,a=s.queryId,c=Kn(o,t),d=yn.fromObject(e),f=new tm(OR(a),c,d);return XR(n,o,f)}else return[]}function GR(n,t,e){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(o,a)=>{let c=Kn(o,t),d=Sb(a,c);if(d)return d});return BR(r,t,s,e,!0)}function om(n,t){return HR(t,n.syncPointTree_,null,VR(n.pendingWriteTree_,je()))}function HR(n,t,e,i){if(ye(n.path))return KR(n,t,e,i);{let r=t.get(je());e==null&&r!=null&&(e=Sb(r,je()));let s=[],o=we(n.path),a=n.operationForChild(o),c=t.children.get(o);if(c&&a){let d=e?e.getImmediateChild(o):null,f=zR(i,o);s=s.concat(HR(a,c,d,f))}return r&&(s=s.concat(xb(r,n,i,e))),s}}function KR(n,t,e,i){let r=t.get(je());e==null&&r!=null&&(e=Sb(r,je()));let s=[];return t.children.inorderTraversal((o,a)=>{let c=e?e.getImmediateChild(o):null,d=zR(i,o),f=n.operationForChild(o);f&&(s=s.concat(KR(f,a,c,d)))}),r&&(s=s.concat(xb(r,n,i,e))),s}function QR(n,t){return n.tagToQueryMap.get(t)}function YR(n){let t=n.indexOf("$");return S(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new ze(n.substr(0,t))}}function XR(n,t,e){let i=n.syncPointTree_.get(t);S(i,"Missing sync point for query tag that we're tracking");let r=VR(n.pendingWriteTree_,t);return xb(i,e,r,null)}var hb=class n{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new n(e)}node(){return this.node_}},fb=class n{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=Rt(this.path_,t);return new n(this.syncTree_,e)}node(){return GR(this.syncTree_,this.path_)}},Mz=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},ZA=function(n,t,e){if(!n||typeof n!="object")return n;if(S(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Oz(n[".sv"],t,e);if(typeof n[".sv"]=="object")return Nz(n[".sv"],t);S(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Oz=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:S(!1,"Unexpected server value: "+n)}},Nz=function(n,t,e){n.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&S(!1,"Unexpected increment value: "+i);let r=t.node();if(S(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},Fz=function(n,t,e,i){return Ab(t,new fb(e,n),i)},Lz=function(n,t,e){return Ab(n,new hb(t),e)};function Ab(n,t,e){let i=n.getPriority().val(),r=ZA(i,t.getImmediateChild(".priority"),e),s;if(n.isLeafNode()){let o=n,a=ZA(o.getValue(),t,e);return a!==o.getValue()||r!==o.getPriority().val()?new wa(a,Jt(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new wa(r))),o.forEachChild(en,(a,c)=>{let d=Ab(c,t.getImmediateChild(a),e);d!==c&&(s=s.updateImmediateChild(a,d))}),s}}var nd=class{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}};function Rb(n,t){let e=t instanceof ze?t:new ze(t),i=n,r=we(e);for(;r!==null;){let s=on(i.node.children,r)||{children:{},childCount:0};i=new nd(r,i,s),e=Ye(e),r=we(e)}return i}function Sa(n){return n.node.value}function ZR(n,t){n.node.value=t,mb(n)}function JR(n){return n.node.childCount>0}function Vz(n){return Sa(n)===void 0&&!JR(n)}function am(n,t){Yn(n.node.children,(e,i)=>{t(new nd(e,n,i))})}function eD(n,t,e,i){e&&!i&&t(n),am(n,r=>{eD(r,t,!0,i)}),e&&i&&t(n)}function jz(n,t,e){let i=e?n:n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function ad(n){return new ze(n.parent===null?n.name:ad(n.parent)+"/"+n.name)}function mb(n){n.parent!==null&&Bz(n.parent,n.name,n)}function Bz(n,t,e){let i=Vz(e),r=ht(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,mb(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,mb(n))}var Uz=/[\[\].#$\/\u0000-\u001F\u007F]/,zz=/[\[\].#$\u0000-\u001F\u007F]/,Ay=10*1024*1024,tD=function(n){return typeof n=="string"&&n.length!==0&&!Uz.test(n)},$z=function(n){return typeof n=="string"&&n.length!==0&&!zz.test(n)},Wz=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$z(n)};var nD=function(n,t,e){let i=e instanceof ze?new zy(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+Ls(i));if(typeof t=="function")throw new Error(n+"contains a function "+Ls(i)+" with contents = "+t.toString());if(rR(t))throw new Error(n+"contains "+t.toString()+" "+Ls(i));if(typeof t=="string"&&t.length>Ay/3&&_i(t)>Ay)throw new Error(n+"contains a string greater than "+Ay+" utf8 bytes "+Ls(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(Yn(t,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!tD(o)))throw new Error(n+" contains an invalid key ("+o+") "+Ls(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);NU(i,o),nD(n,a,i),FU(i)}),r&&s)throw new Error(n+' contains ".value" child '+Ls(i)+" in addition to actual children.")}};var qz=function(n,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!tD(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!Wz(e))throw new Error(Ht(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var pb=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Gz(n,t){let e=null;for(let i=0;i<t.length;i++){let r=t[i],s=r.getPath();e!==null&&!TR(s,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function $s(n,t,e){Gz(n,e),Hz(n,i=>ci(i,t)||ci(t,i))}function Hz(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;t(s)?(Kz(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function Kz(n){for(let t=0;t<n.events.length;t++){let e=n.events[t];if(e!==null){n.events[t]=null;let i=e.getEventRunner();js&&Zt("event: "+e.toString()),sd(i)}}}var Qz="repo_interrupt",Yz=25,gb=class{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=em(),this.transactionQueueTree_=new nd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Xz(n,t,e){if(n.stats_=Eb(n.repoInfo_),n.forceRestClient_||dU())n.server_=new Zy(n.repoInfo_,(i,r,s,o)=>{JA(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>eR(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_e(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Cb(n.repoInfo_,t,(i,r,s,o)=>{JA(n,i,r,s,o)},i=>{eR(n,i)},i=>{Jz(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=hU(n.repoInfo_,()=>new nb(n.stats_,n.server_)),n.infoData_=new Jy,n.infoSyncTree_=new rm({startListening:(i,r,s,o)=>{let a=[],c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=sm(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Db(n,"connected",!1),n.serverSyncTree_=new rm({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{let d=o(a,c);$s(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function Zz(n){let e=n.infoData_.getNode(new ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function iD(n){return Mz({timestamp:Zz(n)})}function JA(n,t,e,i,r){n.dataUpdateCount++;let s=new ze(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let o=[];if(r)if(i){let c=gi(e,d=>Jt(d));o=Pz(n.serverSyncTree_,s,c,r)}else{let c=Jt(e);o=kz(n.serverSyncTree_,s,c,r)}else if(i){let c=gi(e,d=>Jt(d));o=Dz(n.serverSyncTree_,s,c)}else{let c=Jt(e);o=sm(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Pb(n,s)),$s(n.eventQueue_,a,o)}function eR(n,t){Db(n,"connected",t),t===!1&&t$(n)}function Jz(n,t){Yn(t,(e,i)=>{Db(n,e,i)})}function Db(n,t,e){let i=new ze("/.info/"+t),r=Jt(e);n.infoData_.updateSnapshot(i,r);let s=sm(n.infoSyncTree_,i,r);$s(n.eventQueue_,i,s)}function e$(n){return n.nextWriteId_++}function t$(n){rD(n,"onDisconnectEvents");let t=iD(n),e=em();eb(n.onDisconnect_,je(),(r,s)=>{let o=Fz(r,s,n.serverSyncTree_,t);kR(e,r,o)});let i=[];eb(e,je(),(r,s)=>{i=i.concat(sm(n.serverSyncTree_,r,s));let o=s$(n,r);Pb(n,o)}),n.onDisconnect_=em(),$s(n.eventQueue_,je(),i)}function n$(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Qz)}function rD(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Zt(e,...t)}function sD(n,t,e){return GR(n.serverSyncTree_,t,e)||lt.EMPTY_NODE}function kb(n,t=n.transactionQueueTree_){if(t||lm(n,t),Sa(t)){let e=aD(n,t);S(e.length>0,"Sending zero length transaction queue"),e.every(r=>r.status===0)&&i$(n,ad(t),e)}else JR(t)&&am(t,e=>{kb(n,e)})}function i$(n,t,e){let i=e.map(d=>d.currentWriteId),r=sD(n,t,i),s=r,o=r.hash();for(let d=0;d<e.length;d++){let f=e[d];S(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let m=Kn(t,f.path);s=s.updateChild(m,f.currentOutputSnapshotRaw)}let a=s.val(!0),c=t;n.server_.put(c.toString(),a,d=>{rD(n,"transaction put response",{path:c.toString(),status:d});let f=[];if(d==="ok"){let m=[];for(let g=0;g<e.length;g++)e[g].status=2,f=f.concat(ga(n.serverSyncTree_,e[g].currentWriteId)),e[g].onComplete&&m.push(()=>e[g].onComplete(null,!0,e[g].currentOutputSnapshotResolved)),e[g].unwatcher();lm(n,Rb(n.transactionQueueTree_,t)),kb(n,n.transactionQueueTree_),$s(n.eventQueue_,t,f);for(let g=0;g<m.length;g++)sd(m[g])}else{if(d==="datastale")for(let m=0;m<e.length;m++)e[m].status===3?e[m].status=4:e[m].status=0;else{On("transaction at "+c.toString()+" failed: "+d);for(let m=0;m<e.length;m++)e[m].status=4,e[m].abortReason=d}Pb(n,t)}},o)}function Pb(n,t){let e=oD(n,t),i=ad(e),r=aD(n,e);return r$(n,r,i),i}function r$(n,t,e){if(t.length===0)return;let i=[],r=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let c=t[a],d=Kn(e,c.path),f=!1,m;if(S(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)f=!0,m=c.abortReason,r=r.concat(ga(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Yz)f=!0,m="maxretry",r=r.concat(ga(n.serverSyncTree_,c.currentWriteId,!0));else{let g=sD(n,c.path,o);c.currentInputSnapshot=g;let b=t[a].update(g.val());if(b!==void 0){nD("transaction failed: Data returned ",b,c.path);let E=Jt(b);typeof b=="object"&&b!=null&&ht(b,".priority")||(E=E.updatePriority(g.getPriority()));let N=c.currentWriteId,ce=iD(n),le=Lz(E,g,ce);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=le,c.currentWriteId=e$(n),o.splice(o.indexOf(N),1),r=r.concat(Rz(n.serverSyncTree_,c.path,le,c.currentWriteId,c.applyLocally)),r=r.concat(ga(n.serverSyncTree_,N,!0))}else f=!0,m="nodata",r=r.concat(ga(n.serverSyncTree_,c.currentWriteId,!0))}$s(n.eventQueue_,e,r),r=[],f&&(t[a].status=2,function(g){setTimeout(g,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(m==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(m),!1,null))))}lm(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)sd(i[a]);kb(n,n.transactionQueueTree_)}function oD(n,t){let e,i=n.transactionQueueTree_;for(e=we(t);e!==null&&Sa(i)===void 0;)i=Rb(i,e),t=Ye(t),e=we(t);return i}function aD(n,t){let e=[];return lD(n,t,e),e.sort((i,r)=>i.order-r.order),e}function lD(n,t,e){let i=Sa(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);am(t,r=>{lD(n,r,e)})}function lm(n,t){let e=Sa(t);if(e){let i=0;for(let r=0;r<e.length;r++)e[r].status!==2&&(e[i]=e[r],i++);e.length=i,ZR(t,e.length>0?e:void 0)}am(t,i=>{lm(n,i)})}function s$(n,t){let e=ad(oD(n,t)),i=Rb(n.transactionQueueTree_,t);return jz(i,r=>{Ry(n,r)}),Ry(n,i),eD(i,r=>{Ry(n,r)}),e}function Ry(n,t){let e=Sa(t);if(e){let i=[],r=[],s=-1;for(let o=0;o<e.length;o++)e[o].status===3||(e[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(S(e[o].status===0,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(ga(n.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&i.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?ZR(t,void 0):e.length=s+1,$s(n.eventQueue_,ad(t),r);for(let o=0;o<i.length;o++)sd(i[o])}}function o$(n){let t="",e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function a$(n){let t={};n.charAt(0)==="?"&&(n=n.substring(1));for(let e of n.split("&")){if(e.length===0)continue;let i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):On(`Invalid query segment '${e}' in query '${n}'`)}return t}var tR=function(n,t){let e=l$(n),i=e.namespace;e.domain==="firebase.com"&&nr(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&nr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||nU();let r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new Hf(e.host,e.secure,i,r,t,"",i!==e.subdomain),path:new ze(e.pathString)}},l$=function(n){let t="",e="",i="",r="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(a=n.substring(0,d-1),n=n.substring(d+2));let f=n.indexOf("/");f===-1&&(f=n.length);let m=n.indexOf("?");m===-1&&(m=n.length),t=n.substring(0,Math.min(f,m)),f<m&&(r=o$(n.substring(f,m)));let g=a$(n.substring(Math.min(n.length,m)));d=t.indexOf(":"),d>=0?(o=a==="https"||a==="wss",c=parseInt(t.substring(d+1),10)):d=t.length;let b=t.slice(0,d);if(b.toLowerCase()==="localhost")e="localhost";else if(b.split(".").length<=2)e=b;else{let E=t.indexOf(".");i=t.substring(0,E).toLowerCase(),e=t.substring(E+1),s=i}"ns"in g&&(s=g.ns)}return{host:t,port:c,domain:e,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var _b=class n{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return ye(this._path)?null:ER(this._path)}get ref(){return new Ta(this._repo,this._path)}get _queryIdentifier(){let t=UA(this._queryParams),e=wb(t);return e==="{}"?"default":e}get _queryObject(){return UA(this._queryParams)}isEqual(t){if(t=It(t),!(t instanceof n))return!1;let e=this._repo===t._repo,i=TR(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+OU(this._path)}};var Ta=class n extends _b{constructor(t,e){super(t,e,new Xy,!1)}get parent(){let t=IR(this._path);return t===null?null:new n(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};Sz(Ta);Az(Ta);var c$="FIREBASE_DATABASE_EMULATOR_HOST",vb={},d$=!1;function u$(n,t,e,i){n.repoInfo_=new Hf(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function h$(n,t,e,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||nr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=tR(s,r),a=o.repoInfo,c,d;typeof process<"u"&&process.env&&(d=process.env[c$]),d?(c=!0,s=`http://${d}?ns=${a.namespace}`,o=tR(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let f=r&&c?new Xc(Xc.OWNER):new Ny(n.name,n.options,t);qz("Invalid Firebase Database URL",o),ye(o.path)||nr("Database URL must point to the root of a Firebase Database (not including a child path).");let m=m$(a,n,f,new Oy(n.name,e));return new yb(m,n)}function f$(n,t){let e=vb[t];(!e||e[n.key]!==n)&&nr(`Database ${t}(${n.repoInfo_}) has already been deleted.`),n$(n),delete e[n.key]}function m$(n,t,e,i){let r=vb[t.name];r||(r={},vb[t.name]=r);let s=r[n.toURLString()];return s&&nr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new gb(n,d$,e,i),r[n.toURLString()]=s,s}var yb=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Xz(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ta(this._repo,je())),this._rootInternal}_delete(){return this._rootInternal!==null&&(f$(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&nr("Cannot call "+t+" on a deleted database.")}};function cD(n=br(),t){let e=lo(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){let i=nl("database");i&&dD(e,...i)}return e}function dD(n,t,e,i={}){n=It(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&nr("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&nr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Xc(Xc.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:oo(i.mockUserToken,n.app.options.projectId);s=new Xc(o)}u$(r,t,e,s)}function p$(n){JB(co),ji(new In("database",(t,{instanceIdentifier:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return h$(i,r,s,e)},"PUBLIC").setMultipleInstances(!0)),Ze(CA,IA,n),Ze(CA,IA,"esm2017")}Cb.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};Cb.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};p$();var ld=class{constructor(t){return t}},uD="database",Mb=class{constructor(){return ws(uD)}};var Ob=new j("angularfire2.database-instances");function g$(n,t){let e=Fo(uD,n,t);return e&&new ld(e)}function _$(n){return(t,e)=>{let i=t.runOutsideAngular(()=>n(e));return new ld(i)}}var v$={provide:Mb,deps:[[new rt,Ob]]},y$={provide:ld,useFactory:g$,deps:[[new rt,Ob],ii]};function hD(n,...t){return Ze("angularfire",dn.full,"rtdb"),rn([y$,v$,{provide:Ob,useFactory:_$(n),multi:!0,deps:[G,Ae,$n,Yi,[new rt,Ms],[new rt,Rn],...t]}])}var fD=Lr(cD,!0);var mD={providers:[_0({eventCoalescing:!0}),$E(QS),YS(),hD(()=>fD()),W0(q0()),pI(()=>gI({projectId:"taskboard-eb7da",appId:"1:354177238938:web:d0c3f172c0e4083d1edc23",databaseURL:"https://taskboard-eb7da-default-rtdb.firebaseio.com",storageBucket:"taskboard-eb7da.appspot.com",apiKey:"AIzaSyAM82XcacqdPNT5p4AGJ8rm7yQA5wnfIJA",authDomain:"taskboard-eb7da.firebaseapp.com",messagingSenderId:"354177238938",measurementId:"G-SW2E9JZEH1"})),ZS(()=>JS()),wA(()=>EA())]};var cm=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-footer"]],standalone:!0,features:[ne],decls:1,vars:0,consts:[[1,"wrapper"]],template:function(e,i){e&1&&he(0,"div",0)},styles:[".wrapper[_ngcontent-%COMP%]{width:100%;min-height:10vh;background-color:#3b2559}"]})};function b$(n,t){if(n&1&&(P(0,"p"),$(1),D()),n&2){let e=B(2);F(),Cn("Board belongs to: ",e.dataService.selectedUser.email,"")}}function w$(n,t){if(n&1&&(P(0,"div",3)(1,"p"),$(2),D(),Q(3,b$,2,1,"p",4),D()),n&2){let e=B();F(2),Cn("Hello, ",e.authService.user.email,"!"),F(),U("ngIf",e.dataService.selectedUser)}}function E$(n,t){if(n&1){let e=ge();P(0,"button",5),H("click",function(){X(e);let r=B();return Z(r.returnToOwnBoard())}),$(1,"My tasks"),D()}}function C$(n,t){if(n&1){let e=ge();P(0,"button",5),H("click",function(){X(e);let r=B();return Z(r.logout())}),$(1,"Logout"),D()}}var dm=class n{authService=A(Je);dataService=A(Kt);taskService=A(Yt);logout(){this.authService.logout()}returnToOwnBoard(){this.authService.user&&(this.dataService.selectedUser=void 0,this.dataService.changeRole("user"),this.taskService.getUserTasks(this.authService.user.localId))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-header"]],standalone:!0,features:[ne],decls:4,vars:3,consts:[[1,"wrapper"],["class","hello",4,"ngIf"],["class","sbt-btn active",3,"click",4,"ngIf"],[1,"hello"],[4,"ngIf"],[1,"sbt-btn","active",3,"click"]],template:function(e,i){e&1&&(P(0,"div",0),Q(1,w$,4,2,"div",1)(2,E$,2,0,"button",2)(3,C$,2,0,"button",2),D()),e&2&&(F(),U("ngIf",i.authService.user),F(),U("ngIf",i.dataService.selectedUser&&i.authService.user),F(),U("ngIf",i.authService.user))},dependencies:[Ne,ut],styles:[".wrapper[_ngcontent-%COMP%]{width:100%;min-height:10vh;background-color:#3b2559;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:10px;box-sizing:border-box}.sbt-btn[_ngcontent-%COMP%]{background-color:#bf5ea5;color:#fff;transition:opacity .5s ease-in-out,transform .5s ease-in-out;border:0px;width:100px;height:30px;border-radius:10px}.sbt-btn.active[_ngcontent-%COMP%]{opacity:.8}.sbt-btn.active[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer;transform:scale(1.1)}.sbt-btn.disabled[_ngcontent-%COMP%]{opacity:.6}.hello[_ngcontent-%COMP%]{color:#fff;padding:5px}.hello[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})};var um=class n{title="taskBoard";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=ee({type:n,selectors:[["app-root"]],standalone:!0,features:[Qe([{provide:ls,useClass:qd}]),ne],decls:3,vars:0,template:function(e,i){e&1&&he(0,"app-header")(1,"router-outlet")(2,"app-footer")},dependencies:[Gp,dm,cm],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}app-header[_ngcontent-%COMP%], app-footer[_ngcontent-%COMP%]{background-color:#3b2559}"]})};Z0(um,mD).catch(n=>console.error(n));
